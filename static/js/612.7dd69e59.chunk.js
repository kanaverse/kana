!function(){"use strict";var e={9612:function(e,t,n){var r,s=n(4165),a=n(5861),o=n(3324),c=n(7762),u=n(797),i=n(5831),l=null;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=r.result.transaction(["analysis_meta"],"readonly").objectStore("analysis_meta"));var n=t.getAll();n.onsuccess=function(){var t=n.result;t.forEach((function(e){delete e.files})),e(t)},n.onerror=function(){e(null)}}function p(e,t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=n.get(t);r.onsuccess=function(){void 0!==r.result?e(r.result):e(null)},r.onerror=function(){e(null)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return Promise.allSettled(e).then((function(e){var t,n=(0,c.Z)(e);try{for(n.s();!(t=n.n()).done;){if(!t.value)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}))}function d(){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return e.abrupt("return",new Promise((function(e){f(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,s.Z)().mark((function e(t,n){var a,o,c,u,i,f,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return a=r.result.transaction(["file","file_meta"],"readwrite"),o=a.objectStore("file"),c=a.objectStore("file_meta"),e.next=7,p(t,c);case 7:return u=e.sent,i=null===u?0:u.count,i++,f=new Promise((function(e){var r=o.put({id:t,payload:n.buffer});r.onsuccess=function(t){e(!0)},r.onerror=function(t){e(!1)}})),h=new Promise((function(e){u.count=i;var t=c.put(u);t.onsuccess=function(t){e(!0)},t.onerror=function(t){e(!1)}})),e.abrupt("return",m([f,h]));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,s.Z)().mark((function e(t,n,a,o){var c,u,i,p,h,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:if(c=r.result.transaction(["analysis","analysis_meta"],"readwrite"),u=c.objectStore("analysis"),i=c.objectStore("analysis_meta"),null!=t){e.next=10;break}return e.next=8,new Promise((function(e){return f(e,i)}));case 8:p=e.sent,t=String(p.length);case 10:return h=new Promise((function(e){var r=u.put({id:t,payload:n.buffer});r.onsuccess=function(t){e(!0)},r.onerror=function(t){e(!1)}})),d=new Promise((function(e){var n=i.put({id:t,files:a,time:Number(new Date),title:o});n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}})),e.next=14,m([h,d]);case 14:if(!e.sent){e.next=18;break}return e.abrupt("return",t);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["file"],"readonly").objectStore("file"),e.next=5,p(t,n);case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a.payload));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["analysis"],"readonly").objectStore("analysis"),e.next=5,p(t,n);case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a.payload));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,o,c,u,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["file","file_meta"],"readwrite"),a=n.objectStore("file"),o=n.objectStore("file_meta"),e.next=7,p(t,o);case 7:return c=e.sent,u=c.count,u--,i=[],0===u?(i.push(new Promise((function(e){var n=a.remove(t);n.onerror=function(t){e(!1)},n.onsuccess=function(t){e(!0)}}))),i.push(new Promise((function(e){var n=o.delete(t);n.onerror=function(t){e(!1)},n.onsuccess=function(t){e(!0)}})))):i.push(new Promise((function(e){c.count=u;var t=o.put(c);t.onsuccess=function(t){e(!0)},t.onerror=function(t){e(!1)}}))),e.abrupt("return",m(i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,u,i,f,h,d,y,v,b,_,x;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["analysis","analysis_meta"],"readwrite"),a=n.objectStore("analysis"),u=n.objectStore("analysis_meta"),(i=[]).push(new Promise((function(e){var n=a.delete(t);n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}}))),e.next=9,p(t,u);case 9:for(f=e.sent,h=0,d=Object.entries(f.files.datasets);h<d.length;h++){y=(0,o.Z)(d[h],2),y[0],v=y[1],b=(0,c.Z)(v.files);try{for(b.s();!(_=b.n()).done;)x=_.value,i.push(Z(x.id))}catch(s){b.e(s)}finally{b.f()}}return i.push(new Promise((function(e){var n=u.delete(t);n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}}))),e.abrupt("return",m(i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E,A=n(7325),M=n(8109),j=n(9807),P=null;function C(e){return T.apply(this,arguments)}function T(){return T=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,c,u,i,l,f,p,h,m,d=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,r=d.length>2&&void 0!==d[2]&&d[2],e.next=4,P;case 4:if(r){e.next=13;break}return a=E.result.transaction(["downloads"],"readonly"),o=a.objectStore("downloads"),c=new Promise((function(e){var n=o.get(t);n.onsuccess=function(t){void 0!==n.result?e(n.result.payload):e(null)},n.onerror=function(t){e(null)}})),e.next=10,c;case 10:if(null===(u=e.sent)){e.next=13;break}return e.abrupt("return",u);case 13:return i=null==n?fetch(t):fetch(t,n),e.next=16,i;case 16:if((l=e.sent).ok){e.next=19;break}throw"failed to download '"+t+"' ("+l.status+")";case 19:return e.next=21,l.arrayBuffer();case 21:return f=e.sent,p=E.result.transaction(["downloads"],"readwrite"),h=p.objectStore("downloads"),m=new Promise((function(e){var n=h.put({url:t,payload:f});n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}})),e.next=27,m;case 27:if(e.sent){e.next=30;break}throw"failed to download resources for '"+t+"'";case 30:return e.abrupt("return",f);case 31:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}var D=n(5587),F=n.n(D);var N=n(9062),B="https://cors-proxy.aaron-lun.workers.dev";function I(e){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(B+"/"+encodeURIComponent(t));case 2:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){if(e)if(Array.isArray(e)){var n,r=(0,c.Z)(e);try{for(r.s();!(n=r.n()).done;){z(n.value,t)}}catch(i){r.e(i)}finally{r.f()}}else if(e.constructor==Object)for(var s=0,a=Object.entries(e);s<a.length;s++){var u=(0,o.Z)(a[s],2);u[0];z(u[1],t)}else if(ArrayBuffer.isView(e)){if(!(e.buffer instanceof ArrayBuffer))throw"only ArrayBuffers should be in the message payload";t.push(e.buffer)}}function U(e){postMessage({type:"".concat(e,"_START")})}function V(e,t){if("undefined"==typeof t)postMessage({type:"".concat(e,"_CACHE")});else{var n=[];z(t,n),postMessage({type:"".concat(e,"_DATA"),resp:t},n)}}function H(e,t,n){postMessage({type:"".concat(e,"_ERROR"),resp:{reason:t.toString(),fatal:n}})}function G(e,t,n){for(var r={},s=n.slice(),a=0;a<t.length;a++){for(var c={},u=0,i=Object.entries(e);u<i.length;u++){var l=(0,o.Z)(i[u],2),f=l[0],p=l[1];c[f]=p.slice().filter((function(e,t){return s[t]==a}))}r[t[a]]=c}return r}function K(e,t){var n,r={},s=(0,c.Z)(t);try{for(s.s();!(n=s.n()).done;){r[n.value]={}}}catch(h){s.e(h)}finally{s.f()}for(var a=0,u=Object.entries(e);a<u.length;a++)for(var i=(0,o.Z)(u[a],2),l=i[0],f=i[1],p=0;p<t.length;p++)r[t[p]][l]=f[p];return r}function J(e,t){return q.apply(this,arguments)}function q(){return(q=(0,a.Z)((0,s.Z)().mark((function e(t,n){var r,a,u,i,l,f,p,h,m,d,y,v,b,_,x,w,g,k,S,Z,O,R,E,A,M,j,P,C,T,D,F,N,B,I,L,z,U,V,H,J,q,Q,$,W,ee,te,ne,re,se,ae,oe;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[n].changed){e.next=2;break}return e.abrupt("return",void 0);case 2:if("inputs"!==n){e.next=18;break}({}),a={},u=(0,c.Z)(t[n].fetchCountMatrix().available());try{for(u.s();!(i=u.n()).done;)l=i.value,a[l]=t[n].fetchCountMatrix().get(l).numberOfRows()}catch(s){u.e(s)}finally{u.f()}for(f={},p=0,h=Object.entries(t[n].fetchFeatureAnnotations());p<h.length;p++){m=(0,o.Z)(h[p],2),d=m[0],y=m[1],v={},b=(0,c.Z)(y.columnNames());try{for(b.s();!(_=b.n()).done;)x=_.value,w=y.column(x),Array.isArray(w)&&(v[x]=w)}catch(s){b.e(s)}finally{b.f()}Array.isArray(y.rowNames())&&(v.rownames=y.rowNames()),f[d]=v}g={},k=(0,c.Z)(t[n].fetchCellAnnotations().columnNames());try{for(k.s();!(S=k.n()).done;)Z=S.value,Y(O=t[n].fetchCellAnnotations().column(Z))&&(R=X(O,{all:!1,unique:!0,colname:Z}),g[Z]=R)}catch(s){k.e(s)}finally{k.f()}return null!==(E=t[n].fetchBlockLevels())&&Y(A=t[n].fetchBlock().slice())&&(M=X(A,{all:!1,unique:!0,colname:"__batch__"}),g.__batch__=M),r={num_cells:t[n].fetchCountMatrix().numberOfColumns(),num_genes:a,genes:f,annotations:g},e.abrupt("return",r);case 18:if("rna_quality_control"!==n){e.next=28;break}return j={sums:t[n].fetchMetrics().sums(),detected:t[n].fetchMetrics().detected(),proportion:t[n].fetchMetrics().subsetProportions(0)},P={},null===(E=t.inputs.fetchBlockLevels())?(E=["default"],P.data={default:j}):(C=t.inputs.fetchBlock(),P.data=G(j,E,C)),T={sums:t[n].fetchFilters().thresholdsSums(),detected:t[n].fetchFilters().thresholdsDetected(),proportion:t[n].fetchFilters().thresholdsSubsetProportions(0)},P.thresholds=K(T,E),e.abrupt("return",P);case 28:if("adt_quality_control"!==n){e.next=39;break}for(D={sums:t[n].fetchMetrics().sums(),detected:t[n].fetchMetrics().detected(),proportion:t[n].fetchMetrics().subsetTotals(0)},F={},null===(E=t.inputs.fetchBlockLevels())?(E=["default"],F.data={default:D}):(N=t.inputs.fetchBlock(),F.data=G(D,E,N)),B={detected:t[n].fetchFilters().thresholdsDetected(),proportion:t[n].fetchFilters().thresholdsSubsetTotals(0)},F.thresholds=K(B,E),I=0,L=Object.entries(F.thresholds);I<L.length;I++)z=(0,o.Z)(L[I],2),z[0],z[1].sums=NaN;return e.abrupt("return",F);case 39:if("crispr_quality_control"!==n){e.next=49;break}return U={sums:t[n].fetchMetrics().sums(),detected:t[n].fetchMetrics().detected(),proportion:t[n].fetchMetrics().maxProportions()},V={},null===(E=t.inputs.fetchBlockLevels())?(E=["default"],V.data={default:U}):(H=t.inputs.fetchBlock(),V.data=G(U,E,H)),J={count:t[n].fetchFilters().thresholdsMaxCount(0)},V.thresholds=K(J,E),e.abrupt("return",V);case 49:if("cell_filtering"!==n){e.next=57;break}return q=0,Q=null,($=t[n].fetchDiscards())?($.forEach((function(e){q+=0==e})),Q=$.slice()):q=t.inputs.fetchCountMatrix().numberOfColumns(),W={retained:q,discard:Q},e.abrupt("return",W);case 57:if("rna_normalization"!==n){e.next=61;break}return e.abrupt("return",{});case 61:if("adt_normalization"!==n){e.next=65;break}return e.abrupt("return",{});case 65:if("crispr_normalization"!==n){e.next=69;break}return e.abrupt("return",{});case 69:if("feature_selection"!==n){e.next=74;break}return ee={means:t[n].fetchResults().means(),vars:t[n].fetchResults().variances(),fitted:t[n].fetchResults().fitted(),resids:t[n].fetchResults().residuals()},e.abrupt("return",ee);case 74:if("rna_pca"!==n&&"adt_pca"!==n&&"crispr_pca"!==n){e.next=82;break}return te=t[n].fetchPCs(),ne=te.varianceExplained(),re=te.totalVariance(),ne.forEach((function(e,t){ne[t]=e/re})),e.abrupt("return",{var_exp:ne});case 82:if("combine_embeddings"!==n){e.next=86;break}return e.abrupt("return",{});case 86:if("batch_correction"!==n){e.next=90;break}return e.abrupt("return",{});case 90:if("neighbor_index"!==n){e.next=94;break}return e.abrupt("return",{});case 94:if("tsne"!==n&&"umap"!==n){e.next=100;break}return e.next=97,t[n].fetchResults();case 97:case 120:return e.abrupt("return",e.sent);case 100:if("kmeans_cluster"!==n){e.next=104;break}return e.abrupt("return",{});case 104:if("snn_graph_cluster"!==n){e.next=108;break}return e.abrupt("return",{});case 108:if("choose_clustering"!==n){e.next=113;break}return se=t[n].fetchClusters(),e.abrupt("return",{clusters:se.slice()});case 113:if("marker_detection"!==n){e.next=117;break}return e.abrupt("return",{});case 117:if("cell_labelling"!==n){e.next=123;break}return e.next=120,t[n].fetchResults();case 123:if("custom_selections"!==n){e.next=127;break}return e.abrupt("return",{});case 127:if("feature_set_enrichment"!==n){e.next=131;break}return ae=t.feature_set_enrichment.fetchCollectionDetails(),oe=t.feature_set_enrichment.fetchSetDetails(),e.abrupt("return",{collections:ae,sets:{names:oe.names,descriptions:oe.descriptions,sizes:oe.sizes.slice(),collections:oe.collections.slice()}});case 131:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function X(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.all,s=void 0!==r&&r,a=n.unique,o=void 0!==a&&a,c=n.colname,i=void 0===c?null:c;if(Y(e)){t=u.Qr(e);var l=new Set(e);t.num_unique=l.size,l.size<=50&o&&(t.__unique__=(0,N.Z)(l).sort()),s&&(t._all_=e),"continuous"===t.type&&l.size<=50&&(t.type="both"),("string"===typeof i||i instanceof String)&&(t.name=i)}return t}u.ES.setDownload(I),A.b5(I),u.E4.setDownload(I),A.ao(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n,r){var a,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.XZ()+"/"+t,o=B+"/"+encodeURIComponent(a),null!=n||null!=r){e.next=9;break}return e.next=5,C(o);case 5:return c=e.sent,e.abrupt("return",new Response(c));case 9:return e.abrupt("return",fetch(o+"?start="+String(n)+"&end="+String(r)));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),A.d9(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.Kk()+"/"+t,e.next=3,C(B+"/"+encodeURIComponent(n));case 3:return r=e.sent,e.abrupt("return",new Response(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j.M.setDownloadFun(I),u.cO.ExperimentHub=j.M;n(3841);var Q="K@\ud835\udf02a#$c3ll";"".concat(Q,"::CLUSTERS"),"".concat(Q,"::SELECTION");var $="".concat(Q,"::CLUSTERS"),W="".concat(Q,"::SELECTION"),ee=null,te={},ne={},re=null,se={};function ae(e){if("10X"===e.format)return new u.By(e.h5,e.options?e.options:{});if("MatrixMarket"===e.format)return new u.en(e.mtx,e.genes||null,e.annotations||null,e.options?e.options:{});if("H5AD"===e.format)return new u.Fl(e.h5,e.options?e.options:{});if("SummarizedExperiment"===e.format)return new u.H$(e.rds,e.options?e.options:{});if("ZippedADB"===e.format)return new u.cj(e.zipname,e.zipfile,e.options?e.options:{});if("ExperimentHub"===e.format)return new j.M(e.id,e.options?e.options:{});throw new Error("unknown format '"+e.format+"'")}function oe(e,t){var n,r={},s=(0,c.Z)(e.cells.columnNames());try{for(s.s();!(n=s.n()).done;){var a=n.value,u=e.cells.column(a);Y(u)&&(r[a]=X(u,{all:!0,unique:!0,colname:a}))}}catch(D){s.e(D)}finally{s.f()}var i={cells:{columns:r,numberOfCells:e.cells.numberOfRows()}};if("H5AD"===t.format){i.all_features={};var l,f={},p=(0,c.Z)(e.all_features.columnNames());try{for(p.s();!(l=p.n()).done;){var h=l.value,m=e.all_features.column(h);Y(m)&&(f[h]=X(m,{all:!0,unique:!0,colname:h}))}}catch(D){p.e(D)}finally{p.f()}i.all_features={columns:f,numberOfFeatures:e.all_features.numberOfRows(),rownames:Array.isArray(e.all_features.rowNames())}}else if("SummarizedExperiment"===t.format){if(i.modality_features={},"modality_features"in e)for(var d=0,y=Object.entries(e.modality_features);d<y.length;d++){var v,b=(0,o.Z)(y[d],2),_=b[0],x=b[1],w={},g=(0,c.Z)(x.columnNames());try{for(g.s();!(v=g.n()).done;){var k=v.value,S=x.column(k);Y(S)&&(w[k]=X(S,{all:!0,unique:!0,colname:k}))}}catch(D){g.e(D)}finally{g.f()}i.modality_features[_]={columns:w,numberOfFeatures:x.numberOfRows(),rownames:Array.isArray(x.rowNames())}}}else if(i.modality_features={},"modality_features"in e)for(var Z=0,O=Object.entries(e.modality_features);Z<O.length;Z++){var R,E=(0,o.Z)(O[Z],2),A=E[0],M=E[1],j={},P=(0,c.Z)(M.columnNames());try{for(P.s();!(R=P.n()).done;){var C=R.value,T=M.column(C);Y(T)&&(j[C]=X(T,{all:!0,unique:!0,colname:C}))}}catch(D){P.e(D)}finally{P.f()}i.modality_features[A]={columns:j,numberOfFeatures:M.numberOfRows(),rownames:Array.isArray(M.rowNames())}}return"H5AD"===t.format?i.all_assay_names=e.all_assay_names:"SummarizedExperiment"!==t.format&&"ZippedADB"!==t.format||(i.modality_assay_names=e.modality_assay_names),i}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(ee,t);case 3:n=e.sent,V(t,n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),H(t,e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ie(e,t){var n;return e in se||((n=new u.J6(pe(),t.ids.slice())).computeAll(),se[e]=n),se[e]}u.$p((function(e,t,n,r){postMessage({type:e+"_iter",x:t,y:n,iteration:r},[t.buffer,n.buffer])})),u.ED(w);var le,fe=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("__batch__"===e)t=ee.inputs.fetchBlock().slice();else if(e.startsWith("".concat(Q,"::QC::"))){var r=e.replace("".concat(Q,"::QC::"),"").split("_"),s=ee["".concat(r[0].toLowerCase(),"_quality_control")].fetchMetrics();"sums"===r[1]?t=s.sums():"detected"===r[1]?t=s.detected():"proportion"===r[1]&&("rna"===r[0].toLowerCase()?t=s.subsetProportions(0):"adt"===r[0].toLowerCase()?t=s.subsetTotals(0):"crispr"===r[0].toLowerCase()&&(t=s.maxProportions(0)))}else t=ee.inputs.fetchCellAnnotations().column(e);return n||(t=ee.cell_filtering.applyFilter(t)),t.slice()},pe=function(){if(null===re){re=new i.VU;for(var e=0,t=Object.entries({RNA:"rna_normalization",ADT:"adt_normalization",CRISPR:"crispr_normalization"});e<t.length;e++){var n=(0,o.Z)(t[e],2),r=n[0],s=n[1],a=ee[s];a.valid()&&re.add(r,a.fetchNormalizedMatrix())}}return re};onmessage=function(e){var t=e.data,n=t.type,p=t.payload,h=!1;if("INIT"===n){h=!0;var m=Math.round(2*navigator.hardwareConcurrency/3),y=u.j2({numberOfThreads:m}),b=y.then((function(){return u.TN()}));b.then((function(e){ee=e,postMessage({type:n,msg:"Success: analysis state created"})}));var x=l=new Promise((function(e){(r=indexedDB.open("KanaDB",2)).onupgradeneeded=function(e){var t=e.target.result;try{t.deleteObjectStore("analysis")}catch(e){}try{t.deleteObjectStore("analysis_meta")}catch(e){}try{t.deleteObjectStore("file")}catch(e){}try{t.deleteObjectStore("file_meta")}catch(e){}t.createObjectStore("analysis",{keyPath:"id"}),t.createObjectStore("analysis_meta",{keyPath:"id"}),t.createObjectStore("file",{keyPath:"id"}),t.createObjectStore("file_meta",{keyPath:"id"})},r.onsuccess=function(){f(e)},r.onerror=function(){e(null)}}));x.then((function(e){null!==e&&postMessage({type:"KanaDB_store",resp:e,msg:"Success: KanaDB initialized"})})).catch((function(e){console.error(e),postMessage({type:"KanaDB_ERROR",msg:"Error: Cannot initialize KanaDB"})}));var g=(null===P&&(P=new Promise((function(e,t){(E=indexedDB.open("DownloadsDB",3)).onupgradeneeded=function(e){var t=e.target.result;try{t.deleteObjectStore("downloads")}catch(e){}t.createObjectStore("downloads",{keyPath:"url"})},E.onsuccess=function(){e(null)},E.onerror=function(){t("failed to initialize DownloadsDB")}}))),P);g.then((function(e){postMessage({type:"DownloadsDB_store",resp:e,msg:"Success: DownloadsDB initialized"})})).catch((function(e){console.error(e),postMessage({type:"DownloadsDB_ERROR",msg:"Error: Cannot initialize DownloadsDB"})}));try{var S=j.M.availableDatasets();postMessage({type:"ExperimentHub_store",resp:S,msg:"Success: ExperimentHub initialized"})}catch(D){console.error(D),postMessage({type:"ExperimentHub_ERROR",msg:"Error: Cannot access datasets in ExperimentHub"})}(le=Promise.all([y,x,g,b])).then((function(){postMessage({type:n,msg:"Success: bakana initialized"})})).catch((function(e){console.error(e),H(n,e,h)}))}else if("RUN"===n)h=!0,le.then((function(e){var t=p.inputs,r=t.files;if(null!==r){for(var s={},a=0,c=Object.entries(r);a<c.length;a++){var i=(0,o.Z)(c[a],2),l=i[0],f=i[1];"uid"in f&&f.uid in te?s[l]=te[f.uid]:s[l]=ae(f),s[l].setOptions(f.options)}for(var m=0,d=Object.entries(te);m<d.length;m++){var y=(0,o.Z)(d[m],2),v=y[0];y[1].clear(),delete te[v]}r=s}!function(){for(var e=0,t=Object.entries(se);e<t.length;e++){var n=(0,o.Z)(t[e],2);n[0],n[1].free()}se={}}();var b=function(e,t){var n=t,r=function(e,t,r){if("undefined"==typeof r)throw new Error("cannot assign undefined parameter to '"+e+"."+t+"'");if(!(e in n))throw new Error("unknown analysis step '"+e+"'");var s=n[e];if(!(t in s))throw new Error("unknown analysis parameter '"+t+"' for step '"+e+"'");s[t]=r};return r("inputs","block_factor",e.batch),r("inputs","subset",e.subset),u.TD(n,t.batch_correction.method),u.bN(n,t.neighbor_index.approximate),null!==n.combine_embeddings.weights&&new Set([n.combine_embeddings.rna_weight,n.combine_embeddings.adt_weight,n.combine_embeddings.crispr_weight]).size<=1&&(n.combine_embeddings.weights=null),n}(t,p.params);u.x6(ee,r,b,{startFun:U,finishFun:ce}).catch((function(e){console.error(e),H(n,e,h)}))})).catch((function(e){console.error(e),H(n,e,h)}));else if("LOAD"===n){h=!0;var Z=p.inputs.files;if("kana"===Z[Object.keys(Z)[0]].format){var O=Z[Object.keys(Z)[0]].file;le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,c,i,l,f,p,h,m,d,y,v,b,_,x,w,g,k,S,Z,R,E,M,j;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReaderSync,r=n.readAsArrayBuffer(O),e.next=4,F().loadAsync(r);case 4:return a=e.sent,e.t0=JSON,e.next=8,a.file("config.json").async("string");case 8:e.t1=e.sent,c=e.t0.parse.call(e.t0,e.t1),i={},e.t2=(0,s.Z)().keys(a.files);case 12:if((e.t3=e.t2()).done){e.next=21;break}if(!(l=e.t3.value).startsWith("datasets/")){e.next=19;break}return e.next=17,a.files[l].async("uint8array");case 17:f=e.sent,i[l.split("/")[1]]=f;case 19:e.next=12;break;case 21:return e.next=23,u.j5(c,(function(e){return i[e]}),{state:ee,startFun:U,finishFun:ce});case 23:ee=e.sent,p={custom_selections:ee.custom_selections.fetchSelections()},h=[],z(c.parameters,h),postMessage({type:"loadedParameters",resp:{parameters:c.parameters,other:p}},h),m={},d={},y=ee.inputs.fetchDatasets(),v=0,b=Object.entries(y);case 32:if(!(v<b.length)){e.next=41;break}return _=(0,o.Z)(b[v],2),_[0],x=_[1],e.next=36,x.previewPrimaryIds({cache:!0});case 36:for(w=e.sent,g=0,k=["RNA","ADT","CRISPR"];g<k.length;g++)(S=k[g])in w&&(m[S]?m[S].push(w[S]):m[S]=[w[S]]);case 38:v++,e.next=32;break;case 41:for(Z=0,R=Object.entries(m);Z<R.length;Z++)E=(0,o.Z)(R[Z],2),M=E[0],j=E[1],d[M]=A.wf(j).length;postMessage({type:"PREFLIGHT_OPTIONS_DATA",resp:d,msg:"Success: PREFLIGHT_OPTIONS done"});case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}))}else"kanadb"===Z[Object.keys(Z)[0]].format&&le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z[Object.keys(Z)[0]].file,e.next=3,k(n);case 3:return r=e.sent,a=new TextDecoder,o=JSON.parse(a.decode(r)),e.next=8,u.j5(o,w,{state:ee,startFun:U,finishFun:ce});case 8:ee=e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}))}else if("EXPORT"===n)le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,c,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=function(e,t,r){var s=String(n.length);return n.push(r.buffer()),s},e.next=4,u.JZ(ee,r);case 4:for(a=e.sent,(o=new(F())).file("config.json",JSON.stringify(a)),c=0;c<n.length;c++)o.file("datasets/"+String(c),n[c]);return e.next=10,o.generateAsync({type:"uint8array"});case 10:i=e.sent,postMessage({type:"exportState",resp:i,msg:"Success: application state exported"},[i.buffer]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}));else if("EXPORT_RDS"===n)le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,i,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.lC(ee,"sce",{forceBuffer:!0});case 2:return n=e.sent,e.next=5,u.bL(ee,"",{forceBuffer:!0});case 5:r=e.sent,a=(0,c.Z)(r);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i)}catch(D){a.e(D)}finally{a.f()}return e.next=10,u.o2(n);case 10:l=e.sent,postMessage({type:"exportRDSState",resp:l,msg:"Success: application state exported"},[l.buffer]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}));else if("SAVEKDB"===n){var C=p.title;le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var r,o,c,i,l,f,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,a,o){var c,u,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.buffer(),e.next=3,M.FB(c);case 3:return u=e.sent,i=n+"_"+o.name()+"_"+c.length+"_"+u,e.next=7,v(i,c);case 7:if(e.sent){e.next=10;break}throw new Error("failed to save file '"+i+"' to KanaDB");case 10:return r.push(i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),e.next=4,u.JZ(ee,o);case 4:return c=e.sent,i=new TextEncoder,l=i.encode(JSON.stringify(c)),e.next=9,_(null,l,c,C);case 9:if(null===(f=e.sent)){e.next=17;break}return e.next=13,d();case 13:p=e.sent,postMessage({type:"KanaDB_store",resp:p,msg:"Success: Saved analysis to browser (".concat(f,")")}),e.next=18;break;case 17:postMessage({type:"KanaDB_ERROR",msg:"Fail: Cannot save analysis to browser"});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}))}else if("REMOVEKDB"===n){var T=p.id;(function(e){return R.apply(this,arguments)})(T).then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,d();case 3:n=e.sent,postMessage({type:"KanaDB_store",resp:n,msg:"Success: Removed file from cache (".concat(T,")")}),e.next=8;break;case 7:postMessage({type:"KanaDB_ERROR",msg:"fail: cannot remove file from cache (".concat(T,")")});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)}))}else"PREFLIGHT_OPTIONS"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,c,u,i,l,f,h,m,d,y,v,b,_,x,w;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},e.prev=1,r=0,a={},c=0,u=Object.entries(p.inputs.files);case 5:if(!(c<u.length)){e.next=19;break}if(i=(0,o.Z)(u[c],2),i[0],!("uid"in(l=i[1]))){e.next=15;break}if(f=te[l.uid],!(Array.isArray(p.options)&&p.options.length>r)){e.next=15;break}return f.setOptions(p.options[r]),e.next=13,f.previewPrimaryIds({cache:!0});case 13:for(h=e.sent,m=0,d=["RNA","ADT","CRISPR"];m<d.length;m++)(y=d[m])in h&&(a[y]?a[y].push(h[y]):a[y]=[h[y]]);case 15:r++;case 16:c++,e.next=5;break;case 19:for(v=0,b=Object.entries(a);v<b.length;v++)_=(0,o.Z)(b[v],2),x=_[0],(w=_[1]).length!==p.options.length?n[x]=0:n[x]=A.wf(w).length;e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0),n.status="ERROR",n.reason=e.t0.toString();case 27:postMessage({type:"PREFLIGHT_OPTIONS_DATA",resp:n,msg:"Success: PREFLIGHT_OPTIONS done"});case 28:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}()):"PREFLIGHT_INPUT"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,c,u,i,l,f,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},e.prev=1,r={},a={},c=0,u=Object.entries(p.inputs.files);case 5:if(!(c<u.length)){e.next=28;break}if(i=(0,o.Z)(u[c],2),l=i[0],!("uid"in(f=i[1]))){e.next=17;break}if(f.uid in te){e.next=13;break}return te[f.uid]=ae(f),e.next=12,te[f.uid].summary({cache:!0});case 12:ne[f.uid]=e.sent;case 13:r[l]=te[f.uid],a[l]=oe(ne[f.uid],f),e.next=25;break;case 17:return h=ae(f),r[l]=h,e.t0=oe,e.next=22,r[l].summary({cache:!0});case 22:e.t1=e.sent,e.t2=f,a[l]=(0,e.t0)(e.t1,e.t2);case 25:c++,e.next=5;break;case 28:n.status="SUCCESS",n.details=a,e.next=37;break;case 32:e.prev=32,e.t3=e.catch(1),console.error(e.t3),n.status="ERROR",n.reason=e.t3.toString();case 37:postMessage({type:"PREFLIGHT_INPUT_DATA",resp:n,msg:"Success: PREFLIGHT_INPUT done"});case 38:case"end":return e.stop()}}),e,null,[[1,32]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)})):"computeVersusClusters"===n?le.then((function(e){var t,n,r=p.rank_type,s=p.modality,a=p.annotation;if($===a)n=ee.marker_detection.computeVersus(p.left,p.right),t=u.jJ(n.results[s],n.left,r);else{var o=i.Yh(fe(a));n=ie(a,o).computeVersus(o.levels.indexOf(p.left),o.levels.indexOf(p.right)),t=u.jJ(n.results[s],n.left,r)}var c=[];z(t,c),postMessage({type:"computeVersusClusters",resp:t,msg:"Success: COMPUTE_VERSUS_CLUSTERS done"},c)})).catch((function(e){console.error(e),H(n,e,h)})):"computeVersusSelections"===n?le.then((function(e){var t=p.rank_type,n=ee.custom_selections.computeVersus(p.left,p.right),r=u.jJ(n.results[p.modality],n.left,t),s=[];z(r,s),postMessage({type:"computeVersusSelections",resp:r,msg:"Success: COMPUTE_VERSUS_SELECTIONS done"},s)})).catch((function(e){console.error(e),H(n,e,h)})):"getMarkersForCluster"===n?le.then((function(e){var t,n,r=p.cluster,s=p.rank_type,a=p.modality,o=p.annotation;if($===o)n=ee.marker_detection.fetchResults()[a],t=u.jJ(n,r,s);else{var c=i.Yh(fe(o));n=ie(o,c).fetchResults()[a],t=u.jJ(n,c.levels.indexOf(r),s)}var l=[];z(t,l),postMessage({type:"setMarkersForCluster",resp:t,msg:"Success: GET_MARKERS_FOR_CLUSTER done"},l)})).catch((function(e){console.error(e),H(n,e,h)})):"getGeneExpression"===n?le.then((function(e){var t,n=p.gene,r=p.modality,s=pe(r);if("RNA"===r)t=s.get(r).row(n);else if("ADT"===r)t=s.get(r).row(n);else{if("CRISPR"!==r)throw new Error("unknown feature type '"+r+"'");t=s.get(r).row(n)}postMessage({type:"setGeneExpression",resp:{gene:n,expr:t},msg:"Success: GET_GENE_EXPRESSION done"},[t.buffer])})).catch((function(e){console.error(e),H(n,e,h)})):"computeCustomMarkers"===n?le.then((function(e){ee.custom_selections.addSelection(p.id,p.selection),postMessage({type:"computeCustomMarkers",msg:"Success: COMPUTE_CUSTOM_MARKERS done"})})).catch((function(e){console.error(e),H(n,e,h)})):"getMarkersForSelection"===n?le.then((function(e){var t=ee.custom_selections.fetchResults(p.cluster)[p.modality],n=u.jJ(t,1,p.rank_type),r=[];z(n,r),postMessage({type:"setMarkersForCustomSelection",resp:n,msg:"Success: GET_MARKERS_FOR_SELECTION done"},r)})).catch((function(e){console.error(e),H(n,e,h)})):"removeCustomMarkers"===n?le.then((function(e){ee.custom_selections.removeSelection(p.id)})).catch((function(e){console.error(e),H(n,e,h)})):"animateTSNE"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.tsne.animate();case 2:return e.t0=V,e.next=5,ee.tsne.fetchResults();case 5:e.t1=e.sent,(0,e.t0)("tsne",e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)})):"animateUMAP"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.umap.animate();case 2:return e.t0=V,e.next=5,ee.umap.fetchResults();case 5:e.t1=e.sent,(0,e.t0)("umap",e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)})):"getAnnotation"===n?le.then((function(e){var t,n,r=p.annotation;if(t=fe(r,!!p.unfiltered),ArrayBuffer.isView(t))n={type:"array",values:t.slice()};else{var s=[],a={},o=new Int32Array(t.length);t.map((function(e,t){e in a||(a[e]=s.length,s.push(e)),o[t]=a[e]})),n={type:"factor",index:o,levels:s}}var c=[];z(n,c),postMessage({type:"setAnnotation",resp:{annotation:r,values:n},msg:"Success: GET_ANNOTATION done"},c)})).catch((function(e){console.error(e),H(n,e,h)})):"computeFeaturesetSummary"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,c,u,l,f,h,m,d,y,v;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.annotation,r=p.rank_type,a=p.cluster,o=r.indexOf("-"),$===n?V("computeFeaturesetSummary",ee.feature_set_enrichment.computeEnrichment(ee.marker_detection.fetchResults().RNA,a,r.slice(0,o),r.slice(o+1))):W===n?(c=ee.custom_selections.fetchSelectionIndices(a),u=ee.cell_filtering.fetchFilteredMatrix().numberOfColumns(),l=new Uint8Array(u),c.map((function(e){return l.set([1],e)})),f=i.Yh(l),h=ie(n,f),m=h.fetchResults().RNA,V("computeFeaturesetSummary",ee.feature_set_enrichment.computeEnrichment(m,f.levels.indexOf(1),r.slice(0,o),r.slice(o+1)))):(d=i.Yh(fe(n)),y=ie(n,d),v=y.fetchResults().RNA,V("computeFeaturesetSummary",ee.feature_set_enrichment.computeEnrichment(v,d.levels.indexOf(a),r.slice(0,o),r.slice(o+1))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)})):"computeFeaturesetVSSummary"===n?le.then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,c,u,l,f,h,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.annotation,r=p.rank_type,a=p.left,o=p.right,c=r.indexOf("-"),$===n?(u=ee.marker_detection.computeVersus(a,o),V("computeFeaturesetVSSummary",ee.feature_set_enrichment.computeEnrichment(u.results.RNA,u.left,r.slice(0,c),r.slice(c+1)))):W===n?(l=ee.custom_selections.computeVersus(a,o),V("computeFeaturesetVSSummary",ee.feature_set_enrichment.computeEnrichment(l.results.RNA,0,r.slice(0,c),r.slice(c+1)))):(f=i.Yh(fe(n)),h=ie(n,f),m=h.computeVersus(f.levels.indexOf(p.left),f.levels.indexOf(p.right)),V("computeFeaturesetVSSummary",ee.feature_set_enrichment.computeEnrichment(m.results.RNA,m.left,r.slice(0,c),r.slice(c+1))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),H(n,e,h)})):"getFeatureScores"===n?le.then((function(e){var t=p.index;V("setFeatureScores",ee.feature_set_enrichment.computePerCellScores(t))})).catch((function(e){console.error(e),H(n,e,h)})):"getFeatureGeneIndices"===n?le.then((function(e){var t,n,r=p.index,s=p.cluster,a=p.annotation,c=p.modality,l=p.rank_type,f=ee.feature_set_enrichment.fetchFeatureSetIndices(r);if($===a)t=ee.marker_detection.fetchResults()[c],n=u.jJ(t,s,l);else if(W===a)t=ee.custom_selections.fetchResults(p.cluster)[p.modality],n=u.jJ(t,1,p.rank_type);else{var h=i.Yh(fe(a));t=ie(a,h).fetchResults()[c],n=u.jJ(t,h.levels.indexOf(s),l)}for(var m=n.ordering.map((function(e,t){return f.includes(e)?t:-100})).filter((function(e){return-100!==e})),d={},y=0,v=Object.entries(n);y<v.length;y++){var b=(0,o.Z)(v[y],2),_=b[0],x=b[1];d[_]=x.map((function(e,t){return m.includes(t)?e:-100})).filter((function(e){return-100!==e}))}V("setFeatureGeneIndices",d)})).catch((function(e){console.error(e),H(n,e,h)})):(console.error("Type: ".concat(n," not defined")),H(n,"Type: ".concat(n," not defined"),h))}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.x=function(){var e=n.O(void 0,[660,772,797],(function(){return n(9612)}));return e=n.O(e)},function(){var e=[];n.O=function(t,r,s,a){if(!r){var o=1/0;for(l=0;l<e.length;l++){r=e[l][0],s=e[l][1],a=e[l][2];for(var c=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(c=!1,a<o&&(o=a));if(c){e.splice(l--,1);var i=s();void 0!==i&&(t=i)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,s,a]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{484:"6b77e28b",660:"960f344e",772:"c070c97d",797:"140711d0",909:"6d8e3cf9",933:"693dbddf"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/kana/",function(){n.b=self.location+"/../../../";var e={612:1};n.f.i=function(t,r){e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkkana=self.webpackChunkkana||[],r=t.push.bind(t);t.push=function(t){var s=t[0],a=t[1],o=t[2];for(var c in a)n.o(a,c)&&(n.m[c]=a[c]);for(o&&o(n);s.length;)e[s.pop()]=1;r(t)}}(),function(){var e=n.x;n.x=function(){return Promise.all([660,772,797].map(n.e,n)).then(e)}}();n.x()}();
//# sourceMappingURL=612.7dd69e59.chunk.js.map