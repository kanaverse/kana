{"version":3,"file":"static/js/814.bc231a0d.chunk.js","mappings":"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","sources":["../node_modules/wasmarrays.js/src/derived.js","../node_modules/scran.js/browser/runTsne.js","../node_modules/bakana/browser/steps/tsne.worker.js","../node_modules/scran.js/browser/utils.js","../node_modules/wasmarrays.js/src/create.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import { buffer } from \"./globals.js\";\nimport { WasmArray } from \"./base.js\";\n\n/** \n * Wrapper around an unsigned 8-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createUint8WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Uint8WasmArray extends WasmArray {\n    /**\n     * @return {Uint8Array} A Uint8Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Uint8Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string}\n     */\n    static className = \"Uint8WasmArray\";\n    // We're returning the name explicitly here instead of relying\n    // on the constructor.name trick, as the name of the class can\n    // change during minification.\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 1;\n}\n\n/** \n * Wrapper around a signed 8-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createInt8WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Int8WasmArray extends WasmArray {\n    /**\n     * @return {Int8Array} An Int8Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Int8Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string} \n     */\n    static className = \"Int8WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number}\n     */\n    static valueSize = 1;\n}\n\n/** \n * Wrapper around an unsigned 16-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createUint16WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Uint16WasmArray extends WasmArray {\n    /**\n     * @return {Uint16Array} A Uint16Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Uint16Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string} \n     */\n    static className = \"Uint16WasmArray\";\n\n    /**\n     * Size of the each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 2;\n}\n\n/** \n * Manage a signed 16-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createInt16WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Int16WasmArray extends WasmArray {\n    /**\n     * @return {Int16Array} An Int16Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Int16Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string} \n     */\n    static className = \"Int16WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 2;\n}\n\n/** \n * Manage an unsigned 32-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createUint32WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Uint32WasmArray extends WasmArray {\n    /**\n     * @return {Uint32Array} A Uint32Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Uint32Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string} \n     */\n    static className = \"Uint32WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 4;\n}\n\n/** \n * Manage a signed 32-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createInt32WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Int32WasmArray extends WasmArray {\n    /**\n     * @return {Int32Array} An Int32Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Int32Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * @return Name of the class.\n     * @type {string} \n     */\n    static className = \"Int32WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 4;\n}\n\n/** \n * Manage an unsigned 64-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createBigUint64WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class BigUint64WasmArray extends WasmArray {\n    /**\n     * @return {BigUint64Array} A BigUint64Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new BigUint64Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * Name of the class.\n     * @type {string} \n     */\n    static className = \"BigUint64WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 8;\n}\n\n/** \n * Manage a signed 64-bit integer array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createBigInt64WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class BigInt64WasmArray extends WasmArray {\n    /**\n     * @return {BigInt64Array} An BigInt64Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new BigInt64Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * @return Name of the class.\n     * @type {string} \n     */\n    static className = \"BigInt64WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 8;\n}\n\n/** \n * Manage a 32-bit float array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createFloat32WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Float32WasmArray extends WasmArray {\n    /**\n     * @return {Float32Array} A Float32Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Float32Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * @return Name of the class.\n     * @type {string} \n     */\n    static className = \"Float32WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 4;\n}\n\n/** \n * Manage a 64-bit float array allocated on the Wasm heap.\n * Users may create instances using the {@linkcode createFloat64WasmArray} function.\n *\n * @hideconstructor\n * @augments WasmArray\n */\nexport class Float64WasmArray extends WasmArray {\n    /**\n     * @return {Float64Array} A Float64Array view of the allocated memory.\n     * Note that this may be invalidated by subsequent Wasm heap allocations.\n     */\n    array() {\n        return new Float64Array(buffer(this.space), this.offset, this.length);\n    }\n\n    /**\n     * @return Name of the class.\n     * @type {string} \n     */\n    static className = \"Float64WasmArray\";\n\n    /**\n     * Size of each data value, in bytes.\n     * @type {number} \n     */\n    static valueSize = 8;\n}\n\nconst choices = {\n    \"Uint8WasmArray\": Uint8WasmArray,\n    \"Int8WasmArray\": Int8WasmArray,\n    \"Uint16WasmArray\": Uint16WasmArray,\n    \"Int16WasmArray\": Int16WasmArray,\n    \"Uint32WasmArray\": Uint32WasmArray,\n    \"Int32WasmArray\": Int32WasmArray,\n    \"BigUint64WasmArray\": BigUint64WasmArray,\n    \"BigInt64WasmArray\": BigInt64WasmArray,\n    \"Float32WasmArray\": Float32WasmArray,\n    \"Float64WasmArray\": Float64WasmArray\n};\n\n/**\n * Retrieve class from its name.\n *\n * @param {string} name - Name of the {@linkplain WasmArray} class.\n *\n * @return {class} Class object corresponding to `name`.\n */\nexport function stringToClass(name) {\n    if (!(name in choices)){ \n        throw new Error(\"unknown WasmArray class '\" + name + \"'\");\n    }\n    return choices[name];\n}\n","import * as utils from \"./utils.js\";\nimport * as wasm from \"./wasm.js\";\nimport * as gc from \"./gc.js\";\nimport { BuildNeighborSearchIndexResults, findNearestNeighbors } from \"./findNearestNeighbors.js\";\n\n/**\n * Wrapper around the t-SNE status object on the Wasm heap, typically created by {@linkcode initializeTsne}.\n * @hideconstructor\n */\nexport class TsneStatus {\n    #id;\n    #status;\n    #coordinates;\n\n    constructor(id, raw_status, raw_coordinates) {\n        this.#id = id;\n        this.#status = raw_status;\n        this.#coordinates = raw_coordinates;\n        return;\n    }\n\n    /**\n     * @return {TsneStatus} A deep copy of this object.\n     */\n    clone() {\n        return gc.call(\n            module => this.#status.deepcopy(), \n            TsneStatus, \n            this.#coordinates.clone()\n        );\n    }\n\n    /**\n     * @return {number} Number of cells in the dataset.\n     */\n    numberOfCells () {\n        return this.#status.num_observations();\n    }\n\n    /**\n     * @return {number} Number of iterations processed so far.\n     * This will change with repeated invocations of {@linkcode runTsne} on this object.\n     */\n    iterations () {\n        return this.#status.iterations();\n    }\n\n    /**\n     * @return {object} Object with `x` and `y` keys.\n     * The corresponding values are Float64Array objects of length equal to the number of cells,\n     * containing the x- and  y- coordinates for each cell at the current state of the algorithm.\n     */\n    extractCoordinates() {\n        return utils.extractXY(this.numberOfCells(), this.#coordinates.array()); \n    }\n\n    /**\n     * Run the t-SNE algorithm to the specified number of iterations or for a certain time.\n     * This method may be called any number of times.\n     *\n     * @param {object} [options={}] - Optional parameters.\n     * @param {number} [options.maxIterations=1000] - Maximum number of iterations to perform.\n     * This number includes all existing iterations that were already performed in `x` from previous calls to this method,\n     * so it should be greater than {@linkcode TsneStatus#iterations iterations}.\n     * @param {?number} [options.runTime=null] - Number of milliseconds for which the algorithm is allowed to run before returning.\n     * If `null`, no limit is imposed on the runtime.\n     *\n     * @return The algorithm status in `x` is advanced up to the requested number of iterations,\n     * or until the requested run time is exceeded, whichever comes first.\n     */\n    run(options = {}) {\n        let { maxIterations = 1000, runTime = null, ...others } = options;\n        utils.checkOtherOptions(others);\n        if (runTime === null) {\n            runTime = -1;\n        }\n        wasm.call(module => module.run_tsne(this.#status, runTime, maxIterations, this.#coordinates.offset));\n    }\n\n    /**\n     * @return Frees the memory allocated on the Wasm heap for this object.\n     * This invalidates this object and all references to it.\n     */   \n    free() {\n        if (this.#status !== null) {\n            gc.release(this.#id);\n            this.#status = null;\n        }\n        if (this.#coordinates !== null) {\n            this.#coordinates.free();\n            this.#coordinates = null;\n        }\n        return;\n    }\n}\n\n/**\n * @param {number} perplexity - Perplexity to use in the t-SNE algorithm.\n * @return {number} Appropriate number of neighbors to use in the nearest neighbor search.\n */\nexport function perplexityToNeighbors(perplexity) {\n    return wasm.call(module => module.perplexity_to_k(perplexity));\n}\n\n/**\n * @param {BuildNeighborSearchIndexResults|FindNearestNeighborsResults} x A pre-built neighbor search index from {@linkcode buildNeighborSearchIndex}.\n *\n * Alternatively, a pre-computed set of neighbor search results from {linkcode findNearestNeighbors}.\n * The number of neighbors should be equal to `neighbors`, otherwise a warning is raised.\n * @param {object} [options={}] - Optional parameters.\n * @param {number} [options.perplexity=30] - Perplexity to use when computing neighbor probabilities in the t-SNE.\n * @param {?number} [options.neighbors=null] - Number of nearest neighbors to find.\n * If `null`, defaults to the output of {@linkcode perplexityToNeighbors perplexityToNeighbors(perplexity)}.\n * @param {?number} [options.numberOfThreads=null] - Number of threads to use.\n * If `null`, defaults to {@linkcode maximumThreads}.\n *\n * @return {TsneStatus} Object containing the initial status of the t-SNE algorithm.\n */\nexport function initializeTsne(x, options = {}) {\n    const { perplexity = 30, neighbors = null, numberOfThreads = null, ...others } = options;\n    utils.checkOtherOptions(others);\n\n    var my_nnres;\n    var raw_coords;\n    var output;\n    let nthreads = utils.chooseNumberOfThreads(numberOfThreads);\n\n    const k = (neighbors == null ? perplexityToNeighbors(perplexity) : neighbors);\n\n    try {\n        let nnres;\n\n        if (x instanceof BuildNeighborSearchIndexResults) {\n            my_nnres = findNearestNeighbors(x, k, { numberOfThreads: nthreads });\n            nnres = my_nnres\n        } else {\n            if (k != x.numberOfNeighbors()) {\n                console.warn(\"number of neighbors in 'x' does not match 'neighbors'\");\n            }\n            nnres = x;\n        }\n\n        raw_coords = utils.createFloat64WasmArray(2 * nnres.numberOfCells());\n        wasm.call(module => module.randomize_tsne_start(nnres.numberOfCells(), raw_coords.offset, 42));\n        output = gc.call(\n            module => module.initialize_tsne(nnres.results, perplexity, nthreads),\n            TsneStatus,\n            raw_coords\n        );\n\n    } catch(e) {\n        utils.free(output);\n        utils.free(raw_coords);\n        throw e;\n\n    } finally {\n        utils.free(my_nnres);\n    }\n\n    return output;\n}\n\n/**\n * Run the t-SNE algorithm to the specified number of iterations.\n * This is a wrapper around {@linkcode initializeTsne} and {@linkcode TsneStatus#run run}.\n *\n * @param {BuildNeighborSearchIndexResults|FindNearestNeighborsResults} x A pre-built neighbor search index from {@linkcode buildNeighborSearchIndex}.\n *\n * Alternatively, a pre-computed set of neighbor search results from {linkcode findNearestNeighbors}.\n * The number of neighbors should be equal to `neighbors`, otherwise a warning is raised.\n * @param {object} [options={}] - Optional parameters.\n * @param {number} [options.perplexity=30] - Perplexity to use when computing neighbor probabilities in the t-SNE.\n * @param {?number} [options.neighbors=null] - Number of nearest neighbors to find.\n * If `null`, defaults to the output of {@linkcode perplexityToNeighbors perplexityToNeighbors(perplexity)}.\n * @param {?number} [options.numberOfThreads=null] - Number of threads to use.\n * If `null`, defaults to {@linkcode maximumThreads}.\n * @param {number} [options.maxIterations=1000] - Maximum number of iterations to perform.\n *\n * @return {object} Object containing coordinates of the t-SNE embedding, see {@linkcode TsneStatus#extractCoordinates TsneStatus.extractCoordinates} for more details.\n */\nexport function runTsne(x, options = {}) {\n    const { perplexity = 30, neighbors = null, numberOfThreads = null, maxIterations = 1000, ...others } = options;\n    utils.checkOtherOptions(others);\n    let tstat = initializeTsne(x, { perplexity, neighbors, numberOfThreads });\n    tstat.run({ maxIterations });\n    return tstat.extractCoordinates();\n}\n","import * as scran from \"scran.js\";\nimport * as utils from \"./utils/general.js\";\nimport * as vizutils from \"./utils/viz_child.js\";\nimport * as aworkers from \"./abstract/worker_child.js\";\n\nvar cache = {};\nvar init_changed = false;\nvar init_parameters = {};\nvar run_parameters = {};\nvar dead = false;\n\nfunction rerun(animate, iterations) {\n    var num_obs = cache.init.numberOfCells(); \n    var delay = vizutils.chooseDelay(animate);\n    var current_status = cache.init.clone();\n\n    try {\n        for (; current_status.iterations() < iterations; ) {\n            current_status.run({ runTime: delay, maxIterations: iterations }); \n  \n            if (animate) {\n                let xy = current_status.extractCoordinates();\n                aworkers.sendMessage({\n                    \"type\": \"tsne_iter\",\n                    \"x\": xy.x,\n                    \"y\": xy.y,\n                    \"iteration\": current_status.iterations()\n                }, [xy.x.buffer, xy.y.buffer]);\n            }\n        }\n        cache.final = current_status.extractCoordinates();\n\n    } finally {\n        current_status.free();\n    }\n}\n\nvar loaded;\naworkers.registerCallback(msg => {\n    var id = msg.data.id;\n    if (dead) {\n        aworkers.sendMessage({\n            \"id\": id,\n            \"type\": \"error\",\n            \"error\": \"t-SNE worker is dead and cannot process messages\"\n        });\n        return;\n    }\n\n    if (msg.data.cmd == \"INIT\") {\n        loaded = scran.initialize(msg.data.scranOptions); \n        loaded\n            .then(x => {\n                aworkers.sendMessage({\n                    \"id\": id,\n                    \"type\": \"init_worker\",\n                    \"data\": { \"status\": \"SUCCESS\" }\n                });\n            })\n            .catch(error => {\n                aworkers.sendMessage({ \n                    \"id\": id,\n                    \"type\": \"error\",\n                    \"error\": error\n                });\n            });\n  \n    } else if (msg.data.cmd == \"RUN\") {\n        loaded\n            .then(x => {\n                var new_neighbors;\n                if (\"neighbors\" in msg.data) {\n                    utils.freeCache(cache.neighbors);\n                    cache.neighbors = vizutils.recreateNeighbors(msg.data.neighbors);\n                    new_neighbors = true;\n                } else {\n                    new_neighbors = false;\n                }\n\n                var init_args = { \"perplexity\": msg.data.params.perplexity };\n                if (!new_neighbors && !utils.changedParameters(init_args, init_parameters)) {\n                    init_changed = false;\n                } else {\n                    utils.freeCache(cache.init);\n                    cache.init = scran.initializeTsne(cache.neighbors, { perplexity: init_args.perplexity });\n                    init_parameters = init_args;\n                    init_changed = true;\n                }\n\n                // Nothing downstream depends on the run results, so we don't set any changed flag.\n                var run_args = { \"iterations\": msg.data.params.iterations };\n                if (init_changed || utils.changedParameters(run_args, run_parameters)) {\n                    rerun(msg.data.params.animate, run_args.iterations);\n                    run_parameters = run_args;\n                }\n          \n                aworkers.sendMessage({\n                    \"id\": id,\n                    \"type\": \"tsne_run\",\n                    \"data\": { \"status\": \"SUCCESS\" }\n                });\n            })\n            .catch(error => {\n                aworkers.sendMessage({ \n                    \"id\": id,\n                    \"type\": \"error\",\n                    \"error\": error\n                });\n            });\n  \n    } else if (msg.data.cmd == \"RERUN\") {\n        loaded\n            .then(x => {\n                rerun(true, run_parameters.iterations);\n                aworkers.sendMessage({\n                    \"id\": id,\n                    \"type\": \"tsne_rerun\",\n                    \"data\": { \"status\": \"SUCCESS\" }\n                });\n            })\n            .catch(error => {\n                aworkers.sendMessage({ \n                    \"id\": id,\n                    \"type\": \"error\",\n                    \"error\": error\n                });\n            });\n\n    } else if (msg.data.cmd == \"FETCH\") {\n        loaded\n            .then(x => {\n                var info = {\n                    \"x\": cache.final.x.slice(),\n                    \"y\": cache.final.y.slice(),\n                    \"iterations\": run_parameters.iterations\n                };\n                var transfer = [info.x.buffer, info.y.buffer];\n                aworkers.sendMessage({\n                    \"id\": id,\n                    \"type\": \"tsne_fetch\",\n                    \"data\": info\n                }, transfer);\n            })\n            .catch(error => {\n                aworkers.sendMessage({ \n                    \"id\": id,\n                    \"type\": \"error\",\n                    \"error\": error\n                });\n            });\n\n    } else if (msg.data.cmd == \"KILL\") {\n        dead = true;\n        loaded\n            .then(x => {\n                scran.terminate();\n                aworkers.sendMessage({\n                    \"id\": id,\n                    \"type\": \"tsne_killed\",\n                    \"data\": null\n                });\n            })\n            .catch(error => {\n                aworkers.sendMessage({ \n                    \"id\": id,\n                    \"type\": \"error\",\n                    \"error\": error\n                });\n            });\n\n    } else {\n        aworkers.sendMessage({\n            \"id\": id,\n            \"type\": \"error\",\n            \"error\": \"unknown message type '\" + JSON.stringify(msg.data) + \"'\"\n        });\n    }\n});\n","import { buffer, wasmArraySpace, maximumThreads } from \"./wasm.js\";\nimport * as wa from \"wasmarrays.js\";\n\n/**\n * Helper function to create a Uint8WasmArray from the **wasmarrays.js** package.\n *\n * @param {number} length - Length of the array.\n *\n * @return {Uint8WasmArray} Uint8WasmArray on the **scran.js** Wasm heap.\n */\nexport function createUint8WasmArray(length) {\n    return wa.createUint8WasmArray(wasmArraySpace(), length);\n}\n\n/**\n * Helper function to create a Int32WasmArray from the **wasmarrays.js** package.\n *\n * @param {number} length - Length of the array.\n *\n * @return {Int32WasmArray} Int32WasmArray on the **scran.js** Wasm heap.\n */\nexport function createInt32WasmArray(length) {\n    return wa.createInt32WasmArray(wasmArraySpace(), length);\n}\n\n/**\n * Helper function to create a BigUint64WasmArray from the **wasmarrays.js** package.\n *\n * @param {number} length - Length of the array.\n *\n * @return {BigUint64WasmArray} BigUint64WasmArray on the **scran.js** Wasm heap.\n */\nexport function createBigUint64WasmArray (length) {\n    return wa.createBigUint64WasmArray(wasmArraySpace(), length);\n}\n\n/**\n * Helper function to create a Float32WasmArray from the **wasmarrays.js** package.\n *\n * @param {number} length - Length of the array.\n *\n * @return {Float32WasmArray} Float32WasmArray on the **scran.js** Wasm heap.\n */\nexport function createFloat32WasmArray(length) {\n    return wa.createFloat32WasmArray(wasmArraySpace(), length);\n}\n\n/**\n * Helper function to create a Float64WasmArray from the **wasmarrays.js** package.\n *\n * @param {number} length - Length of the array.\n *\n * @return {Float64WasmArray} Float64WasmArray on the **scran.js** Wasm heap.\n */\nexport function createFloat64WasmArray(length) {\n    return wa.createFloat64WasmArray(wasmArraySpace(), length);\n}\n\nexport function wasmifyArray(x, expected) {\n    if (x instanceof wa.WasmArray) {\n        if (expected !== null && expected != x.constructor.className) {\n            throw new Error(\"expected '\" + expected + \"', got '\" + x.constructor.className + \"'\");\n        }\n\n        if (x.space === wasmArraySpace()) {\n            // Creating a view. This ensures that callers can always call\n            // free() on the output of this function without worrying about\n            // whether they are breaking something else that was using 'x'.\n            if (x.owner === null) {\n                return x.view();\n            } else {\n                return x; // it's already a view, so we just pass it along.\n            }\n        } else {\n            // If it's a different space, then we have to make a copy.\n            return x.clone(wasmArraySpace());\n        }\n    }\n\n    let y = null;\n    if (expected !== null) {\n        y = wa.convertToWasmArray(wasmArraySpace(), x, wa.stringToClass(expected));\n    } else {\n        y = wa.convertToWasmArray(wasmArraySpace(), x);\n    }\n\n    return y;\n}\n\nexport function chooseNumberOfThreads(threads) {\n    if (threads == null) {\n        return maximumThreads();\n    } else {\n        return threads;\n    }\n}\n\n/**\n * Try to free a **scran.js** object's memory (typically involving some memory allocated on the Wasm heap) by calling its `free` method.\n *\n * @param {?object} x - Instance of a **scran.js** or **wasmarrays.js** class to be freed.\n * May also be `null` or undefined.\n * \n * @return The output of `x.free()` - unless `x` is undefined or `null`, in which case nothing is performed.\n */\nexport function free(x) {\n    if (typeof x == \"undefined\" || x == null) {\n        return;\n    }\n    return x.free();\n}\n\nexport function extractXY(ncells, coordinates) {\n    let x = new Float64Array(ncells);\n    let y = new Float64Array(ncells);\n\n    for (var i = 0; i < ncells; i++) {\n        x[i] = coordinates[2 * i];\n        y[i] = coordinates[2 * i + 1];\n    }\n\n    return { \"x\": x, \"y\": y };\n}\n\n/**\n * Possibly copy an array out of the Wasm heap, avoiding potential invalidation at the cost of some efficiency.\n *\n * @param {TypedArray} x - Array of data, possibly on the **scran.js** Wasm heap.\n * @param {(string|boolean)} copy - Copying mode to use.\n *\n * @return {TypedArray|WasmArray} The return value depends on the value of `copy`:\n * - If `copy = true`, a TypedArray copy of `x` is created with `x.slice()` and returned.\n *   This is a good default to avoid invalidation of TypedArray views on the heap upon reallocation, by creating a Javascript-owned copy for downstream use.\n * - If `copy = false`, `x` is returned directly.\n *   This avoids making any copy but runs the risk of invalidation when the Wasm heap is resized;\n *   it should only be used when no further Wasm allocations are performed within the lifetime of `x`.\n * - If `copy = \"view\"`, a WasmArray view is created from `x` and returned.\n *   This avoids any copy and is robust to invalidation but requires an extra `WasmArray.array()` call to create a TypedArray.\n */\nexport function possibleCopy(x, copy) {\n    if (copy === \"view\") {\n        if (x.buffer !== buffer()) {\n            throw new Error(\"cannot use copy = \\\"view\\\" for non-Wasm TypedArrays\");\n        }\n\n        let view_class = x.constructor.name.replace(\"Array\", \"WasmArray\");\n\n        // This function should only be used for objects generated in the\n        // buffer owned by scran.js, so we can assume that x's space is the\n        // same as that of the wasmArraySpace().\n        return wa.createWasmArrayView(wasmArraySpace(), x.length, x.byteOffset, wa.stringToClass(view_class));\n\n    } else if (copy) {\n        return x.slice();\n\n    } else {\n        return x;\n    }\n}\n\nexport function matchOptions(name, value, choices) {\n    if (choices.indexOf(value) == -1) {\n        throw new Error(\"'\" + name + \"=' should be one of '\" + choices.join(\"', '\") + \"'\");\n    }\n}\n\nexport function toTypedArray(buffer, wasSupplied, asTypedArray) {\n    if (asTypedArray) {\n        if (!wasSupplied) {\n            const output = buffer.slice();\n            buffer.free();\n            return output;\n        } else {\n            return buffer.array();\n        }\n    } else {\n        return buffer;\n    }\n}\n\nexport function checkOtherOptions(options) {\n    for (const key of Object.keys(options)) {\n        throw new Error(\"unknown option '\" + key + \"'\");\n    }\n}\n","import { allocate } from \"./globals.js\";\nimport { \n    Int8WasmArray, Uint8WasmArray,\n    Int16WasmArray, Uint16WasmArray,\n    Int32WasmArray, Uint32WasmArray,\n    BigInt64WasmArray, BigUint64WasmArray,\n    Float32WasmArray, Float64WasmArray\n} from \"./derived.js\";\n\n/**\n * Create a {@linkplain WasmArray} of the specified subclass.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * @param {class} arrayClass - Desired subclass of the {@linkplain WasmArray}.\n * \n * @return {WasmArray} Instance of a {@linkplain WasmArray} subclass.\n */\nexport function createWasmArray(space, length, arrayClass) {\n    return allocate(space, length, arrayClass);\n}\n\n/**\n * Create a {@linkplain Uint8WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Uint8WasmArray} Instance of a {@linkplain Uint8WasmArray}.\n */\nexport function createUint8WasmArray(space, length) { \n    return createWasmArray(space, length, Uint8WasmArray); \n}\n\n/**\n * Create a {@linkplain Int8WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Int8WasmArray} Instance of a {@linkplain Int8WasmArray}.\n */\nexport function createInt8WasmArray(space, length) { \n    return createWasmArray(space, length, Int8WasmArray); \n}\n\n/**\n * Create a {@linkplain Uint16WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Uint16WasmArray} Instance of a {@linkplain Uint16WasmArray}.\n */\nexport function createUint16WasmArray(space, length) { \n    return createWasmArray(space, length, Uint16WasmArray); \n}\n\n/**\n * Create a {@linkplain Int16WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Int16WasmArray} Instance of a {@linkplain Int16WasmArray}.\n */\nexport function createInt16WasmArray(space, length) { \n    return createWasmArray(space, length, Int16WasmArray); \n}\n\n/**\n * Create a {@linkplain Uint32WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Uint32WasmArray} Instance of a {@linkplain Uint32WasmArray}.\n */\nexport function createUint32WasmArray(space, length) { \n    return createWasmArray(space, length, Uint32WasmArray); \n}\n\n/**\n * Create a {@linkplain Int32WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Int32WasmArray} Instance of a {@linkplain Int32WasmArray}.\n */\nexport function createInt32WasmArray(space, length) { \n    return createWasmArray(space, length, Int32WasmArray); \n}\n\n/**\n * Create a {@linkplain BigUint64WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {BigUint64WasmArray} Instance of a {@linkplain BigUint64WasmArray}.\n */\nexport function createBigUint64WasmArray(space, length) { \n    return createWasmArray(space, length, BigUint64WasmArray); \n}\n\n/**\n * Create a {@linkplain BigInt64WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {BigInt64WasmArray} Instance of a {@linkplain BigInt64WasmArray}.\n */\nexport function createBigInt64WasmArray(space, length) { \n    return createWasmArray(space, length, BigInt64WasmArray); \n}\n\n/**\n * Create a {@linkplain Float32WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Float32WasmArray} Instance of a {@linkplain Float32WasmArray}.\n */\nexport function createFloat32WasmArray(space, length) { \n    return createWasmArray(space, length, Float32WasmArray); \n}\n\n/**\n * Create a {@linkplain Float64WasmArray}.\n *\n * @param {number} space - Identifier for the Wasm memory space, produced by {@linkcode register}.\n * @param {number} length - Length of the array to allocate.\n * \n * @return {Float64WasmArray} Instance of a {@linkplain Float64WasmArray}.\n */\nexport function createFloat64WasmArray(space, length) { \n    return createWasmArray(space, length, Float64WasmArray); \n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [691,450], () => (__webpack_require__(5814)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and chunks that the entrypoint depends on\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"120\":\"568b3440\",\"450\":\"4145df50\",\"691\":\"9a33b0ff\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and chunks that the entrypoint depends on\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/kana/\";","__webpack_require__.b = self.location + \"/../../../\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t814: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkkana\"] = self[\"webpackChunkkana\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([\n\t\t__webpack_require__.e(691),\n\t\t__webpack_require__.e(450)\n\t]).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["Uint8WasmArray","WasmArray","array","Uint8Array","buffer","this","space","offset","length","_defineProperty","Int8WasmArray","Int8Array","Uint16WasmArray","Uint16Array","Int16WasmArray","Int16Array","Uint32WasmArray","Uint32Array","Int32WasmArray","Int32Array","BigUint64WasmArray","BigUint64Array","BigInt64WasmArray","BigInt64Array","Float32WasmArray","Float32Array","Float64WasmArray","Float64Array","choices","stringToClass","name","Error","_id","WeakMap","_status","_coordinates","TsneStatus","constructor","id","raw_status","raw_coordinates","_classPrivateFieldInitSpec","_classPrivateFieldSet","clone","gc","module","_classPrivateFieldGet","deepcopy","numberOfCells","num_observations","iterations","extractCoordinates","utils","run","options","arguments","undefined","maxIterations","runTime","others","_objectWithoutProperties","_excluded","wasm","run_tsne","free","initializeTsne","x","perplexity","neighbors","numberOfThreads","_excluded2","my_nnres","raw_coords","output","nthreads","k","perplexity_to_k","perplexityToNeighbors","nnres","BuildNeighborSearchIndexResults","findNearestNeighbors","numberOfNeighbors","console","warn","randomize_tsne_start","initialize_tsne","results","e","loaded","cache","init_changed","init_parameters","run_parameters","dead","rerun","animate","init","delay","vizutils","current_status","xy","aworkers","y","final","msg","data","cmd","scran","scranOptions","then","catch","error","new_neighbors","init_args","params","run_args","info","slice","transfer","JSON","stringify","createInt32WasmArray","wa","wasmArraySpace","createFloat64WasmArray","wasmifyArray","expected","className","owner","view","chooseNumberOfThreads","threads","maximumThreads","extractXY","ncells","coordinates","i","possibleCopy","copy","view_class","replace","byteOffset","checkOtherOptions","key","Object","keys","createWasmArray","arrayClass","allocate","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","m","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","d","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","b","self","location","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","push","bind","moreModules","runtime","pop","next"],"sourceRoot":""}