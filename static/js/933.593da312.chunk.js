(()=>{"use strict";var r={1933:(r,e,t)=>{var a,i=t(5831),n=t(7891),s=t(498),o=t(3143),l={},u=!1,d={},c={},h=!1;function p(r){var e=s.Z(r),t=l.init.clone();try{for(l.total=t.totalEpochs();t.currentEpoch()<l.total;)if(i.q7(t,{runTime:e}),r){var a=t.extractCoordinates();o.b({type:"umap_iter",x:a.x,y:a.y,iteration:t.currentEpoch()},[a.x.buffer,a.y.buffer])}l.final=t.extractCoordinates()}finally{t.free()}}o.j((r=>{var e=r.data.id;h?o.b({id:e,type:"error",error:"UMAP worker is dead and cannot process messages"}):"INIT"==r.data.cmd?(a=i.j2(r.data.scranOptions)).then((r=>{o.b({id:e,type:"init_worker",data:{status:"SUCCESS"}})})).catch((r=>{o.b({id:e,type:"error",error:r})})):"RUN"==r.data.cmd?a.then((t=>{var a;"neighbors"in r.data?(n.Yl(l.neighbors),l.neighbors=s.q(r.data.neighbors),a=!0):a=!1;var h={min_dist:r.data.params.min_dist,num_epochs:r.data.params.num_epochs};a||n.xi(h,d)?(n.Yl(l.init),l.init=i.fD(l.neighbors,{epochs:h.num_epochs,minDist:h.min_dist}),d=h,u=!0):u=!1;var f={};(u||n.xi(f,c))&&(p(r.data.params.animate),c=f),o.b({id:e,type:"umap_run",data:{status:"SUCCESS"}})})).catch((r=>{o.b({id:e,type:"error",error:r})})):"RERUN"==r.data.cmd?a.then((r=>{p(!0),o.b({id:e,type:"umap_rerun",data:{status:"SUCCESS"}})})).catch((r=>{o.b({id:e,type:"error",error:r})})):"FETCH"==r.data.cmd?a.then((r=>{var t={x:l.final.x.slice(),y:l.final.y.slice(),iterations:l.total},a=[t.x.buffer,t.y.buffer];o.b({id:e,type:"umap_fetch",data:t},a)})).catch((r=>{o.b({id:e,type:"error",error:r})})):"KILL"==r.data.cmd?(h=!0,a.then((r=>{i.RA(),o.b({id:e,type:"umap_killed",data:null})})).catch((r=>{o.b({id:e,type:"error",error:r})}))):o.b({id:e,type:"error",error:"unknown message type '"+JSON.stringify(r.data)+"'"})}))},5831:(r,e,t)=>{t.d(e,{RA:()=>a.RA,RJ:()=>i.RJ,Wf:()=>i.Wf,fD:()=>s.fD,gd:()=>i.gd,j2:()=>a.j2,q7:()=>s.q7,qv:()=>n.qv});var a=t(8782),i=t(6635),n=(t(8311),t(6663),t(489),t(6126),t(118),t(5644),t(4292),t(5470),t(1196),t(5219),t(5448),t(9206),t(2945),t(7339),t(6757),t(4609),t(8420),t(845),t(9283),t(6974),t(1184),t(4812),t(6199),t(5159),t(7067)),s=(t(9273),t(4181),t(5319));t(2494),t(5696),t(2732),t(9249),t(3779),t(7039),t(5538),t(7644),t(6961),t(2306),t(4021),t(4755)},4181:(r,e,t)=>{t(6635),t(8782),t(7108),t(7067)},5319:(r,e,t)=>{t.d(e,{fD:()=>f,q7:()=>m});var a=t(2346),i=t(8916),n=t(2793),s=t(6635),o=t(8782),l=t(7108),u=t(7067),d=new WeakMap,c=new WeakMap,h=new WeakMap;class p{constructor(r,e,t){(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,d,r),(0,n.Z)(this,c,e),(0,n.Z)(this,h,t)}get status(){return(0,i.Z)(this,c)}get coordinates(){return(0,i.Z)(this,h)}clone(){return l.R((r=>(0,i.Z)(this,c).deepcopy()),p,(0,i.Z)(this,h).clone())}numberOfCells(){return(0,i.Z)(this,c).num_obs()}currentEpoch(){return(0,i.Z)(this,c).epoch()}totalEpochs(){return(0,i.Z)(this,c).num_epochs()}extractCoordinates(){return s.ab(this.numberOfCells(),(0,i.Z)(this,h).array())}free(){null!==(0,i.Z)(this,c)&&(l.A((0,i.Z)(this,d)),(0,n.Z)(this,c,null)),null!==(0,i.Z)(this,h)&&((0,i.Z)(this,h).free(),(0,n.Z)(this,h,null))}}function f(r){let{neighbors:e=15,epochs:t=500,minDist:a=.01,numberOfThreads:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,o,d;let c=s.mV(i);try{let i;r instanceof u.ZF?(n=(0,u.wf)(r,e,{numberOfThreads:c}),i=n):i=r,o=s.RJ(2*i.numberOfCells()),d=l.R((r=>r.initialize_umap(i.results,t,a,o.offset,c)),p,o)}catch(h){throw s.gd(d),s.gd(o),h}finally{s.gd(n)}return d}function m(r){let{runTime:e=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===e&&(e=-1),o.RE((t=>t.run_umap(r.status,e,r.coordinates.offset)))}}},e={};function t(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return r[a](n,n.exports,t),n.exports}t.m=r,t.x=()=>{var r=t.O(void 0,[86,525],(()=>t(1933)));return r=t.O(r)},(()=>{var r=[];t.O=(e,a,i,n)=>{if(!a){var s=1/0;for(d=0;d<r.length;d++){a=r[d][0],i=r[d][1],n=r[d][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(t.O).every((r=>t.O[r](a[l])))?a.splice(l--,1):(o=!1,n<s&&(s=n));if(o){r.splice(d--,1);var u=i();void 0!==u&&(e=u)}}return e}n=n||0;for(var d=r.length;d>0&&r[d-1][2]>n;d--)r[d]=r[d-1];r[d]=[a,i,n]}})(),t.d=(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},t.f={},t.e=r=>Promise.all(Object.keys(t.f).reduce(((e,a)=>(t.f[a](r,e),e)),[])),t.u=r=>"static/js/"+r+"."+{86:"ac3d5bbd",525:"a985dee2",909:"5e5ec0f8"}[r]+".chunk.js",t.miniCssF=r=>{},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),t.p="/kana/",(()=>{t.b=self.location+"/../../../";var r={933:1};t.f.i=(e,a)=>{r[e]||importScripts(t.p+t.u(e))};var e=self.webpackChunkkana=self.webpackChunkkana||[],a=e.push.bind(e);e.push=e=>{var i=e[0],n=e[1],s=e[2];for(var o in n)t.o(n,o)&&(t.m[o]=n[o]);for(s&&s(t);i.length;)r[i.pop()]=1;a(e)}})(),(()=>{var r=t.x;t.x=()=>Promise.all([t.e(86),t.e(525)]).then(r)})();t.x()})();
//# sourceMappingURL=933.593da312.chunk.js.map