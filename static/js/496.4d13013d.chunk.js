/*! For license information please see 496.4d13013d.chunk.js.LICENSE.txt */
(self.webpackChunkkana=self.webpackChunkkana||[]).push([[496],{1025:function(e,t){var r,n,s;n=[],r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,s={},i=0,a={parse:function(r,n){var l=(n=n||{}).dynamicTyping||!1;if(v(l)&&(n.dynamicTypingFunction=l,l={}),n.dynamicTyping=l,n.transform=!!v(n.transform)&&n.transform,n.worker&&a.WORKERS_SUPPORTED){var o=function(){if(!a.WORKERS_SUPPORTED)return!1;var r,n,l=(r=t.URL||t.webkitURL||null,n=e.toString(),a.BLOB_URL||(a.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),o=new t.Worker(l);return o.onmessage=p,o.id=i++,s[o.id]=o}();return o.userStep=n.step,o.userChunk=n.chunk,o.userComplete=n.complete,o.userError=n.error,n.step=v(n.step),n.chunk=v(n.chunk),n.complete=v(n.complete),n.error=v(n.error),delete n.worker,void o.postMessage({input:r,config:n,workerId:o.id})}var d=null;return a.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),d=n.download?new h(n):new c(n)):!0===r.readable&&v(r.read)&&v(r.on)?d=new f(n):(t.File&&r instanceof File||r instanceof Object)&&(d=new u(n)),d.stream(r)},unparse:function(e,t){var r=!1,n=!0,s=",",i="\r\n",l='"',o=l+l,h=!1,u=null,c=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(s=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(h=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(l=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(o=t.escapeChar+l),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(c=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(m(l),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,h);if("object"==typeof e[0])return d(u||Object.keys(e[0]),e,h)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],h);throw new Error("Unable to serialize unrecognized input");function d(e,t,r){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var l=Array.isArray(e)&&0<e.length,o=!Array.isArray(t[0]);if(l&&n){for(var h=0;h<e.length;h++)0<h&&(a+=s),a+=w(e[h],h);0<t.length&&(a+=i)}for(var u=0;u<t.length;u++){var c=l?e.length:t[u].length,f=!1,d=l?0===Object.keys(t[u]).length:0===t[u].length;if(r&&!l&&(f="greedy"===r?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===r&&l){for(var m=[],p=0;p<c;p++){var g=o?e[p]:p;m.push(t[u][g])}f=""===m.join("").trim()}if(!f){for(var Z=0;Z<c;Z++){0<Z&&!d&&(a+=s);var _=l&&o?e[Z]:Z;a+=w(t[u][_],Z)}u<t.length-1&&(!r||0<c&&!d)&&(a+=i)}}return a}function w(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;c&&"string"==typeof e&&c.test(e)&&(e="'"+e,n=!0);var i=e.toString().replace(f,o);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(i,a.BAD_DELIMITERS)||-1<i.indexOf(s)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?l+i+l:i}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=w,a.ParserHandle=d,a.NetworkStreamer=h,a.FileStreamer=u,a.StringStreamer=c,a.ReadableStreamStreamer=f,t.jQuery){var l=t.jQuery;l.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==l(this).prop("tagName").toUpperCase()||"file"!==l(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var s=0;s<this.files.length;s++)n.push({file:this.files[s],inputElem:this,instanceConfig:l.extend({},r)})})),s(),this;function s(){if(0!==n.length){var t,r,s,o,h=n[0];if(v(e.before)){var u=e.before(h.file,h.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",r=h.file,s=h.inputElem,o=u.reason,void(v(e.error)&&e.error({name:t},r,s,o));if("skip"===u.action)return void i();"object"==typeof u.config&&(h.instanceConfig=l.extend(h.instanceConfig,u.config))}else if("skip"===u)return void i()}var c=h.instanceConfig.complete;h.instanceConfig.complete=function(e){v(c)&&c(e,h.file,h.inputElem),i()},a.parse(h.file,h.instanceConfig)}else v(e.complete)&&e.complete()}function i(){n.splice(0,1),s()}}}function o(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new d(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var s=this._config.beforeFirstChunk(e);void 0!==s&&(e=s)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var l=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=l.meta.cursor;this._finished||(this._partialLine=i.substring(o-this._baseIndex),this._baseIndex=o),l&&l.data&&(this._rowCount+=l.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:l,workerId:a.WORKER_ID,finished:h});else if(v(this._config.chunk)&&!r){if(this._config.chunk(l,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);l=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(l.data),this._completeResults.errors=this._completeResults.errors.concat(l.errors),this._completeResults.meta=l.meta),this._completed||!h||!v(this._config.complete)||l&&l.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||l&&l.meta.paused||this._nextChunk(),l}this._halted=!0},this._sendError=function(e){v(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function h(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),o.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+s)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function u(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),o.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var s=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,s)}var i=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function c(e){var t;o.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){o.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){o.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){o.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=b((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=b((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=b((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(e){var t,r,n,s=Math.pow(2,53),i=-s,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,o=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,u=0,c=0,f=!1,d=!1,p=[],g={data:[],errors:[],meta:{}};if(v(e.step)){var Z=e.step;e.step=function(t){if(g=t,k())y();else{if(y(),0===g.data.length)return;u+=t.data.length,e.preview&&u>e.preview?r.abort():(g.data=g.data[0],Z(g,h))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function y(){return g&&n&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(g.data=g.data.filter((function(e){return!b(e)}))),k()&&function(){if(g)if(Array.isArray(g.data[0])){for(var t=0;k()&&t<g.data.length;t++)g.data[t].forEach(r);g.data.splice(0,1)}else g.data.forEach(r);function r(t,r){v(e.transformHeader)&&(t=e.transformHeader(t,r)),p.push(t)}}(),function(){if(!g||!e.header&&!e.dynamicTyping&&!e.transform)return g;function t(t,r){var n,s=e.header?{}:[];for(n=0;n<t.length;n++){var i=n,a=t[n];e.header&&(i=n>=p.length?"__parsed_extra":p[n]),e.transform&&(a=e.transform(a,i)),a=E(i,a),"__parsed_extra"===i?(s[i]=s[i]||[],s[i].push(a)):s[i]=a}return e.header&&(n>p.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+n,c+r):n<p.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+n,c+r)),s}var r=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(t),r=g.data.length):g.data=t(g.data,0),e.header&&g.meta&&(g.meta.fields=p),c+=r,g}()}function k(){return e.header&&0===p.length}function E(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(l.test(e)){var t=parseFloat(e);if(i<t&&t<s)return!0}return!1}(r)?parseFloat(r):o.test(r)?new Date(r):""===r?null:r):r;var n}function O(e,t,r,n){var s={type:e,code:t,message:r};void 0!==n&&(s.row=n),g.errors.push(s)}this.parse=function(s,i,l){var o=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),n=(e=e.replace(r,"")).split("\r"),s=e.split("\n"),i=1<s.length&&s[0].length<n[0].length;if(1===n.length||i)return"\n";for(var a=0,l=0;l<n.length;l++)"\n"===n[l][0]&&a++;return a>=n.length/2?"\r\n":"\r"}(s,o)),n=!1,e.delimiter)v(e.delimiter)&&(e.delimiter=e.delimiter(s),g.meta.delimiter=e.delimiter);else{var h=function(t,r,n,s,i){var l,o,h,u;i=i||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var c=0;c<i.length;c++){var f=i[c],d=0,m=0,p=0;h=void 0;for(var g=new w({comments:s,delimiter:f,newline:r,preview:10}).parse(t),Z=0;Z<g.data.length;Z++)if(n&&b(g.data[Z]))p++;else{var _=g.data[Z].length;m+=_,void 0!==h?0<_&&(d+=Math.abs(_-h),h=_):h=_}0<g.data.length&&(m/=g.data.length-p),(void 0===o||d<=o)&&(void 0===u||u<m)&&1.99<m&&(o=d,l=f,u=m)}return{successful:!!(e.delimiter=l),bestDelimiter:l}}(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);h.successful?e.delimiter=h.bestDelimiter:(n=!0,e.delimiter=a.DefaultDelimiter),g.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=s,r=new w(u),g=r.parse(t,i,l),y(),f?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,r.abort(),t=v(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){h.streamer._halted?(f=!1,h.streamer.parseChunk(t,!0)):setTimeout(h.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),g.meta.aborted=!0,v(e.complete)&&e.complete(g),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(e){var t,r=(e=e||{}).delimiter,n=e.newline,s=e.comments,i=e.step,l=e.preview,o=e.fastMode,h=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(h=e.escapeChar),("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=","),s===r)throw new Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||-1<a.BAD_DELIMITERS.indexOf(s))&&(s=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var u=0,c=!1;this.parse=function(a,f,d){if("string"!=typeof a)throw new Error("Input must be a string");var w=a.length,p=r.length,g=n.length,Z=s.length,_=v(i),b=[],y=[],k=[],E=u=0;if(!a)return V();if(e.header&&!f){var O=a.split(n)[0].split(r),C=[],R={},M=!1;for(var x in O){var N=O[x];v(e.transformHeader)&&(N=e.transformHeader(N,x));var S=N,A=R[N]||0;for(0<A&&(M=!0,S=N+"_"+A),R[N]=A+1;C.includes(S);)S=S+"_"+A;C.push(S)}if(M){var W=a.split(n);W[0]=C.join(r),a=W.join(n)}}if(o||!1!==o&&-1===a.indexOf(t)){for(var I=a.split(n),j=0;j<I.length;j++){if(k=I[j],u+=k.length,j!==I.length-1)u+=n.length;else if(d)return V();if(!s||k.substring(0,Z)!==s){if(_){if(b=[],B(k.split(r)),U(),c)return V()}else B(k.split(r));if(l&&l<=j)return b=b.slice(0,l),V(!0)}}return V()}for(var D=a.indexOf(r,u),F=a.indexOf(n,u),P=new RegExp(m(h)+m(t),"g"),z=a.indexOf(t,u);;)if(a[u]!==t)if(s&&0===k.length&&a.substring(u,u+Z)===s){if(-1===F)return V();u=F+g,F=a.indexOf(n,u),D=a.indexOf(r,u)}else if(-1!==D&&(D<F||-1===F))k.push(a.substring(u,D)),u=D+p,D=a.indexOf(r,u);else{if(-1===F)break;if(k.push(a.substring(u,F)),G(F+g),_&&(U(),c))return V();if(l&&b.length>=l)return V(!0)}else for(z=u,u++;;){if(-1===(z=a.indexOf(t,z+1)))return d||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),q();if(z===w-1)return q(a.substring(u,z).replace(P,t));if(t!==h||a[z+1]!==h){if(t===h||0===z||a[z-1]!==h){-1!==D&&D<z+1&&(D=a.indexOf(r,z+1)),-1!==F&&F<z+1&&(F=a.indexOf(n,z+1));var T=Y(-1===F?D:Math.min(D,F));if(a.substr(z+1+T,p)===r){k.push(a.substring(u,z).replace(P,t)),a[u=z+1+T+p]!==t&&(z=a.indexOf(t,u)),D=a.indexOf(r,u),F=a.indexOf(n,u);break}var L=Y(F);if(a.substring(z+1+L,z+1+L+g)===n){if(k.push(a.substring(u,z).replace(P,t)),G(z+1+L+g),D=a.indexOf(r,u),z=a.indexOf(t,u),_&&(U(),c))return V();if(l&&b.length>=l)return V(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),z++}}else z++}return q();function B(e){b.push(e),E=u}function Y(e){var t=0;if(-1!==e){var r=a.substring(z+1,e);r&&""===r.trim()&&(t=r.length)}return t}function q(e){return d||(void 0===e&&(e=a.substring(u)),k.push(e),u=w,B(k),_&&U()),V()}function G(e){u=e,B(k),k=[],F=a.indexOf(n,u)}function V(e){return{data:b,errors:y,meta:{delimiter:r,linebreak:n,aborted:c,truncated:!!e,cursor:E+(f||0)}}}function U(){i(V()),b=[],y=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function p(e){var t=e.data,r=s[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){n=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Z,resume:Z};if(v(r.userStep)){for(var a=0;a<t.results.data.length&&(r.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!n);a++);delete t.results}else v(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!n&&g(t.workerId,t.results)}function g(e,t){var r=s[e];v(r.userComplete)&&r.userComplete(t),r.terminate(),delete s[e]}function Z(){throw new Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=_(e[r]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function v(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===a.WORKER_ID&&r&&(a.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=a.parse(r.input,r.config);n&&t.postMessage({workerId:a.WORKER_ID,results:n,finished:!0})}}),(h.prototype=Object.create(o.prototype)).constructor=h,(u.prototype=Object.create(o.prototype)).constructor=u,(c.prototype=Object.create(c.prototype)).constructor=c,(f.prototype=Object.create(o.prototype)).constructor=f,a},void 0===(s="function"===typeof r?r.apply(t,n):r)||(e.exports=s)},3841:function(e,t,r){e=r.nmd(e),function(r,n){var s=function(){var e=null,t={};w();var r=[],n=function(t){if(void 0!==(t=t||{}).seed&&null!==t.seed&&t.seed===parseInt(t.seed,10))e=t.seed;else if("string"===typeof t.seed)e=_(t.seed);else{if(void 0!==t.seed&&null!==t.seed)throw new TypeError("The seed value must be an integer or string");e=null}var o,h;if(null!==t.count&&void 0!==t.count){for(var u=t.count,c=[],f=0;f<t.count;f++)r.push(!1);for(t.count=null;u>c.length;){var d=n(t);null!==e&&(t.seed=e),c.push(d)}return t.count=u,c}return l([o=s(t),h=i(o,t),a(o,h,t)],t)};function s(e){if(r.length>0){var t=f(i=b(e.hue)),n=(i[1]-i[0])/r.length,s=parseInt((t-i[0])/n);return!0===r[s]?s=(s+2)%r.length:r[s]=!0,(t=f(i=[(i[0]+s*n)%359,(i[0]+(s+1)*n)%359]))<0&&(t=360+t),t}var i;return(t=f(i=h(e.hue)))<0&&(t=360+t),t}function i(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return f([0,100]);var r=u(e),n=r[0],s=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=s-10;break;case"light":s=55}return f([n,s])}function a(e,t,r){var n=o(e,t),s=100;switch(r.luminosity){case"dark":s=n+20;break;case"light":n=(s+n)/2;break;case"random":n=0,s=100}return f([n,s])}function l(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return Z(e);case"hsl":var r=Z(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=Z(e),s=t.alpha||Math.random();return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+s+")";case"rgbArray":return p(e);case"rgb":return"rgb("+p(e).join(", ")+")";case"rgba":var i=p(e);s=t.alpha||Math.random();return"rgba("+i.join(", ")+", "+s+")";default:return d(e)}}function o(e,t){for(var r=c(e).lowerBounds,n=0;n<r.length-1;n++){var s=r[n][0],i=r[n][1],a=r[n+1][0],l=r[n+1][1];if(t>=s&&t<=a){var o=(l-i)/(a-s);return o*t+(i-o*s)}}return 0}function h(e){if("number"===typeof parseInt(e)){var r=parseInt(e);if(r<360&&r>0)return[r,r]}if("string"===typeof e)if(t[e]){var n=t[e];if(n.hueRange)return n.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var s=g(e)[0];return[s,s]}return[0,360]}function u(e){return c(e).saturationRange}function c(e){for(var r in e>=334&&e<=360&&(e-=360),t){var n=t[r];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return t[r]}return"Color not found"}function f(t){if(null===e){var r=.618033988749895,n=Math.random();return n+=r,n%=1,Math.floor(t[0]+n*(t[1]+1-t[0]))}var s=t[1]||1,i=t[0]||0,a=(e=(9301*e+49297)%233280)/233280;return Math.floor(i+a*(s-i))}function d(e){var t=p(e);function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t[0])+r(t[1])+r(t[2])}function m(e,r,n){var s=n[0][0],i=n[n.length-1][0],a=n[n.length-1][1],l=n[0][1];t[e]={hueRange:r,lowerBounds:n,saturationRange:[s,i],brightnessRange:[a,l]}}function w(){m("monochrome",null,[[0,0],[100,0]]),m("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),m("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),m("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),m("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),m("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),m("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),m("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function p(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var r=e[1]/100,n=e[2]/100,s=Math.floor(6*t),i=6*t-s,a=n*(1-r),l=n*(1-i*r),o=n*(1-(1-i)*r),h=256,u=256,c=256;switch(s){case 0:h=n,u=o,c=a;break;case 1:h=l,u=n,c=a;break;case 2:h=a,u=n,c=o;break;case 3:h=a,u=l,c=n;break;case 4:h=o,u=a,c=n;break;case 5:h=n,u=a,c=l}return[Math.floor(255*h),Math.floor(255*u),Math.floor(255*c)]}function g(e){e=3===(e=e.replace(/^#/,"")).length?e.replace(/(.)/g,"$1$1"):e;var t=parseInt(e.substr(0,2),16)/255,r=parseInt(e.substr(2,2),16)/255,n=parseInt(e.substr(4,2),16)/255,s=Math.max(t,r,n),i=s-Math.min(t,r,n),a=s?i/s:0;switch(s){case t:return[(r-n)/i%6*60||0,a,s];case r:return[60*((n-t)/i+2)||0,a,s];case n:return[60*((t-r)/i+4)||0,a,s]}}function Z(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=(2-r)*n;return[t,Math.round(r*n/(s<1?s:2-s)*1e4)/100,s/2*100]}function _(e){for(var t=0,r=0;r!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);r++)t+=e.charCodeAt(r);return t}function b(e){if(isNaN(e)){if("string"===typeof e)if(t[e]){var r=t[e];if(r.hueRange)return r.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){return c(g(e)[0]).hueRange}}else{var n=parseInt(e);if(n<360&&n>0)return c(e).hueRange}return[0,360]}return n}();e&&e.exports&&(t=e.exports=s),t.randomColor=s}()},8662:(e,t,r)=>{"use strict";function n(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}r.d(t,{Z:()=>n})},9902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6983),s=r(9730),i=r(8662);function a(e,t,r){return(0,s.Z)(e,t),(0,i.Z)(r,"get"),(0,n.Z)(e,r)}},3966:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6011),s=r(9730),i=r(8662);function a(e,t,r,a){return(0,s.Z)(e,t),(0,i.Z)(r,"set"),(0,n.Z)(e,r,a),a}},5471:(e,t,r)=>{"use strict";r.d(t,{M:()=>N});var n,s=r(101),i=r(2346),a=r(3889),l=r(8916),o=r(2793),h=r(3966),u=r(9902),c=r(5831),f=r(6474),d=r(797);function m(e,t){return t?f.bl(e):e}const w="https://experimenthub.bioconductor.org/fetch",p={"zeisel-brain":{counts:"2596",coldata:"2598",rowdata:"2597"},"segerstolpe-pancreas":{counts:"2591",coldata:"2593",rowdata:"2592"},"nestorowa-hsc":{counts:"2710",ncol:1920},"aztekin-tail":{counts:"3124",coldata:"3125"},"wu-kidney":{counts:"3594",coldata:"3595"},"zilionis-mouse-lung":{counts:"3478",coldata:"3479"}};function g(e,t,r){if(!(e instanceof c.BA))throw new Error("expected an S4 object");for(const[n,s]of Object.entries(t))if(e.className()==n&&e.packageName()==s)return;throw new Error("object is not a "+r+" or one of its recognized subclasses")}function Z(e,t){let r=function(e){let t,r,n=e.findAttribute("names");if(n<0)return null;try{t=e.attribute(n),r=t.values()}catch(s){throw new Error("failed to load listData names; "+s.message)}finally{c.gd(t)}if(r.length!=e.length())throw new Error("expected names to have same length as listData");return r}(e);if(null==r)throw new Error("expected the listData list to be named");let n={};for(var s=0;s<e.length();s++){let i;try{if(i=e.load(s),i instanceof c.qu&&!(i instanceof c.SV)){let e=i.values();n[r[s]]=e,t.nrow=e.length}}finally{c.gd(i)}}t.columns=n}function _(e){let t,r={};if("S4"==e.type()){let t;g(e,{DFrame:"S4Vectors",DataFrame:"S4Vectors"},"DFrame");try{if(t=e.attribute("listData"),!(t instanceof c.SV))throw new Error("listData slot should be a generic list");Z(t,r)}catch(n){throw new Error("failed to retrieve data from DataFrame's listData; "+n.message)}finally{c.gd(t)}}else{if("vector"!=e.type())throw new Error("expected a data.frame or DataFrame instance");Z(e,r)}try{let n=e.findAttribute("rownames");n>=0&&(t=e.attribute(n),t instanceof c.II&&(r.row_names=t.values(),r.nrow=r.row_names.length))}catch(n){throw new Error("failed to retrieve row names from DataFrame; "+n.message)}finally{c.gd(t)}if(!("nrow"in r)){let t;try{if(t=e.attribute("nrows"),!(t instanceof c.D6))throw new Error("expected an integer vector as the 'nrows' slot");let n=t.values();if(1!=n.length)throw new Error("expected an integer vector of length 1 as the 'nrows' slot");r.nrow=n[0]}catch(n){throw new Error("failed to retrieve nrows from DataFrame; "+n.message)}finally{c.gd(t)}}return r}var b=new WeakMap,v=new WeakMap,y=new WeakMap,k=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakSet,R=new WeakSet,M=new WeakSet,x=new WeakSet;class N{static setDownloadFun(e){let t=(0,u.Z)(N,N,j);return(0,h.Z)(N,N,j,e),t}static availableDatasets(){return Object.keys(p)}constructor(e){if((0,s.Z)(this,x),(0,s.Z)(this,M),(0,s.Z)(this,R),(0,s.Z)(this,C),(0,i.Z)(this,b,{writable:!0,value:void 0}),(0,i.Z)(this,v,{writable:!0,value:void 0}),(0,i.Z)(this,y,{writable:!0,value:void 0}),(0,i.Z)(this,k,{writable:!0,value:void 0}),(0,i.Z)(this,E,{writable:!0,value:void 0}),(0,i.Z)(this,O,{writable:!0,value:void 0}),(0,o.Z)(this,b,e),!((0,l.Z)(this,b)in p))throw new Error("unrecognized identifier '"+(0,l.Z)(this,b)+"' for ExperimentHub-based datasets");(0,o.Z)(this,O,N.defaults()),this.clear()}static defaults(){return{primaryRnaFeatureIdColumn:0}}options(){return{...(0,l.Z)(this,O)}}setOptions(e){for(const[t,r]of Object.entries(e))(0,l.Z)(this,O)[t]=r}static format(){return"ExperimentHub"}clear(){c.gd((0,l.Z)(this,k)),c.gd((0,l.Z)(this,E)),(0,o.Z)(this,k,null),(0,o.Z)(this,E,null),(0,o.Z)(this,v,null),(0,o.Z)(this,y,null)}abbreviate(){return{id:(0,l.Z)(this,b),options:this.options()}}async summary(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,a.Z)(this,R,A).call(this),await(0,a.Z)(this,M,W).call(this);let t={cells:m((0,l.Z)(this,y),e)},r=m((0,l.Z)(this,v),e);return t.modality_features={RNA:r},e||this.clear(),t}async previewPrimaryIds(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,a.Z)(this,R,A).call(this);let t=(0,a.Z)(this,x,I).call(this,(0,l.Z)(this,v));return e||this.clear(),t}async load(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,a.Z)(this,R,A).call(this),await(0,a.Z)(this,M,W).call(this),await(0,a.Z)(this,C,S).call(this);let t={cells:m((0,l.Z)(this,y),e)};p[(0,l.Z)(this,b)];try{t.matrix=new c.VU;let r=c.Bp((0,l.Z)(this,k),{consume:!e});t.matrix.add("RNA",r.matrix),t.row_ids={RNA:r.row_ids};let n=f.Nd((0,l.Z)(this,v),r.row_ids);t.features={RNA:n}}catch(r){throw c.gd(t.matrix),r}return t.primary_ids=(0,a.Z)(this,x,I).call(this,t.features.RNA),e||this.clear(),t}serialize(){let e=(new TextEncoder).encode((0,l.Z)(this,b));return{files:[{type:"id",file:new d.zD(e,{name:"id"})}],options:this.options()}}static unserialize(e,t){let r={};for(const n of e){const e=new TextDecoder;r[n.type]=e.decode(n.file.buffer())}if(!("id"in r))throw new Error("expected a file of type 'id' when unserializing ExperimentHub dataset");return new N(r.id,t)}}async function S(){if(null!==(0,l.Z)(this,k))return;let e=p[(0,l.Z)(this,b)],t=await(0,u.Z)(n,n,j).call(n,w+"/"+e.counts);try{(0,o.Z)(this,E,c.p$(t)),(0,o.Z)(this,k,(0,l.Z)(this,E).value())}catch(r){throw c.gd((0,l.Z)(this,k)),c.gd((0,l.Z)(this,E)),r}}async function A(){if(null!==(0,l.Z)(this,v))return;let e=p[(0,l.Z)(this,b)];if("rowdata"in e){let t,r,s=await(0,u.Z)(n,n,j).call(n,w+"/"+e.rowdata);try{t=c.p$(s),r=t.value();let e=_(r),n=e.row_names,i={};n&&(i.id=n);for(const[t,r]of Object.entries(e.columns))t.match(/^sym/)&&(i[t]=r);if(0==Object.keys(i).length)throw new Error("no acceptable feature identifiers found in the rowData DataFrame");(0,o.Z)(this,v,new f.NE(i))}finally{c.gd(r),c.gd(t)}return}await(0,a.Z)(this,C,S).call(this);let t=function(e){let t,r,n,s;if("S4"==e.type()?(g(e,{dgCMatrix:"Matrix",dgTMatrix:"Matrix"},"Matrix"),t=e.findAttribute("Dimnames")):t=e.findAttribute("dimnames"),t<0)throw new Error("count matrix does not have dimnames");try{if(r=e.attribute(t),"vector"!=r.type()&&2!=r.size())throw new Error("dimnames of the count matrix should be a list of length 2");if(n=r.load(0),"string"!=n.type())throw new Error("expected a character vector in the first dimnames");s=n.values()}finally{c.gd(r),c.gd(n)}return s}((0,l.Z)(this,k));(0,o.Z)(this,v,new f.NE({id:t}))}async function W(){if(null!==(0,l.Z)(this,y))return;let e=p[(0,l.Z)(this,b)];if("coldata"in e){let t,r,s,i=await(0,u.Z)(n,n,j).call(n,w+"/"+e.coldata);try{t=c.p$(i),r=t.value(),s=_(r)}finally{c.gd(r),c.gd(t)}(0,o.Z)(this,y,new f.NE(s.columns,{numberOfRows:s.nrow}))}else(0,o.Z)(this,y,new f.NE({},{numberOfRows:e.ncol}))}function I(e){let t=(0,l.Z)(this,O).primaryRnaFeatureIdColumn;return"string"==typeof t&&e.hasColumn(t)||"number"==typeof t&&t<e.numberOfColumns()?{RNA:e.column(t)}:{RNA:e.rowNames()}}n=N;var j={writable:!0,value:async e=>{let t=await fetch(e);if(!t.ok)throw new Error("failed to fetch content at "+e+" ("+t.status+")");return new Uint8Array(await t.arrayBuffer())}};Error;d.GY},1408:(e,t,r)=>{"use strict";r(6207),r(5831)},5563:(e,t,r)=>{"use strict";r(5831)},6207:(e,t,r)=>{"use strict";r(5563),r(5831),r(714)},2152:(e,t,r)=>{"use strict";r.d(t,{B:()=>O});var n=r(101),s=r(2346),i=r(3889),a=r(2793),l=r(8916),o=r(5831),h=r(6474),u=r(6016),c=r(6180),f=r(3121),d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakMap,_=new WeakSet,b=new WeakSet,v=new WeakSet,y=new WeakSet,k=new WeakSet,E=new WeakSet;class O{constructor(e){(0,n.Z)(this,E),(0,n.Z)(this,k),(0,n.Z)(this,y),(0,n.Z)(this,v),(0,n.Z)(this,b),(0,n.Z)(this,_),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),(0,s.Z)(this,Z,{writable:!0,value:void 0}),e instanceof u.z?(0,a.Z)(this,d,e):(0,a.Z)(this,d,new u.z(e)),(0,a.Z)(this,Z,O.defaults()),this.clear()}static defaults(){return{featureTypeRnaName:"Gene Expression",featureTypeAdtName:"Antibody Capture",featureTypeCrisprName:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:0,primaryAdtFeatureIdColumn:0,primaryCrisprFeatureIdColumn:0}}options(){return{...(0,l.Z)(this,Z)}}setOptions(e){for(const[t,r]of Object.entries(e))(0,l.Z)(this,Z)[t]=r}clear(){"function"==typeof(0,l.Z)(this,w)&&(0,l.Z)(this,w).call(this),(0,a.Z)(this,w,null),(0,a.Z)(this,m,null),(0,a.Z)(this,p,null),(0,a.Z)(this,g,null)}static format(){return"10X"}abbreviate(){return(0,i.Z)(this,_,C).call(this,(e=>({name:e.name(),size:e.size()})))}summary(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,v,M).call(this),(0,i.Z)(this,y,x).call(this);let t={modality_features:f.LR((0,l.Z)(this,p),"type"),cells:(0,l.Z)(this,g)};return e||this.clear(),t}previewPrimaryIds(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,v,M).call(this);let t=f.h8((0,l.Z)(this,p),"type",(0,i.Z)(this,k,N).call(this),"RNA",(0,i.Z)(this,E,S).call(this));return e||this.clear(),t}load(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,v,M).call(this),(0,i.Z)(this,y,x).call(this);let t=o.EF((0,l.Z)(this,m),"matrix"),r=f.Bs(t,(0,l.Z)(this,p),"type",(0,i.Z)(this,k,N).call(this),"RNA");return r.cells=(0,l.Z)(this,g),r.primary_ids=f.P2(r.features,(0,i.Z)(this,E,S).call(this)),e||this.clear(),r}serialize(){return(0,i.Z)(this,_,C).call(this,(e=>e))}static async unserialize(e,t){if(1!=e.length||"h5"!=e[0].type)throw new Error("expected exactly one file of type 'h5' for 10X HDF5 unserialization");let r=new O(e[0].file);return r.setOptions(r),r}}function C(e){return{files:[{type:"h5",file:e((0,l.Z)(this,d))}],options:this.options()}}function R(){if(null!==(0,l.Z)(this,m))return;let e=o.$H((0,l.Z)(this,d).content());(0,a.Z)(this,m,e.path),(0,a.Z)(this,w,e.flush)}function M(){if(null!==(0,l.Z)(this,p))return;(0,i.Z)(this,b,R).call(this);let e=new o.pT((0,l.Z)(this,m));if(!("matrix"in e.children)||"Group"!=e.children.matrix)throw new Error("expected a 'matrix' group at the top level of the file");let t=e.open("matrix");if(!("features"in t.children)||"Group"!=t.children.features)throw new Error("expected a 'matrix/features' group containing the feature annotation");let r=t.open("features"),n=c.vp(r,"id");if(null==n)throw new Error("expected a 'matrix/features/id' string dataset containing the feature IDs");let s=new h.NE({id:n}),u=c.vp(r,"name");null!==u&&s.$setColumn("name",u);let f=c.vp(r,"feature_type");null!==f&&s.$setColumn("type",f),(0,a.Z)(this,p,s)}function x(){if(null!==(0,l.Z)(this,g))return;(0,i.Z)(this,b,R).call(this);let e=o.N6((0,l.Z)(this,m),"matrix");(0,a.Z)(this,g,new h.NE({},{numberOfRows:e.columns}))}function N(){return{RNA:(0,l.Z)(this,Z).featureTypeRnaName,ADT:(0,l.Z)(this,Z).featureTypeAdtName,CRISPR:(0,l.Z)(this,Z).featureTypeCrisprName}}function S(){return{RNA:(0,l.Z)(this,Z).primaryRnaFeatureIdColumn,ADT:(0,l.Z)(this,Z).primaryAdtFeatureIdColumn,CRISPR:(0,l.Z)(this,Z).primaryCrisprFeatureIdColumn}}},5173:(e,t,r)=>{"use strict";r.d(t,{GY:()=>W,Ne:()=>$});var n=r(101),s=r(3889),i=r(2346),a=r(8916),l=r(2793),o=r(5831),h=r(6474),u=r(6180),c=r(3121),f=r(6016);async function d(e,t){"string"==typeof e&&(e=await t.metadata(e));let r,n,s=await t.file(e.path),i=null;if(e.$schema.startsWith("csv_data_frame/")){let t=await u.Lm(s,{delim:","});r=t.shift(),n=new Array(r.length);for(var a=0;a<n.length;a++){let e=[];for(const r of t)e.push(r[a]);n[a]=e}e.data_frame.row_names&&(i=n.shift(),r.shift());for(a=0;a<n.length;a++){let t=e.data_frame.columns[a].type;"integer"==t?n[a]=new Int32Array(n[a]):"number"==t?n[a]=new Float64Array(n[a]):"boolean"==t&&(n[a]=n[a].map((e=>"true"==e)))}}else{if(!e.$schema.startsWith("hdf5_data_frame/"))throw new Error("unknown data_frame schema type '"+e.$schema+"'");{let t=o.$H(s);try{let s=new o.pT(t.path).open(e.hdf5_data_frame.group);r=s.open("column_names",{load:!0}).values,e.data_frame.row_names&&(i=s.open("row_names",{load:!0}).values),n=[];let l=s.open("data");for(a=0;a<r.length;a++){if(!(String(a)in l.children)){n.push(null);continue}let t=l.open(String(a),{load:!0}),r=t.values,s=e.data_frame.columns[a];if("integer"==s)(r instanceof Float64Array||r instanceof Float32Array)&&(r=new Int32Array(r));else if("number"==s)r instanceof Float64Array||r instanceof Float32Array||(r=new Float64Array(r));else if("boolean"==s){let e=new Array(r.length);for(a=0;a<r.length;a++)-2147483648==r[a]?e[a]=null:e[a]=0!=r[a];r=e}else if(("string"==s||"date"==s)&&"missing-value-placeholder"in t.attributes){let e=t.readAttribute("missing-value-placeholder").values[0];for(a=0;a<r.length;a++)r[a]==e&&(r[a]=null)}n.push(r)}}finally{t.flush()}}}let l={},c=[];for(a=0;a<n.length;a++)if("other"===e.data_frame.columns[a].type){let n=await t.metadata(e.data_frame.columns[a].resource.path);try{l[r[a]]=await d(n,t),c.push(r[a])}catch(f){console.warn(f)}}else l[r[a]]=n[a],c.push(r[a]);return new h.NE(l,{columnOrder:c,rowNames:i,numberOfRows:e.data_frame.dimensions[0]})}const m="";async function w(e,t){let r=async e=>{if("row_data"in e.summarized_experiment){let r=e.summarized_experiment.row_data.resource.path;return await d(r,t)}return new h.NE({},{numberOfRows:e.summarized_experiment.dimensions[0]})},n=await t.metadata(e),s={};if(s[m]=await r(n),"single_cell_experiment"in n)for(const a of n.single_cell_experiment.alternative_experiments)try{let e=await t.metadata(a.resource.path);s[a.name]=await r(e)}catch(i){console.warn("failed to extract features for alternative Experiment '"+a.name+"'; "+i.message)}return s}async function p(e,t){let r=e=>{let t=[];for(const r of e.summarized_experiment.assays)t.push(r.name);return t},n=await t.metadata(e),s={};if(s[m]=r(n),"single_cell_experiment"in n)for(const a of n.single_cell_experiment.alternative_experiments)try{let e=await t.metadata(a.resource.path);s[a.name]=r(e)}catch(i){console.warn("failed to extract features for alternative Experiment '"+a.name+"'; "+i.message)}return s}async function g(e,t,r,n){if("string"==typeof t){var s=0;for(const r of e.summarized_experiment.assays){if(r.name==t){t=s;break}s++}if(s==e.summarized_experiment.assays.length)throw new Error("assay '"+t+"' not found")}else if(t>=e.summarized_experiment.assays.length)throw new Error("assay "+String(t)+" out of range");return Z(e.summarized_experiment.assays[t].resource.path,r,n)}async function Z(e,t,r){let n,s=await t.metadata(e),i=await t.file(s.path),a=s.$schema,l=a.startsWith("hdf5_dense_array/"),h=a.startsWith("hdf5_sparse_matrix/");if(l||h){let e=h?s.hdf5_sparse_matrix.group:s.hdf5_dense_array.dataset,t=o.$H(i);try{n=o.EF(t.path,e,{forceInteger:r})}finally{t.flush()}}else{if(!s.$schema.startsWith("hdf5_delayed_array/"))throw new Error("array schema '"+s.$schema+"' is currently not supported");{let e=o.$H(i);try{let r=new o.pT(e.path).open(s.hdf5_delayed_array.group);if(n=await async function(e,t){if("operation"!==e.readAttribute("delayed_type").values[0])return null;if("unary arithmetic"!==e.readAttribute("delayed_operation").values[0])return null;if(Math.abs(e.open("value",{load:!0}).values[0]-Math.log(2))>1e-8)return null;if("/"!==e.open("method",{load:!0}).values[0])return null;if("right"!==e.open("side",{load:!0}).values[0])return null;let r=e.open("seed");if("operation"!==r.readAttribute("delayed_type").values[0])return null;if("unary math"!==r.readAttribute("delayed_operation").values[0])return null;if("log1p"!==r.open("method",{load:!0}).values[0])return null;let n=r.open("seed");if("operation"!==n.readAttribute("delayed_type").values[0])return null;if("unary arithmetic"!==n.readAttribute("delayed_operation").values[0])return null;if("/"!==n.open("method",{load:!0}).values[0])return null;if("right"!==n.open("side",{load:!0}).values[0])return null;if(1!==n.open("along",{load:!0}).values[0])return null;let s=n.open("value",{load:!0}).values,i=n.open("seed");if("array"!==i.readAttribute("delayed_type").values[0])return null;if("custom alabaster local array"!==i.readAttribute("delayed_array").values[0])return null;let a,l=i.open("path",{load:!0}).values[0],h={};try{a=await Z(l,t,!1),h.matrix=o.gk(a.matrix,{sizeFactors:s,center:!1}),h.row_ids=a.row_ids}finally{o.gd(a.matrix)}return h}(r,t),null==n)throw new Error("currently only supporting bakana-generated log-counts for delayed arrays")}finally{e.flush()}}}return n}async function _(e,t){let r=await t.metadata(e);if(!r.$schema.startsWith("json_simple_list/"))throw new Error("currently only support JSON-formatted lists in the 'other_data'");let n=await t.file(r.path),s=new f.z(n,{name:"list.json"}),i=u.R(s.buffer(),{compression:"gzip"==r.json_simple_list.compression?"gz":"none"});return b(JSON.parse(i))}function b(e){if(!("type"in e))throw new Error("non-standard JSON object for 'json_simple_list' schema");if("number"==e.type){if(e.values instanceof Array){let t=new Float64Array(e.values.length);return e.values.forEach(((e,r)=>{t[r]=null===e?Number.NaN:e})),t}return null==e.values?Number.NaN:e.values}if("integer"==e.type){if(e.values instanceof Array){let t=new Int32Array(e.values.length);return e.values.forEach(((e,r)=>{t[r]=null===e?-2147483648:e})),t}return e.values}if("boolean"==e.type||"string"==e.type)return e.values;if("list"==e.type){if("names"in e){let r={};for(var t=0;t<e.values.length;t++)r[e.names[t]]=b(e.values[t]);return r}{let r=[];for(t=0;t<e.values.length;t++)r.push(b(e.values[t]));return r}}return"nothing"==e.type||console.warn("JSON simple list containing type '"+e.type+"' is not yet supported"),null}var v=new WeakMap,y=new WeakMap;class k{constructor(e){(0,i.Z)(this,v,{writable:!0,value:void 0}),(0,i.Z)(this,y,{writable:!0,value:void 0}),(0,l.Z)(this,v,e),(0,l.Z)(this,y,{})}clear(){(0,l.Z)(this,y,{}),"clear"in(0,a.Z)(this,v)&&(0,a.Z)(this,v).clear()}async metadata(e){if(e in(0,a.Z)(this,y))return(0,a.Z)(this,y)[e];{let t=await(0,a.Z)(this,v).metadata(e);return(0,a.Z)(this,y)[e]=t,t}}file(e){return(0,a.Z)(this,v).file(e)}}var E=new WeakMap,O=new WeakMap,C=new WeakMap,R=new WeakMap,M=new WeakMap,x=new WeakSet,N=new WeakSet,S=new WeakSet,A=new WeakSet;class W{constructor(e,t){(0,n.Z)(this,A),(0,n.Z)(this,S),(0,n.Z)(this,N),(0,n.Z)(this,x),(0,i.Z)(this,E,{writable:!0,value:void 0}),(0,i.Z)(this,O,{writable:!0,value:void 0}),(0,i.Z)(this,C,{writable:!0,value:void 0}),(0,i.Z)(this,R,{writable:!0,value:void 0}),(0,i.Z)(this,M,{writable:!0,value:void 0}),(0,l.Z)(this,E,e),(0,l.Z)(this,O,new k(t)),(0,l.Z)(this,M,W.defaults()),(0,s.Z)(this,x,I).call(this)}static defaults(){return{rnaCountAssay:0,adtCountAssay:0,crisprCountAssay:0,rnaExperiment:"",adtExperiment:"Antibody Capture",crisprExperiment:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}options(){return{...(0,a.Z)(this,M)}}setOptions(e){for(const[t,r]of Object.entries(e))(0,a.Z)(this,M)[t]=r}clear(){(0,s.Z)(this,x,I).call(this),(0,a.Z)(this,O).clear()}async summary(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,s.Z)(this,N,j).call(this),await(0,s.Z)(this,S,D).call(this);let t={modality_features:(0,a.Z)(this,C),cells:(0,a.Z)(this,R),modality_assay_names:await p((0,a.Z)(this,E),(0,a.Z)(this,O))};return e||this.clear(),t}async previewPrimaryIds(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,s.Z)(this,N,j).call(this);let t={RNA:(0,a.Z)(this,M).rnaExperiment,ADT:(0,a.Z)(this,M).adtExperiment,CRISPR:(0,a.Z)(this,M).crisprExperiment},r=c.it((0,a.Z)(this,C),t,(0,s.Z)(this,A,F).call(this));return e||this.clear(),r}async load(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,s.Z)(this,N,j).call(this),await(0,s.Z)(this,S,D).call(this);let t={matrix:new o.VU,features:{},cells:(0,a.Z)(this,R)},r={RNA:{exp:(0,a.Z)(this,M).rnaExperiment,assay:(0,a.Z)(this,M).rnaCountAssay},ADT:{exp:(0,a.Z)(this,M).adtExperiment,assay:(0,a.Z)(this,M).adtCountAssay},CRISPR:{exp:(0,a.Z)(this,M).crisprExperiment,assay:(0,a.Z)(this,M).crisprCountAssay}},n=await(0,a.Z)(this,O).metadata((0,a.Z)(this,E)),i={},l=[];if("single_cell_experiment"in n){l=n.single_cell_experiment.alternative_experiments;for(const e of l)i[e.name]=e.resource.path}try{for(const[e,s]of Object.entries(r)){if(null===s.exp)continue;let r=null,o=s.exp;if("string"==typeof s.exp)if(""===s.exp)r=n;else{if(!(s.exp in i))continue;r=await(0,a.Z)(this,O).metadata(i[s.exp])}else{if(s.exp>=l.length)continue;o=l[s.exp].name,r=await(0,a.Z)(this,O).metadata(l[s.exp].resource.path)}let u=await g(r,s.assay,(0,a.Z)(this,O),!0);t.matrix.add(e,u.matrix),t.features[e]=h.Nd((0,a.Z)(this,C)[o],u.row_ids)}t.primary_ids=c.P2(t.features,(0,s.Z)(this,A,F).call(this))}catch(u){throw o.gd(t.matrix),u}return e||this.clear(),t}}function I(){(0,l.Z)(this,C,null),(0,l.Z)(this,R,null)}async function j(){null===(0,a.Z)(this,C)&&(0,l.Z)(this,C,await w((0,a.Z)(this,E),(0,a.Z)(this,O)))}async function D(){if(null!==(0,a.Z)(this,R))return;let e=(await(0,a.Z)(this,O).metadata((0,a.Z)(this,E))).summarized_experiment.column_data.resource.path;(0,l.Z)(this,R,await d(e,(0,a.Z)(this,O)))}function F(){return{RNA:(0,a.Z)(this,M).primaryRnaFeatureIdColumn,ADT:(0,a.Z)(this,M).primaryAdtFeatureIdColumn,CRISPR:(0,a.Z)(this,M).primaryCrisprFeatureIdColumn}}var P=new WeakMap,z=new WeakMap,T=new WeakMap,L=new WeakMap,B=new WeakMap,Y=new WeakMap,q=new WeakSet,G=new WeakSet,V=new WeakSet,U=new WeakSet,H=new WeakSet;class ${constructor(e,t){(0,n.Z)(this,H),(0,n.Z)(this,U),(0,n.Z)(this,V),(0,n.Z)(this,G),(0,n.Z)(this,q),(0,i.Z)(this,P,{writable:!0,value:void 0}),(0,i.Z)(this,z,{writable:!0,value:void 0}),(0,i.Z)(this,T,{writable:!0,value:void 0}),(0,i.Z)(this,L,{writable:!0,value:void 0}),(0,i.Z)(this,B,{writable:!0,value:void 0}),(0,i.Z)(this,Y,{writable:!0,value:void 0}),(0,l.Z)(this,P,e),(0,l.Z)(this,z,new k(t)),(0,l.Z)(this,Y,$.defaults()),(0,s.Z)(this,q,Q).call(this)}static defaults(){return{primaryAssay:0,isPrimaryNormalized:!0,reducedDimensionNames:null}}options(){return{...(0,a.Z)(this,Y)}}setOptions(e){for(const[t,r]of Object.entries(e))(0,a.Z)(this,Y)[t]=h.bl(r)}clear(){(0,s.Z)(this,q,Q).call(this),(0,a.Z)(this,z).clear()}async summary(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,s.Z)(this,G,J).call(this),await(0,s.Z)(this,V,K).call(this),await(0,s.Z)(this,U,X).call(this);let t={modality_features:(0,a.Z)(this,T),cells:(0,a.Z)(this,L),modality_assay_names:await p((0,a.Z)(this,P),(0,a.Z)(this,z)),reduced_dimension_names:[],other_metadata:(0,a.Z)(this,B)},r=await(0,a.Z)(this,z).metadata((0,a.Z)(this,P));if("single_cell_experiment"in r){let e=r.single_cell_experiment.reduced_dimensions;await(0,s.Z)(this,H,ee).call(this,e,t.reduced_dimension_names)}return e||this.clear(),t}async load(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,s.Z)(this,G,J).call(this),await(0,s.Z)(this,V,K).call(this),await(0,s.Z)(this,U,X).call(this);let t=await(0,a.Z)(this,z).metadata((0,a.Z)(this,P)),r={matrix:new o.VU,features:{},cells:(0,a.Z)(this,L),reduced_dimensions:{},other_metadata:(0,a.Z)(this,B)};{let e=(0,a.Z)(this,Y).reducedDimensionNames,i=t.single_cell_experiment.reduced_dimensions;if(null==e&&(e=[],await(0,s.Z)(this,H,ee).call(this,i,e)),e.length>0){let t={};for(const e of i)t[e.name]=e.resource.path;for(const s of e){let e=await(0,a.Z)(this,z).metadata(t[s]),i=e.array.dimensions,l=await(0,a.Z)(this,z).file(e.path),h=o.$H(l),u=[];try{let t=new o.pT(h.path).open(e.hdf5_dense_array.dataset,{load:!0}).values;for(var n=0;n<i[1];n++)u.push(t.slice(n*i[0],(n+1)*i[0]))}finally{h.flush()}r.reduced_dimensions[s]=u}}}{let e={};if("single_cell_experiment"in t)for(const r of t.single_cell_experiment.alternative_experiments)e[r.name]=r.resource.path;try{for(const[n,s]of Object.entries((0,a.Z)(this,T))){let s=(0,a.Z)(this,Y).primaryAssay;if("object"==typeof s){if(!(n in s))continue;s=s[n]}let i,l=(0,a.Z)(this,Y).isPrimaryNormalized;"object"==typeof l&&(l=!(n in l)||l[n]),i=""===n?t:await(0,a.Z)(this,z).metadata(e[n]);let u=await g(i,s,(0,a.Z)(this,z),!l);if(r.matrix.add(n,u.matrix),!l){let e=o.gk(u.matrix,{allowZeros:!0});r.matrix.add(n,e)}null!==u.row_ids?r.features[n]=h.Nd((0,a.Z)(this,T)[n],u.row_ids):r.features[n]=(0,a.Z)(this,T)[n]}}catch(i){throw o.gd(r.matrix),i}}return e||this.clear(),r}}function Q(){(0,l.Z)(this,T,null),(0,l.Z)(this,L,null),(0,l.Z)(this,B,null)}async function J(){null===(0,a.Z)(this,T)&&(0,l.Z)(this,T,await w((0,a.Z)(this,P),(0,a.Z)(this,z)))}async function K(){if(null!==(0,a.Z)(this,L))return;let e=(await(0,a.Z)(this,z).metadata((0,a.Z)(this,P))).summarized_experiment.column_data.resource.path;(0,l.Z)(this,L,await d(e,(0,a.Z)(this,z)))}async function X(){if(null!==(0,a.Z)(this,B))return;let e=await(0,a.Z)(this,z).metadata((0,a.Z)(this,P));if("other_data"in e.summarized_experiment){let t=e.summarized_experiment.other_data.resource.path;(0,l.Z)(this,B,await _(t,(0,a.Z)(this,z)))}else(0,l.Z)(this,B,{})}async function ee(e,t){for(const r of e){let e=await(0,a.Z)(this,z).metadata(r.resource.path);e.$schema.startsWith("hdf5_dense_array/")&&2==e.array.dimensions.length&&t.push(r.name)}}},6016:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(2346),s=r(8916),i=r(2793),a=new WeakMap,l=new WeakMap,o=new WeakMap,h=new WeakMap;class u{constructor(e){let{name:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,n.Z)(this,a,{writable:!0,value:void 0}),(0,n.Z)(this,l,{writable:!0,value:void 0}),(0,n.Z)(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,h,{writable:!0,value:void 0}),e instanceof File)(0,i.Z)(this,a,"file"),(0,i.Z)(this,o,e),null===t&&(t=e.name),(0,i.Z)(this,h,t);else{if(!(e instanceof Uint8Array))throw new Error("unknown type '"+typeof e+"' for SimpleFile constructor");if((0,i.Z)(this,a,"buffer"),(0,i.Z)(this,l,e),null===t)throw new Error("'name' must be provided for Uint8Array inputs in SimpleFile constructor");(0,i.Z)(this,h,t)}}buffer(){let{copy:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("file"==(0,s.Z)(this,a)){let e=(new FileReaderSync).readAsArrayBuffer((0,s.Z)(this,o));return new Uint8Array(e)}return e?(0,s.Z)(this,l).slice():(0,s.Z)(this,l)}size(){return"file"==(0,s.Z)(this,a)?(0,s.Z)(this,o).size:(0,s.Z)(this,l).length}name(){return(0,s.Z)(this,h)}content(){let{copy:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffer({copy:e})}}},7355:(e,t,r)=>{"use strict";r.d(t,{e:()=>C});var n=r(101),s=r(2346),i=r(3889),a=r(2793),l=r(8916),o=r(5831),h=r(6474),u=r(6016),c=r(6180),f=r(3121),d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakMap,_=new WeakMap,b=new WeakSet,v=new WeakSet,y=new WeakSet,k=new WeakSet,E=new WeakSet,O=new WeakSet;class C{constructor(e,t,r){let{featureTypeRnaName:i="Gene Expression",featureTypeAdtName:l="Antibody Capture",featureTypeCrisprName:o="CRISPR Guide Capture",primaryRnaFeatureIdColumn:h=0,primaryAdtFeatureIdColumn:c=0,primaryCrisprFeatureIdColumn:f=0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,n.Z)(this,O),(0,n.Z)(this,E),(0,n.Z)(this,k),(0,n.Z)(this,y),(0,n.Z)(this,v),(0,n.Z)(this,b),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),(0,s.Z)(this,Z,{writable:!0,value:void 0}),(0,s.Z)(this,_,{writable:!0,value:void 0}),e instanceof u.z?(0,a.Z)(this,d,e):(0,a.Z)(this,d,new u.z(e)),t instanceof u.z||null==t?(0,a.Z)(this,m,t):(0,a.Z)(this,m,new u.z(t)),r instanceof u.z||null==r?(0,a.Z)(this,w,r):(0,a.Z)(this,w,new u.z(r)),(0,a.Z)(this,_,C.defaults()),this.clear()}static defaults(){return{featureTypeRnaName:"Gene Expression",featureTypeAdtName:"Antibody Capture",featureTypeCrisprName:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:0,primaryAdtFeatureIdColumn:0,primaryCrisprFeatureIdColumn:0}}options(){return{...(0,l.Z)(this,_)}}setOptions(e){for(const[t,r]of Object.entries(e))(0,l.Z)(this,_)[t]=r}clear(){(0,a.Z)(this,p,null),(0,a.Z)(this,g,null),(0,a.Z)(this,Z,null)}static format(){return"MatrixMarket"}abbreviate(e){return(0,i.Z)(this,b,R).call(this,(e=>({name:e.name(),size:e.size()})))}async summary(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,i.Z)(this,y,x).call(this),await(0,i.Z)(this,k,N).call(this);let t={modality_features:f.LR((0,l.Z)(this,g),"type"),cells:(0,l.Z)(this,Z)};return e||this.clear(),t}async previewPrimaryIds(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,i.Z)(this,y,x).call(this);let t=f.h8((0,l.Z)(this,g),"type",(0,i.Z)(this,E,S).call(this),"RNA",(0,i.Z)(this,O,A).call(this));return e||this.clear(),t}async load(){let{cache:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await(0,i.Z)(this,y,x).call(this),await(0,i.Z)(this,k,N).call(this);var t=(0,l.Z)(this,d).name().endsWith(".gz");let r=o._3((0,l.Z)(this,d).content(),{compressed:t}),n=f.Bs(r,(0,l.Z)(this,g),"type",(0,i.Z)(this,E,S).call(this),"RNA");return n.cells=(0,l.Z)(this,Z),n.primary_ids=f.P2(n.features,(0,i.Z)(this,O,A).call(this)),e||this.clear(),n}async serialize(){return(0,i.Z)(this,b,R).call(this,(e=>e))}static async unserialize(e,t){let r={};for(const a of e){if(a.type in r)throw new Error("duplicate file of type '"+a.type+"' detected during MatrixMarket unserialization");r[a.type]=a.file}if(!("mtx"in r))throw new Error("expected file of type 'mtx' for during MatrixMarket unserialization");let n=null;"genes"in r&&(n=r.genes);let s=null;"annotations"in r&&(s=r.annotations);let i=new C(r.mtx,n,s);return i.setOptions(t),i}}function R(e){let t=[{type:"mtx",file:e((0,l.Z)(this,d))}];return null!==(0,l.Z)(this,m)&&t.push({type:"genes",file:e((0,l.Z)(this,m))}),null!==(0,l.Z)(this,w)&&t.push({type:"annotations",file:e((0,l.Z)(this,w))}),{files:t,options:this.options()}}function M(){if(null!==(0,l.Z)(this,p))return;var e=(0,l.Z)(this,d).name().endsWith(".gz");let t=o.us((0,l.Z)(this,d).content(),{compressed:e});(0,a.Z)(this,p,[t.rows,t.columns])}async function x(){if(null!==(0,l.Z)(this,g))return;(0,i.Z)(this,v,M).call(this);let e=(0,l.Z)(this,p)[0];if(null==(0,l.Z)(this,m))return void(0,a.Z)(this,g,new h.NE({},{numberOfRows:e}));let t=(0,l.Z)(this,m).name();var r=t.endsWith(".gz");let n=await c.Lm((0,l.Z)(this,m).content(),{compression:r?"gz":"none"});if(n.length==e+1){let e={};return n.shift().forEach(((t,r)=>{e[t]=n.map((e=>e[r]))})),void(0,a.Z)(this,g,e)}if(n.length!==e)throw new Error("number of matrix rows is not equal to the number of rows in '"+t+"'");var s=[],o=[];n.forEach((e=>{s.push(e[0]),o.push(e[1])}));let u=new h.NE({},{numberOfRows:e});if(u.$setColumn("id",s),u.$setColumn("name",o),n[0].length>2){let e=[];n.forEach((t=>{e.push(t[2])})),u.$setColumn("type",e)}(0,a.Z)(this,g,u)}async function N(){if(null!==(0,l.Z)(this,Z))return;if((0,i.Z)(this,v,M).call(this),null==(0,l.Z)(this,w))return void(0,a.Z)(this,Z,new h.NE({},{numberOfRows:(0,l.Z)(this,p)[1]}));let e=(0,l.Z)(this,w).name();var t=e.endsWith(".gz");let r,n=await c.Lm((0,l.Z)(this,w).content(),{compression:t?"gz":"none"}),s=(0,l.Z)(this,p)[1]-n.length;if(0==s)r=n[0];else{if(-1!=s)throw new Error("number of matrix columns is not equal to the number of rows in '"+e+"'");r=n.shift()}let o={};r.forEach(((e,t)=>{o[e]=n.map((e=>e[t]))}));for(const[i,a]of Object.entries(o)){let e=c.id(a);null!==e&&(o[i]=e)}(0,a.Z)(this,Z,new h.NE(o))}function S(){return{RNA:(0,l.Z)(this,_).featureTypeRnaName,ADT:(0,l.Z)(this,_).featureTypeAdtName,CRISPR:(0,l.Z)(this,_).featureTypeCrisprName}}function A(){return{RNA:(0,l.Z)(this,_).primaryRnaFeatureIdColumn,ADT:(0,l.Z)(this,_).primaryAdtFeatureIdColumn,CRISPR:(0,l.Z)(this,_).primaryCrisprFeatureIdColumn}}},508:(e,t,r)=>{"use strict";function n(e,t,r,n,s){s("no support for file paths in the browser context")}function s(e,t){throw new Error("no support for file paths in the browser context")}r.d(t,{V:()=>n,f:()=>s})},6180:(e,t,r)=>{"use strict";r.d(t,{Lm:()=>m,Qr:()=>o,R:()=>u,bw:()=>d,id:()=>w,vp:()=>l});var n=r(714),s=r(1025),i=r(508),a=r(6016);function l(e,t){if(!(t in e.children))return null;if("DataSet"!==e.children[t])return null;let r=e.open(t);return"String"!==r.type?null:r.load()}function o(e){let{limit:t=50}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof Array){let r=Array.from(new Set(e));r.sort();let n=!1;return r.length>t&&(r=r.slice(0,t),n=!0),{type:"categorical",values:r,truncated:n}}{let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.forEach((e=>{e<t&&(t=e),e>r&&(r=e)})),{type:"continuous",min:t,max:r}}}function h(e,t){if(null!==t)return t;let r;return r=e instanceof Uint8Array?e:i.f(e,3),r.length>=3&&31==r[0]&&139==r[1]&&8==r[2]?"gz":"none"}function u(e){let{compression:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=h(e,t);let r="gz"===t?n.ec(e):e;return(new TextDecoder).decode(r)}function c(e,t){let r=0;for(const s of e)r+=s.length;let n=new Uint8Array(r);r=0;for(const s of e)n.set(s,r),r+=s.length;return t.decode(n)}async function f(e,t,r,s){"string"==typeof e||e instanceof Uint8Array||(e=e instanceof a.z?e.content():new a.z(e,{name:"dummy"}).content()),"gz"!=h(e,t)?"string"!=typeof e?s(e):await new Promise(((t,n)=>i.V(e,r,s,t,n))):await new Promise(((t,a)=>{let l=new n.T_({chunkSize:r});l.onData=s,l.onEnd=e=>{e?a("gzip decompression failed; "+l.msg):t(null)},"string"==typeof e?i.V(e,r,(e=>l.push(e)),null,a):l.push(e)}))}async function d(e){let{compression:t=null,chunkSize:r=65536}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new TextDecoder;let s=[],i=[];return await f(e,t,r,(e=>{let t=0;for(var r=0;r<e.length;r++)if(10==e[r]){let a=e.subarray(t,r);s.length?(s.push(a),i.push(c(s,n)),s=[]):i.push(n.decode(a)),t=r+1}t!=e.length&&s.push(e.slice(t))})),s.length&&i.push(c(s,n)),i}async function m(e){let{compression:t=null,delim:r="\t",chunkSize:n=1048576}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new TextDecoder;let a=[],l=e=>{let t=s.parse(e,{delimiter:r});if(t.meta.aborted){let e="failed to parse delimited file";for(const r of t.errors)e+="; "+r.message;throw new Error(e)}for(const r of t.data)a.push(r)},o=[],h=0;if(await f(e,t,n,(e=>{let t=0;for(var r=0;r<e.length;r++)if(10==e[r]&&r-t+h>=n){let n=e.subarray(t,r);o.length?(o.push(n),l(c(o,i)),o=[]):l(i.decode(n)),t=r+1,h=0}t!=e.length&&(o.push(e.slice(t)),h+=e.length-t)})),o.length){let e=c(o,i);l(e),"\n"==e[e.length-1]&&a.pop()}return a}function w(e){let t=new Float64Array(e.length);for(const[r,n]of Object.entries(e)){let e=Number(n),s=parseFloat(n);if(isNaN(e)||isNaN(s))if(""===n||"NA"===n||"na"==n||"NaN"==n||"nan"==n)t[r]=NaN;else if("Inf"==n||"inf"==n)t[r]=Number.POSITIVE_INFINITY;else{if("-Inf"!=n&&"-inf"!=n)return null;t[r]=Number.NEGATIVE_INFINITY}else t[r]=e}return t}},3121:(e,t,r)=>{"use strict";r.d(t,{Bs:()=>u,LR:()=>a,P2:()=>f,h8:()=>h,it:()=>d});var n=r(5831),s=r(6474);function i(e,t){let r={};return r[t]=e,r}function a(e,t){if(e.hasColumn(t)){let r=s.Lm(e.column(t)),n=e.removeColumn(t);return s.Tm(n,r)}return i(e,"")}function l(e,t){let r={};for(const[n,s]of Object.entries(t))null!==s&&s in e&&(r[n]=e[s]);return r}function o(e,t,r){let n=s.Lm(e.column(t));return null===r?n:l(n,r)}function h(e,t,r,n,i){if(null!==t&&e.hasColumn(t)){let n=o(e,t,r);for(const[t,r]of Object.entries(n)){let a=c(t,e,i);n[t]=s.Nd(a,r)}return n}let a=function(e,t){let r=null,n=!1;for(const[s,i]of Object.entries(e))null!==i&&(null!==r&&(n=!0),r=s);return null===r||n?t:r}(r,n),l={};return l[a]=c(a,e,i),l}function u(e,t,r,a,l){let h={matrix:new n.VU};try{let u,c=e.matrix;if(h.matrix.add("",c),u=null!==e.row_ids?s.Nd(t,e.row_ids):s.bl(t,{deepCopy:!1}),null!==r&&u.hasColumn(r)){let e=o(u,r,a),t=Object.keys(e),i=function(e,t){if(e.length!=t)return!1;for(var r=0;r<t;r++)if(r!==e[r])return!1;return!0}(t[0],c.numberOfRows());if(t.length>1||!i){let t=new n.VU({store:n.vc(c,e)});n.gd(h.matrix),h.matrix=t}else h.matrix.rename("",t[0]);delete u[r],h.features=s.Tm(u,e)}else h.matrix.rename("",l),h.features=i(u,l)}catch(u){throw n.gd(h.matrix),u}return h}function c(e,t,r){if(!(e in r))throw new Error("modality '"+e+"' has no primary key identifier");let n=r[e];return"string"==typeof n&&t.hasColumn(n)||"number"==typeof n&&n<t.numberOfColumns()?t.column(n):t.rowNames()}function f(e,t){let r={};for(const[n,s]of Object.entries(e))r[n]=c(n,s,t);return r}function d(e,t,r){return f(l(e,t),r)}},6269:(e,t,r)=>{"use strict";function n(){return new Worker(new URL(r.p+r.u(484),r.b),{type:void 0})}function s(){return new Worker(new URL(r.p+r.u(933),r.b),{type:void 0})}r.d(t,{k:()=>n,u:()=>s})},8366:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>d,m5:()=>_});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(569),c=r(9873),f=r(2269);const d="adt_normalization";var m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakSet;class _{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,Z),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),!(e instanceof c.fA))throw new Error("'qc' should be a AdtQualityControlState object");if((0,l.Z)(this,m,e),!(t instanceof f.H0))throw new Error("'filter' should be a CellFilteringState object");(0,l.Z)(this,w,t),(0,l.Z)(this,p,null===r?{}:r),(0,l.Z)(this,g,null===i?{}:i),this.changed=!1}free(){h.Yl((0,a.Z)(this,g).matrix),h.Yl((0,a.Z)(this,g).total_buffer),h.Yl((0,a.Z)(this,g).sf_buffer),h.Yl((0,a.Z)(this,g).centered_sf_buffer)}valid(){return(0,a.Z)(this,w).fetchFilteredMatrix().has("ADT")}fetchNormalizedMatrix(){return"matrix"in(0,a.Z)(this,g)||(0,i.Z)(this,Z,b).call(this),(0,a.Z)(this,g).matrix}fetchSizeFactors(){let e;return(0,a.Z)(this,g).sf_buffer&&(e=h.rS((0,a.Z)(this,g).sf_buffer.length,"Float64Array",(0,a.Z)(this,g),"centered_sf_buffer"),o.v_((0,a.Z)(this,g).sf_buffer,{buffer:e,block:(0,a.Z)(this,w).fetchFilteredBlock()})),e}fetchParameters(){return{...(0,a.Z)(this,p)}}compute(e){const{num_pcs:t,num_clusters:r}=e;let n=!0;if("remove_bias"in e&&(n=e.remove_bias),this.changed=!1,((0,a.Z)(this,m).changed||(0,a.Z)(this,w).changed||n!==(0,a.Z)(this,p).remove_bias||n&&(t!==(0,a.Z)(this,p).num_pcs||r!=(0,a.Z)(this,p).num_clusters))&&this.valid()){var s=(0,a.Z)(this,w).fetchFilteredMatrix().get("ADT");let e=u.e((0,a.Z)(this,m),(0,a.Z)(this,w),s,(0,a.Z)(this,g),"total_buffer");var l=(0,a.Z)(this,w).fetchFilteredBlock(),c=h.rS(s.numberOfColumns(),"Float64Array",(0,a.Z)(this,g),"sf_buffer");n?o.Cb(s,{totals:e,block:l,buffer:c,numberOfPCs:t,numberOfClusters:r}):o.v_(e,{buffer:c,block:l}),this.changed=!0}(0,a.Z)(this,p).remove_bias=n,(0,a.Z)(this,p).num_pcs=t,(0,a.Z)(this,p).num_clusters=r,this.changed&&this.valid()&&(0,i.Z)(this,Z,b).call(this)}static defaults(){return{remove_bias:!0,num_pcs:25,num_clusters:20}}}function b(){var e=(0,a.Z)(this,w).fetchFilteredMatrix().get("ADT"),t=(0,a.Z)(this,w).fetchFilteredBlock(),r=(0,a.Z)(this,g).sf_buffer;if(r.length!=e.numberOfColumns())throw new Error("length of size factor vector should equal number of columns after QC");h.Yl((0,a.Z)(this,g).matrix),(0,a.Z)(this,g).matrix=o.gk(e,{sizeFactors:r,block:t,allowZeros:!0})}},7188:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>u,Ru:()=>w});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(2269),h=r(8366);const u="adt_pca";var c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap;class w{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),!(e instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,i.Z)(this,c,e),!(t instanceof h.m5))throw new Error("'norm' should be a AdtNormalizationState object");(0,i.Z)(this,f,t),(0,i.Z)(this,m,null===r?{}:r),(0,i.Z)(this,d,null===s?{}:s),this.changed=!1}free(){l.Yl((0,s.Z)(this,d).pcs)}valid(){return(0,s.Z)(this,f).valid()}fetchPCs(){return(0,s.Z)(this,d).pcs}fetchParameters(){return{...(0,s.Z)(this,m)}}compute(e){let{num_pcs:t,block_method:r}=e;if(this.changed=!1,(0,s.Z)(this,f).changed||t!==(0,s.Z)(this,m).num_pcs||r!==(0,s.Z)(this,m).block_method){if(this.valid()){let e=(0,s.Z)(this,c).fetchFilteredBlock();var n=(0,s.Z)(this,f).fetchNormalizedMatrix();l.Yl((0,s.Z)(this,d).pcs),(0,s.Z)(this,d).pcs=a.aG(n,{numberOfPCs:t,block:e,blockMethod:r}),this.changed=!0}(0,s.Z)(this,m).num_pcs=t,(0,s.Z)(this,m).block_method=r}}static defaults(){return{num_pcs:20,block_method:"none"}}}},9873:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>h,fA:()=>d});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(6546);const h="adt_quality_control";var u=new WeakMap,c=new WeakMap,f=new WeakMap;class d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),!(e instanceof o.tq))throw new Error("'inputs' should be a State object from './inputs.js'");(0,i.Z)(this,u,e),(0,i.Z)(this,f,null===t?{}:t),(0,i.Z)(this,c,null===r?{}:r),this.changed=!1}free(){l.Yl((0,s.Z)(this,c).metrics),l.Yl((0,s.Z)(this,c).filters),l.Yl((0,s.Z)(this,c).metrics_buffer),l.Yl((0,s.Z)(this,c).discard_buffer)}valid(){return(0,s.Z)(this,u).fetchCountMatrix().has("ADT")}fetchParameters(){return{...(0,s.Z)(this,f)}}fetchFilters(){return(0,s.Z)(this,c).filters}fetchDiscards(){return(0,s.Z)(this,c).discard_buffer}fetchMetrics(){return(0,s.Z)(this,c).metrics}static defaults(){return{automatic:!0,tag_id_column:null,igg_prefix:"IgG",nmads:3,min_detected_drop:.1}}static configureFeatureParameters(e,t){let r=t=>{let r=0;return t.forEach((t=>{t.toLowerCase().startsWith(e)&&r++})),r},n=null,s=0,i=t.rowNames();null!==i&&(s=r(i));for(const a of t.columnNames()){let e=r(t.column(a));e>s&&(n=a,s=e)}return n}compute(e){let t,r,{igg_prefix:n,nmads:i,min_detected_drop:o}=e;if(this.changed=!1,"automatic"in e?(t=e.automatic,r=e.tag_id_column):(t=!0,r=null),(0,s.Z)(this,u).changed||t!==(0,s.Z)(this,f).automatic||n!==(0,s.Z)(this,f).igg_prefix||!t&&r!==(0,s.Z)(this,f).tag_id_column)if(l.Yl((0,s.Z)(this,c).metrics),this.valid()){var h=(0,s.Z)(this,u).fetchFeatureAnnotations().ADT,m=l.rS(h.numberOfRows(),"Uint8Array",(0,s.Z)(this,c),"metrics_buffer");if(m.fill(0),null!==n){var w=n.toLowerCase();let e=r;t&&(e=d.configureFeatureParameters(w,h));let s=null==e?h.rowNames():h.column(e);if(null!==s){var p=m.array();s.forEach(((e,t)=>{e.toLowerCase().startsWith(w)&&(p[t]=1)}))}}var g=(0,s.Z)(this,u).fetchCountMatrix().get("ADT");(0,s.Z)(this,c).metrics=a.vy(g,[m]),this.changed=!0}else delete(0,s.Z)(this,c).metrics;if((0,s.Z)(this,f).automatic=t,(0,s.Z)(this,f).tag_id_column=r,(0,s.Z)(this,f).igg_prefix=n,this.changed||i!==(0,s.Z)(this,f).nmads||o!==(0,s.Z)(this,f).min_detected_drop){if(l.Yl((0,s.Z)(this,c).filters),this.valid()){let e=(0,s.Z)(this,u).fetchBlock();(0,s.Z)(this,c).filters=a.nO((0,s.Z)(this,c).metrics,{numberOfMADs:i,minDetectedDrop:o,block:e});var Z=l.rS((0,s.Z)(this,c).metrics.numberOfCells(),"Uint8Array",(0,s.Z)(this,c),"discard_buffer");(0,s.Z)(this,c).filters.filter((0,s.Z)(this,c).metrics,{block:e,buffer:Z}),this.changed=!0}else delete(0,s.Z)(this,c).filters;(0,s.Z)(this,f).nmads=i,(0,s.Z)(this,f).min_detected_drop=o}}}},1944:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>u,N_:()=>w});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(2269),h=r(8580);const u="batch_correction";var c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap;class w{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),!(e instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,i.Z)(this,c,e),!(t instanceof h.BE))throw new Error("'pca' should be a CombineEmbeddingsState object");(0,i.Z)(this,f,t),(0,i.Z)(this,d,null===r?{}:r),(0,i.Z)(this,m,null===s?{}:s),this.changed=!1}free(){l.Yl((0,s.Z)(this,m).corrected)}fetchCorrected(){return(0,s.Z)(this,m).corrected}fetchNumberOfCells(){return(0,s.Z)(this,f).fetchNumberOfCells()}fetchNumberOfDimensions(){return(0,s.Z)(this,f).fetchNumberOfDimensions()}fetchParameters(){return{...(0,s.Z)(this,d)}}compute(e){let{method:t,num_neighbors:r,approximate:n}=e;this.changed=!1,((0,s.Z)(this,c).changed||(0,s.Z)(this,f).changed)&&(this.changed=!0);let i=(0,s.Z)(this,c).fetchFilteredBlock(),o="mnn"==t&&null!==i;if((this.changed||t!==(0,s.Z)(this,d).method||r!==(0,s.Z)(this,d).num_neighbors||n!==(0,s.Z)(this,d).approximate)&&o){let e=(0,s.Z)(this,f).fetchCombined(),t=l.rS(e.length,"Float64Array",(0,s.Z)(this,m),"corrected");a.F5(e,i,{k:r,buffer:t,numberOfCells:(0,s.Z)(this,f).fetchNumberOfCells(),numberOfDims:(0,s.Z)(this,f).fetchNumberOfDimensions(),approximate:n}),this.changed=!0}this.changed&&(o||(l.Yl((0,s.Z)(this,m).corrected),(0,s.Z)(this,m).corrected=(0,s.Z)(this,f).fetchCombined().view())),(0,s.Z)(this,d).method=t,(0,s.Z)(this,d).num_neighbors=r,(0,s.Z)(this,d).approximate=n}static defaults(){return{method:"mnn",num_neighbors:15,approximate:!0}}}},2269:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>m,H0:()=>y});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(652),c=r(9873),f=r(9751),d=r(6546);const m="cell_filtering";function w(e,t){let r=h.Mc(e),n=[];for(const s of r)t[s]&&n.push(e[s]);return n}var p=new WeakMap,g=new WeakMap,Z=new WeakMap,_=new WeakMap,b=new WeakSet,v=new WeakSet;class y{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,v),(0,n.Z)(this,b),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),(0,s.Z)(this,Z,{writable:!0,value:void 0}),(0,s.Z)(this,_,{writable:!0,value:void 0}),!(e instanceof d.tq))throw new Error("'inputs' should be an InputsState object");if((0,l.Z)(this,p,e),!(t.RNA instanceof u.E4))throw new Error("'qc_states.RNA' should be a RnaQualityControlState object");if(!(t.ADT instanceof c.fA))throw new Error("'qc_states.ADT' should be a AdtQualityControlState object");if(!(t.CRISPR instanceof f.IW))throw new Error("'qc_states.CRISPR' should be a CrisprQualityControlState object");(0,l.Z)(this,g,t),(0,l.Z)(this,_,null===r?{}:r),(0,l.Z)(this,Z,null===i?{}:i),this.changed=!1}free(){h.Yl((0,a.Z)(this,Z).block_buffer),h.Yl((0,a.Z)(this,Z).discard_buffer),h.Yl((0,a.Z)(this,Z).matrix)}fetchFilteredMatrix(){return"matrix"in(0,a.Z)(this,Z)||(0,i.Z)(this,b,k).call(this),(0,a.Z)(this,Z).matrix}fetchFilteredBlock(){return"block_buffer"in(0,a.Z)(this,Z)||(0,i.Z)(this,v,E).call(this),(0,a.Z)(this,Z).block_buffer}fetchDiscards(){return"discard_buffer"in(0,a.Z)(this,Z)?(0,a.Z)(this,Z).discard_buffer:null}fetchParameters(){return{...(0,a.Z)(this,_)}}compute(e){let{use_rna:t,use_adt:r,use_crispr:n}=e;this.changed=!1,(0,a.Z)(this,p).changed&&(this.changed=!0),(0,a.Z)(this,_).use_rna===t&&(0,a.Z)(this,_).use_adt===r&&(0,a.Z)(this,_).use_crispr===n||((0,a.Z)(this,_).use_rna=t,(0,a.Z)(this,_).use_adt=r,(0,a.Z)(this,_).use_crispr=n,this.changed=!0);let s=w((0,a.Z)(this,g),{RNA:t,ADT:r,CRISPR:n});if(!this.changed)for(const i of s)if(i.changed){this.changed=!0;break}if(this.changed){if(s.length>0){let e=s[0].fetchDiscards();if(s.length>1){let t=h.rS(e.length,"Uint8Array",(0,a.Z)(this,Z),"discard_buffer");t.fill(0);let r=t.array();for(const e of s)e.fetchDiscards().forEach(((e,t)=>{r[t]|=e}))}else h.Yl((0,a.Z)(this,Z).discard_buffer),(0,a.Z)(this,Z).discard_buffer=e.view()}else h.Yl((0,a.Z)(this,Z).discard_buffer),delete(0,a.Z)(this,Z).discard_buffer;(0,i.Z)(this,b,k).call(this),(0,i.Z)(this,v,E).call(this)}}static defaults(){return{use_rna:!0,use_adt:!0,use_crispr:!0}}applyFilter(e){if((0,a.Z)(this,p).fetchCountMatrix().numberOfColumns()!=e.length)throw new Error("length of 'x' should be equal to the number of cells in the unfiltered dataset");if("discard_buffer"in(0,a.Z)(this,Z)){let t=(0,a.Z)(this,Z).discard_buffer.array();return e.filter(((e,r)=>!t[r]))}return e.slice()}undoFilter(e){let t=this.fetchFilteredMatrix().numberOfColumns();for(const n of e)if(n<0||n>=t)throw new Error("entries of 'indices' should be less than the number of cells in the filtered dataset");if(!("discard_buffer"in(0,a.Z)(this,Z)))return;let r=[];(0,a.Z)(this,Z).discard_buffer.forEach(((e,t)=>{0==e&&r.push(t)})),e.forEach(((t,n)=>{e[n]=r[t]}))}}function k(){h.Yl((0,a.Z)(this,Z).matrix),(0,a.Z)(this,Z).matrix=new o.VU;let e=(0,a.Z)(this,p).fetchCountMatrix();for(const t of e.available()){let r,n=e.get(t);r="discard_buffer"in(0,a.Z)(this,Z)?o.b_(n,(0,a.Z)(this,Z).discard_buffer):n.clone(),(0,a.Z)(this,Z).matrix.add(t,r)}}function E(){h.Yl((0,a.Z)(this,Z).block_buffer);let e=(0,a.Z)(this,p).fetchBlock();if(null!==e)if("discard_buffer"in(0,a.Z)(this,Z)){let t=this.fetchFilteredMatrix().numberOfColumns(),r=h.rS(t,"Int32Array",(0,a.Z)(this,Z),"block_buffer");o.fw(e,(0,a.Z)(this,Z).discard_buffer,{buffer:r})}else(0,a.Z)(this,Z).block_buffer=e.view();else(0,a.Z)(this,Z).block_buffer=null}},7139:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(2346),s=r(8916),i=r(2793),a=(r(5831),r(7891),r(4414)),l=r(8849),o=new WeakMap,h=new WeakMap,u=new WeakMap,c=new WeakMap;class f{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),!(e instanceof a.Xs))throw new Error("'snn' should be a State object from './snn_graph_cluster.js'");if((0,i.Z)(this,o,e),!(t instanceof l.d))throw new Error("'kmeans' should be a State object from './kmeans_cluster.js'");(0,i.Z)(this,h,t),(0,i.Z)(this,u,null===r?{}:r),(0,i.Z)(this,c,null===s?{}:s),this.changed=!1}free(){}fetchClusters(){return"snn_graph"==(0,s.Z)(this,u).method?(0,s.Z)(this,o).fetchClusters():"kmeans"==(0,s.Z)(this,u).method?(0,s.Z)(this,h).fetchClusters():void 0}fetchParameters(){return{...(0,s.Z)(this,u)}}compute(e){let{method:t}=e;this.changed=!0,t==(0,s.Z)(this,u).method&&("snn_graph"==t?(0,s.Z)(this,o).changed||(this.changed=!1):"kmeans"==t&&((0,s.Z)(this,h).changed||(this.changed=!1))),(0,s.Z)(this,u).method=t}}},8580:(e,t,r)=>{"use strict";r.d(t,{BE:()=>p,Cy:()=>c});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(384),h=r(7188),u=r(6849);const c="combine_embeddings";function f(e,t){let r=l.Mc(e),n=[];for(const s of r)t[s]>0&&n.push(s);return n}var d=new WeakMap,m=new WeakMap,w=new WeakMap;class p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),(0,n.Z)(this,w,{writable:!0,value:void 0}),!(e.RNA instanceof o.rR))throw new Error("'pca_states.RNA' should be an RnaPcaState object");if(!(e.ADT instanceof h.Ru))throw new Error("'pca_states.ADT' should be an AdtPcaState object");if(!(e.CRISPR instanceof u.zR))throw new Error("'pca_states.CRISPR' should be an CrisprPcaState object");(0,i.Z)(this,d,e),(0,i.Z)(this,m,null===t?{}:t),(0,i.Z)(this,w,null===r?{}:r),this.changed=!1}free(){l.Yl((0,s.Z)(this,w).combined_buffer)}fetchCombined(){return(0,s.Z)(this,w).combined_buffer}fetchNumberOfCells(){return(0,s.Z)(this,w).num_cells}fetchNumberOfDimensions(){return(0,s.Z)(this,w).total_dims}fetchParameters(){return{...(0,s.Z)(this,m)}}static defaults(){return{rna_weight:1,adt_weight:1,crispr_weight:0,approximate:!0}}static createPcsView(e,t){l.Yl(e.combined_buffer),e.combined_buffer=t.principalComponents({copy:"view"}).view(),e.num_cells=t.numberOfCells(),e.total_dims=t.numberOfPCs()}compute(e){let{rna_weight:t,adt_weight:r,crispr_weight:n,approximate:i}=e;this.changed=!1;for(const a of Object.values((0,s.Z)(this,d)))if(a.changed){this.changed=!0;break}if(i!==(0,s.Z)(this,m).approximate&&((0,s.Z)(this,m).approximate=i,this.changed=!0),t===(0,s.Z)(this,m).rna_weight&&r===(0,s.Z)(this,m).adt_weight&&n===(0,s.Z)(this,m).crispr_weight||((0,s.Z)(this,m).rna_weight=t,(0,s.Z)(this,m).adt_weight=r,(0,s.Z)(this,m).crispr_weight=n,this.changed=!0),this.changed){const e={RNA:t,ADT:r,CRISPR:n};let o=f((0,s.Z)(this,d),e);if(o.length>1){let t=o.map((t=>e[t])),r=[],n=0,h=null;for(const e of o){let t=(0,s.Z)(this,d)[e].fetchPCs();if(r.push(t.principalComponents({copy:"view"})),null==h)h=t.numberOfCells();else if(h!==t.numberOfCells())throw new Error("number of cells should be consistent across all embeddings");n+=t.numberOfPCs()}let u=l.rS(h*n,"Float64Array",(0,s.Z)(this,w),"combined_buffer");a.jX(r,h,{buffer:u,weights:t,approximate:i}),(0,s.Z)(this,w).num_cells=h,(0,s.Z)(this,w).total_dims=n}else{let e=(0,s.Z)(this,d)[o[0]].fetchPCs();this.constructor.createPcsView((0,s.Z)(this,w),e)}}}}},2615:(e,t,r)=>{"use strict";r.d(t,{$M:()=>_,Cy:()=>d});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(569),c=r(9751),f=r(2269);const d="crispr_normalization";var m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakSet;class _{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,Z),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),!(e instanceof c.IW))throw new Error("'qc' should be a CrisprQualityControlState object");if((0,l.Z)(this,m,e),!(t instanceof f.H0))throw new Error("'filter' should be a CellFilteringState object");(0,l.Z)(this,w,t),(0,l.Z)(this,p,null===r?{}:r),(0,l.Z)(this,g,null===i?{}:i),this.changed=!1}free(){h.Yl((0,a.Z)(this,g).matrix),h.Yl((0,a.Z)(this,g).total_buffer),h.Yl((0,a.Z)(this,g).centered_buffer)}valid(){return(0,a.Z)(this,w).fetchFilteredMatrix().has("CRISPR")}fetchNormalizedMatrix(){return"matrix"in(0,a.Z)(this,g)||(0,i.Z)(this,Z,b).call(this),(0,a.Z)(this,g).matrix}fetchSizeFactors(){let e;return(0,a.Z)(this,g).sum_buffer&&(e=h.rS((0,a.Z)(this,g).sum_buffer.length,"Float64Array",(0,a.Z)(this,g),"centered_buffer"),o.v_((0,a.Z)(this,g).sum_buffer,{buffer:e,block:(0,a.Z)(this,w).fetchFilteredBlock()})),e}fetchParameters(){return{...(0,a.Z)(this,p)}}compute(e){this.changed=!1,((0,a.Z)(this,m).changed||(0,a.Z)(this,w).changed)&&this.valid()&&((0,i.Z)(this,Z,b).call(this),this.changed=!0)}static defaults(){return{}}serialize(e){let t=e.createGroup(d);t.createGroup("parameters"),t.createGroup("results")}}function b(){var e=(0,a.Z)(this,w).fetchFilteredMatrix().get("CRISPR");let t=u.e((0,a.Z)(this,m),(0,a.Z)(this,w),e,(0,a.Z)(this,g),"sum_buffer");var r=(0,a.Z)(this,w).fetchFilteredBlock();h.Yl((0,a.Z)(this,g).matrix),(0,a.Z)(this,g).matrix=o.gk(e,{sizeFactors:t,block:r,allowZeros:!0})}},6849:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>u,zR:()=>w});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(2269),h=r(2615);const u="crispr_pca";var c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap;class w{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),!(e instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,i.Z)(this,c,e),!(t instanceof h.$M))throw new Error("'norm' should be a CrisprNormalizationState object");(0,i.Z)(this,f,t),(0,i.Z)(this,m,null===r?{}:r),(0,i.Z)(this,d,null===s?{}:s),this.changed=!1}free(){l.Yl((0,s.Z)(this,d).pcs)}valid(){return(0,s.Z)(this,f).valid()}fetchPCs(){return(0,s.Z)(this,d).pcs}fetchParameters(){return{...(0,s.Z)(this,m)}}compute(e){let{num_pcs:t,block_method:r}=e;if(this.changed=!1,(0,s.Z)(this,f).changed||t!==(0,s.Z)(this,m).num_pcs||r!==(0,s.Z)(this,m).block_method){if(this.valid()){let e=(0,s.Z)(this,c).fetchFilteredBlock();var n=(0,s.Z)(this,f).fetchNormalizedMatrix();l.Yl((0,s.Z)(this,d).pcs),(0,s.Z)(this,d).pcs=a.aG(n,{numberOfPCs:t,block:e,blockMethod:r}),this.changed=!0}(0,s.Z)(this,m).num_pcs=t,(0,s.Z)(this,m).block_method=r}}static defaults(){return{num_pcs:20,block_method:"none"}}}},9751:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>h,IW:()=>d});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(6546);const h="crispr_quality_control";var u=new WeakMap,c=new WeakMap,f=new WeakMap;class d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),!(e instanceof o.tq))throw new Error("'inputs' should be a State object from './inputs.js'");(0,i.Z)(this,u,e),(0,i.Z)(this,f,null===t?{}:t),(0,i.Z)(this,c,null===r?{}:r),this.changed=!1}free(){l.Yl((0,s.Z)(this,c).metrics),l.Yl((0,s.Z)(this,c).filters),l.Yl((0,s.Z)(this,c).metrics_buffer),l.Yl((0,s.Z)(this,c).discard_buffer)}valid(){return(0,s.Z)(this,u).fetchCountMatrix().has("CRISPR")}fetchParameters(){return{...(0,s.Z)(this,f)}}fetchFilters(){return(0,s.Z)(this,c).filters}fetchDiscards(){return(0,s.Z)(this,c).discard_buffer}fetchMetrics(){return(0,s.Z)(this,c).metrics}static defaults(){return{nmads:3}}compute(e){let{nmads:t}=e;if(this.changed=!1,(0,s.Z)(this,u).changed)if(l.Yl((0,s.Z)(this,c).metrics),this.valid()){var r=(0,s.Z)(this,u).fetchCountMatrix().get("CRISPR");(0,s.Z)(this,c).metrics=a.J4(r),this.changed=!0}else delete(0,s.Z)(this,c).metrics;if(this.changed||t!==(0,s.Z)(this,f).nmads){if(l.Yl((0,s.Z)(this,c).filters),this.valid()){let e=(0,s.Z)(this,u).fetchBlock();(0,s.Z)(this,c).filters=a.XU((0,s.Z)(this,c).metrics,{numberOfMADs:t,block:e});var n=l.rS((0,s.Z)(this,c).metrics.numberOfCells(),"Uint8Array",(0,s.Z)(this,c),"discard_buffer");(0,s.Z)(this,c).filters.filter((0,s.Z)(this,c).metrics,{block:e,buffer:n}),this.changed=!0}else delete(0,s.Z)(this,c).filters;(0,s.Z)(this,f).nmads=t}}}},8391:(e,t,r)=>{"use strict";r.d(t,{$:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(2269),h=r(7317),u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap;class m{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),!(e instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,i.Z)(this,u,e),!(t instanceof h.ue))throw new Error("'norm' should be an RnaNormalizationState object");(0,i.Z)(this,c,t),(0,i.Z)(this,d,null===r?{}:r),(0,i.Z)(this,f,null===s?{}:s),this.changed=!1}free(){l.Yl((0,s.Z)(this,f).matrix)}valid(){return(0,s.Z)(this,c).valid()}fetchResults(){return(0,s.Z)(this,f).results}fetchSortedResiduals(){return(0,s.Z)(this,f).sorted_residuals}fetchParameters(){return{...(0,s.Z)(this,d)}}compute(e){let{span:t}=e;if(this.changed=!1,(0,s.Z)(this,c).changed||t!=(0,s.Z)(this,d).span){if(l.Yl((0,s.Z)(this,f).results),this.valid()){let e=(0,s.Z)(this,c).fetchNormalizedMatrix(),r=(0,s.Z)(this,u).fetchFilteredBlock();(0,s.Z)(this,f).results=a.rY(e,{span:t,block:r}),(0,s.Z)(this,f).sorted_residuals=(0,s.Z)(this,f).results.residuals().slice(),(0,s.Z)(this,f).sorted_residuals.sort(),this.changed=!0}(0,s.Z)(this,d).span=t}}}},8849:(e,t,r)=>{"use strict";r.d(t,{d:()=>w});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(1944),c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakSet;class w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,m),(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),!(e instanceof u.N_))throw new Error("'correct' should be a BatchCorrectionState object");(0,l.Z)(this,c,e),(0,l.Z)(this,f,null===t?{}:t),(0,l.Z)(this,d,null===r?{}:r),this.changed=!1}free(){h.Yl((0,a.Z)(this,d).raw)}fetchClusters(){if((0,i.Z)(this,m,p).call(this))return(0,a.Z)(this,d).raw.clusters({copy:"view"});throw new Error("cannot fetch k-means clusters from an invalid state")}fetchParameters(){return{...(0,a.Z)(this,f)}}compute(e,t){let{k:r}=t;if(this.changed=!1,(0,a.Z)(this,c).changed||r!=(0,a.Z)(this,f).k||!(0,i.Z)(this,m,p).call(this)&&e){if(h.Yl((0,a.Z)(this,d).raw),e){var n=(0,a.Z)(this,c).fetchCorrected();(0,a.Z)(this,d).raw=o.eu(n,r,{numberOfDims:(0,a.Z)(this,c).fetchNumberOfDimensions(),numberOfCells:(0,a.Z)(this,c).fetchNumberOfCells(),initMethod:"pca-part"})}else delete(0,a.Z)(this,d).raw;(0,a.Z)(this,f).k=r,this.changed=!0}}}function p(){return"raw"in(0,a.Z)(this,d)}},8334:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>m,J6:()=>N,UL:()=>y});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(818),h=r(2269),u=r(7139),c=r(7317),f=r(8366),d=r(2615);const m="marker_detection";function w(e){for(const t of Object.values(e.raw))l.Yl(t);e.raw={},o.eo(e.versus),delete e.versus}function p(e,t,r,n){let{cache:s={},block:i=null,lfc_threshold:a=0,compute_auc:l=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=o.Bh(e,t,s),u=h.left_small?0:1,c=h.left_small?1:0;if(h.run){let s=[],f=[],d=!1,m=!1;if(n.forEach(((r,n)=>{r==e?(s.push(u),f.push(n),d=!0):r==t&&(s.push(c),f.push(n),m=!0)})),!d||!m)throw new Error("non-zero entries should be present for both requested clusters in versus mode");o.c9(r,s,i,f,h.cached,a,l)}return{results:h.cached,left:u,right:c}}var g=new WeakMap,Z=new WeakMap,_=new WeakMap,b=new WeakMap,v=new WeakMap;class y{constructor(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,n.Z)(this,g,{writable:!0,value:void 0}),(0,n.Z)(this,Z,{writable:!0,value:void 0}),(0,n.Z)(this,_,{writable:!0,value:void 0}),(0,n.Z)(this,b,{writable:!0,value:void 0}),(0,n.Z)(this,v,{writable:!0,value:void 0}),!(e instanceof h.H0))throw new Error("'filter' should be a State object from './cell_filtering.js'");if((0,i.Z)(this,g,e),!(t.RNA instanceof c.ue))throw new Error("'norm_states.RNA' should be an RnaNormalizationState object");if(!(t.ADT instanceof f.m5))throw new Error("'norm_states.ADT' should be an AdtNormalizationState object");if(!(t.CRISPR instanceof d.$M))throw new Error("'norm_states.CRISPR' should be an CrisprNormalizationState object");if((0,i.Z)(this,Z,t),!(r instanceof u.c))throw new Error("'choice' should be a State object from './choose_clustering.js'");(0,i.Z)(this,_,r),(0,i.Z)(this,b,null===s?{}:s),(0,i.Z)(this,v,null===a?{raw:{}}:a),this.changed=!1}free(){w((0,s.Z)(this,v))}fetchResults(){return(0,s.Z)(this,v).raw}fetchParameters(){return{...(0,s.Z)(this,b)}}compute(e){let{lfc_threshold:t,compute_auc:r}=e;this.changed=!1;let n=t!==(0,s.Z)(this,b).lfc_threshold||r!==(0,s.Z)(this,b).compute_auc;for(const[o,c]of Object.entries((0,s.Z)(this,Z)))if(c.valid()&&((0,s.Z)(this,_).changed||c.changed||n)){var i=c.fetchNormalizedMatrix(),h=(0,s.Z)(this,_).fetchClusters(),u=(0,s.Z)(this,g).fetchFilteredBlock();l.Yl((0,s.Z)(this,v).raw[o]),(0,s.Z)(this,v).raw[o]=a.y5(i,h,{block:u,lfcThreshold:t,computeAuc:r}),this.changed=!0}(0,s.Z)(this,b).lfc_threshold=t,(0,s.Z)(this,b).compute_auc=r,this.changed&&o.eo((0,s.Z)(this,v).versus)}static defaults(){return{lfc_threshold:0,compute_auc:!0}}static computeVersusCustom(e,t,r,n){let{cache:s={},block:i=null,lfc_threshold:a=0,compute_auc:l=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return computeVersus(e,t,r,n,{cache:s,block:i,lfc_threshold:a,compute_auc:l})}computeVersus(e,t){var r=(0,s.Z)(this,_).fetchClusters(),n=(0,s.Z)(this,g).fetchFilteredBlock();let i=new a.VU;for(const[a,l]of Object.entries((0,s.Z)(this,Z)))l.valid()&&i.add(a,l.fetchNormalizedMatrix());return"versus"in(0,s.Z)(this,v)||((0,s.Z)(this,v).versus={}),p(e,t,i,r,{cache:(0,s.Z)(this,v).versus,block:n,lfc_threshold:(0,s.Z)(this,b).lfc_threshold,compute_auc:(0,s.Z)(this,b).compute_auc})}}var k=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,R=new WeakMap,M=new WeakMap,x=new WeakMap;class N{constructor(e,t){let{block:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,n.Z)(this,k,{writable:!0,value:void 0}),(0,n.Z)(this,E,{writable:!0,value:void 0}),(0,n.Z)(this,O,{writable:!0,value:void 0}),(0,n.Z)(this,C,{writable:!0,value:void 0}),(0,n.Z)(this,R,{writable:!0,value:void 0}),(0,n.Z)(this,M,{writable:!0,value:void 0}),(0,n.Z)(this,x,{writable:!0,value:void 0});let s=t.length;for(const n of e.available()){if(e.get(n).numberOfColumns()!=s)throw new Error("all matrices in 'normalized' should have the same number of columns as the length of 'groups'")}if(null!==r&&r.length!=s)throw new Error("'block' should have the same length as 'groups' if not null");let o=[t];null!==r&&o.push(r);let h,u=l.XZ(o);if(null!==u.retain){h=new a.VU;let t=a.Wf(u.retain.length);try{t.set(u.retain);for(const r of e.available())h.add(r,a.ZW(e.get(r),t))}catch(c){throw h.free(),c}finally{a.gd(t)}}else h=e.clone();(0,i.Z)(this,k,h),(0,i.Z)(this,E,u.arrays[0].ids),(0,i.Z)(this,O,u.arrays[0].levels),null!==r?((0,i.Z)(this,C,u.arrays[1].ids),(0,i.Z)(this,R,u.arrays[1].levels)):((0,i.Z)(this,C,null),(0,i.Z)(this,R,null)),(0,i.Z)(this,M,{raw:{},init:!0}),(0,i.Z)(this,x,y.defaults()),this.changed=!1}free(){a.gd((0,s.Z)(this,E)),a.gd((0,s.Z)(this,C)),a.gd((0,s.Z)(this,k)),w((0,s.Z)(this,M))}fetchResults(){return(0,s.Z)(this,M).raw}fetchParameters(){return{...(0,s.Z)(this,x)}}fetchGroupLevels(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.Z)(this,O);return e?t.slice():t}fetchBlockLevels(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.Z)(this,R);return e?t.slice():t}_peekMatrices(){return(0,s.Z)(this,k)}_peekGroups(){return(0,s.Z)(this,E)}_peekBlock(){return(0,s.Z)(this,C)}setParameters(e){(0,s.Z)(this,x).lfc_threshold===e.lfc_threshold&&(0,s.Z)(this,x).compute_auc===e.compute_auc||w((0,s.Z)(this,M)),(0,i.Z)(this,x,{...e})}computeAll(){let{lfc_threshold:e,compute_auc:t}=(0,s.Z)(this,x);for(const n of(0,s.Z)(this,k).available()){var r=(0,s.Z)(this,k).get(n);l.Yl((0,s.Z)(this,M).raw[n]),(0,s.Z)(this,M).raw[n]=a.y5(r,(0,s.Z)(this,E),{block:(0,s.Z)(this,C),lfcThreshold:e,computeAuc:t})}}computeVersus(e,t){return"versus"in(0,s.Z)(this,M)||((0,s.Z)(this,M).versus={}),p(e,t,(0,s.Z)(this,k),(0,s.Z)(this,E),{cache:(0,s.Z)(this,M).versus,block:(0,s.Z)(this,C),lfc_threshold:(0,s.Z)(this,x).lfc_threshold,compute_auc:(0,s.Z)(this,x).compute_auc})}}},7625:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>c,Xr:()=>p});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(1944);const c="neighbor_index";var f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakSet;class p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,w),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),!(e instanceof u.N_))throw new Error("'correct' should be a BatchCorrectionState object");(0,l.Z)(this,f,e),(0,l.Z)(this,d,null===t?{}:t),(0,l.Z)(this,m,null===r?{}:r),this.changed=!1}free(){h.Yl((0,a.Z)(this,m).raw)}fetchIndex(){return"raw"in(0,a.Z)(this,m)||(0,i.Z)(this,w,g).call(this,(0,a.Z)(this,d).approximate),(0,a.Z)(this,m).raw}fetchParameters(){return{...(0,a.Z)(this,d)}}static defaults(){return{approximate:!0}}compute(e){let{approximate:t}=e;this.changed=!1,((0,a.Z)(this,f).changed||t!=(0,a.Z)(this,d).approximate)&&(h.Yl((0,a.Z)(this,m).raw),(0,i.Z)(this,w,g).call(this,t),(0,a.Z)(this,d).approximate=t,this.changed=!0)}}function g(e){(0,a.Z)(this,m).raw=o.Fu((0,a.Z)(this,f).fetchCorrected(),{approximate:e,numberOfDims:(0,a.Z)(this,f).fetchNumberOfDimensions(),numberOfCells:(0,a.Z)(this,f).fetchNumberOfCells()})}},7317:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>d,ue:()=>_});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(569),c=r(652),f=r(2269);const d="rna_normalization";var m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakSet;class _{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,Z),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),!(e instanceof c.E4))throw new Error("'qc' should be a RnaQualityControlState object");if((0,l.Z)(this,m,e),!(t instanceof f.H0))throw new Error("'filter' should be a CellFilteringState object");(0,l.Z)(this,w,t),(0,l.Z)(this,p,null===r?{}:r),(0,l.Z)(this,g,null===i?{}:i),this.changed=!1}free(){h.Yl((0,a.Z)(this,g).matrix),h.Yl((0,a.Z)(this,g).sum_buffer)}valid(){return(0,a.Z)(this,w).fetchFilteredMatrix().has("RNA")}fetchNormalizedMatrix(){return"matrix"in(0,a.Z)(this,g)||(0,i.Z)(this,Z,b).call(this),(0,a.Z)(this,g).matrix}fetchSizeFactors(){let e;return(0,a.Z)(this,g).sum_buffer&&(e=h.rS((0,a.Z)(this,g).sum_buffer.length,"Float64Array",(0,a.Z)(this,g),"centered_buffer"),o.v_((0,a.Z)(this,g).sum_buffer,{buffer:e,block:(0,a.Z)(this,w).fetchFilteredBlock()})),e}fetchParameters(){return{...(0,a.Z)(this,p)}}compute(e){this.changed=!1,((0,a.Z)(this,m).changed||(0,a.Z)(this,w).changed)&&this.valid()&&(this.changed=!0),this.changed&&(0,i.Z)(this,Z,b).call(this)}static defaults(){return{}}}function b(){var e=(0,a.Z)(this,w).fetchFilteredMatrix().get("RNA");let t=u.e((0,a.Z)(this,m),(0,a.Z)(this,w),e,(0,a.Z)(this,g),"sum_buffer");var r=(0,a.Z)(this,w).fetchFilteredBlock();h.Yl((0,a.Z)(this,g).matrix),(0,a.Z)(this,g).matrix=o.gk(e,{sizeFactors:t,block:r,allowZeros:!0})}},384:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>c,rR:()=>g});var n=r(2346),s=r(8916),i=r(2793),a=r(5831),l=r(7891),o=r(2269),h=r(7317),u=r(8391);const c="rna_pca";var f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap;class g{constructor(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),(0,n.Z)(this,w,{writable:!0,value:void 0}),(0,n.Z)(this,p,{writable:!0,value:void 0}),!(e instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,i.Z)(this,f,e),!(t instanceof h.ue))throw new Error("'norm' should be an RnaNormalizationState object");if((0,i.Z)(this,d,t),!(r instanceof u.$))throw new Error("'feat' should be a FeatureSelectionState object");(0,i.Z)(this,m,r),(0,i.Z)(this,p,null===s?{}:s),(0,i.Z)(this,w,null===a?{}:a),this.changed=!1}free(){l.Yl((0,s.Z)(this,w).hvg_buffer),l.Yl((0,s.Z)(this,w).pcs)}valid(){return(0,s.Z)(this,d).valid()}fetchPCs(){return(0,s.Z)(this,w).pcs}fetchParameters(){return{...(0,s.Z)(this,p)}}compute(e){let{num_hvgs:t,num_pcs:r,block_method:n}=e;if(this.changed=!1,((0,s.Z)(this,m).changed||t!==(0,s.Z)(this,p).num_hvgs)&&(this.valid()&&(Z(t,(0,s.Z)(this,m),(0,s.Z)(this,w)),this.changed=!0),(0,s.Z)(this,p).num_hvgs=t),this.changed||(0,s.Z)(this,d).changed||r!==(0,s.Z)(this,p).num_pcs||n!==(0,s.Z)(this,p).block_method){if(l.Yl((0,s.Z)(this,w).pcs),this.valid()){let e=(0,s.Z)(this,w).hvg_buffer,t=(0,s.Z)(this,f).fetchFilteredBlock();var i=(0,s.Z)(this,d).fetchNormalizedMatrix();(0,s.Z)(this,w).pcs=a.aG(i,{features:e,numberOfPCs:r,block:t,blockMethod:n}),this.changed=!0}(0,s.Z)(this,p).num_pcs=r,(0,s.Z)(this,p).block_method=n}}static defaults(){return{num_hvgs:2e3,num_pcs:20,block_method:"none"}}}function Z(e,t,r){var n=t.fetchSortedResiduals(),s=l.rS(n.length,"Uint8Array",r,"hvg_buffer");if(e<n.length){var i=n[n.length-e],a=t.fetchResults().residuals({copy:!1});s.array().forEach(((e,t,r)=>{r[t]=a[t]>=i}))}else s.fill(1);return s}},652:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>g,E4:()=>k});var n,s=r(101),i=r(4942),a=r(2346),l=r(3889),o=r(3966),h=r(9902),u=r(8916),c=r(2793),f=r(5831),d=r(6474),m=r(7891),w=r(6546),p=r(4833);const g="rna_quality_control";var Z=new WeakMap,_=new WeakMap,b=new WeakMap,v=new WeakMap,y=new WeakSet;class k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,s.Z)(this,y),(0,a.Z)(this,Z,{writable:!0,value:void 0}),(0,a.Z)(this,_,{writable:!0,value:void 0}),(0,a.Z)(this,b,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),!(e instanceof w.tq))throw new Error("'inputs' should be an InputsState object");(0,c.Z)(this,Z,e),(0,c.Z)(this,b,null===t?{}:t),(0,c.Z)(this,_,null===r?{}:r),(0,c.Z)(this,v,!1),this.changed=!1}free(){m.Yl((0,u.Z)(this,_).metrics),m.Yl((0,u.Z)(this,_).filters),m.Yl((0,u.Z)(this,_).metrics_buffer),m.Yl((0,u.Z)(this,_).discard_buffer)}valid(){return(0,u.Z)(this,Z).fetchCountMatrix().has("RNA")}fetchParameters(){let e={...(0,u.Z)(this,b)};return e.species=d.bl(e.species),e}fetchDiscards(){return(0,u.Z)(this,_).discard_buffer}fetchFilters(){return(0,u.Z)(this,_).filters}fetchMetrics(){return(0,u.Z)(this,_).metrics}static defaults(){return{automatic:!0,gene_id_column:null,use_reference_mito:!0,species:[],gene_id_type:"ENSEMBL",mito_prefix:"mt-",nmads:3}}static configureFeatureParameters(e,t){let r=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in t){let r=t.row_names;r.confidence>n.confidence&&(e||"symbol"==r.type)&&(n=r)}for(const[s,i]of Object.entries(t.columns))i.confidence>n.confidence&&(e||"symbol"==i.type)&&(n=i,r=s);return{gene_id_column:r,species:[n.species],gene_id_type:n.type.toUpperCase()}}static flush(){(0,o.Z)(k,k,O,{})}static setDownload(e){let t=(0,h.Z)(k,k,C);return(0,o.Z)(k,k,C,e),t}async compute(e){let t,r,n,s,i,{mito_prefix:a,nmads:o}=e;if("use_reference_mito"in e)t=e.automatic,r=e.use_reference_mito,n=e.gene_id_column,s=e.species,i=e.gene_id_type;else{t=!0,r=e.use_mito_default;let a=k.defaults();n=a.gene_id_column,s=a.species,i=a.gene_id_type}if(this.changed=!1,(0,u.Z)(this,Z).changed||t!==(0,u.Z)(this,b).automatic||r!==(0,u.Z)(this,b).use_reference_mito||!t&&(n!==(0,u.Z)(this,b).gene_id_column||!r&&a!==(0,u.Z)(this,b).mito_prefix||r&&(m.xi(s,(0,u.Z)(this,b).species)||i!==(0,u.Z)(this,b).gene_id_type)))if(m.Yl((0,u.Z)(this,_).metrics),this.valid()){let e=n,o=s,d=i;if(t){let t=(0,u.Z)(this,Z).guessRnaFeatureTypes(),n=k.configureFeatureParameters(r,t);e=n.gene_id_column,o=n.species,d=n.gene_id_type}var h=(0,u.Z)(this,Z).fetchFeatureAnnotations().RNA;let b=null==e?h.rowNames():h.column(e);var c=m.rS(h.numberOfRows(),"Uint8Array",(0,u.Z)(this,_),"metrics_buffer");if(c.fill(0),null!==b)if(r){let e=await(0,l.Z)(this,y,E).call(this,o,d);var w=c.array();b.forEach(((t,r)=>{e.has(t)&&(w[r]=1)}))}else if(null!==a){var p=a.toLowerCase();w=c.array();b.forEach(((e,t)=>{e.toLowerCase().startsWith(p)&&(w[t]=1)}))}var g=(0,u.Z)(this,Z).fetchCountMatrix().get("RNA");(0,u.Z)(this,_).metrics=f.wj(g,[c]),this.changed=!0}else delete(0,u.Z)(this,_).metrics;if((0,u.Z)(this,b).automatic=t,(0,u.Z)(this,b).gene_id_column=n,(0,u.Z)(this,b).use_reference_mito=r,(0,u.Z)(this,b).species=d.bl(s),(0,u.Z)(this,b).gene_id_type=i,(0,u.Z)(this,b).mito_prefix=a,this.changed||o!==(0,u.Z)(this,b).nmads){if(m.Yl((0,u.Z)(this,_).filters),this.valid()){let e=(0,u.Z)(this,Z).fetchBlock();(0,u.Z)(this,_).filters=f.Lw((0,u.Z)(this,_).metrics,{numberOfMADs:o,block:e});var v=m.rS((0,u.Z)(this,_).metrics.numberOfCells(),"Uint8Array",(0,u.Z)(this,_),"discard_buffer");(0,u.Z)(this,_).filters.filter((0,u.Z)(this,_).metrics,{block:e,buffer:v}),this.changed=!0}else delete(0,u.Z)(this,_).filters;(0,u.Z)(this,b).nmads=o}}}async function E(e,t){let r=new Set,s=(0,h.Z)(n,n,O);for(const i of e){let e=i+"-mito-"+t.toLowerCase()+".txt.gz";if(!(e in s)){let t=await(0,h.Z)(n,n,C).call(n,"https://github.com/kanaverse/kana-special-features/releases/download/v1.0.0/"+e),r=await p.bw(t,{compression:"gz"});s[e]=r}s[e].forEach((e=>{r.add(e)}))}return r}n=k,(0,i.Z)(k,"mitochondriaSpecies",["9606","10090","6239","10116","9541","7227","7955","9598"]);var O={writable:!0,value:{}},C={writable:!0,value:m.we}},4414:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>c,Xs:()=>_});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(7891),u=r(7625);const c="snn_graph_cluster";var f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakSet,p=new WeakSet,g=new WeakSet,Z=new WeakSet;class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,Z),(0,n.Z)(this,g),(0,n.Z)(this,p),(0,n.Z)(this,w),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),!(e instanceof u.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,l.Z)(this,f,e),(0,l.Z)(this,d,null===t?{}:t),(0,l.Z)(this,m,null===r?{}:r),this.changed=!1}free(){h.Yl((0,a.Z)(this,m).neighbors),h.Yl((0,a.Z)(this,m).graph),h.Yl((0,a.Z)(this,m).clusters)}fetchClusters(){if((0,i.Z)(this,w,b).call(this))return(0,a.Z)(this,m).clusters.membership({copy:"view"});throw"cannot fetch SNN clusters from an invalid state"}fetchParameters(){return{...(0,a.Z)(this,d)}}static defaults(){return{k:10,scheme:"rank",algorithm:"multilevel",multilevel_resolution:1,leiden_resolution:1,walktrap_steps:4}}compute(e,t){let{k:r,scheme:n,algorithm:s,multilevel_resolution:l,leiden_resolution:o,walktrap_steps:u}=t;this.changed=!1,((0,a.Z)(this,f).changed||r!==(0,a.Z)(this,d).k)&&(h.Yl((0,a.Z)(this,m).neighbors),e?(0,i.Z)(this,p,v).call(this,r):delete(0,a.Z)(this,m).neighbors,(0,a.Z)(this,d).k=r,this.changed=!0),(this.changed||n!==(0,a.Z)(this,d).scheme)&&(h.Yl((0,a.Z)(this,m).graph),e?(0,i.Z)(this,g,y).call(this,n):delete(0,a.Z)(this,m).graph,(0,a.Z)(this,d).scheme=n,this.changed=!0),(this.changed||s!==(0,a.Z)(this,d).algorithm||l!==(0,a.Z)(this,d).multilevel_resolution||o!==(0,a.Z)(this,d).leiden_resolution||u!==(0,a.Z)(this,d).walktrap_steps||!(0,i.Z)(this,w,b).call(this)&&e)&&(h.Yl((0,a.Z)(this,m).clusters),e?(0,i.Z)(this,Z,k).call(this,s,l,o,u):delete(0,a.Z)(this,m).clusters,(0,a.Z)(this,d).algorithm=s,(0,a.Z)(this,d).multilevel_resolution=l,(0,a.Z)(this,d).leiden_resolution=o,(0,a.Z)(this,d).walktrap_steps=u,this.changed=!0)}}function b(){return"clusters"in(0,a.Z)(this,m)}function v(e){(0,a.Z)(this,m).neighbors=o.wf((0,a.Z)(this,f).fetchIndex(),e)}function y(e){"neighbors"in(0,a.Z)(this,m)||(0,i.Z)(this,p,v).call(this,(0,a.Z)(this,d).k),(0,a.Z)(this,m).graph=o.bD((0,a.Z)(this,m).neighbors,{scheme:e})}function k(e,t,r,n){"graph"in(0,a.Z)(this,m)||(0,i.Z)(this,g,y).call(this,(0,a.Z)(this,d).scheme),(0,a.Z)(this,m).clusters=o.ZI((0,a.Z)(this,m).graph,{method:e,multiLevelResolution:t,leidenResolution:r,leidenModularityObjective:!0,walktrapSteps:n})}},3060:(e,t,r)=>{"use strict";r.d(t,{T:()=>_});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(5831),h=r(4071),u=(r(7891),r(7625)),c=r(6269),f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakSet;class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,Z),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),!(e instanceof u.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,l.Z)(this,f,e),(0,l.Z)(this,d,null===t?{}:t),(0,l.Z)(this,m,r),this.changed=!1;let i=c.k(),{worker_id:a,ready:o}=h.Ig(i,h.yc);(0,l.Z)(this,w,a),(0,l.Z)(this,p,o),(0,l.Z)(this,g,null)}ready(){return(0,a.Z)(this,p)}free(){return h.qM((0,a.Z)(this,w))}fetchParameters(){return{...(0,a.Z)(this,d)}}async fetchResults(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!==(0,a.Z)(this,m)){let t={x:(0,a.Z)(this,m).x,y:(0,a.Z)(this,m).y};return e&&(t.x=t.x.slice(),t.y=t.y.slice()),t.iterations=(0,a.Z)(this,d).iterations,t}return await(0,a.Z)(this,g),h.cE((0,a.Z)(this,w),{cmd:"FETCH"})}compute(e){let{perplexity:t,iterations:r,animate:n}=e,s=!(0,a.Z)(this,f).changed&&t===(0,a.Z)(this,d).perplexity;return s&&r==(0,a.Z)(this,d).iterations?(this.changed=!1,new Promise((e=>e(null)))):(null!==(0,a.Z)(this,m)&&(s=!1,(0,l.Z)(this,m,null)),(0,i.Z)(this,Z,b).call(this,t,r,n,!s),(0,a.Z)(this,d).perplexity=t,(0,a.Z)(this,d).iterations=r,(0,a.Z)(this,d).animate=n,this.changed=!0,(0,a.Z)(this,g))}animate(){return null!==(0,a.Z)(this,m)?((0,l.Z)(this,m,null),(0,i.Z)(this,Z,b).call(this,(0,a.Z)(this,d).perplexity,(0,a.Z)(this,d).iterations,!0,!0),(0,a.Z)(this,g).then((e=>({type:"tsne_rerun",data:{status:"SUCCESS"}})))):h.cE((0,a.Z)(this,w),{cmd:"RERUN"})}}function b(e,t,r,n){var s=null;if(n){var i=o.Tk(e);s=h.AB((0,a.Z)(this,f),i)}let u={perplexity:e,iterations:t,animate:r};(0,l.Z)(this,g,h.Vi((0,a.Z)(this,w),u,s))}},7270:(e,t,r)=>{"use strict";r.d(t,{D:()=>Z});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=(r(5831),r(4071)),h=(r(7891),r(7625)),u=r(6269),c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakSet;class Z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,n.Z)(this,g),(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),!(e instanceof h.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,l.Z)(this,c,e),(0,l.Z)(this,f,null===t?{}:t),(0,l.Z)(this,d,r),this.changed=!1;let i=u.u(),{worker_id:a,ready:Z}=o.Ig(i,o.yc);(0,l.Z)(this,m,a),(0,l.Z)(this,w,Z),(0,l.Z)(this,p,null)}ready(){return(0,a.Z)(this,w)}free(){return o.qM((0,a.Z)(this,m))}async fetchResults(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!==(0,a.Z)(this,d)){let t={x:(0,a.Z)(this,d).x,y:(0,a.Z)(this,d).y};return e&&(t.x=t.x.slice(),t.y=t.y.slice()),t.iterations=(0,a.Z)(this,f).num_epochs,t}return await(0,a.Z)(this,p),o.cE((0,a.Z)(this,m),{cmd:"FETCH"})}fetchParameters(){return{...(0,a.Z)(this,f)}}compute(e){let{num_neighbors:t,num_epochs:r,min_dist:n,animate:s}=e,o=!(0,a.Z)(this,c).changed&&(0,a.Z)(this,f).num_neighbors===t;return o&&r===(0,a.Z)(this,f).num_epochs&&n===(0,a.Z)(this,f).min_dist?(this.changed=!1,new Promise((e=>e(null)))):(null!==(0,a.Z)(this,d)&&(o=!1,(0,l.Z)(this,d,null)),(0,i.Z)(this,g,_).call(this,t,r,n,s,!o),(0,a.Z)(this,f).num_neighbors=t,(0,a.Z)(this,f).num_epochs=r,(0,a.Z)(this,f).min_dist=n,(0,a.Z)(this,f).animate=s,this.changed=!0,(0,a.Z)(this,p))}animate(){return null!==(0,a.Z)(this,d)?((0,l.Z)(this,d,null),(0,i.Z)(this,g,_).call(this,(0,a.Z)(this,f).num_neighbors,(0,a.Z)(this,f).num_epochs,(0,a.Z)(this,f).min_dist,!0,!0),(0,a.Z)(this,p).then((e=>({type:"umap_rerun",data:{status:"SUCCESS"}})))):o.cE((0,a.Z)(this,m),{cmd:"RERUN"})}}function _(e,t,r,n,s){var i=null;s&&(i=o.AB((0,a.Z)(this,c),e));let h={num_neighbors:e,num_epochs:t,min_dist:r,animate:n};(0,l.Z)(this,p,o.Vi((0,a.Z)(this,m),h,i))}},8794:(e,t,r)=>{"use strict";function n(e,t){e.onmessage=t}function s(e,t,r){e.postMessage(t,r)}function i(e){e.terminate()}r.d(t,{Ae:()=>i,bG:()=>s,jC:()=>n})},7891:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>o,N2:()=>h,XZ:()=>f,Yl:()=>s,rS:()=>l,we:()=>u,xi:()=>a,zS:()=>c});var n=r(5831);function s(e){n.gd(e)}function i(e,t,r,n){if(!r&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("parameters cannot contain ArrayBuffers or their views");if(!n&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error("parameters cannot contain ArrayBuffers or their views")}function a(e,t){if(typeof e!=typeof t)return i(e,t,!1,!1),!0;if("object"!=typeof e)return e!=t;let r=null===e,n=null===t;if(r!==n)return i(e,t,r,n),!0;if(r)return!1;let s=e instanceof Array,l=t instanceof Array;if(s!=l)return i(e,t,s,l),!0;if(s){if(e.length!=t.length)return!0;for(var o=0;o<e.length;o++)if(a(e[o],t[o]))return!0;return!1}i(e,t,!1,!1);let h=Object.keys(e),u=Object.keys(t);if(h.length!=u.length)return!0;h.sort(),u.sort();for(o=0;o<h.length;o++)if(h[o]!=u[o])return!0;for(const i of h)if(a(e[i],t[i]))return!0;return!1}function l(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"buffer";var i=!0;if(s in r){var a=r[s];a.size!=e||a.constructor.className!=t||null!==a.owner?a.free():i=!1}if(i)switch(t){case"Uint8Array":r[s]=n.TS(e);break;case"Int32Array":r[s]=n.Wf(e);break;case"Float64Array":r[s]=n.RJ(e);break;default:throw"allocating '"+t+"' not yet supported"}return r[s]}function o(e,t){let r=[];for(const[n,s]of Object.entries(e))s.valid()&&r.push(n);if(0==r.length)throw new Error("expected at least one valid upstream "+t+" state");return r}function h(e,t){if(null!==t)for(const n of e)if(n<0||n>=t)throw new Error("subset indices are out of range");for(var r=1;r<e.length;r++)if(e[r]<=e[r-1])throw new Error("subset indices must be sorted and unique")}async function u(e){let t=await fetch(e);if(!t.ok)throw new Error("failed to fetch content at "+e+"("+t.status+")");return new Uint8Array(await t.arrayBuffer())}function c(e){let t={columns:{}},r=e.rowNames();null!==r&&(t.row_names=n.gn(r,{forceTaxonomy:!0}));for(const s of e.columnNames()){e.column(s)instanceof Array&&(t.columns[s]=n.gn(e.column(s),{forceTaxonomy:!0}))}return t}function f(e){let t=e[0].length,r={arrays:[],retain:null},s=new Uint8Array(t);s.fill(0);for(const o of e){let e=n.Yh(o,{action:"none",placeholder:-1});r.arrays.push(e),e.ids.forEach(((e,t)=>{-1==e&&(s[t]=1)}))}let i=0;if(s.forEach((e=>{i+=e})),0==i)return r;let a=new Int32Array(t-i);{let e=0;for(var l=0;l<t;l++)0==s[l]&&(a[e]=l,e++)}r.retain=a;for(l=0;l<r.arrays.length;l++){let e=r.arrays[l],t=n.DS(e.ids,a),s=n.D4(t).map((t=>e.levels[t]));n.gd(e.ids),e.ids=t,e.levels=s}return r}},818:(e,t,r)=>{"use strict";r.d(t,{Bh:()=>a,c9:()=>o,eo:()=>l,iG:()=>s,jJ:()=>i});var n=r(5831);const s={min:0,mean:1,min_rank:4};function i(e,t,r){var n;r&&void 0!==r||(r="cohen-min-rank");{let i,a=!1,l=1;if(r.match(/-min$/)?l=0:r.match(/-min-rank$/)&&(a=!0,l=4),r.match(/^cohen-/))i=e.cohen(t,{summary:l,copy:!1});else if(r.match(/^auc-/))i=e.auc(t,{summary:l,copy:!1});else if(r.match(/^lfc-/))i=e.lfc(t,{summary:l,copy:!1});else{if(!r.match(/^delta-d-/))throw"unknown rank type '"+r+"'";i=e.deltaDetected(t,{summary:l,copy:!1})}n=new Int32Array(i.length);for(var s=0;s<n.length;s++)n[s]=s;a?n.sort(((e,t)=>i[e]-i[t])):n.sort(((e,t)=>i[t]-i[e]))}var i=function(e){for(var t=new Float64Array(e.length),r=0;r<n.length;r++)t[r]=e[n[r]];return t},a=i(e.detected(t,{copy:!1})),l=i(e.means(t,{copy:!1})),o=i(e.lfc(t,{summary:1,copy:!1})),h=i(e.deltaDetected(t,{summary:1,copy:!1}));return{ordering:n,means:l,detected:a,lfc:o,delta_detected:h}}function a(e,t,r){let n=e<t,s=n?t:e;s in r||(r[s]={});let i=r[s],a=n?e:t,l=!(a in i);return l&&(i[a]={}),{cached:i[a],run:l,left_small:n}}function l(e){if(e){for(const t of Object.values(e))for(const e of Object.values(t))for(const t of Object.values(e))n.gd(t);for(const t of Object.keys(e))delete e[t]}}function o(e,t,r,s,i,a,l){let o=null;null!==r&&(o=n.DS(r,s),n.D4(o));for(const h of e.available()){let r,u=e.get(h);try{r=n.ZW(u,s),i[h]=n.y5(r,t,{block:o,lfcThreshold:a,computeAuc:l})}finally{n.gd(r)}}}},569:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(7891);function s(e,t,r,s,i){let a=n.rS(r.numberOfColumns(),"Float64Array",s,i),l=t.fetchDiscards(),o=e.fetchMetrics().sums({copy:!1});if(null==l)a.set(o);else{let e=a.array();var h=0;if(l.forEach(((t,r)=>{if(!t){if(h==a.length)throw new Error("normalization and filtering are not in sync");e[h]=o[r],h++}})),h!==a.length)throw new Error("normalization and filtering are not in sync")}return a}},7806:(e,t,r)=>{"use strict";r.d(t,{Ab:()=>u,Et:()=>c,G:()=>m,G9:()=>i,NR:()=>l,Nd:()=>a,Su:()=>d,Tm:()=>h,V_:()=>f,bl:()=>o});var n=r(3637),s=r(8497);function i(e){if("_bioconductor_LENGTH"in e)return e._bioconductor_LENGTH();if(!n.zG(e))throw new Error("no method for 'LENGTH' in '"+e.constructor.name+"' instance");return e.length}function a(e,t){let{allowView:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("_bioconductor_SLICE"in e){let n=new e.constructor;return e._bioconductor_SLICE(n,t,{allowView:r}),n}if(!n.zG(e))throw new Error("no method for 'SLICE' in '"+e.constructor.name+"' instance");if(t.constructor==Object)return r&&ArrayBuffer.isView(e)?e.subarray(t.start,t.end):e.slice(t.start,t.end);{let r=new e.constructor(t.length);return t.forEach(((t,n)=>{r[n]=e[t]})),r}}function l(e){let t=e[0];if("_bioconductor_COMBINE"in t){let r=new t.constructor;return t._bioconductor_COMBINE(r,e),r}if(!n.zG(t))throw new Error("no method for 'COMBINE' in '"+t.constructor.name+"' instance");let r=0,s=t.constructor;for(const l of e)r+=l.length,s=n.BQ(s,l.constructor);let i=new s(r),a=0;for(const n of e)"set"in i?(i.set(n,a),a+=n.length):n.forEach((e=>{i[a]=e,a++}));return i}function o(e){let{deepCopy:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof Object){let r={deepCopy:t};if("_bioconductor_CLONE"in e){let t=new e.constructor;return e._bioconductor_CLONE(t,r),t}if(n.zG(e))return e.constructor==Array?e.map((e=>o(e,r))):t?e.slice():e.subarray();if(e.constructor==Object){if(t){let t={};for(const[r,n]of Object.entries(e))t[r]=o(n);return t}return{...e}}if(e.constructor==Map){let r=new Map;for(const[n,s]of e)r.set(n,t?o(s):s);return r}if(e.constructor==Set){let r=new Set;for(const n of e)r.add(t?o(n):n);return r}throw new Error("unknown CLONE operation for instance of class '"+e.constructor.name+"'")}return e}function h(e,t){if(t.constructor!=Object&&(t=s.L(t)),"_bioconductor_SPLIT"in e)return e._bioconductor_SPLIT(t);let r={};for(const[n,s]of Object.entries(t))r[n]=a(e,s);return r}function u(e){if(!("_bioconductor_NUMBER_OF_ROWS"in e))throw new Error("no 'NUMBER_OF_ROWS' method available for '"+e.constructor.name+"' instance");return e._bioconductor_NUMBER_OF_ROWS()}function c(e){if(!("_bioconductor_NUMBER_OF_COLUMNS"in e))throw new Error("no 'NUMBER_OF_COLUMNS' method available for '"+e.constructor.name+"' instance");return e._bioconductor_NUMBER_OF_COLUMNS()}function f(e,t,r){let{allowView:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!("_bioconductor_SLICE_2D"in e))throw new Error("no 'SLICE_2D' method available for '"+e.constructor.name+"' instance");let s=new e.constructor;return e._bioconductor_SLICE_2D(s,t,r,{allowView:n}),s}function d(e){let t=e[0];if(!("_bioconductor_COMBINE_ROWS"in t))throw new Error("no 'COMBINE_ROWS' method available for '"+t.constructor.name+"' instance");let r=new t.constructor;return t._bioconductor_COMBINE_ROWS(r,e),r}function m(e){let t=e[0];if(!("_bioconductor_COMBINE_COLUMNS"in t))throw new Error("no 'COMBINE_COLUMNS' method available for '"+t.constructor.name+"' instance");let r=new t.constructor;return t._bioconductor_COMBINE_COLUMNS(r,e),r}},3750:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var n=r(9648),s=r(3637);class i{constructor(e){0!=arguments.length&&(this._metadata=s.OI(e))}metadata(){return this._metadata}setMetadata(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.Q(this,t);return r._metadata=s.OI(e),r}$setMetadata(e){return this.setMetadata(e,{inPlace:!0})}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;e._metadata=n.J(this._metadata,r)}}},815:(e,t,r)=>{"use strict";r.d(t,{N:()=>h,s:()=>u});var n=r(4942),s=r(7806),i=r(3637),a=r(9648),l=r(3750),o=r(6674);class h extends l.M{constructor(e){let{numberOfRows:t=null,rowNames:r=null,columnOrder:n=null,metadata:a={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!=arguments.length){super(a),this._numberOfRows=t,this._rowNames=r;try{this._columns=new o.H(e,n)}catch(l){throw new Error("failed to initialize columns for this "+this.constructor.className+"; "+l.message,{cause:l})}for(const e of this._columns.names()){let t=s.G9(this._columns.entry(e));if(null==this._numberOfRows)this._numberOfRows=t;else if(t!=this._numberOfRows)throw new Error("expected all arrays in 'columns' to have equal length")}null!=r&&(null==this._numberOfRows&&(this._numberOfRows=r.length),i.Vt(r,"'rowNames'",this._numberOfRows,"'numberOfRows' or the length of arrays in 'columns'")),null==this._numberOfRows&&(this._numberOfRows=0)}else super()}rowNames(){return this._rowNames}columnNames(){return this._columns.names()}hasColumn(e){return this._columns.has(e)}numberOfRows(){return this._numberOfRows}numberOfColumns(){return this._columns.numberOfEntries()}column(e){return this._columns.entry(e)}removeColumn(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.Q(this,t);return r._columns=this._columns.delete(e,{inPlace:t}),r}$removeColumn(e){return this.removeColumn(e,{inPlace:!0})}setColumn(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s.G9(t)!=this._numberOfRows)throw new Error("expected 'value' to have the same length as the number of rows in 'x'");let n=a.Q(this,r);return n._columns=this._columns.set(e,t,{inPlace:r}),n}$setColumn(e,t){return this.setColumn(e,t,{inPlace:!0})}setColumnNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.Q(this,t);return r._columns=r._columns.setNames(e,{inPlace:t}),r}$setColumnNames(e){return this.setColumnNames(e,{inPlace:!0})}setRowNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&i.Vt(e,"replacement 'names'",this._numberOfRows,"'numberOfRows()'");let r=a.Q(this,t);return r._rowNames=e,r}$setRowNames(e){return this.setRowNames(e,{inPlace:!0})}sliceColumns(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.Q(this,t);return r._columns=this._columns.slice(e,{inPlace:t}),r}$sliceColumns(e){return this.sliceColumns(e,{inPlace:!0})}_bioconductor_LENGTH(){return this.numberOfRows()}_bioconductor_SLICE(e,t,r){let n,{allowView:i=!1}=r,a={allowView:i},l=this._columns.apply((e=>s.Nd(e,t,a))),o=null==this._rowNames?null:s.Nd(this._rowNames,t,a);n=t.constructor==Object?t.end-t.start:t.length,e._rowNames=o,e._columns=l,e._numberOfRows=n,e._metadata=this._metadata}_bioconductor_COMBINE(e,t){let r=o.H.parallelCombine(t.map((e=>e._columns)),s.NR),n=[],a=[];for(const s of t)n.push(s.rowNames()),a.push(s.numberOfRows());let l=i.Sm(a),h=i.SE(n,a,l);e._rowNames=h,e._columns=r,e._numberOfRows=l,e._metadata=this._metadata}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._columns=a.J(this._columns,r),e._rowNames=a.J(this._rowNames,r),e._numberOfRows=this._numberOfRows}}function u(e){let t=new Set,r=[];for(const s of e){let e=s.columnNames();for(const n of e)t.has(n)||(t.add(n),r.push(n))}let n=[];for(const i of e){let e=new Array(i.numberOfRows());e.fill(null);let t=s.bl(i,{deepCopy:!1});for(const n of r)i.hasColumn(n)||t.$setColumn(n,e);t._columns=t._columns.reorder(r),n.push(t)}return s.NR(n)}(0,n.Z)(h,"className","DataFrame")},8882:(e,t,r)=>{"use strict";var n=r(101),s=r(4942),i=r(3889),a=r(9648),l=new WeakSet,o=new WeakSet,h=new WeakSet,u=new WeakSet;function c(e,t,r,n,s){if(s){let t=e*r,s=t+r;return n?this._values.subarray(t,s):this._values.slice(t,s)}{let n=new this._values.constructor(r),s=e;for(var i=0;i<r;i++)n[i]=this._values[s],s+=t;return n}}function f(e,t,r,n,s){if(n){let t=e*r;this._values.set(s,t)}else{new this._values.constructor(r);let n=e;for(var i=0;i<r;i++)this._values[n]=s[i],n+=t}}function d(e,t,r,n,s,a,l,o,h,c){if(t)for(var f=0;f<n;f++)(0,i.Z)(this,u,m).call(this,s,a,l,o,h,c,f,f);else if(r)for(f=e.start;f<e.end;f++)(0,i.Z)(this,u,m).call(this,s,a,l,o,h,c,f,f-e.start);else for(var d=0;d<e.length;d++)(0,i.Z)(this,u,m).call(this,s,a,l,o,h,c,e[d],d)}function m(e,t,r,n,s,i,a,l){let o=a*n,h=l*s;if(t){let e=this._values.subarray(o,o+n);i.set(e,h)}else if(r)for(var u=e.start;u<e.end;u++)i[h+u-e.start]=this._values[o+u];else for(var c=0;c<e.length;c++)i[h+c]=this._values[o+e[c]]}(0,s.Z)(class{constructor(e,t,r){let{columnMajor:s=!0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if((0,n.Z)(this,u),(0,n.Z)(this,h),(0,n.Z)(this,o),(0,n.Z)(this,l),0!=arguments.length&&(this._numberOfRows=e,this._numberOfColumns=t,this._values=r,this._columnMajor=s,e*t!=r.length))throw new Error("length of 'values' should be equal to the product of 'dimensions'")}numberOfRows(){return this._numberOfRows}numberOfColumns(){return this._numberOfColumns}isColumnMajor(){return this._columnMajor}values(){return this._values}row(e){let{allowView:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(this,l,c).call(this,e,this._numberOfRows,this._numberOfColumns,t,!this._columnMajor)}column(e){let{allowView:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(this,l,c).call(this,e,this._numberOfColumns,this._numberOfRows,t,this._columnMajor)}setValues(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length!==this._values.length)throw new Error("replacement 'values' should have length equal to 'values()'");let r=a.Q(this,t);return r._values=e,r}$setValues(e){return this.setValues(e,{inPlace:!0})}setRow(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length!==this._numberOfColumns)throw new Error("replacement row should have length equal to 'numberOfColumns()'");let n=a.Q(this,r);return r||(n._values=n._values.slice()),(0,i.Z)(n,o,f).call(n,e,n._numberOfRows,n._numberOfColumns,!n._columnMajor,t),n}$setRow(e,t){return this.setRow(e,t,{inPlace:!0})}setColumn(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length!==this._numberOfRows)throw new Error("replacement column should have length equal to 'numberOfRows()'");let n=a.Q(this,r);return r||(n._values=n._values.slice()),(0,i.Z)(n,o,f).call(n,e,n._numberOfColumns,n._numberOfRows,n._columnMajor,t),n}$setColumn(e,t){return this.setColumn(e,t,{inPlace:!0})}_bioconductor_NUMBER_OF_ROWS(){return this.numberOfRows()}_bioconductor_NUMBER_OF_COLUMNS(){return this.numberOfColumns()}_bioconductor_SLICE_2D(e,t,r,n){let{}=n,s=null===t,a=!s&&t.constructor==Object,l=s?this._numberOfRows:a?t.end-t.start:t.length;e._numberOfRows=l;let o=null===r,u=!o&&r.constructor==Object,c=o?this._numberOfColumns:u?r.end-r.start:r.length;e._numberOfColumns=c;let f=new this._values.constructor(l*c);e._values=f,this._columnMajor?(0,i.Z)(this,h,d).call(this,r,o,u,this._numberOfColumns,t,s,a,this._numberOfRows,l,f):(0,i.Z)(this,h,d).call(this,t,s,a,this._numberOfRows,r,o,u,this._numberOfColumns,c,f),e._columnMajor=this._columnMajor}_combiner(e,t,r,n,s){let i=t(e[0]),a=r(e[0]);for(var l=1;l<e.length;l++){if(r(e[l])!==a)throw new Error("all objects must have the same number of "+s);i+=t(e[l])}let o=n(e[0]),h=new e[0]._values.constructor(i*a);if(o){let r=0;for(l=0;l<e.length;l++){let s=e[l],i=t(s),o=r*a;if(n(s))h.set(s._values,o);else for(var u=0;u<a;u++){let e=u*i,t=o+u;for(var c=0;c<i;c++)h[t+c*a]=s._values[e+c]}r+=i}}else{let r=0;for(l=0;l<e.length;l++){let s=e[l],o=t(s);if(n(s))for(c=0;c<o;c++){let e=c*a,t=r+c;for(u=0;u<a;u++)h[t+u*i]=s._values[e+u]}else for(var u=0;u<a;u++){let e=u*o,t=s._values.subarray(e,e+o);h.set(t,r+u*i)}r+=o}}return{num_primary:i,num_secondary:a,values:h,primary_major:o}}_bioconductor_COMBINE_ROWS(e,t){let r=this._combiner(t,(e=>e._numberOfRows),(e=>e._numberOfColumns),(e=>!e._columnMajor),"columns");e._numberOfRows=r.num_primary,e._numberOfColumns=r.num_secondary,e._values=r.values,e._columnMajor=!r.primary_major}_bioconductor_COMBINE_COLUMNS(e,t){let r=this._combiner(t,(e=>e._numberOfColumns),(e=>e._numberOfRows),(e=>e._columnMajor),"rows");e._numberOfColumns=r.num_primary,e._numberOfRows=r.num_secondary,e._values=r.values,e._columnMajor=r.primary_major}_bioconductor_CLONE(e){let{deepCopy:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e._values=t?this._values.slice():this._values,e._numberOfRows=this._numberOfRows,e._numberOfColumns=this._numberOfColumns,e._columnMajor=this._columnMajor}},"name","DenseMatrix")},5605:(e,t,r)=>{"use strict";r.d(t,{a:()=>u});var n=r(2415),s=r(7806),i=r(3637),a=r(9648),l=r(1774),o=r(1380),h=r(9420);class u extends o.O{constructor(e,t){let{strand:r=null,names:a=null,elementMetadata:l=null,metadata:o={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==arguments.length)return void super();super(e.length,{names:a,elementMetadata:l,metadata:o}),i.K1(e,"seqnames"),this._seqnames=e;let h=e.length;if(h!==s.G9(t))throw i.rS("'ranges'","'seqnames'");if(this._ranges=t,null!==r){if(h!==r.length)throw i.rS("'strand'","'seqnames'");r=(0,n.Z)(u,u,c).call(u,r),(0,n.Z)(u,u,f).call(u,r)}else r=new Int8Array(h),r.fill(0);this._strand=r}start(){return this._ranges.start()}end(){return this._ranges.end()}width(){return this._ranges.width()}seqnames(){return this._seqnames}ranges(){return this._ranges}strand(){return this._strand}setSeqnames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Vt(e,"replacement 'seqnames'",s.G9(this),"'LENGTH(<GRanges>)'");let r=a.Q(this,t);return r._seqnames=e,r}$setSeqnames(e){return this.setSeqnames(e,{inPlace:!0})}setRanges(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof l.Z))throw new Error("'ranges' should be an IRanges object");if(s.G9(e)!==s.G9(this._ranges))throw i.rS("replacement 'ranges'","'LENGTH(<GRanges>)'");let r=a.Q(this,t);return r._ranges=e,r}$setRanges(e){return this.setRanges(e,{inPlace:!0})}setStrand(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._strand.length!==e.length)throw i.rS("'strand'","'seqnames'");e=(0,n.Z)(u,u,c).call(u,e),(0,n.Z)(u,u,f).call(u,e);let r=a.Q(this,t);return r._strand=e,r}$setStrand(e){return this.setStrand(e,{inPlace:!0})}buildOverlapIndex(){let{restrictToSeqnames:e=null,restrictToStrand:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.Nt(s.G9(this)),n=s.Tm(r,this._seqnames),a=this.start(),l=this.end();null!==e&&e instanceof Array&&(e=new Set(e)),null!==t&&t instanceof Array&&(t=new Set(t));for(const i of Object.keys(n)){if(null!==e&&!e.has(i)){delete n[i];continue}let r=n[i],o=s.Nd(this._strand,r),u=s.Tm(r,o);for(const e of Object.keys(u)){if(null!==t&&!t.has(Number(e))){delete u[e];continue}let r=u[e];u[e]=h.lZ(a,l,{slice:r})}n[i]=u}return new d(n)}_bioconductor_LENGTH(){return this._seqnames.length}_bioconductor_SLICE(e,t,r){let{allowView:n=!1}=r;super._bioconductor_SLICE(e,t,{allowView:n}),e._seqnames=s.Nd(this._seqnames,t,{allowView:n}),e._ranges=s.Nd(this._ranges,t,{allowView:n}),e._strand=s.Nd(this._strand,t,{allowView:n})}_bioconductor_COMBINE(e,t){super._bioconductor_COMBINE(e,t);let r=[],n=[],i=[];for(const s of t)r.push(s._seqnames),n.push(s._ranges),i.push(s._strand);e._seqnames=s.NR(r),e._ranges=s.NR(n),e._strand=s.NR(i)}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._seqnames=a.J(this._seqnames,r),e._ranges=a.J(this._ranges,r),e._strand=a.J(this._strand,r)}static empty(){return new u([],l.Z.empty())}}function c(e){return e instanceof Int8Array?e:new Int8Array(e)}function f(e){for(const t of e)if(t<-1||t>1)throw new Error("'strand' must be -1, 0 or 1")}class d{constructor(e){this._index=e}overlap(e){let{ignoreStrand:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.G9(e),n=new Array(r),i=e.start(),a=e.end();for(var l=0;l<r;l++){n[l]=[];let r=n[l],s=e._seqnames[l];if(!(s in this._index))continue;let o,u=this._index[s],c=e._strand[l];if(t||0==c)o=Object.keys(u);else{let e=String(c);if(!(e in u))continue;o=[e]}let f=i[l],d=a[l];for(const e of o){h.rl(f,d,u[e]).forEach((e=>r.push(e)))}}return n}}},3403:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(101),s=r(2346),i=r(2793),a=r(8916),l=r(3889),o=r(2415),h=r(1380),u=r(5605),c=r(3637),f=r(9648),d=r(7806),m=new WeakMap,w=new WeakSet;class p extends h.O{constructor(e){let{rangeLengths:t=null,names:r=null,elementMetadata:i=null,metadata:a={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0==arguments.length)return super(),(0,n.Z)(this,w),void(0,s.Z)(this,m,{writable:!0,value:null});if(e.constructor==Array){super(e.length,{names:r,elementMetadata:i,metadata:a}),(0,n.Z)(this,w),(0,s.Z)(this,m,{writable:!0,value:null}),t=new Int32Array(e.length);for(var l=0;l<t.length;l++){if(!(e[l]instanceof u.a))throw new Error("'ranges' must either be a 'GRanges' or an array of 'GRanges'");t[l]=d.G9(e[l])}e=d.NR(e)}else{if(!(e instanceof u.a))throw new Error("'ranges' must either be a 'GRanges' or an array of 'GRanges'");if(null==t)throw new Error("'rangeLengths' must be specified when 'ranges' is a 'GRanges'");super(t.length,{names:r,elementMetadata:i,metadata:a}),(0,n.Z)(this,w),(0,s.Z)(this,m,{writable:!0,value:null}),t=c.CY(t),c.Qp(t)}this._ranges=e,this._rangeLengths=t;let h=(0,o.Z)(p,p,g).call(p,t);if(this._rangeStarts=h.starts,h.total!==d.G9(e))throw new Error("sum of 'rangeLengths' must be equal to the length of 'ranges'")}ranges(){return(0,l.Z)(this,w,Z).call(this),this._ranges}rangeStarts(){return(0,l.Z)(this,w,Z).call(this),this._rangeStarts}rangeLengths(){return(0,l.Z)(this,w,Z).call(this),this._rangeLengths}group(e){let{allowView:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.Z)(this,w,Z).call(this);let r=this._rangeStarts[e];return d.Nd(this._ranges,{start:r,end:r+this._rangeLengths[e]},{allowView:t})}numberOfGroups(){return this._rangeStarts.length}setRanges(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof u.a))throw new Error("'ranges' must be a 'GRanges'");if((0,l.Z)(this,w,Z).call(this),d.G9(e)!==d.G9(this._ranges))throw c.rS("'ranges'","number of ranges");let r=f.Q(this,t);return r._ranges=e,r}$setRanges(e){return this.setRanges(e,{inPlace:!0})}setGroup(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=f.Q(this,r);null===(0,a.Z)(n,m)?(0,i.Z)(n,m,[]):r||(0,i.Z)(n,m,(0,a.Z)(n,m).slice()),r||(n._rangeStarts=n._rangeStarts.slice(),n._rangeLengths=n._rangeLengths.slice());let s=(0,a.Z)(n,m).length;return(0,a.Z)(n,m).push([e,s,t]),n}$setGroup(e,t){return this.setGroup(e,t,{inPlace:!0})}buildOverlapIndex(){let{restrictToSeqnames:e=null,restrictToStrand:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.Z)(this,w,Z).call(this),new _(this._ranges.buildOverlapIndex({restrictToSeqnames:e,restrictToStrand:t}),d.G9(this._ranges),this._rangeStarts,this._rangeLengths)}_bioconductor_LENGTH(){return this._rangeStarts.length}_bioconductor_SLICE(e,t){let{allowView:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super._bioconductor_SLICE(e,t,{allowView:r}),(0,l.Z)(this,w,Z).call(this),e._rangeLengths=d.Nd(this._rangeLengths,t,{allowView:r});let n=(0,o.Z)(p,p,g).call(p,e._rangeLengths);if(e._rangeStarts=n.starts,t.constructor==Object){let s=this._rangeStarts[t.start];e._ranges=d.Nd(this._ranges,{start:s,end:s+n.total},{allowView:r})}else{let i=new Int32Array(n.total),a=0;for(const e of t){let t=this._rangeStarts[e],r=t+this._rangeLengths[e];for(var s=t;s<r;s++)i[a]=s,a++}e._ranges=d.Nd(this._ranges,i,{allowView:r})}}_bioconductor_COMBINE(e,t){super._bioconductor_COMBINE(e,t);for(const n of t)(0,l.Z)(n,w,Z).call(n);e._rangeLengths=d.NR(t.map((e=>e.rangeLengths())));let r=(0,o.Z)(p,p,g).call(p,e._rangeLengths);e._rangeStarts=r.starts,e._ranges=d.NR(t.map((e=>e._ranges)))}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),(0,i.Z)(e,m,f.J((0,a.Z)(this,m),r)),e._rangeLengths=f.J(this._rangeLengths,r),e._rangeStarts=f.J(this._rangeStarts,r),e._ranges=f.J(this._ranges,r)}static empty(e){let t=new Int32Array(e);return t.fill(0),new p(u.a.empty(),{rangeLengths:t})}}function g(e){let t=new Int32Array(e.length),r=0;for(var n=0;n<e.length;n++)t[n]=r,r+=e[n];return{starts:t,total:r}}function Z(){let e=(0,a.Z)(this,m);if(null===e)return;e.sort(((e,t)=>{let r=e[0]-t[0];return 0===r?e[1]-t[1]:r}));let t=0,r=0,n=0,s=[],l=this.numberOfGroups();for(var o=0;o<l;o++){if(t<e.length&&o==e[t][0]){let r,i=this._rangeStarts[o];n<i&&s.push(d.Nd(this._ranges,{start:n,end:i})),n=i+this._rangeLengths[o];do{r=e[t][2],t++}while(t<e.length&&o==e[t][0]);s.push(r),this._rangeLengths[o]=d.G9(r)}this._rangeStarts[o]=r,r+=this._rangeLengths[o]}let h=d.G9(this._ranges);n<h&&s.push(d.Nd(this._ranges,{start:n,end:h}));try{this._ranges=d.NR(s)}catch(u){throw new Error("failed to combine staged '$setGroup' operations; "+u.message)}(0,i.Z)(this,m,null)}class _{constructor(e,t,r,n){this._index=e,this._rangeStarts=r,this._rangeLengths=n;let s=new Int32Array(t);for(var i=0;i<r.length;i++){let e=r[i],t=e+n[i];for(var a=e;a<t;a++)s[a]=i}this._reverseMapping=s}overlap(e){let{ignoreStrand:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Array(this._rangeStarts.length),n=this._reverseMapping;if(e instanceof p){let t=this._index.overlap(e._ranges);for(var s=0;s<e._rangeStarts.length;s++){let a=e._rangeStarts[s],l=a+e._rangeLengths[s],o=new Set;for(var i=a;i<l;i++)t[i].forEach((e=>o.add(n[e])));r[s]=Array.from(o)}}else{let t=this._index.overlap(e);for(s=0;s<t.length;s++){let e=new Set;t[s].forEach((t=>e.add(n[t]))),r[s]=Array.from(e)}}return r}}},1774:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(4942),s=r(7806),i=r(3637),a=r(9648),l=(r(815),r(1380)),o=r(9420);class h extends l.O{constructor(e,t){let{names:r=null,elementMetadata:n=null,metadata:s={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0!=arguments.length){if(super(e.length,{names:r,elementMetadata:n,metadata:s}),this._start=i.CY(e),i.Qp(this._start,"start"),this._width=i.CY(t),i.Qp(this._width,"width"),this._start.length!==this._width.length)throw new Error("'start' and 'width' should have the same length")}else super()}start(){return this._start}end(){return this._start.map(((e,t)=>e+this._width[t]))}width(){return this._width}setStart(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.CY(e);if(r.length!==s.G9(this))throw new Error("'start' should be replaced by array of the same length");i.Qp(r,"start");let n=a.Q(this,t);return n._start=r,n}$setStart(e){return this.setStart(e,{inPlace:!0})}setWidth(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.CY(e);if(r.length!==s.G9(this))throw new Error("'width' should be replaced by array of the same length");i.Qp(r,"width");let n=a.Q(this,t);return n._width=r,n}$setWidth(e){return this.setWidth(e,{inPlace:!0})}buildOverlapIndex(){let e=o.lZ(this._start,this.end());return new u(e)}_bioconductor_LENGTH(){return this._start.length}_bioconductor_SLICE(e,t,r){let{allowView:n=!1}=r;super._bioconductor_SLICE(e,t,{allowView:n}),e._start=s.Nd(this._start,t,{allowView:n}),e._width=s.Nd(this._width,t,{allowView:n})}_bioconductor_COMBINE(e,t){super._bioconductor_COMBINE(e,t);let r=[],n=[];for(const s of t)r.push(s._start),n.push(s._width);e._start=s.NR(r),e._width=s.NR(n)}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._start=a.J(this._start,r),e._width=a.J(this._width,r)}static empty(){return new h(new Int32Array,new Int32Array)}}(0,n.Z)(h,"className","IRanges");class u{constructor(e){this._tree=e}overlap(e){let t=s.G9(e),r=new Array(t);for(var n=0;n<t;n++)r[n]=o.rl(e._start[n],e._start[n]+e._width[n],this._tree);return r}}},6674:(e,t,r)=>{"use strict";r.d(t,{H:()=>u});var n=r(101),s=r(4942),i=r(3889),a=r(3637),l=r(9648),o=r(7806),h=new WeakSet;class u{constructor(e,t){if((0,n.Z)(this,h),0==arguments.length)return;e=a.OI(e);let r=Array.from(e.keys());if(null!==t){a.Vt(t,"'order'",r.length,"the length of 'entries'");let e=t.slice().sort();if(r.sort(),!a.Hj(e,r))throw new Error("values of 'order' should be the same as the keys of 'entries'")}else t=r;this._entries=e,this._order=t}names(){return this._order}numberOfEntries(){return this._order.length}entry(e){if("string"==typeof e){if(!this._entries.has(e))throw new Error("no entry '"+e+"' present in this "+this.constructor.className);return this._entries.get(e)}return(0,i.Z)(this,h,c).call(this,e),this._entries.get(this._order[e])}has(e){return this._entries.has(e)}delete(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);if(t||(r._order=r._order.slice(),r._entries=new Map(r._entries)),"string"==typeof e){let t=r._order.indexOf(e);if(t<0)throw new Error("no entry '"+e+"' present in this "+this.constructor.className);r._order.splice(t,1),r._entries.delete(e)}else{(0,i.Z)(this,h,c).call(this,e);let t=r._order[e];r._order.splice(e,1),r._entries.delete(t)}return r}set(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.Q(this,r);return r||(n._entries=new Map(n._entries)),"string"==typeof e?(n._entries.has(e)||(r||(n._order=n._order.slice()),n._order.push(e)),n._entries.set(e,t)):((0,i.Z)(this,h,c).call(this,e),n._entries.set(n._order[e],t)),n}setNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.Vt(e,"replacement 'names'",this._order.length,"length of 'names()'");let r=new Map;for(var n=0;n<e.length;n++){if(r.has(e[n]))throw new Error("detected duplicate value '"+e[n]+"' in replacement 'names'");r.set(e[n],this._entries.get(this._order[n]))}let s=l.Q(this,t);return s._entries=r,s._order=e,s}slice(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Map,n=[];for(var s of e){if("string"!=typeof s&&((0,i.Z)(this,h,c).call(this,s),s=this._order[s]),r.has(s))throw new Error("duplicate entries detected in slice request");if(!this._entries.has(s))throw new Error("slice contains missing entry '"+s+"' ");r.set(s,this._entries.get(s)),n.push(s)}let a=l.Q(this,t);return a._entries=r,a._order=n,a}reorder(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length!==this._order.length)throw a.rS("reordered indices","the number of existing entries");let r=[];for(var n of e){if("string"!=typeof n&&((0,i.Z)(this,h,c).call(this,n),n=this._order[n]),!this._entries.has(n))throw new Error("missing entry '"+n+"' among the reordered indices");r.push(n)}let s=l.Q(this,t);return s._order=r,s}_bioconductor_CLONE(e){let{deepCopy:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e._entries=t?o.bl(this._entries):this._entries,e._order=t?o.bl(this._order):this._order}apply(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?this._entries:new Map;for(const[n,s]of this._entries)r.set(n,e(s));return t?this:new u(r,this._order)}static parallelCombine(e,t){let r=e[0]._order;for(var n=1;n<e.length;n++)if(!a.Hj(r,e[n]._order))throw new Error("detected differences in names between first object and object "+String(n)+" to be combined");let s=new Map;for(const i of r){let r=e.map((e=>e._entries.get(i)));s.set(i,t(r))}return new u(s,r)}}function c(e){if(e<0||e>=this._order.length)throw new Error(" index '"+String(e)+"' out of range for this "+this.constructor.className)}(0,s.Z)(u,"className","InternalList")},9060:(e,t,r)=>{"use strict";r.d(t,{Q:()=>f});var n=r(101),s=r(3889),i=r(7806),a=r(5605),l=r(3403),o=r(5351),h=r(3637),u=r(9648),c=new WeakSet;class f extends o.E{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==arguments.length)return super(),void(0,n.Z)(this,c);super(e,r),(0,n.Z)(this,c),null===t?t=l.f.empty(this.numberOfRows()):(0,s.Z)(this,c,d).call(this,t),this._rowRanges=t}rowRanges(){return this._rowRanges}setRowRanges(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,c,d).call(this,e);let r=u.Q(this,t);return r._rowRanges=e,r}$setRowRanges(e){return this.setRowRanges(e,{inPlace:!0})}_bioconductor_SLICE_2D(e,t,r,n){let{allowView:s=!1}=n;super._bioconductor_SLICE_2D(e,t,r,{allowView:s}),e._rowRanges=null!==t?i.Nd(this._rowRanges,t):this._rowRanges}_bioconductor_COMBINE_ROWS(e,t){super._bioconductor_COMBINE_ROWS(e,t);let r=[],n=!1,s=!1;for(var h=0;h<t.length;h++){let e=t[h];if(e instanceof f){let t=e._rowRanges;t instanceof l.f&&(s=!0),r.push(t)}else{if(!(e instanceof o.E))throw new Error("objects to be combined must be SummarizedExperiments (failing for object "+String(h)+")");n=!0,r.push(null)}}if(n||s)for(h=0;h<r.length;h++){let e=r[h];if(e instanceof a.a){let t=new Int32Array(i.G9(e));t.fill(1);let n={rangeLengths:t,names:e.names(),elementMetadata:e.elementMetadata(),metadata:e.metadata()};null!==n.names&&(e=e.setNames(null)),(n.elementMetadata.metadata().size>0||n.elementMetadata.numberOfColumns()>0)&&(e=e.setElementMetadata(null)),n.metadata.size>0&&(e=e.setMetadata(new Map)),r[h]=new l.f(e,n)}else null===e&&(r[h]=l.f.empty(t[h].numberOfRows()))}e._rowRanges=i.NR(r)}_bioconductor_COMBINE_COLUMNS(e,t){super._bioconductor_COMBINE_COLUMNS(e,t),e._rowRanges=t[0]._rowRanges}_bioconductor_CLONE(e,t){let{deepCopy:r}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._rowRanges=u.J(this._rowRanges,r)}}function d(e){if(!(e instanceof a.a)&&!(e instanceof l.f))throw new Error("'rowRanges' should be a 'GRanges' or 'GroupedGRanges' instance");if(i.G9(e)!==this._rowData.numberOfRows())throw h.rS("'rowRanges'","the number of rows")}},3215:(e,t,r)=>{"use strict";var n=r(4942),s=r(7806),i=r(9060),a=r(5351),l=r(9648),o=r(6674);class h extends i.Q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0==arguments.length)return void super();let{reducedDimensions:r={},reducedDimensionOrder:n=null,alternativeExperiments:i={},alternativeExperimentOrder:l=null,rowRanges:h=null}=t;super(e,h,t);let u=this.numberOfColumns();try{this._reducedDimensions=new o.H(r,n)}catch(c){throw new Error("failed to initialize reduced dimension list for this "+this.constructor.className+"; "+c.message,{cause:c})}for(const a of this._reducedDimensions.names()){let e=this._reducedDimensions.entry(a);if(s.Ab(e)!==u)throw new Error("number of rows for reduced dimension '"+a+"' is not equal to number of columns for this "+this.constructor.className)}try{this._alternativeExperiments=new o.H(i,l)}catch(c){throw new Error("failed to initialize alternative experiment list for this "+this.constructor.className+"; "+c.message,{cause:c})}for(const s of this._alternativeExperiments.names()){let e=this._alternativeExperiments.entry(s);if(!(e instanceof a.E))throw new Error("alternative experiment '"+s+"' is not a SummarizedExperiment");if(e.numberOfColumns(e)!==u)throw new Error("number of columns for alternative experiment '"+s+"' is not equal to number of columns for this "+this.constructor.className)}}reducedDimensionNames(){return this._reducedDimensions.names()}reducedDimension(e){let t;try{t=this._reducedDimensions.entry(e)}catch(r){throw new Error("failed to retrieve the specified reduced dimension from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}alternativeExperimentNames(){return this._alternativeExperiments.names()}alternativeExperiment(e){let t;try{t=this._alternativeExperiments.entry(e)}catch(r){throw new Error("failed to retrieve the specified alternative experiment from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}removeReducedDimension(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._reducedDimensions=r._reducedDimensions.delete(e,{inPlace:t})}catch(n){throw new Error("failed to remove the specified reduced dimension from this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$removeReducedDimension(e){return this.removeReducedDimension(e,{inPlace:!0})}setReducedDimension(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s.Ab(t)!=this.numberOfColumns())throw new Error("number of rows of 'value' should be the same as the number of columns of this SingleCellExperiment");let n=l.Q(this,r);return n._reducedDimensions=n._reducedDimensions.set(e,t,{inPlace:r}),n}$setReducedDimension(e,t){return this.setReducedDimension(e,t,{inPlace:!0})}setReducedDimensionNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._reducedDimensions=r._reducedDimensions.setNames(e,{inPlace:t})}catch(n){throw new Error("failed to set the reduced dimension names for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$setReducedDimensionNames(e){return this.setReducedDimensionNames(e,{inPlace:!0})}sliceReducedDimensions(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._reducedDimensions=this._reducedDimensions.slice(e,{inPlace:t})}catch(n){throw new Error("failed to slice the reduced dimensions for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$sliceReducedDimensions(e){return this.sliceReducedDimensions(e,{inPlace:!0})}removeAlternativeExperiment(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._alternativeExperiments=r._alternativeExperiments.delete(e,{inPlace:t})}catch(n){throw new Error("failed to remove the specified alternative experiment from this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$removeAlternativeExperiment(e){return this.removeAlternativeExperiment(e,{inPlace:!0})}setAlternativeExperiment(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t instanceof a.E)||s.Et(t)!=this.numberOfColumns())throw new Error("'value' should be a SummarizedExperiment with the same number of columns as this SingleCellExperiment");let n=l.Q(this,r);return n._alternativeExperiments=n._alternativeExperiments.set(e,t,{inPlace:r}),n}$setAlternativeExperiment(e,t){return this.setAlternativeExperiment(e,t,{inPlace:!0})}setAlternativeExperimentNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._alternativeExperiments=r._alternativeExperiments.setNames(e,{inPlace:t})}catch(n){throw new Error("failed to set the alternative experiment names for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$setAlternativeExperimentNames(e){return this.setAlternativeExperimentNames(e,{inPlace:!0})}sliceAlternativeExperiments(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.Q(this,t);try{r._alternativeExperiments=this._alternativeExperiments.slice(e,{inPlace:t})}catch(n){throw new Error("failed to slice the alternative experiments for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$sliceAlternativeExperiments(e){return this.sliceAlternativeExperiments(e,{inPlace:!0})}_bioconductor_SLICE_2D(e,t,r,n){let{allowView:i=!1}=n;super._bioconductor_SLICE_2D(e,t,r,{allowView:i}),null!==r?(e._reducedDimensions=this._reducedDimensions.apply((e=>s.V_(e,r,null,{allowView:i}))),e._alternativeExperiments=this._alternativeExperiments.apply((e=>s.V_(e,null,r,{allowView:i})))):(e._reducedDimensions=this._reducedDimensions,e._alternativeExperiments=this._alternativeExperiments)}_bioconductor_COMBINE_ROWS(e,t){super._bioconductor_COMBINE_ROWS(e,t),e._reducedDimensions=this._reducedDimensions,e._alternativeExperiments=this._alternativeExperiments}_bioconductor_COMBINE_COLUMNS(e,t){super._bioconductor_COMBINE_COLUMNS(e,t);try{e._reducedDimensions=o.H.parallelCombine(t.map((e=>e._reducedDimensions)),s.Su)}catch(r){throw new Error("failed to combine reduced dimensions for "+this.constructor.className+" objects; "+r.message,{cause:r})}try{e._alternativeExperiments=o.H.parallelCombine(t.map((e=>e._alternativeExperiments)),s.G)}catch(r){throw new Error("failed to combine alternative experiments for "+this.constructor.className+" objects; "+r.message,{cause:r})}}_bioconductor_CLONE(e,t){let{deepCopy:r}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._reducedDimensions=l.J(this._reducedDimensions,r),e._alternativeExperiments=l.J(this._alternativeExperiments,r)}}(0,n.Z)(h,"className","SingleCellExperiment")},5351:(e,t,r)=>{"use strict";r.d(t,{E:()=>u});var n=r(4942),s=r(7806),i=r(3750),a=r(815),l=r(3637),o=r(9648),h=r(6674);class u extends i.M{constructor(e){let{assayOrder:t=null,rowData:r=null,columnData:n=null,rowNames:i=null,columnNames:o=null,metadata:u={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0==arguments.length)return void super();super(u);try{this._assays=new h.H(e,t)}catch(d){throw new Error("failed to initialize assay list for this SummarizedExperiment; "+d.message,{cause:d})}let c=null,f=null;for(const a of this._assays.names()){let e=this._assays.entry(a),t=s.Ab(e),r=s.Et(e);if(null==c)c=t,f=r;else if(c!==t||f!==r)throw new Error("expected all assays in 'assays' to have the same number of rows and columns")}if(null===r){if(null==c)throw new Error("'rowData' must be specified if 'assays' is empty");r=new a.N({},{numberOfRows:c})}else if(null!==c&&c!==s.G9(r))throw new Error("'rowData' should be equal to the number of rows in each 'assays'");if(this._rowData=r,null===n){if(null==f)throw new Error("'columnData' must be specified if 'assays' is empty");n=new a.N({},{numberOfRows:f})}else if(null!==f&&f!==s.G9(n))throw new Error("'columnData' should be equal to the number of columns in each 'assays'");this._columnData=n,null!=i&&l.Vt(i,"'rowNames'",this._rowData.numberOfRows(),"the number of rows in each 'assays'"),this._rowNames=i,null!=o&&l.Vt(o,"'columnNames'",this._columnData.numberOfRows(),"the number of columns in each 'assays'"),this._columnNames=o}assayNames(){return this._assays.names()}numberOfAssays(){return this._assays.numberOfEntries()}assay(e){let t;try{t=this._assays.entry(e)}catch(r){throw new Error("failed to retrieve the specified assay from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}rowData(){return this._rowData}numberOfRows(){return this._rowData.numberOfRows()}rowNames(){return this._rowNames}columnData(){return this._columnData}numberOfColumns(){return this._columnData.numberOfRows()}columnNames(){return this._columnNames}removeAssay(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.Q(this,t);try{r._assays=r._assays.delete(e,{inPlace:t})}catch(n){throw new Error("failed to remove assay "+("string"==typeof e?"'"+e+"'":String(e))+" from this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$removeAssay(e){return this.removeAssay(e,{inPlace:!0})}setAssay(e,t){let{inPlace:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s.Ab(t)!==this.numberOfRows()||s.Et(t)!==this.numberOfColumns())throw new Error("expected 'value' to have the same dimensions as this 'SummarizedExperiment'");let n=o.Q(this,r);return n._assays=n._assays.set(e,t,{inPlace:r}),n}$setAssay(e,t){return this.setAssay(e,t,{inPlace:!0})}setAssayNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.Q(this,t);try{r._assays=r._assays.setNames(e,{inPlace:t})}catch(n){throw new Error("failed to set the assay names for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$setAssayNames(e){return this.setAssayNames(e,{inPlace:!0})}sliceAssays(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.Q(this,t);try{r._assays=this._assays.slice(e,{inPlace:t})}catch(n){throw new Error("failed to slice the assays for this "+this.constructor.className+"; "+n.message,{cause:n})}return r}$sliceAssays(e){return this.sliceAssays(e,{inPlace:!0})}setRowData(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof a.N))throw new Error("'value' should be a DataFrame");if(e.numberOfRows()!==this.numberOfRows())throw new Error("expected 'value' to have the same number of rows as this 'SummarizedExperiment'");let r=o.Q(this,t);return r._rowData=e,r}$setRowData(e){return this.setRowData(e,{inPlace:!0})}setColumnData(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof a.N))throw new Error("'value' should be a DataFrame");if(e.numberOfRows()!==this.numberOfColumns())throw new Error("expected 'value' to have the same number of rows as the number of columns of this 'SummarizedExperiment'");let r=o.Q(this,t);return r._columnData=e,r}$setColumnData(e){return this.setColumnData(e,{inPlace:!0})}setRowNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==e&&l.Vt(e,"replacement 'names'",this.numberOfRows(),"'numberOfRows()'");let r=o.Q(this,t);return r._rowNames=e,r}$setRowNames(e){return this.setRowNames(e,{inPlace:!0})}setColumnNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==e&&l.Vt(e,"replacement 'names'",this.numberOfColumns(),"'numberOfColumns()'");let r=o.Q(this,t);return r._columnNames=e,r}$setColumnNames(e){return this.setColumnNames(e,{inPlace:!0})}_bioconductor_NUMBER_OF_ROWS(){return this.numberOfRows()}_bioconductor_NUMBER_OF_COLUMNS(){return this.numberOfColumns()}_bioconductor_SLICE_2D(e,t,r,n){let{allowView:i=!1}=n;e._assays=this._assays.apply((e=>s.V_(e,t,r,{allowView:i}))),null!==t?(e._rowData=s.Nd(this._rowData,t,{allowView:i}),e._rowNames=null==this._rowNames?null:s.Nd(this._rowNames,t,{allowView:i})):(e._rowData=this._rowData,e._rowNames=this._rowNames),null!==r?(e._columnData=s.Nd(this._columnData,r,{allowView:i}),e._columnNames=null==this._columnNames?null:s.Nd(this._columnNames,r,{allowView:i})):(e._columnData=this._columnData,e._columnNames=this._columnNames),e._metadata=this._metadata}_bioconductor_COMBINE_ROWS(e,t){e._assays=h.H.parallelCombine(t.map((e=>e._assays)),s.Su);let r=t.map((e=>e._rowData));e._rowData=s.NR(r);let n=t.map((e=>e._rowNames)),i=t.map((e=>e.numberOfRows()));e._rowNames=l.SE(n,i),e._columnData=this._columnData,e._columnNames=this._columnNames,e._metadata=this._metadata}_bioconductor_COMBINE_COLUMNS(e,t){e._assays=h.H.parallelCombine(t.map((e=>e._assays)),s.G);let r=t.map((e=>e._columnData));e._columnData=s.NR(r);let n=t.map((e=>e._columnNames)),i=t.map((e=>e.numberOfColumns()));e._columnNames=l.SE(n,i),e._rowData=this._rowData,e._rowNames=this._rowNames,e._metadata=this._metadata}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._assays=o.J(this._assays,r),e._rowData=o.J(this._rowData,r),e._rowNames=o.J(this._rowNames,r),e._columnData=o.J(this._columnData,r),e._columnNames=o.J(this._columnNames,r)}}(0,n.Z)(u,"className","SummarizedExperiment")},1380:(e,t,r)=>{"use strict";r.d(t,{O:()=>h});var n=r(7806),s=r(3637),i=r(9648),a=r(815),l=r(3750);function o(e,t,r){if(null!==e){if(!(e instanceof a.N))throw new Error("'elementMetadata' should be a DataFrame");if(n.G9(e)!==t)throw new Error("'elementMetadata' should have the same number of rows as 'LENGTH(<"+r+">)'")}else e=new a.N({},{numberOfRows:t});return e}class h extends l.M{constructor(e){let{names:t=null,elementMetadata:r=null,metadata:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0!=arguments.length?(super(n),this._elementMetadata=o(r,e,this.constructor.className),null!==t&&s.Vt(t,"'names'",e,"'LENGTH(<"+this.constructor.className+">)'"),this._names=t):super()}elementMetadata(){return this._elementMetadata}names(){return this._names}setElementMetadata(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.Q(this,t);return r._elementMetadata=o(e,n.G9(r),r.constructor.className),r}$setElementMetadata(e){return this.setElementMetadata(e,{inPlace:!0})}setNames(e){let{inPlace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==e&&s.Vt(e,"replacement 'names'",n.G9(this),"'LENGTH(<"+this.constructor.className+">)'");let r=i.Q(this,t);return r._names=e,r}$setNames(e){return this.setNames(e,{inPlace:!0})}_bioconductor_SLICE(e,t,r){let{allowView:s=!1}=r;e._elementMetadata=n.Nd(this._elementMetadata,t,{allowView:s}),e._names=null===this._names?null:n.Nd(this._names,t,{allowView:s}),e._metadata=this._metadata}_bioconductor_COMBINE(e,t){let r=[],i=[],a=[];for(const s of t)r.push(s._elementMetadata),i.push(s._names),a.push(n.G9(s));e._elementMetadata=n.NR(r),e._names=s.SE(i,a)}_bioconductor_CLONE(e,t){let{deepCopy:r=!0}=t;super._bioconductor_CLONE(e,{deepCopy:r}),e._elementMetadata=i.J(this._elementMetadata,r),e._names=i.J(this._names,r)}}},9648:(e,t,r)=>{"use strict";r.d(t,{J:()=>i,Q:()=>s});var n=r(7806);function s(e,t){return t?e:n.bl(e,{deepCopy:!1})}function i(e,t){return t?n.bl(e):e}},6474:(e,t,r)=>{"use strict";r.d(t,{Lm:()=>i.L,NE:()=>n.N,NR:()=>s.NR,Nd:()=>s.Nd,Tm:()=>s.Tm,bl:()=>s.bl,sj:()=>n.s});var n=r(815),s=(r(1774),r(5605),r(3403),r(8882),r(5351),r(9060),r(3215),r(7806)),i=r(8497)},8497:(e,t,r)=>{"use strict";function n(e){let t={};return e.forEach(((e,r)=>{e in t||(t[e]=[]),t[e].push(r)})),t}r.d(t,{L:()=>n})},9420:(e,t,r)=>{"use strict";r.d(t,{lZ:()=>s,rl:()=>l});var n=r(3637);function s(e,t){let{slice:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{rank2position:s,startRanks:l,endRanks:o}=function(e,t){let{slice:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null==r?e.length:r.length,i=new Int32Array(2*s),a=new Uint8Array(2*s),l=new Int32Array(2*s);{let n=0,h=r=>{let s=2*n,o=s+1;i[s]=e[r],i[o]=t[r],a[s]=1,a[o]=0,l[s]=n,l[o]=n,n++};if(null===r)for(var o=0;o<s;o++)h(o);else for(const e of r)h(e)}let h=n.Nt(i.length);h.sort(((e,t)=>i[e]-i[t]));let u=[],c=new Int32Array(s),f=new Int32Array(s),d=null;for(const n of h){let e=i[n],t=l[n];e!==d&&(u.push(e),d=e),a[n]?c[t]=u.length-1:f[t]=u.length-1}return{rank2position:u,startRanks:c,endRanks:f}}(e,t,{slice:r}),h=[i(0,s.length)];if(null===r)for(var u=0;u<l.length;u++)a(l[u],o[u],u,h,0);else for(u=0;u<l.length;u++)a(l[u],o[u],r[u],h,0);let c=s.length>0?s[s.length-1]+1:1;s.push(c);for(const n of h){n.left_bound=s[n.left_bound],n.right_bound=s[n.right_bound],n.center=s[n.center];let r=n.overlaps.slice().sort(((t,r)=>e[t]-e[r])),i=n.overlaps.sort(((e,r)=>t[r]-t[e]));n.overlaps={start:r.map((t=>[e[t],t])),end:i.map((e=>[t[e],e]))}}return h}function i(e,t){return{left_bound:e,right_bound:t,center:e+Math.floor((t-e)/2),left_node:null,right_node:null,overlaps:[]}}function a(e,t,r,n,s){let l=n[s];e>l.center?(null===l.right_node&&(l.right_node=n.length,n.push(i(l.center,l.right_bound))),a(e,t,r,n,l.right_node)):t<l.center||t==l.center&&t>e?(null===l.left_node&&(l.left_node=n.length,n.push(i(l.left_bound,l.center))),a(e,t,r,n,l.left_node)):l.overlaps.push(r)}function l(e,t,r){let n=[];return e>r.right_bound||t<r.left_bound||t==r.left_bound&&t>e||o(e,t,r,0,n),n}function o(e,t,r,n,s){let i=r[n];if(e>i.center){for(const t of i.overlaps.end){if(!(t[0]>e))break;s.push(t[1])}null!==i.right_node&&o(e,t,r,i.right_node,s)}else if(t<i.center||t==i.center&&t>e){for(const r of i.overlaps.start){if(!(r[0]<t||r[0]==t&&e==t))break;s.push(r[1])}null!==i.left_node&&o(e,t,r,i.left_node,s)}else{for(const e of i.overlaps.start)s.push(e[1]);t>i.center&&null!==i.right_node&&o(e,t,r,i.right_node,s),e<i.center&&null!==i.left_node&&o(e,t,r,i.left_node,s)}}},3637:(e,t,r)=>{"use strict";function n(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function s(e){return e.constructor==Array||ArrayBuffer.isView(e)}function i(e,t){return e==t?e:e==Array||t==Array||e==BigInt64Array||t==BigInt64Array||e==BigUint64Array||t==BigUint64Array?Array:Float64Array}function a(e,t){return new Error(e+" should have length equal to "+t)}function l(e,t){for(const r of e)if("string"!==typeof r)throw new Error(t+" array should only contain strings")}function o(e,t,r,n){if(l(e,t),e.length!=r)throw a(t+" array",n)}function h(e){let t=0;return e.forEach((e=>{t+=e})),t}function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!0;for(var s=0;s<e.length;s++)null!==e[s]&&(n=!1);if(n)return null;null===r&&(r=h(t));let i=new Array(r),a=0;for(s=0;s<e.length;s++){let r=e[s];null===r?(i.fill("",a,a+t[s]),a+=t[s]):r.forEach((e=>{i[a]=e,a++}))}return i}function c(e){let t=new Int32Array(e);for(var r=0;r<e;r++)t[r]=r;return t}function f(e){return e instanceof Int32Array?e:new Int32Array(e)}function d(e,t){for(const r of e)if(r<0)throw new Error("detected a negative entry in '"+t+"'")}function m(e){if(e.constructor==Object){let t=new Map;for(const[r,n]of Object.entries(e))t.set(r,n);return t}if(!(e instanceof Map))throw new Error("'x' should be either an object or Map");return e}r.d(t,{BQ:()=>i,CY:()=>f,Hj:()=>n,K1:()=>l,Nt:()=>c,OI:()=>m,Qp:()=>d,SE:()=>u,Sm:()=>h,Vt:()=>o,rS:()=>a,zG:()=>s})},3192:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var n=r(8137),s=new Map;async function i(e){let{download:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.get(e);if("undefined"!==typeof r)return r;if(!t)return null;r=[],s.set(e,r);var i=await(0,n.i6)(e+"_collections.tsv.gz");if(!i.ok)throw new Error("failed to fetch collection information for species '"+e+"'");for(var a=(0,n.xs)(await i.arrayBuffer()),l=0,o=0;o<a.length;o++){var h=a[o].split("\t"),u=Number(h[5]);r.push({title:h[0],description:h[1],species:h[2],maintainer:h[3],source:h[4],start:l,size:u}),l+=u}return r}},4147:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(8137),s=new Map;async function i(e){let{types:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==t&&(t=["symbol","entrez","ensembl"]);let r=s.get(e);"undefined"==typeof r&&(r=new Map,s.set(e,r));let i=new Map,a=[],l=[];for(const s of t){let t=r.get(s);"undefined"==typeof t?(a.push((0,n.nG)(e+"_"+s+".tsv.gz")),l.push(s)):i.set(s,t)}if(a.length>0){let e=await Promise.all(a);for(var o=0;o<e.length;o++){let t=e[o];if(!t.ok)throw"failed to fetch symbol information for genes";var h=await t.arrayBuffer();let s=(0,n.xs)(h),a=[];for(const e of s)""==e?a.push([]):a.push(e.split("\t"));let u=l[o];r.set(u,a),i.set(u,a)}}return i}},7899:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var n=r(8137),s=r(3192),i=new Map;async function a(e){let{download:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.get(e);if("undefined"!==typeof r)return r;if(!t)return null;r=[],i.set(e,r);var[a,l]=await Promise.all([(0,n.i6)(e+"_sets.tsv.gz"),(0,s.i)(e)]);if(!a.ok)throw new Error("failed to fetch set information for species '"+e+"'");for(var o=(0,n.xs)(await a.arrayBuffer()),h=0;h<o.length;h++){var u=o[h].split("\t");r.push({name:u[0],description:u[1],size:Number(u[2])})}let c=0;for(h=0;h<l.length;h++){let e=l[h].size;for(var f=0;f<e;f++)r[f+c].collection=h,r[f+c].number=f;c+=e}return r}},2850:(e,t,r)=>{"use strict";r(8137);new Map},7855:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(8137);const s=new Map;async function i(e){let{download:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.get(e);if("undefined"!==typeof r)return r;if(!t)return null;let i=await n.i6(e+"_set2gene.tsv.gz");if(!i.ok)throw new Error("failed to fetch full set-to-gene information for species '"+e+"'");let a=n.xs(await i.arrayBuffer()).map(n.rS);return s.set(e,a),a}},4479:(e,t,r)=>{"use strict";r(8137),r(7855);new Map,new Map},2666:(e,t,r)=>{"use strict";r.d(t,{R:()=>i});var n=r(8137);const s=new Map;async function i(e){let{download:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.get(e);if("undefined"!==typeof r)return r;if(!t)return null;let i=await n.i6(e+"_gene2set.tsv.gz");if(!i.ok)throw new Error("failed to fetch full gene-to-set information for species '"+e+"'");let a=n.xs(await i.arrayBuffer()).map(n.rS);return s.set(e,a),a}},320:(e,t,r)=>{"use strict";r(8137),r(2666);new Map,new Map},6331:(e,t,r)=>{"use strict";r(8137),r(3192);new Map,new Map,new Map,new Map},4127:(e,t,r)=>{"use strict";r(8137),r(7899),r(6331);new Map,new Map,new Map,new Map,new Map,new Map},7078:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(4147),s=new Map,i=new Map;async function a(e,t){let{lowerCase:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r?i:s,l=a.get(e);"undefined"===typeof l&&(l=new Map,a.set(e,l));let o=l.get(t);if("undefined"===typeof o){o=new Map,l.set(t,o);let s=(await(0,n.a)(e,{types:[t]})).get(t);for(var h=0;h<s.length;h++)for(let e of s[h]){r&&(e=e.toLowerCase());let t=o.get(e);"undefined"!==typeof t?t.add(h):o.set(e,new Set([h]))}for(const[e,t]of o)o.set(e,Array.from(t))}return o}},7101:(e,t,r)=>{"use strict";function n(e,t){let r=new Map;for(var n=0;n<e.length;n++)for(const t of e[n]){let e=r.get(t);"undefined"==typeof e&&(e=new Set,r.set(t,e)),e.add(n)}for(const[i,a]of r)r[i]=new Uint32Array(a);let s=new Array(t.length);for(n=0;n<t.length;n++){let e=new Set;for(const s of t[n]){let t=r.get(s);if("undefined"!==typeof t)for(const r of t)e.add(r)}s[n]=new Uint32Array(e).sort()}return s}r.d(t,{$:()=>n})},5479:(e,t,r)=>{"use strict";function n(e,t){let r=new Array(e.length);for(var n=0;n<e.length;n++){let s=new Set;for(const r of e[n])for(const e of t[r])s.add(e);r[n]=new Uint32Array(s).sort()}return r}r.d(t,{w:()=>n})},5719:(e,t,r)=>{"use strict";r(8137);new Map,new Map,new Map;new Map,new Map,new Map},4021:(e,t,r)=>{"use strict";r.d(t,{V:()=>h});var n=r(2346),s=r(8916),i=r(2793),a=r(6635),l=new WeakMap,o=new WeakMap;class h{constructor(){let{store:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.Z)(this,l,{writable:!0,value:void 0}),(0,n.Z)(this,o,{writable:!0,value:void 0}),(0,i.Z)(this,l,e),(0,i.Z)(this,o,null);let t=Object.keys(e);if(t.length)for(var r=0;r<t.length;r++){let n=e[t[r]];if(0==r)(0,i.Z)(this,o,n.numberOfColumns());else if(n.numberOfColumns()!=(0,s.Z)(this,o))throw new Error("all matrices should have the same number of columns")}}numberOfColumns(){return(0,s.Z)(this,o)}available(){return Object.keys((0,s.Z)(this,l))}has(e){return e in(0,s.Z)(this,l)}get(e){return(0,s.Z)(this,l)[e]}add(e,t){if(null===(0,s.Z)(this,o))(0,i.Z)(this,o,t.numberOfColumns());else if(t.numberOfColumns()!=(0,s.Z)(this,o))throw new Error("all matrices should have the same number of columns");if(e in(0,s.Z)(this,l)){let t=(0,s.Z)(this,l)[e];a.gd(t)}(0,s.Z)(this,l)[e]=t}remove(e){a.gd((0,s.Z)(this,l)[e]),delete(0,s.Z)(this,l)[e],0==Object.keys((0,s.Z)(this,l)).length&&(0,i.Z)(this,o,null)}clone(){let e=new h;try{for(const[t,r]of Object.entries((0,s.Z)(this,l)))e.add(t,r.clone())}catch(t){throw e.free(),t}return e}rename(e,t){e!==t&&(t in(0,s.Z)(this,l)&&a.gd((0,s.Z)(this,l)[t]),(0,s.Z)(this,l)[t]=(0,s.Z)(this,l)[e],delete(0,s.Z)(this,l)[e])}free(){for(const[e,t]of Object.entries((0,s.Z)(this,l)))a.gd(t)}}},2306:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var n=r(2346),s=r(8916),i=r(2793),a=r(6635),l=r(7108),o=r(6650),h=new WeakMap,u=new WeakMap;class c{constructor(e,t){(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,i.Z)(this,h,e),(0,i.Z)(this,u,t)}static createDenseMatrix(e,t,r){let{columnMajor:n=!0,copy:s=!0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(r instanceof o.lt))throw new Error("'contents' should be a Float64WasmArray");if(r.length!=e*t)throw new Error("length of 'contents' should equal the product of 'rows' and 'columns'");return l.R((i=>new i.NumericMatrix(e,t,r.offset,n,s)),c)}clone(){return l.R((e=>(0,s.Z)(this,u).clone()),c)}get matrix(){return(0,s.Z)(this,u)}numberOfRows(){return(0,s.Z)(this,u).nrow()}numberOfColumns(){return(0,s.Z)(this,u).ncol()}row(e){let{buffer:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t)return(0,s.Z)(this,u).row(e,t.offset),t.array();var r;t=a.RJ((0,s.Z)(this,u).ncol());try{(0,s.Z)(this,u).row(e,t.offset),r=t.slice()}finally{t.free()}return r}column(e){let{buffer:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t)return(0,s.Z)(this,u).column(e,t.offset),t.array();var r;t=a.RJ((0,s.Z)(this,u).nrow());try{(0,s.Z)(this,u).column(e,t.offset),r=t.slice()}finally{t.free()}return r}free(){null!==(0,s.Z)(this,u)&&(l.A((0,s.Z)(this,h)),(0,i.Z)(this,u,null))}isSparse(){return(0,s.Z)(this,u).sparse()}isReorganized(){return(0,s.Z)(this,u).reorganized()}identities(){let{buffer:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=e)return(0,s.Z)(this,u).identities(e.offset),e.array();var t;e=a.Wf((0,s.Z)(this,u).nrow());try{(0,s.Z)(this,u).identities(e.offset),t=e.slice()}finally{e.free()}return t}wipeIdentities(){(0,s.Z)(this,u).wipe_identities()}}},3102:(e,t,r)=>{"use strict";r.d(t,{E:()=>s,z:()=>i});var n=r(489);function s(e,t){let r;do{r=e+String(Number(new Date))+"_"+String(Math.round(1e4*Math.random()))+t}while(n.xW(r));return r}function i(e){throw new Error("cannot access the file system in a browser context")}},6961:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=(r(2306),new WeakMap),h=new WeakMap;class u{constructor(e,t){(0,n.Z)(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,i.Z)(this,o,e),(0,i.Z)(this,h,t)}numberOfGroups(){return(0,s.Z)(this,h).num_groups()}numberOfGenes(){return(0,s.Z)(this,h).num_genes()}sums(e){let{copy:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==e?(0,s.Z)(this,h).group_sums(e):(0,s.Z)(this,h).all_sums();return l.Yj(r,t)}detected(e){let{copy:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==e?(0,s.Z)(this,h).group_detected(e):(0,s.Z)(this,h).all_detected();return l.Yj(r,t)}free(){null!==(0,s.Z)(this,h)&&(a.A((0,s.Z)(this,o)),(0,i.Z)(this,h,null))}}function c(e,t){let{average:r=!1,numberOfThreads:n=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s,i;let o=l.mV(n);try{if((s=l.de(t,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'groups' should be equal to number of columns in 'x'");i=a.R((t=>t.aggregate_across_cells(e.matrix,s.offset,r,o)),u)}catch(h){throw l.gd(i),h}finally{l.gd(s)}return i}},5644:(e,t,r)=>{"use strict";r.d(t,{D4:()=>h,DS:()=>l,fw:()=>o,j4:()=>a});var n=r(6635),s=r(6650),i=r(4292);function a(e){let t,{buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=0;e.forEach((e=>{s+=e}));try{if(null==r)t=n.Wf(s),r=t;else if(r.length!==s)throw new Error("'buffer' should have length equal to sum of 'ncells'");let a=r.array(),l=0;for(var i=0;i<e.length;i++){let t=l;l+=e[i],a.fill(i,t,l)}}catch(a){throw n.gd(t),a}return r}function l(e,t){let{filter:r=null,buffer:n=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.n6(e,t,{filter:r,buffer:n})}function o(e,t){let{buffer:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(e,t,{buffer:r,filter:!0})}function h(e){return i.fd(e)}},5470:(e,t,r)=>{"use strict";r.d(t,{KV:()=>l});var n=r(6635),s=r(2306),i=r(7108);function a(e){let t=n.GF(e.length),r=t.array();for(var s=0;s<e.length;s++)r[s]=BigInt(e[s].matrix.$$.ptr);return t}function l(e,t){let r,l,o,h=[],u={};try{if(t.length!==e.length)throw new Error("length of 'names' should be equal to length of 'x'");let f={},d=[];for(var c=0;c<t.length;c++){if(e[c].numberOfRows()!==t[c].length)throw new Error("length of each 'names' must equal number of rows of its corresponding 'x'");t[c].forEach((e=>{e in f||(f[e]=d.length,d.push(e))}))}l=n.GF(e.length);{let e=l.array();for(c=0;c<t.length;c++){let r=t[c],s=n.Wf(r.length),i=s.array();r.forEach(((e,t)=>{i[t]=f[e]})),h.push(s),e[c]=BigInt(s.offset)}}r=a(e),o=n.Wf(e[0].numberOfRows()),u.matrix=i.R((t=>t.cbind_with_rownames(e.length,r.offset,l.offset,o.offset)),s.p),u.indices=o.slice(0,u.matrix.numberOfRows());let m=[];for(const e of u.indices)m.push(t[0][e]);u.names=m}catch(f){throw n.gd(u.matrix),f}finally{n.gd(r),n.gd(l),n.gd(o);for(const e of h)n.gd(e)}return u}},6199:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});r(6635),r(4812);function n(e,t){let{copy:r=!0,largest:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r&&(e=e.slice()),e instanceof Array?e.sort(((e,t)=>e-t)):e.sort(),0==e.length?Number.NaN:n?e[Math.max(0,e.length-t)]:e[Math.min(t,e.length)-1]}},2494:(e,t,r)=>{"use strict";r.d(t,{eu:()=>Z});var n=r(2346),s=r(8916),i=r(2793),a=r(6635),l=r(7108),o=r(5159),h=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap;class g{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),(0,n.Z)(this,w,{writable:!0,value:void 0}),(0,n.Z)(this,p,{writable:!0,value:void 0}),(0,i.Z)(this,u,t),(0,i.Z)(this,h,e),(0,i.Z)(this,c,r),(0,i.Z)(this,f,r),(0,i.Z)(this,d,r),(0,i.Z)(this,m,r),(0,i.Z)(this,w,r),(0,i.Z)(this,p,r)}numberOfCells(){return(0,s.Z)(this,u).num_obs()}numberOfClusters(){return(0,s.Z)(this,u).num_clusters()}setIterations(e){(0,s.Z)(this,w)||(0,i.Z)(this,w,!0),(0,s.Z)(this,u).set_iterations(e)}setStatus(e){(0,s.Z)(this,p)||(0,i.Z)(this,p,!0),(0,s.Z)(this,u).set_status(e)}clusters(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Hw(t,e,(0,s.Z)(this,c),(()=>{(0,i.Z)(this,c,!0)}),(e=>a.Yj((0,s.Z)(this,u).clusters(),e)),"clusters")}clusterSizes(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>a.Yj((0,s.Z)(this,u).cluster_sizes(),e)),"clusterSizes")}withinClusterSumSquares(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Hw(t,e,(0,s.Z)(this,m),(()=>{(0,i.Z)(this,m,!0)}),(e=>a.Yj((0,s.Z)(this,u).wcss(),e)))}clusterCenters(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Hw(t,e,(0,s.Z)(this,d),(()=>{(0,i.Z)(this,d,!0)}),(e=>a.Yj((0,s.Z)(this,u).centers(),e)))}iterations(){return(0,s.Z)(this,w)?(0,s.Z)(this,u).iterations():null}status(){return(0,s.Z)(this,p)?(0,s.Z)(this,u).status():null}free(){null!==(0,s.Z)(this,u)&&(l.A((0,s.Z)(this,h)),(0,i.Z)(this,u,null))}}function Z(e,t){let{numberOfDims:r=null,numberOfCells:n=null,initMethod:s="pca-part",initSeed:i=5768,initPCASizeAdjust:h=1,numberOfThreads:u=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var c,f;let d=a.mV(u);try{let u;if(e instanceof o.RY){r=e.numberOfPCs(),n=e.numberOfCells();let t=e.principalComponents({copy:!1});u=t.byteOffset}else{if(null===r||null===n)throw new Error("'numberOfDims' and 'numberOfCells' must be specified when 'x' is an Array");if((c=a.de(e,"Float64WasmArray")).length!=r*n)throw new Error("length of 'x' must be the product of 'numberOfDims' and 'numberOfCells'");u=c.offset}f=l.R((e=>e.cluster_kmeans(u,r,n,t,s,i,h,d)),g)}catch(m){throw a.gd(f),m}finally{a.gd(c)}return f}},9273:(e,t,r)=>{"use strict";r.d(t,{ZI:()=>I,bD:()=>m});var n=r(101),s=r(3889),i=r(2346),a=r(8916),l=r(2793),o=r(6635),h=r(7108),u=r(7067),c=new WeakMap,f=new WeakMap;class d{constructor(e,t){(0,i.Z)(this,c,{writable:!0,value:void 0}),(0,i.Z)(this,f,{writable:!0,value:void 0}),(0,l.Z)(this,c,e),(0,l.Z)(this,f,t)}free(){null!==(0,a.Z)(this,f)&&(h.A((0,a.Z)(this,c)),(0,l.Z)(this,f,null))}get graph(){return(0,a.Z)(this,f)}}function m(e){let{scheme:t="rank",neighbors:r=10,numberOfThreads:n=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,i;let a=o.mV(n);o.c2("scheme",t,["rank","number","jaccard"]);try{let n;e instanceof u.qv?n=e:(i=(0,u.wf)(e,r,{numberOfThreads:a}),n=i),s=h.R((e=>e.build_snn_graph(n.results,t,a)),d)}catch(l){throw o.gd(s),l}finally{o.gd(i)}return s}var w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakMap,_=new WeakMap,b=new WeakSet;class v{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,b),(0,i.Z)(this,w,{writable:!0,value:void 0}),(0,i.Z)(this,p,{writable:!0,value:void 0}),(0,i.Z)(this,g,{writable:!0,value:void 0}),(0,i.Z)(this,Z,{writable:!0,value:void 0}),(0,i.Z)(this,_,{writable:!0,value:void 0}),(0,l.Z)(this,w,e),(0,l.Z)(this,p,t),(0,l.Z)(this,g,r),(0,l.Z)(this,Z,o.oH(this.numberOfLevels(),r)),(0,l.Z)(this,_,o.oH(this.numberOfLevels(),r))}best(){return(0,a.Z)(this,g)?(0,a.Z)(this,p).best():null}setBest(e){(0,a.Z)(this,g)||(0,l.Z)(this,g,!0),(0,a.Z)(this,p).set_best(e)}numberOfLevels(){return(0,a.Z)(this,p).number()}modularity(){let{level:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=(0,s.Z)(this,b,y).call(this,e),(0,a.Z)(this,Z)[e]?(0,a.Z)(this,p).modularity(e):null}setModularity(e,t){(0,a.Z)(this,Z)[e]||((0,a.Z)(this,Z)[e]=!0),(0,a.Z)(this,p).set_modularity(e,t)}membership(){let{level:e=null,copy:t=!0,fillable:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=(0,s.Z)(this,b,y).call(this,e),o.Hw(r,t,(0,a.Z)(this,_)[e],(()=>{(0,a.Z)(this,_)[e]=!0}),(t=>o.Yj((0,a.Z)(this,p).membership(e),t)))}free(){null!==(0,a.Z)(this,p)&&(h.A((0,a.Z)(this,w)),(0,l.Z)(this,p,null))}}function y(e){if(null===e&&null==(e=this.best()))throw new Error("'best' has not yet been set via 'setBest'");return e}var k=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,R=new WeakMap;class M{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if((0,i.Z)(this,k,{writable:!0,value:void 0}),(0,i.Z)(this,E,{writable:!0,value:void 0}),(0,i.Z)(this,O,{writable:!0,value:void 0}),(0,i.Z)(this,C,{writable:!0,value:void 0}),(0,i.Z)(this,R,{writable:!0,value:void 0}),(0,l.Z)(this,k,e),(0,l.Z)(this,E,t),(0,l.Z)(this,O,r),(0,l.Z)(this,R,r),!r){let e=this.numberOfMergeSteps()+1;(0,l.Z)(this,C,{which:o.oH(e,!1),remaining:e})}}numberOfMergeSteps(){return(0,a.Z)(this,E).num_merge_steps()}modularity(){let{at:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===e){if(!(0,a.Z)(this,O))return null;e=-1}else if(!(0,a.Z)(this,O)&&!(0,a.Z)(this,C)[e])return null;return(0,a.Z)(this,E).modularity(e)}setModularity(e,t){(0,a.Z)(this,O)||((0,a.Z)(this,C).which[e]=!0,(0,a.Z)(this,C).remaining--,0==(0,a.Z)(this,C).remaining&&(0,l.Z)(this,O,!0)),(0,a.Z)(this,E).set_modularity(e,t)}membership(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.Hw(t,e,(0,a.Z)(this,R),(()=>{(0,l.Z)(this,R,!0)}),(e=>o.Yj((0,a.Z)(this,E).membership(),e)))}free(){null!==(0,a.Z)(this,E)&&(h.A((0,a.Z)(this,k)),(0,l.Z)(this,E,null))}}var x=new WeakMap,N=new WeakMap,S=new WeakMap,A=new WeakMap;class W{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,i.Z)(this,x,{writable:!0,value:void 0}),(0,i.Z)(this,N,{writable:!0,value:void 0}),(0,i.Z)(this,S,{writable:!0,value:void 0}),(0,i.Z)(this,A,{writable:!0,value:void 0}),(0,l.Z)(this,x,e),(0,l.Z)(this,N,t),(0,l.Z)(this,S,r),(0,l.Z)(this,A,r)}modularity(){return(0,a.Z)(this,S)?(0,a.Z)(this,N).modularity():null}setModularity(e){(0,a.Z)(this,S)||(0,l.Z)(this,S,!0),(0,a.Z)(this,N).set_modularity(e)}membership(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.Hw(t,e,(0,a.Z)(this,A),(()=>{(0,l.Z)(this,A,!0)}),(e=>o.Yj((0,a.Z)(this,N).membership(),e)))}free(){null!==(0,a.Z)(this,N)&&(h.A((0,a.Z)(this,x)),(0,l.Z)(this,N,null))}}function I(e){let{method:t="multilevel",multiLevelResolution:r=1,leidenResolution:n=1,leidenModularityObjective:s=!1,walktrapSteps:i=4}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;try{if("multilevel"==t)a=h.R((t=>t.cluster_snn_graph_multilevel(e.graph,r)),v);else if("walktrap"==t)a=h.R((t=>t.cluster_snn_graph_walktrap(e.graph,i)),M);else{if("leiden"!=t)throw new Error("unknown method '"+t+"'");a=h.R((t=>t.cluster_snn_graph_leiden(e.graph,n,s)),W)}}catch(l){throw o.gd(a),l}return a}},4292:(e,t,r)=>{"use strict";r.d(t,{KB:()=>i,Yh:()=>a,fd:()=>l});var n=r(6650),s=r(6635);function i(e){let t,r,{asWasmArray:i=!0,buffer:a=null,levels:l=null,action:h="error",placeholder:u=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("warn"==h){let e=!1;r=()=>{e||(console.warn("replacing invalid values with the placeholder index '"+String(u)+"'"),e=!0)}}else if("none"==h)r=()=>{};else{if("error"!=h)throw new Error("unknown action '"+h+"' for handling invalid entries");r=()=>{throw new Error("detected invalid value (e.g., null, NaN) in 'x'")}}try{if(null==a)t=i?s.Wf(e.length):new Int32Array(e.length),a=t;else{if(a.length!==e.length)throw new Error("'buffer' should have length equal to that of 'x'");i=a instanceof n.do}let h=i?a.array():a,d=new Map;if(null==l){l=[];for(var c=0;c<e.length;c++){let t=e[c];if(null==t||"number"==typeof t&&!Number.isFinite(t)){r(),h[c]=u;continue}let n=d.get(t);if("undefined"==typeof n){let e=l.length;d.set(t,e),l.push(t),h[c]=e}else h[c]=n}if(l.every((e=>"string"==typeof e))){let e=l.slice();l.sort(),o({ids:a,levels:e},l)}else if(l.every((e=>"number"==typeof e))){let e=l.slice();l.sort(((e,t)=>e-t)),o({ids:a,levels:e},l)}}else{for(var f=0;f<l.length;f++)d.set(l[f],f);for(c=0;c<e.length;c++){let t=e[c],n=d.get(t);"undefined"==typeof n?(r(),h[c]=u):h[c]=n}}}catch(d){throw t instanceof n.PQ&&s.gd(t),d}return{ids:a,levels:l}}function a(e){return i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function l(e){e instanceof n.PQ&&(e=e.array());let t=new Set(e),r=Array.from(t).sort(),s={};return r.forEach(((e,t)=>{s[e]=t})),e.forEach(((t,r)=>{e[r]=s[t]})),r}function o(e,t){let r,{action:s="error",placeholder:i=-1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new Map;for(var l=0;l<t.length;l++)a.set(t[l],l);if("warn"==s){let e=!1;r=()=>{e||(console.warn("replacing missing levels with the placeholder index '"+String(i)+"'"),e=!0)}}else if("none"==s)r=()=>{};else{if("error"!=s)throw new Error("unknown action '"+s+"' for handling missing levels");r=()=>{throw new Error("detected level in 'x.levels' that is missing from 'newLevels'")}}let o=e.levels,h=new Array(o.length);for(l=0;l<o.length;l++){let e=a.get(o[l]);"undefined"==typeof e?(r(),h[l]=i):h[l]=e}e.levels=t;let u=e.ids;u instanceof n.PQ&&(u=u.array()),u.forEach(((e,t)=>{e!==i&&(u[t]=h[e])}))}},8420:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var n=r(7108),s=r(6635);function i(e,t){var r,i;try{if((r=s.de(t,"Uint8WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'filters' must be equal to number of columns in 'x'");var a=r.offset;i=n.R((t=>t.filter_cells(e.matrix,a,!1)),e.constructor)}catch(l){throw s.gd(i),l}finally{s.gd(r)}return i}},7067:(e,t,r)=>{"use strict";r.d(t,{Fu:()=>f,qv:()=>w,wf:()=>p});var n=r(2346),s=r(8916),i=r(2793),a=r(6635),l=r(7108),o=r(5159),h=new WeakMap,u=new WeakMap;class c{constructor(e,t){(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,i.Z)(this,h,e),(0,i.Z)(this,u,t)}numberOfCells(){return(0,s.Z)(this,u).num_obs()}numberOfDims(){return(0,s.Z)(this,u).num_dim()}free(){null!==(0,s.Z)(this,u)&&(l.A((0,s.Z)(this,h)),(0,i.Z)(this,u,null))}get index(){return(0,s.Z)(this,u)}}function f(e){let{numberOfDims:t=null,numberOfCells:r=null,approximate:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,i;try{let h;if(e instanceof o.RY){t=e.numberOfPCs(),r=e.numberOfCells();let n=e.principalComponents({copy:!1});h=n.byteOffset}else{if(null===t||null===r)throw new Error("'numberOfDims' and 'numberOfCells' must be specified when 'x' is an Array");if((s=a.de(e,"Float64WasmArray")).length!=t*r)throw new Error("length of 'x' must be the product of 'numberOfDims' and 'numberOfCells'");h=s.offset}i=l.R((e=>e.build_neighbor_index(h,t,r,n)),c)}catch(h){throw a.gd(i),h}finally{a.gd(s)}return i}var d=new WeakMap,m=new WeakMap;class w{constructor(e,t){(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),(0,i.Z)(this,d,e),(0,i.Z)(this,m,t)}size(){return(0,s.Z)(this,m).size()}numberOfCells(){return(0,s.Z)(this,m).num_obs()}get results(){return(0,s.Z)(this,m)}serialize(){let{runs:e=null,indices:t=null,distances:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n,i,l,o,h=(null===e)+(null===t)+(null===r);if(3!=h&&0!=h)throw new Error("either all or none of 'runs', 'indices' and 'distances' can be 'null'");if(3===h)try{i=a.Wf(this.numberOfCells());let e=this.size();l=a.Wf(e),o=a.RJ(e),(0,s.Z)(this,m).serialize(i.offset,l.offset,o.offset),n={runs:i.slice(),indices:l.slice(),distances:o.slice()}}finally{a.gd(i),a.gd(l),a.gd(o)}else(0,s.Z)(this,m).serialize(e.offset,t.offset,r.offset),n={runs:e.array(),indices:t.array(),distances:r.array()};return n}static unserialize(e,t,r){var n,s,i,o;try{s=a.de(e,"Int32WasmArray"),i=a.de(t,"Int32WasmArray"),o=a.de(r,"Float64WasmArray"),n=l.R((t=>new t.NeighborResults(e.length,s.offset,i.offset,o.offset)),w)}catch(h){throw a.gd(n),h}finally{a.gd(s),a.gd(i),a.gd(o)}return n}free(){null!==(0,s.Z)(this,m)&&(l.A((0,s.Z)(this,d)),(0,i.Z)(this,m,null))}}function p(e,t){let{numberOfThreads:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.mV(r);return l.R((r=>r.find_nearest_neighbors(e.index,t,n)),w)}},9283:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(8782),s=r(6635),i=(r(2306),r(6650));function a(e,t){let{center:r=!0,buffer:a=null,priorCount:l=10,reference:o=null,numberOfThreads:h=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var u,c;let f=s.mV(h);try{if(a instanceof i.lt){if(a.length!==e.numberOfColumns())throw new Error("length of 'buffer' must be equal to the number of columns in 'x'")}else u=s.RJ(e.numberOfColumns()),a=u;c=s.de(t,"Int32WasmArray"),null==o&&(o=-1),n.RE((t=>t.grouped_size_factors(e.matrix,c.offset,r,l,o,a.offset,f)))}catch(d){throw s.gd(u),d}finally{s.gd(c)}return a}},2284:(e,t,r)=>{"use strict";function n(e){let{forceTaxonomy:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,n=Math.ceil(r/2),s=e=>(e.confidence/=r,e),i=new Set;for(const E of e)"string"==typeof E&&i.add(E);let a=0,l=0,o=0,h=0,u=0,c=0,f=0,d=0,m=0,w=0,p=0,g=0,Z=t?"9606":"human",_=t?"10090":"mouse",b=[],v=0;for(const E of i)E&&E.match(/^ENS[A-Z]*G[0-9]{11}$/)&&v++;if(v){for(const e of i)e&&(e.startsWith("ENSG")?a++:e.startsWith("ENSMUSG")?l++:e.startsWith("ENSRNOG")?h++:e.startsWith("ENSMFAG")?u++:e.startsWith("ENSDARG")?f++:e.startsWith("ENSPTRG")&&d++);b.push({species:Z,type:"ensembl",confidence:a}),b.push({species:_,type:"ensembl",confidence:l}),b.push({species:"10116",type:"ensembl",confidence:h}),b.push({species:"9541",type:"ensembl",confidence:u}),b.push({species:"7955",type:"ensembl",confidence:f}),b.push({species:"9598",type:"ensembl",confidence:d});for(const e of b)if(e.confidence>=n)return s(e)}for(const E of i)!E||!E.match(/^[A-Z][^a-z]+$/)||E.match(/^ENS[A-Z]+[0-9]{11}/)||E.match(/^OTT.{4}[0-9]{11}/)||E.match(/^MGI:[0-9]+/)||m++;{let e={species:Z,type:"symbol",confidence:m};if(e.confidence>=n)return s(e);b.push(e)}for(const E of i)E&&E.match(/^[A-Z][^A-Z]+$/)&&w++;{let e={species:_,type:"symbol",confidence:w};if(e.confidence>=n)return s(e);b.push(e)}for(const E of i)E&&E.match(/^WBGene[0-9]+$/)&&o++;{let e={species:"6239",type:"ensembl",confidence:o};if(e.confidence>=n)return s(e);b.push(e)}for(const E of i)E&&E.match(/^FBgn[0-9]+$/)&&c++;{let e={species:"7227",type:"ensembl",confidence:c};if(e.confidence>=n)return s(e);b.push(e)}for(const E of i)E&&E.match(/^[a-z]{3,}-[0-9]+$/)&&p++;{let e={species:"6239",type:"symbol",confidence:p};if(e.confidence>=n)return s(e);b.push(e)}for(const E of i)E&&E.match(/^[a-z]{3,}[0-9a-z]+$/)&&g++;{let e={species:"7955",type:"symbol",confidence:g};if(e.confidence>=n)return s(e);b.push(e)}let y=b[0];for(var k=1;k<b.length;k++)b[k].confidence>y.confidence&&(y=b[k]);return s(y)}r.d(t,{g:()=>n})},5538:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(6635),s=r(8782);function i(e,t,r,i){let a,l,o,h,u,c,{numberOfThreads:f=null,assumeSorted:d=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},m=n.mV(f),w=null,p=(e,t,r)=>{if(null!==r&&e.length!==r)throw new Error("array inputs must have the same length (failing for '"+t+"')");return e.length};"number"==typeof e?e=[e]:w=p(e,"markersInSet",w),"number"==typeof t?t=[t]:w=p(t,"numberOfMarkers",w),"number"==typeof r?r=[r]:w=p(r,"featureSetSize",w),"number"==typeof i?i=[i]:w=p(i,"numberOfFeatures",w),null==w&&(w=1);try{a=n.de(e,"Int32WasmArray"),l=n.de(t,"Int32WasmArray"),o=n.de(r,"Int32WasmArray"),h=n.de(i,"Int32WasmArray"),c=n.RJ(w),s.RE((e=>e.hypergeometric_test(w,1!=a.length,a.offset,1!=o.length,o.offset,1!=l.length,l.offset,1!=h.length,h.offset,d,c.offset,m))),u=c.slice()}finally{n.gd(a),n.gd(l),n.gd(o),n.gd(h),n.gd(c)}return u}},8311:(e,t,r)=>{"use strict";r.d(t,{Bp:()=>d,EF:()=>u,N6:()=>c,_3:()=>l,gP:()=>f,us:()=>h});var n=r(7108),s=r(8782),i=r(6635),a=r(2306);function l(e){let{compressed:t=null,layered:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,l,h=null;try{t=o(t),"string"!==typeof e?(s=i.de(e,"Uint8WasmArray"),l=n.R((e=>e.read_matrix_market_from_buffer(s.offset,s.length,t,r)),a.p)):l=n.R((n=>n.read_matrix_market_from_file(e,t,r)),a.p),l.isReorganized()&&(h=l.identities(),l.wipeIdentities())}catch(u){throw i.gd(l),u}finally{i.gd(s)}return{matrix:l,row_ids:h}}function o(e){return null===e?-1:e?1:0}function h(e){let{compressed:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n=i.RJ(3);let a={};try{t=o(t),"string"!==typeof e?(r=i.de(e,"Uint8WasmArray"),s.RE((e=>e.read_matrix_market_header_from_buffer(r.offset,r.length,t,n.offset)))):s.RE((r=>r.read_matrix_market_header_from_file(e,t,n.offset)));let l=n.array();a.rows=l[0],a.columns=l[1],a.lines=l[2]}finally{i.gd(r),i.gd(n)}return a}function u(e,t){let{forceInteger:r=!0,layered:s=!0,subsetRow:l=null,subsetColumn:o=null,cacheSize:h=1e8}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var u,c=null;let f,d;try{let m=null!==l,w=0,p=0;m&&(f=i.de(l,"Int32WasmArray"),w=f.offset,p=f.length);let g=null!==o,Z=0,_=0;g&&(d=i.de(o,"Int32WasmArray"),Z=d.offset,_=d.length),(u=n.R((n=>n.read_hdf5_matrix(e,t,r,s,m,w,p,g,Z,_,h)),a.p)).isReorganized()&&(c=u.identities(),u.wipeIdentities())}catch(m){throw i.gd(u),m}finally{i.gd(f),i.gd(d)}return{matrix:u,row_ids:c}}function c(e,t){let r={},n=i.Wf(5);try{s.RE((r=>r.extract_hdf5_matrix_details(e,t,n.offset)));let i=n.array();i[0]>0?r.format="dense":i[1]>0?r.format="csc":r.format="csr",r.rows=i[2],r.columns=i[3],r.integer=i[4]>0}finally{n.free()}return r}function f(e,t,r){let{forceInteger:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var l,o;try{l=i.de(r,null),o=n.R((r=>r.initialize_dense_matrix(e,t,l.offset,l.constructor.className.replace("Wasm",""),s)),a.p)}catch(h){throw i.gd(o),h}finally{i.gd(l)}return o}function d(e){let{consume:t=!1,forceInteger:r=!0,layered:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var l,o=null;try{(l=n.R((n=>n.initialize_sparse_matrix_from_rds(e.object.$$.ptr,r,s,t)),a.p)).isReorganized()&&(o=l.identities(),l.wipeIdentities())}catch(h){throw i.gd(l),h}return{matrix:l,row_ids:o}}},6807:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,R:()=>a});var n=r(6635),s=r(8782);function i(e,t,r){var s,i;try{var a=0,l=!1;if(null!==t){if((s=n.de(t,"Int32WasmArray")).length!=e.numberOfCells())throw new Error("'block' must be of length equal to the number of cells in 'metrics'");l=!0,a=s.offset}i=r(e,l,a)}catch(o){throw n.gd(i),o}finally{n.gd(s)}return i}function a(e,t,r,i){var a,l,o;try{var h=0,u=!1;if(null!==r){if((a=n.de(r,"Int32WasmArray")).length!=t.numberOfCells())throw new Error("'block' must be of length equal to the number of cells in 'metrics'");u=!0,h=a.offset}let c;if(null==i)l=n.TS(t.numberOfCells()),c=l.offset;else{if(i.length!=t.numberOfCells())throw new Error("'buffer' must be of length equal to the number of cells in 'metrics'");c=i.offset}s.RE((r=>e.filter(t.results.$$.ptr,u,h,c))),o=null==i?l.slice():i.array()}catch(c){throw n.gd(o),c}finally{n.gd(a),n.gd(l)}return o}},6078:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});r(8782);var n=r(6635);r(6650);function s(e,t,r){var s,i,a=[];try{let o=0,h=0;if(null!=t){o=t.length,h=(i=n.GF(o)).offset;let r=i.array();for(var l=0;l<o;l++){let s=n.de(t[l],"Uint8WasmArray");if(s.length!=e.numberOfRows())throw new Error("length of each array in 'subsets' should be equal to the matrix rows");a.push(s),r[l]=BigInt(s.offset)}}s=r(e.matrix,o,h)}catch(o){throw n.gd(s),o}finally{n.gd(i);for(const e of a)n.gd(e)}return s}},3779:(e,t,r)=>{"use strict";r.d(t,{Os:()=>I,Qj:()=>S,St:()=>b,pG:()=>R,tY:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=(r(8782),r(6635)),o=r(2306),h=r(6650),u=r(8311),c=new WeakMap,f=new WeakMap;class d{constructor(e,t){(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,i.Z)(this,c,e),(0,i.Z)(this,f,t)}get reference(){return(0,s.Z)(this,f)}numberOfSamples(){return(0,s.Z)(this,f).num_samples()}numberOfFeatures(){return(0,s.Z)(this,f).num_features()}numberOfLabels(){return(0,s.Z)(this,f).num_labels()}free(){null!==(0,s.Z)(this,f)&&(a.A((0,s.Z)(this,c)),(0,i.Z)(this,f,null))}}function m(e,t,r){var n,s,i,o;try{s=l.de(e,"Uint8WasmArray"),i=l.de(t,"Uint8WasmArray"),o=l.de(r,"Uint8WasmArray"),n=a.R((e=>e.load_singlepp_reference(o.offset,o.length,i.offset,i.length,s.offset,s.length)),d)}catch(h){throw l.gd(n),h}finally{l.gd(s),l.gd(i),l.gd(o)}return n}var w=new WeakMap,p=new WeakMap;class g{constructor(e,t){(0,n.Z)(this,w,{writable:!0,value:void 0}),(0,n.Z)(this,p,{writable:!0,value:void 0}),(0,i.Z)(this,w,e),(0,i.Z)(this,p,t)}get reference(){return(0,s.Z)(this,p)}sharedFeatures(){return(0,s.Z)(this,p).shared_features()}free(){null!==(0,s.Z)(this,p)&&(a.A((0,s.Z)(this,w)),(0,i.Z)(this,p,null))}}function Z(e,t){let r=new Map;for(var n=0;n<e.length;n++){let s=e[n];null!==s&&(r.has(s)||r.set(s,n)),t[n]=n}return{contents:r,counter:e.length}}function _(e,t,r){let n=new Set,s=(e,s)=>{let i=t.contents.get(e);return"undefined"!==typeof i&&!n.has(i)&&(r[s]=i,n.add(i),!0)},i=t.counter;for(var a=0;a<e.length;a++){let t=e[a],n=!1;if(null!==t)if(t instanceof Array){for(const e of t)if(s(e,a)){n=!0;break}}else n=s(t,a);n||(r[a]=i,++i)}}function b(e,t,r){let{top:n=20,numberOfThreads:s=null}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i,o,h;let u=l.mV(s);try{var c=e.length;if(i=l.Wf(c),o=l.Wf(t.numberOfFeatures()),r.length!=o.length)throw new Error("length of 'referenceFeatures' should be equal to the number of features in 'reference'");_(r,Z(e,i.array()),o.array()),(h=a.R((e=>e.build_singlepp_reference(c,i.offset,t.reference,o.offset,n,u)),g)).expectedNumberOfFeatures=c}catch(f){throw l.gd(h),f}finally{l.gd(i),l.gd(o)}return h}var v=new WeakMap,y=new WeakMap,k=new WeakMap,E=new WeakMap;class O{constructor(e,t){(0,n.Z)(this,v,{writable:!0,value:void 0}),(0,n.Z)(this,y,{writable:!0,value:void 0}),(0,n.Z)(this,k,{writable:!0,value:void 0}),(0,n.Z)(this,E,{writable:!0,value:void 0}),(0,i.Z)(this,v,e),(0,i.Z)(this,y,t)}numberOfLabels(){return(0,s.Z)(this,y).num_labels()}numberOfCells(){return(0,s.Z)(this,y).num_samples()}predictedLabels(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Yj((0,s.Z)(this,y).get_best(),e)}scoresForCell(e){let{copy:t=!0,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==r)return"undefined"==typeof(0,s.Z)(this,k)&&(0,i.Z)(this,k,l.RJ((0,s.Z)(this,y).num_labels())),(0,s.Z)(this,y).get_scores_for_sample(e,(0,s.Z)(this,k).offset),l.Yj((0,s.Z)(this,k).array(),t);if(r.length!==(0,s.Z)(this,y).num_labels())throw new Error("length of 'buffer' should equal the number of labels");return(0,s.Z)(this,y).get_scores_for_sample(e,r.offset),r}scoresForLabel(e){let{copy:t=!0,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==r)return"undefined"==typeof(0,s.Z)(this,E)&&(0,i.Z)(this,E,l.RJ((0,s.Z)(this,y).num_samples())),(0,s.Z)(this,y).get_scores_for_label(e,(0,s.Z)(this,E).offset),l.Yj((0,s.Z)(this,E).array(),t);if(r.length!==(0,s.Z)(this,y).num_samples())throw new Error("length of 'buffer' should equal the number of cells");return(0,s.Z)(this,y).get_scores_for_label(e,r.offset),l.Yj((0,s.Z)(this,E).array(),t)}fineTuningDelta(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Yj((0,s.Z)(this,y).get_delta(),e)}free(){null!==(0,s.Z)(this,y)&&(a.A((0,s.Z)(this,v)),(0,i.Z)(this,y,null),l.gd((0,s.Z)(this,E)),l.gd((0,s.Z)(this,k)))}}function C(e,t,r,n,s,i){var a,c=null;try{let l;if(e instanceof o.p)l=e.matrix;else{if(!(e instanceof h.lt))throw new Error("unknown type for 'x'");l=(a=u.gP(r,n,e,{forceInteger:!1})).matrix}if(l.nrow()!=t)throw new Error("number of rows in 'x' should be equal to length of 'features' used to build '"+i+"'");c=s(l)}finally{l.gd(undefined),l.gd(a)}return c}function R(e,t){let{numberOfFeatures:r=null,numberOfCells:n=null,quantile:s=.8,numberOfThreads:i=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=l.mV(i);return C(e,t.expectedNumberOfFeatures,r,n,((e,r)=>a.R((r=>r.run_singlepp(e,t.reference,s,o)),O)),"reference")}var M=new WeakMap,x=new WeakMap;class N{constructor(e,t){(0,n.Z)(this,M,{writable:!0,value:void 0}),(0,n.Z)(this,x,{writable:!0,value:void 0}),(0,i.Z)(this,M,e),(0,i.Z)(this,x,t)}get integrated(){return(0,s.Z)(this,x)}numberOfReferences(){return(0,s.Z)(this,x).num_references()}free(){null!==(0,s.Z)(this,x)&&(a.A((0,s.Z)(this,M)),(0,i.Z)(this,x,null))}}function S(e,t,r,n){let s,i,o,h,u,{numberOfThreads:c=null}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},f=l.mV(c),d=t.length;if(r.length!=d)throw new Error("'loaded' and 'referenceFeatures' should be of the same length");if(n.length!=d)throw new Error("'loaded' and 'built' should be of the same length");for(var m=0;m<d;m++)if(t[m].numberOfFeatures()!=r[m].length)throw new Error("length of each 'referenceFeatures' should be equal to the number of features in the corresponding 'loaded'");let w=new Array(d);try{s=l.Wf(e.length);let c=Z(e,s.array());i=l.GF(d);let p=i.array();for(m=0;m<d;m++)p[m]=BigInt(t[m].reference.$$.ptr);o=l.GF(d);let g=o.array();for(m=0;m<d;m++){let e=r[m];w[m]=l.Wf(e.length),_(e,c,w[m].array()),g[m]=BigInt(w[m].offset)}h=l.GF(d);let b=h.array();for(m=0;m<d;m++)b[m]=BigInt(n[m].reference.$$.ptr);u=a.R((t=>t.integrate_singlepp_references(e.length,s.offset,d,i.offset,o.offset,h.offset,f)),N),u.expectedNumberOfFeatures=e.length}catch(p){throw l.gd(u),p}finally{l.gd(s),l.gd(i),l.gd(h),l.gd(o);for(const e of w)l.gd(e)}return u}var A=new WeakMap;class W{constructor(e){(0,n.Z)(this,A,{writable:!0,value:void 0}),(0,i.Z)(this,A,e)}numberOfReferences(){return(0,s.Z)(this,A).numberOfLabels()}numberOfCells(){return(0,s.Z)(this,A).numberOfCells()}predictedReferences(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Yj((0,s.Z)(this,A).predictedLabels(),e)}scoresForCell(e){let{copy:t=!0,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,A).scoresForCell(e,{copy:t,buffer:r})}scoresForReference(e){let{copy:t=!0,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,A).scoresForLabel(e,{copy:t,buffer:r})}fineTuningDelta(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Yj((0,s.Z)(this,A).fineTuningDelta(),e)}free(){null!==(0,s.Z)(this,A)&&((0,s.Z)(this,A).free(),(0,i.Z)(this,A,null))}}function I(e,t,r){let n,s,{numberOfFeatures:i=null,numberOfCells:h=null,quantile:u=.8,numberOfThreads:c=null}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=r.numberOfReferences();if(t.length!=f)throw new Error("length of 'assigned' should be equal to the number of references in 'integrated'");let d=new Array(f),m=l.mV(c);try{s=l.GF(f);let c=s.array();for(var w=0;w<t.length;w++){let r=t[w];r instanceof O&&(r=r.predictedLabels({copy:"view"}));let n=!1;if(e instanceof o.p?r.length!=e.numberOfColumns()&&(n=!0):r.length!=h&&(n=!0),n)throw new Error("length of each element in 'assigned' should be equal to number of columns in 'x'");d[w]=l.de(r,"Int32WasmArray"),c[w]=BigInt(d[w].offset)}let p=(e,t)=>a.R((t=>t.integrate_singlepp(e,c.offset,r.integrated,u,m)),O);n=C(e,r.expectedNumberOfFeatures,i,h,p,"integrated")}finally{l.gd(s);for(const e of d)l.gd(e)}return new W(n)}},1184:(e,t,r)=>{"use strict";r.d(t,{g:()=>l,v:()=>o});var n=r(7108),s=r(6635),i=r(6650),a=r(8782);function l(e){let{sizeFactors:t=null,center:r=!0,block:i=null,allowZeros:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var l,o,h;try{var u=0,c=!1;if(null!==t){if((l=s.de(t,"Float64WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'sizeFactors' must be equal to number of columns in 'x'");u=l.offset,c=!0}var f=0,d=!1;if(null!==i){if((o=s.de(i,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");d=!0,f=o.offset}h=n.R((t=>t.log_norm_counts(e.matrix,c,u,d,f,r,a)),e.constructor)}catch(m){throw s.gd(h),m}finally{s.gd(l),s.gd(o)}return h}function o(e){let t,r,{block:n=null,buffer:l=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{null===l&&(t=s.RJ(e.length),l=t),l!==e&&l.set(e instanceof i.PQ?e.array():e);var o=0,h=!1;if(null!==n){if(r=s.de(n,"Int32WasmArray"),r.length!=l.length)throw new Error("'block' must be of length equal to that of 'sizeFactors'");h=!0,o=r.offset}a.RE((e=>e.center_size_factors(l.length,l.offset,h,o)))}catch(u){throw s.gd(t),u}finally{s.gd(r)}return l}},5696:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(6635),s=r(5159),i=r(8782);function a(e,t){let r,a,l,{buffer:o=null,numberOfDims:h=null,numberOfCells:u=null,k:c=15,numberOfMADs:f=3,robustIterations:d=2,robustTrim:m=.25,referencePolicy:w="max-rss",approximate:p=!0,numberOfThreads:g=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Z=n.mV(g);try{if(e instanceof s.RY)h=e.numberOfPCs(),u=e.numberOfCells(),e=e.principalComponents({copy:"view"});else{if(null===h||null===u||h*u!==e.length)throw new Error("length of 'x' must be equal to the product of 'numberOfDims' and 'numberOfCells'");a=n.de(e,"Float64WasmArray"),e=a}if(null==o)r=n.RJ(u*h),o=r;else if(o.length!==e.length)throw new Error("length of 'buffer' must be equal to the product of the number of dimensions and cells");if(l=n.de(t,"Int32WasmArray"),l.length!=u)throw new Error("'block' must be of length equal to the number of cells in 'x'");i.RE((t=>t.mnn_correct(h,u,e.offset,l.offset,o.offset,c,f,d,m,w,p,Z)))}catch(_){throw n.gd(r),_}finally{n.gd(a)}return o}},4812:(e,t,r)=>{"use strict";r.d(t,{rY:()=>_});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(7108),h=r(6635),u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakSet;class g{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,p),(0,s.Z)(this,u,{writable:!0,value:void 0}),(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,l.Z)(this,u,e),(0,l.Z)(this,c,t),(0,l.Z)(this,f,h.oH(this.numberOfBlocks()+1,r)),(0,l.Z)(this,d,h.oH(this.numberOfBlocks()+1,r)),(0,l.Z)(this,m,h.oH(this.numberOfBlocks()+1,r)),(0,l.Z)(this,w,h.oH(this.numberOfBlocks()+1,r))}means(){let{block:e=null,copy:t=!0,fillable:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,p,Z).call(this,e,t,r,(0,a.Z)(this,f),"means")}variances(){let{block:e=null,copy:t=!0,fillable:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,p,Z).call(this,e,t,r,(0,a.Z)(this,d),"variances")}fitted(){let{block:e=null,copy:t=!0,fillable:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,p,Z).call(this,e,t,r,(0,a.Z)(this,m),"fitted")}residuals(){let{block:e=null,copy:t=!0,fillable:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,p,Z).call(this,e,t,r,(0,a.Z)(this,w),"residuals")}numberOfBlocks(){return(0,a.Z)(this,c).num_blocks()}free(){null!==(0,a.Z)(this,c)&&(o.A((0,a.Z)(this,u)),(0,l.Z)(this,c,null))}}function Z(e,t,r,n,s){let i=e;if(null==e){let t=this.numberOfBlocks();i=t>1?t:0,e=-1}return h.Hw(r,t,n[i],(()=>{n[i]=!0}),(t=>h.Yj((0,a.Z)(this,c)[s](e),t)))}function _(e){let{block:t=null,span:r=.3,numberOfThreads:n=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s,i;let a=h.mV(n);try{var l=0,u=!1;if(null!==t){if((s=h.de(t,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");u=!0,l=s.offset}i=o.R((t=>t.model_gene_var(e.matrix,u,l,r,a)),g)}catch(c){throw h.gd(i),c}finally{h.gd(s)}return i}},9206:(e,t,r)=>{"use strict";r.d(t,{dH:()=>w,yf:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=r(6078),h=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap;class m{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,i.Z)(this,h,e),(0,i.Z)(this,u,t),(0,i.Z)(this,c,r),(0,i.Z)(this,f,r),(0,i.Z)(this,d,l.oH(this.numberOfSubsets(),r))}get results(){return(0,s.Z)(this,u)}sums(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,c),(()=>{(0,i.Z)(this,c,!0)}),(e=>l.Yj((0,s.Z)(this,u).sums(),e)))}detected(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,u).detected(),e)))}subsetTotals(e){let{copy:t=!0,fillable:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Hw(r,t,(0,s.Z)(this,d)[e],(()=>{(0,s.Z)(this,d)[e]=!0}),(t=>l.Yj((0,s.Z)(this,u).subset_totals(e),t)))}numberOfSubsets(){return(0,s.Z)(this,u).num_subsets()}numberOfCells(){return(0,s.Z)(this,u).num_cells()}free(){null!==(0,s.Z)(this,u)&&(a.A((0,s.Z)(this,h)),(0,i.Z)(this,u,null))}}function w(e,t){let{numberOfThreads:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.mV(r);return o.$(e,t,((e,t,r)=>a.R((s=>s.per_cell_adt_qc_metrics(e,t,r,n)),m)))}},2945:(e,t,r)=>{"use strict";r.d(t,{J4:()=>w,UY:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=new WeakMap,h=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap;class m{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,i.Z)(this,o,e),(0,i.Z)(this,h,t),(0,i.Z)(this,u,r),(0,i.Z)(this,c,r),(0,i.Z)(this,f,r),(0,i.Z)(this,d,r)}get results(){return(0,s.Z)(this,h)}sums(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,u),(()=>{(0,i.Z)(this,u,!0)}),(e=>l.Yj((0,s.Z)(this,h).sums(),e)))}detected(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,c),(()=>{(0,i.Z)(this,c,!0)}),(e=>l.Yj((0,s.Z)(this,h).detected(),e)),"detected")}maxProportions(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,h).max_proportion(),e)))}maxIndex(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,d),(()=>{(0,i.Z)(this,d,!0)}),(e=>l.Yj((0,s.Z)(this,h).max_index(),e)),"maxIndex")}numberOfCells(){return(0,s.Z)(this,h).num_cells()}free(){null!==(0,s.Z)(this,h)&&(a.A((0,s.Z)(this,o)),(0,i.Z)(this,h,null))}}function w(e){let{numberOfThreads:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.mV(t);return a.R((t=>t.per_cell_crispr_qc_metrics(e.matrix,r)),m)}},5448:(e,t,r)=>{"use strict";r.d(t,{eD:()=>m,wj:()=>w});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=r(6078),h=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap;class m{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,i.Z)(this,h,e),(0,i.Z)(this,u,t),(0,i.Z)(this,c,r),(0,i.Z)(this,f,r),(0,i.Z)(this,d,l.oH(this.numberOfSubsets(),r))}get results(){return(0,s.Z)(this,u)}sums(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,c),(()=>{(0,i.Z)(this,c,!0)}),(e=>l.Yj((0,s.Z)(this,u).sums(),e)))}detected(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,u).detected(),e)))}subsetProportions(e){let{copy:t=!0,fillable:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Hw(r,t,(0,s.Z)(this,d)[e],(()=>{(0,s.Z)(this,d)[e]=!0}),(t=>l.Yj((0,s.Z)(this,u).subset_proportions(e),t)))}numberOfSubsets(){return(0,s.Z)(this,u).num_subsets()}numberOfCells(){return(0,s.Z)(this,u).num_cells()}free(){null!==(0,s.Z)(this,u)&&(a.A((0,s.Z)(this,h)),(0,i.Z)(this,u,null))}}function w(e,t){let{numberOfThreads:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.mV(r);return o.$(e,t,((e,t,r)=>a.R((s=>s.per_cell_rna_qc_metrics(e,t,r,n)),m)))}},6974:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var n=r(2494),s=r(1184),i=r(9283),a=r(5159),l=r(6635);function o(e){let t,r,o,h,{numberOfClusters:u=20,numberOfPCs:c=25,totals:f=null,block:d=null,buffer:m=null,numberOfThreads:w=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{t=(0,s.g)(e,{sizeFactors:f,block:d}),r=(0,a.dO)(t,{numberOfPCs:Math.min(t.numberOfRows()-1,c),numberOfThreads:w,block:d,blockMethod:"weight"})}finally{l.gd(t)}try{o=(0,n.eu)(r,u,{numberOfThreads:w})}finally{l.gd(r)}try{if(null===m)h=l.RJ(e.numberOfColumns()),m=h;else if(m.length!==e.numberOfColumns())throw new Error("length of 'buffer' should be equal to the number of columns in 'x'");(0,i.S)(e,o.clusters({copy:"view"}),{buffer:m,numberOfThreads:w})}catch(p){throw l.gd(h),p}finally{l.gd(o)}return m}},6663:(e,t,r)=>{"use strict";r.d(t,{BA:()=>g,D6:()=>f,II:()=>w,SV:()=>p,p$:()=>k,qu:()=>c});var n=r(2346),s=r(8916),i=r(2793),a=r(6635),l=r(8782),o=r(7108),h=r(6774);class u{constructor(e,t,r){this.id=e,this.object=t,this.parent=r}type(){return this.object.type()}free(){null!==this.object&&(o.A(this.id),this.object=null)}}class c extends u{constructor(e,t,r){super(e,t,r)}length(){return this.object.size()}attributeNames(){return l.RE((e=>{this.object.fill_attribute_names();let t=this.object.attribute_names_buffer(),r=this.object.attribute_names_length();return h.b(t,r)}))}findAttribute(e){return l.RE((t=>this.object.find_attribute(e)))}attribute(e){return _("number"==typeof e?t=>this.object.load_attribute_by_index(e):t=>this.object.load_attribute_by_name(e),this.parent)}}class f extends c{constructor(e,t,r){super(e,t,r)}values(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Yj(this.object.numeric_vector(),e)}}class d extends c{constructor(e,t,r){super(e,t,r)}values(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Yj(this.object.numeric_vector(),e)}}class m extends c{constructor(e,t,r){super(e,t,r)}values(){let{copy:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Yj(this.object.numeric_vector(),e)}}class w extends c{constructor(e,t,r){super(e,t,r)}values(){return l.RE((e=>{this.object.fill_string_vector();let t=this.object.string_vector_buffer(),r=this.object.string_vector_length();return h.b(t,r)}))}}class p extends c{constructor(e,t,r){super(e,t,r)}load(e){return _((t=>this.object.load_list_element(e)),this.parent)}}class g extends u{constructor(e,t,r){super(e,t,r)}className(){return l.RE((e=>this.object.class_name()))}packageName(){return l.RE((e=>this.object.package_name()))}attributeNames(){return l.RE((e=>{this.object.fill_attribute_names();let t=this.object.attribute_names_buffer(),r=this.object.attribute_names_length();return h.b(t,r)}))}findAttribute(e){return l.RE((t=>this.object.find_attribute(e)))}attribute(e){return _("number"==typeof e?t=>this.object.load_attribute_by_index(e):t=>this.object.load_attribute_by_name(e),this.parent)}}class Z extends c{constructor(e,t,r){super(e,t,r)}}function _(e,t){let r,n=l.RE(e),s=null;try{s=n.type()}catch(i){throw n.delete(),i}return r="integer"==s?f:"double"==s?m:"boolean"==s?d:"string"==s?w:"vector"==s?p:"S4"==s?g:"null"==s?Z:u,o.R((e=>n),r,t)}var b=new WeakMap,v=new WeakMap;class y{constructor(e,t){(0,n.Z)(this,b,{writable:!0,value:void 0}),(0,n.Z)(this,v,{writable:!0,value:void 0}),(0,i.Z)(this,b,e),(0,i.Z)(this,v,t)}formatVersion(){return(0,s.Z)(this,v).format_version()}writerVersion(){let e=(0,s.Z)(this,v).writer_version();return String(e[0])+"."+String(e[1])+"."+String(e[2])}readerVersion(){let e=(0,s.Z)(this,v).reader_version();return String(e[0])+"."+String(e[1])+"."+String(e[2])}value(){return _((e=>(0,s.Z)(this,v).load()),this)}free(){null!==(0,s.Z)(this,v)&&(o.A((0,s.Z)(this,b)),(0,i.Z)(this,v,null))}}function k(e){let t,r;try{"string"==typeof e?r=o.R((t=>t.parse_rds_from_file(e)),y):(t=a.de(e,"Uint8WasmArray"),r=o.R((e=>e.parse_rds_from_buffer(t.offset,t.length)),y))}finally{a.gd(t)}return r}},5159:(e,t,r)=>{"use strict";r.d(t,{RY:()=>d,dO:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=new WeakMap,h=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap;class d{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,h,{writable:!0,value:void 0}),(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,i.Z)(this,o,e),(0,i.Z)(this,h,t),(0,i.Z)(this,u,r),(0,i.Z)(this,c,r),(0,i.Z)(this,f,r)}principalComponents(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,u),(()=>{(0,i.Z)(this,u,!0)}),(e=>l.Yj((0,s.Z)(this,h).pcs(),e)))}setTotalVariance(e){(0,s.Z)(this,f)||(0,i.Z)(this,f,!0),(0,s.Z)(this,h).set_total_variance(e)}varianceExplained(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,c),(()=>{(0,i.Z)(this,c,!0)}),(e=>l.Yj((0,s.Z)(this,h).variance_explained(),e)))}totalVariance(){return(0,s.Z)(this,f)?(0,s.Z)(this,h).total_variance():null}numberOfPCs(){return(0,s.Z)(this,h).num_pcs()}numberOfCells(){return this.principalComponents({copy:!1}).length/this.numberOfPCs()}free(){null!==(0,s.Z)(this,h)&&(a.A((0,s.Z)(this,o)),(0,i.Z)(this,h,null))}}function m(e){let{features:t=null,numberOfPCs:r=25,scale:n=!1,block:s=null,blockMethod:i="regress",numberOfThreads:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var h,u,c;l.c2("blockMethod",i,["none","regress","weight"]);let f=l.mV(o);try{var m=!1,w=0;if(null!==t){if((h=l.de(t,"Uint8WasmArray")).length!=e.numberOfRows())throw new Error("length of 'features' should be equal to number of rows in 'x'");m=!0,w=h.offset}if(r=Math.min(r,e.numberOfRows()-1,e.numberOfColumns()-1),null===s||"none"==i)c=a.R((t=>t.run_pca(e.matrix,r,m,w,n,f)),d);else{if((u=l.de(s,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'block' should be equal to the number of columns in 'x'");if("regress"==i)c=a.R((t=>t.run_blocked_pca(e.matrix,r,m,w,n,u.offset,f)),d);else{if("weight"!=i)throw new Error("unknown value '"+i+"' for 'blockMethod='");c=a.R((t=>t.run_multibatch_pca(e.matrix,r,m,w,n,u.offset,f)),d)}}}catch(p){throw l.gd(c),p}finally{l.gd(h),l.gd(u)}return c}},4181:(e,t,r)=>{"use strict";r.d(t,{Tk:()=>s});r(6635);var n=r(8782);r(7108),r(7067);function s(e){return n.RE((t=>t.perplexity_to_k(e)))}},5319:(e,t,r)=>{"use strict";r(6635),r(8782),r(7108),r(7067)},2732:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var n=r(8782),s=r(6635);r(7067);function i(e,t){let r,i,a,l,o,{neighbors:h=20,indices:u=null,buffer:c=null,approximate:f=!0,weights:d=null,numberOfThreads:m=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},w=e.length,p=s.mV(m),g=[];try{r=s.GF(w);let m=r.array();for(var Z=0;Z<w;Z++)m[Z]=BigInt(e[Z].offset);let g=0,_=!1;if(null!==d){if(_=!0,l=s.de(d,"Float64WasmArray"),l.length!=w)throw new Error("length of 'weights' should be equal to the number of embeddings");g=l.offset}let b=e=>{let r=e*t;if(null===c)o=s.RJ(r),c=o;else if(r!==c.length)throw new Error("length of 'buffer' should be equal to the product of 'numberOfCells' and the total number of dimensions")};if(null!==u){if(w!==u.length)throw new Error("'indices' and 'embeddings' should have the same length");i=s.GF(w);let a=i.array(),l=0;for(Z=0;Z<w;Z++){let r=u[Z];if(t!=r.numberOfCells())throw new Error("each element of 'indices' should have the same number of cells as 'numberOfCells'");if(e[Z].length!=r.numberOfCells()*r.numberOfDims())throw new Error("length of arrays in 'embeddings' should equal the length of arrays used to build 'indices'");a[Z]=BigInt(u[Z].index.$$.ptr),l+=u[Z].numberOfDims()}b(l),n.RE((e=>e.scale_by_neighbors_indices(t,w,r.offset,i.offset,c.offset,h,_,g,p)))}else{a=s.Wf(w);let i=a.array(),l=0;for(Z=0;Z<w;Z++){let r=e[Z].length;if(i[Z]=Math.floor(r/t),t*i[Z]!==r)throw new Error("length of arrays in 'embeddings' should be a multiple of 'numberOfCells'");l+=i[Z]}b(l),n.RE((e=>e.scale_by_neighbors_matrices(t,w,a.offset,r.offset,c.offset,h,_,g,f,p)))}}catch(_){throw s.gd(o),_}finally{for(const e of g)e.free();s.gd(r),s.gd(i),s.gd(l),s.gd(a)}return c}},7039:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});r(7108);var n=r(8782),s=r(6635);r(6650);function i(e,t){let r,i,a,{block:l=null,scale:o=!1,numberOfThreads:h=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={},c=s.mV(h);try{if(t.length!==e.numberOfRows())throw new Error("Uint8Array 'features' must be of length equal to the number of rows in 'x'");i=s.de(t,"Uint8WasmArray");var f=0,d=!1;if(null!==l){if(a=s.de(l,"Int32WasmArray"),a.length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");d=!0,f=a.offset}r=n.RE((t=>t.score_feature_set(e.matrix,i.offset,d,f,o,c))),u.weights=r.weights().slice(),u.scores=r.scores().slice()}finally{s.gd(a),s.gd(i),r&&r.delete()}return u}},9249:(e,t,r)=>{"use strict";r.d(t,{OV:()=>y,y5:()=>E});var n=r(101),s=r(2346),i=r(3889),a=r(8916),l=r(2793),o=r(7108),h=r(8782),u=r(6635);function c(e,t,r,n,s,i){return u.Hw(r,n,s.filled||s.details[e][t]||!1,(()=>{s.details[e][t]=!0}),i)}function f(e){if("number"==typeof e)return e;let t;switch(e){case"minimum":t=0;break;case"mean":t=1;break;case"median":t=2;break;case"maximum":t=3;break;case"min-rank":t=4;break;default:throw new Error("unknown summary type '"+e+"'")}return t}var d=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap,Z=new WeakMap,_=new WeakMap,b=new WeakMap,v=new WeakSet;class y{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,v),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),(0,s.Z)(this,Z,{writable:!0,value:void 0}),(0,s.Z)(this,_,{writable:!0,value:void 0}),(0,s.Z)(this,b,{writable:!0,value:void 0}),(0,l.Z)(this,d,e),(0,l.Z)(this,m,t);let i=this.numberOfGroups(),a=this.numberOfBlocks();function o(e){let t={filled:e};if(!e){t.details=new Array(i);for(var r=0;r<i;r++)t.details[r]=u.oH(a+1,e)}return t}function h(e){let t={filled:e};if(!e){t.details=new Array(i);for(var r=0;r<i;r++)t.details[r]={}}return t}(0,l.Z)(this,w,o(r)),(0,l.Z)(this,p,o(r)),(0,l.Z)(this,g,h(r)),(0,l.Z)(this,Z,h(r)),(0,l.Z)(this,_,h(r)),(0,l.Z)(this,b,h(r))}numberOfBlocks(){return(0,a.Z)(this,m).num_blocks()}numberOfGroups(){return(0,a.Z)(this,m).num_groups()}means(e){let{block:t=null,copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(this,v,k).call(this,e,t,r,n,(0,a.Z)(this,w),"means")}detected(e){let{block:t=null,copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(this,v,k).call(this,e,t,r,n,(0,a.Z)(this,p),"detected")}cohen(e){let{summary:t="mean",copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=f(t),c(e,t,n,r,(0,a.Z)(this,g),(r=>u.Yj(h.RE((r=>(0,a.Z)(this,m).cohen(e,t))),r)))}auc(e){let{summary:t="mean",copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=f(t),c(e,t,n,r,(0,a.Z)(this,_),(r=>u.Yj(h.RE((r=>(0,a.Z)(this,m).auc(e,t))),r)))}lfc(e){let{summary:t="mean",copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=f(t),c(e,t,n,r,(0,a.Z)(this,Z),(r=>u.Yj(h.RE((r=>(0,a.Z)(this,m).lfc(e,t))),r)))}deltaDetected(e){let{summary:t="mean",copy:r=!0,fillable:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=f(t),c(e,t,n,r,(0,a.Z)(this,b),(r=>u.Yj(h.RE((r=>(0,a.Z)(this,m).delta_detected(e,t))),r)))}free(){null!==(0,a.Z)(this,m)&&(o.A((0,a.Z)(this,d)),(0,l.Z)(this,m,null))}}function k(e,t,r,n,s,i){let l=t;if(null==t){let e=this.numberOfBlocks();l=e>1?e:0,t=-1}return u.Hw(n,r,s.filled||s.details[e][l]||!1,(()=>{s.details[e][l]=!0}),(r=>u.Yj((0,a.Z)(this,m)[i](e,t),r)))}function E(e,t){let{block:r=null,numberOfThreads:n=null,lfcThreshold:s=0,computeAuc:i=!0,computeMedian:a=!1,computeMaximum:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var h,c,f;let d=u.mV(n);try{if((f=u.de(t,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'groups' should be equal to number of columns in 'x'");var m=0,w=!1;if(null!==r){if((c=u.de(r,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");w=!0,m=c.offset}h=o.R((t=>t.score_markers(e.matrix,f.offset,w,m,s,i,a,l,d)),y)}catch(p){throw u.gd(h),p}finally{u.gd(c),u.gd(f)}return h}},1196:(e,t,r)=>{"use strict";r.d(t,{ZW:()=>l,vc:()=>o});var n=r(6635),s=r(8782),i=r(4021);function a(e,t){let r,i,a,{inPlace:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{l?i=e:(r=e.clone(),i=r),a=n.de(t,"Int32WasmArray"),s.RE((e=>e.row_subset(i.matrix,a.offset,a.length)))}catch(o){throw n.gd(r),o}finally{n.gd(a)}return i}function l(e,t){let r,i,a,{inPlace:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{l?i=e:(r=e.clone(),i=r),a=n.de(t,"Int32WasmArray"),s.RE((e=>e.column_subset(i.matrix,a.offset,a.length)))}catch(o){throw n.gd(r),o}finally{n.gd(a)}return i}function o(e,t){let r,{singleNull:n=!1,createMultiMatrix:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={},o=Object.keys(t);if(1==o.length){let r=t[o[0]],s=r.length==e.numberOfRows();if(s)for(var h=0;h<r.length;h++)if(h!=r[h]){s=!1;break}if(s)return n?null:(l[o[0]]=e.clone(),l)}try{for(const r of o)l[r]=a(e,t[r]);s&&(r=new i.V({store:l}))}catch(u){for(const e of Object.values(l))e.free();throw u}return s?r:l}},6757:(e,t,r)=>{"use strict";r.d(t,{nO:()=>w});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=r(6807),h=r(9206),u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap;class m{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,i.Z)(this,c,e),(0,i.Z)(this,u,t),(0,i.Z)(this,f,r),(0,i.Z)(this,d,l.oH(this.numberOfSubsets(),r))}thresholdsDetected(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,u).thresholds_detected(),e)))}thresholdsSubsetTotals(e){let{copy:t=!0,fillable:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Hw(r,t,(0,s.Z)(this,d)[e],(()=>{(0,s.Z)(this,d)[e]=!0}),(t=>l.Yj((0,s.Z)(this,u).thresholds_subset_totals(e),t)))}numberOfSubsets(){return(0,s.Z)(this,u).num_subsets()}numberOfBlocks(){return(0,s.Z)(this,u).num_blocks()}filter(e){let{block:t=null,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.yf))throw new Error("'metrics' should be a PerCellAdtQcMetricsResults object");return o.R((0,s.Z)(this,u),e,t,r)}free(){null!==(0,s.Z)(this,u)&&(a.A((0,s.Z)(this,c)),(0,i.Z)(this,u,null))}}function w(e){let{numberOfMADs:t=3,minDetectedDrop:r=.1,block:n=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.yf))throw new Error("'metrics' should be a PerCellAdtQcMetricsResults object");return o.H(e,n,((e,n,s)=>a.R((i=>i.suggest_adt_qc_filters(e.results.$$.ptr,n,s,t,r)),m)))}},4609:(e,t,r)=>{"use strict";r.d(t,{XU:()=>m});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=r(6807),h=r(2945),u=new WeakMap,c=new WeakMap,f=new WeakMap;class d{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,i.Z)(this,u,e),(0,i.Z)(this,c,t),(0,i.Z)(this,f,r)}thresholdsMaxCount(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,c).thresholds_max_count(),e)))}numberOfBlocks(){return(0,s.Z)(this,c).num_blocks()}filter(e){let{block:t=null,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.UY))throw new Error("'metrics' should be a PerCellCrisprQcMetricsResults object");return o.R((0,s.Z)(this,c),e,t,r)}free(){null!==(0,s.Z)(this,c)&&(a.A((0,s.Z)(this,u)),(0,i.Z)(this,c,null))}}function m(e){let{numberOfMADs:t=3,block:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.UY))throw new Error("'metrics' should be a PerCellCrisprQcMetricsResults object");return o.H(e,r,((e,r,n)=>a.R((s=>s.suggest_crispr_qc_filters(e.results.$$.ptr,r,n,t)),d)))}},7339:(e,t,r)=>{"use strict";r.d(t,{Lw:()=>p});var n=r(2346),s=r(8916),i=r(2793),a=r(7108),l=r(6635),o=r(6807),h=r(5448),u=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap;class w{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,u,{writable:!0,value:void 0}),(0,n.Z)(this,c,{writable:!0,value:void 0}),(0,n.Z)(this,f,{writable:!0,value:void 0}),(0,n.Z)(this,d,{writable:!0,value:void 0}),(0,n.Z)(this,m,{writable:!0,value:void 0}),(0,i.Z)(this,u,e),(0,i.Z)(this,c,t),(0,i.Z)(this,f,r),(0,i.Z)(this,d,r),(0,i.Z)(this,m,l.oH(this.numberOfSubsets(),r))}thresholdsSums(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,f),(()=>{(0,i.Z)(this,f,!0)}),(e=>l.Yj((0,s.Z)(this,c).thresholds_sums(),e)))}thresholdsDetected(){let{copy:e=!0,fillable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.Hw(t,e,(0,s.Z)(this,d),(()=>{(0,i.Z)(this,d,!0)}),(e=>l.Yj((0,s.Z)(this,c).thresholds_detected(),e)))}thresholdsSubsetProportions(e){let{copy:t=!0,fillable:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Hw(r,t,(0,s.Z)(this,m)[e],(()=>{(0,s.Z)(this,m)[e]=!0}),(t=>l.Yj((0,s.Z)(this,c).thresholds_proportions(e),t)))}numberOfSubsets(){return(0,s.Z)(this,c).num_subsets()}numberOfBlocks(){return(0,s.Z)(this,c).num_blocks()}filter(e){let{block:t=null,buffer:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.eD))throw new Error("'metrics' should be a PerCellRnaQcMetricsResults object");return o.R((0,s.Z)(this,c),e,t,r)}free(){null!==(0,s.Z)(this,c)&&(a.A((0,s.Z)(this,u)),(0,i.Z)(this,c,null))}}function p(e){let{numberOfMADs:t=3,block:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof h.eD))throw new Error("'metrics' should be a PerCellRnaQcMetricsResults object");return o.H(e,r,((e,r,n)=>a.R((s=>s.suggest_rna_qc_filters(e.results.$$.ptr,r,n,t)),w)))}},6635:(e,t,r)=>{"use strict";r.d(t,{GF:()=>l,Hw:()=>w,RJ:()=>o,TS:()=>i,Wf:()=>a,Yj:()=>f,c2:()=>d,de:()=>h,gd:()=>c,mV:()=>u,oH:()=>m});var n=r(8782),s=r(6650);function i(e){return s.TS((0,n.Fx)(),e)}function a(e){return s.Wf((0,n.Fx)(),e)}function l(e){return s.GF((0,n.Fx)(),e)}function o(e){return s.RJ((0,n.Fx)(),e)}function h(e,t){if(e instanceof s.PQ){if(null!==t&&t!=e.constructor.className)throw new Error("expected '"+t+"', got '"+e.constructor.className+"'");return e.space===(0,n.Fx)()?null===e.owner?e.view():e:e.clone((0,n.Fx)())}let r=null;return r=null!==t?s.Zv((0,n.Fx)(),e,s.rr(t)):s.Zv((0,n.Fx)(),e),r}function u(e){return null==e?(0,n.TT)():e}function c(e){if("undefined"!=typeof e&&null!=e)return e.free()}function f(e,t){if("view"===t){if(e.buffer!==(0,n.f3)())throw new Error('cannot use copy = "view" for non-Wasm TypedArrays');let t=e.constructor.name.replace("Array","WasmArray");return s.dt((0,n.Fx)(),e.length,e.byteOffset,s.rr(t))}return t?e.slice():e}function d(e,t,r){if(-1==r.indexOf(t))throw new Error("'"+e+"=' should be one of '"+r.join("', '")+"'")}function m(e,t){let r=new Array(e);return r.fill(t),r}function w(e,t,r,n,s){if(!r){if(!e)return null;n(),t&&(t=!1)}return s(t)}},8782:(e,t,r)=>{"use strict";r.d(t,{Fx:()=>u,RE:()=>o,TT:()=>l,f3:()=>h,j2:()=>a});var n=r(8308),s=r(6650);r(5941);const i={};async function a(){let{numberOfThreads:e=4,localFile:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("module"in i)return!1;let r={scran_custom_nthreads:e};return t&&(r.locateFile=e=>"file:///home/runner/work/kana/kana/node_modules/scran.js/browser/wasm.js".substring(7)+"/../wasm/"+e),i.module=await(0,n.default)(r),i.space=(0,s.z2)(i.module),!0}function l(){return i.module.scran_custom_nthreads}function o(e){if(!("module"in i))throw new Error("Wasm module needs to be initialized via 'initialize()'");var t;try{t=e(i.module)}catch(r){throw"number"==typeof r?new Error(i.module.get_error_message(r)):r}return t}function h(){if(!("module"in i))throw new Error("Wasm module needs to be initialized via 'initialize()'");return i.module.wasmMemory.buffer}function u(){return i.space}},6701:(e,t,r)=>{"use strict";r.d(t,{GF:()=>o,RJ:()=>h,TS:()=>a,Wf:()=>l,ih:()=>i});var n=r(2813),s=r(8383);function i(e,t,r){return(0,n.TK)(e,t,r)}function a(e,t){return i(e,t,s.yh)}function l(e,t){return i(e,t,s.do)}function o(e,t){return i(e,t,s.g1)}function h(e,t){return i(e,t,s.lt)}},8383:(e,t,r)=>{"use strict";r.d(t,{do:()=>c,g1:()=>f,lt:()=>w,rr:()=>g,yh:()=>a});var n=r(4942),s=r(2813),i=r(2905);class a extends i.P{array(){return new Uint8Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(a,"className","Uint8WasmArray"),(0,n.Z)(a,"valueSize",1);class l extends i.P{array(){return new Int8Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(l,"className","Int8WasmArray"),(0,n.Z)(l,"valueSize",1);class o extends i.P{array(){return new Uint16Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(o,"className","Uint16WasmArray"),(0,n.Z)(o,"valueSize",2);class h extends i.P{array(){return new Int16Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(h,"className","Int16WasmArray"),(0,n.Z)(h,"valueSize",2);class u extends i.P{array(){return new Uint32Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(u,"className","Uint32WasmArray"),(0,n.Z)(u,"valueSize",4);class c extends i.P{array(){return new Int32Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(c,"className","Int32WasmArray"),(0,n.Z)(c,"valueSize",4);class f extends i.P{array(){return new BigUint64Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(f,"className","BigUint64WasmArray"),(0,n.Z)(f,"valueSize",8);class d extends i.P{array(){return new BigInt64Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(d,"className","BigInt64WasmArray"),(0,n.Z)(d,"valueSize",8);class m extends i.P{array(){return new Float32Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(m,"className","Float32WasmArray"),(0,n.Z)(m,"valueSize",4);class w extends i.P{array(){return new Float64Array((0,s.f3)(this.space),this.offset,this.length)}}(0,n.Z)(w,"className","Float64WasmArray"),(0,n.Z)(w,"valueSize",8);const p={Uint8WasmArray:a,Int8WasmArray:l,Uint16WasmArray:o,Int16WasmArray:h,Uint32WasmArray:u,Int32WasmArray:c,BigUint64WasmArray:f,BigInt64WasmArray:d,Float32WasmArray:m,Float64WasmArray:w};function g(e){if(!(e in p))throw new Error("unknown WasmArray class '"+e+"'");return p[e]}},6650:(e,t,r)=>{"use strict";r.d(t,{GF:()=>i.GF,PQ:()=>n.P,RJ:()=>i.RJ,TS:()=>i.TS,Wf:()=>i.Wf,Zv:()=>a.Zv,do:()=>s.do,dt:()=>l.dt,lt:()=>s.lt,n6:()=>o.n6,rr:()=>s.rr,yh:()=>s.yh,z2:()=>h.z2});var n=r(2905),s=r(8383),i=r(6701),a=r(4163),l=r(736),o=(r(6021),r(4342)),h=r(2813)},4342:(e,t,r)=>{"use strict";r.d(t,{n6:()=>s});var n=r(6701);function s(e,t){let{filter:r=null,buffer:s=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e,t,r,n){if(null===t)return e.forEach((e=>{if(e<0||e>=r)throw new Error("'subset' contains out-of-range indices for '"+n+"'")})),e.length;if(e.length!=r)throw new Error("'subset' and '"+n+"' should have the same length");let s=0;return e.forEach((e=>{s+=0!=e})),t?e.length-s:s}(t,r,e.length,"x");if(null==s)s=(0,n.ih)(e.space,i,e.constructor);else if(s.length!==i)throw new Error("length of 'buffer' is not consistent with 'subset'");let a=s.array();return function(e,t,r,n){if(null==t)e.forEach(((e,t)=>{n[t]=r[e]}));else if(t){let t=0;e.forEach(((e,s)=>{0==e&&(n[t]=r[s],t++)}))}else{let t=0;e.forEach(((e,s)=>{0!==e&&(n[t]=r[s],t++)}))}}(t,r,e.array(),a),s}}}]);
//# sourceMappingURL=496.4d13013d.chunk.js.map