/*! For license information please see 463.a96a601f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkkana=self.webpackChunkkana||[]).push([[463],{8109:function(e,t,n){var r=n(4165),i=n(5671),a=n(3144);function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{o(r.next(e))}catch(t){a(t)}}function l(e){try{o(r.throw(e))}catch(t){a(t)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}o((r=r.apply(e,t||[])).next())}))}var l,o=function(){function e(){(0,i.Z)(this,e),this.mutex=Promise.resolve()}return(0,a.Z)(e,[{key:"lock",value:function(){var e=function(){};return this.mutex=this.mutex.then((function(){return new Promise(e)})),new Promise((function(t){e=t}))}},{key:"dispatch",value:function(e){return s(this,void 0,void 0,(0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lock();case 2:return n=t.sent,t.prev=3,t.next=6,Promise.resolve(e());case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,n(),t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[3,,7,10]])})))}}]),e}();var u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g;l=u.Buffer,u.TextEncoder&&new u.TextEncoder;"a".charCodeAt(0),"0".charCodeAt(0);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=new Uint8Array(256),f=0;f<c.length;f++)h[c.charCodeAt(f)]=f;new o,new Map;new o;new o;new DataView(new ArrayBuffer(4));new o;new o;new o;new o;new o;new o;new o;new o;new o;new o;new o;new o;new o;new o;new o,new ArrayBuffer(8);new o,new ArrayBuffer(8);new o,new ArrayBuffer(8);new o;new o;new o},7931:function(e,t,n){n.d(t,{TN:function(){return J}});var r=n(4165),i=n(5861),a=(n(5831),n(6546)),s=n(652),l=n(9873),o=n(9751),u=n(2269),c=n(7317),h=n(8366),f=n(2615),d=n(8391),v=n(384),_=n(7188),p=n(6849),w=n(8580),m=n(1944),Z=n(7625),g=n(7139),y=n(8849),b=n(4414),k=n(3060),x=n(7270),E=n(8334),A=n(4),S=n(2603),z=n(2990),R=(n(6207),a.Cy),C=s.Cy,N=l.Cy,D=o.Cy,M=u.Cy,W=c.Cy,O=h.Cy,I=f.Cy,F="feature_selection",T=v.Cy,U=_.Cy,j=p.Cy,B="combine_embeddings",L="batch_correction",P=Z.Cy,H="tsne",Y="umap",G="kmeans_cluster",V=b.Cy,X="choose_clustering",K=E.Cy,$="cell_labelling",q=S.Cy,Q=z.Cy;function J(){return ee.apply(this,arguments)}function ee(){return(ee=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te(new a.tq));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){var t={};t[R]=e,t[C]=new s.E4(t[R]),t[N]=new l.fA(t[R]),t[D]=new o.IW(t[R]);var n={RNA:t[C],ADT:t[N],CRISPR:t[D]};t[M]=new u.H0(t[R],n),t[W]=new c.ue(t[C],t[M]),t[O]=new h.m5(t[N],t[M]),t[I]=new f.$M(t[D],t[M]),t[F]=new d.$(t[M],t[W]),t[T]=new v.rR(t[M],t[W],t[F]),t[U]=new _.Ru(t[M],t[O]),t[j]=new p.zR(t[M],t[I]);var r={RNA:t[T],ADT:t[U],CRISPR:t[j]};t[B]=new w.BE(r),t[L]=new m.N_(t[M],t[B]),t[P]=new Z.Xr(t[L]),t[H]=new k.T(t[P]),t[Y]=new x.D(t[P]),t[G]=new y.d(t[L]),t[V]=new b.Xs(t[P]),t[X]=new g.c(t[V],t[G]);var i={RNA:t[W],ADT:t[O],CRISPR:t[I]};return t[K]=new E.UL(t[M],i,t[X]),t[$]=new A.ES(t[R]),t[Q]=new z.ii(t[R],t[M],t[W]),t[q]=new S.kd(t[M],i),Promise.all([t[H].ready(),t[Y].ready()]).then((function(e){return t}))}},298:function(e,t,n){n(6546),n(652),n(9873),n(9751),n(2269),n(7317),n(8366),n(2615);var r=n(384),i=n(7188),a=n(6849),s=n(8580),l=n(1944),o=n(7625);n(4414),n(8334),n(2603),n(2990),n(4);r.Cy,i.Cy,a.Cy;l.Cy,s.Cy,o.Cy},8408:function(e,t,n){n(5831);var r=n(6650);n(6474);r.yh.prototype._bioconductor_LENGTH=function(){return this.length},r.do.prototype._bioconductor_LENGTH=function(){return this.length},r.lt.prototype._bioconductor_LENGTH=function(){return this.length}},7154:function(e,t,n){n(714),n(6650)},2320:function(e,t,n){n(6474),n(8408),n(9800),n(4343),n(7154)},3842:function(e,t,n){n(8109),n(5831)},9800:function(e,t,n){n(5831)},9566:function(e,t,n){n(2320),n(5148),n(3842),n(5587)},5148:function(e,t,n){n(6474),n(8408)},4343:function(e,t,n){n(5831)},797:function(e,t,n){n.d(t,{CM:function(){return i.CM},E4:function(){return l.E4},EQ:function(){return i.EQ},ES:function(){return o.ES},J6:function(){return c.J6},Qr:function(){return i.Qr},TN:function(){return r.TN},Y:function(){return u.Y},cO:function(){return i.cO},j2:function(){return d},jJ:function(){return s.jJ},nN:function(){return i.nN},rV:function(){return o.rV},sF:function(){return h.sF},zD:function(){return i.zD}});n(298);var r=n(7931),i=(n(2453),n(4833)),a=(n(9566),n(4071)),s=n(818),l=n(652),o=n(4),u=n(2990),c=n(8334),h=n(2603),f=n(5831);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.numberOfThreads,n=void 0===t?1:t,r=e.localFile,i=void 0!==r&&r,s=f.j2({numberOfThreads:n,localFile:i});return a.yc.localFile=i,s.then((function(e){return null}))}},2121:function(e,t,n){n.d(t,{EQ:function(){return A},cj:function(){return x}});var r=n(7326),i=n(136),a=n(9388),s=n(101),l=n(3889),o=n(4165),u=n(5861),c=n(5671),h=n(3144),f=n(2346),d=n(8916),v=n(2793),_=n(5173),p=n(5587),w=n(6016),m=new WeakMap,Z=new WeakMap,g=function(){function e(t,n){(0,c.Z)(this,e),(0,f.Z)(this,m,{writable:!0,value:void 0}),(0,f.Z)(this,Z,{writable:!0,value:void 0}),(0,v.Z)(this,m,t),(0,v.Z)(this,Z,null)}return(0,h.Z)(e,[{key:"file",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,Z)){e.next=8;break}return e.t0=v.Z,e.t1=this,e.t2=Z,e.next=6,p.loadAsync((0,d.Z)(this,m).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return e.next=10,(0,d.Z)(this,Z).file(t).async("uint8array");case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"metadata",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,Z)){e.next=8;break}return e.t0=v.Z,e.t1=this,e.t2=Z,e.next=6,p.loadAsync((0,d.Z)(this,m).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return t.endsWith(".json")||(t+=".json"),e.next=12,(0,d.Z)(this,Z).file(t).async("string");case 12:if(n=e.sent,!(r=JSON.parse(n)).$schema.startsWith("redirection/")){e.next=18;break}t=r.redirection.targets[0].location,e.next=19;break;case 18:return e.abrupt("return",r);case 19:e.next=8;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){(0,v.Z)(this,Z,null)}}]),e}();var y=new WeakMap,b=new WeakMap,k=new WeakSet,x=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,n);var o=null;"existingHandle"in l?(o=l.existingHandle,delete l.existingHandle):i instanceof w.z||(i=new w.z(i));var u=new g(i,o);return a=t.call(this,e,u),(0,s.Z)((0,r.Z)(a),k),(0,f.Z)((0,r.Z)(a),y,{writable:!0,value:void 0}),(0,f.Z)((0,r.Z)(a),b,{writable:!0,value:void 0}),(0,v.Z)((0,r.Z)(a),y,i),(0,v.Z)((0,r.Z)(a),b,e),a}return(0,h.Z)(n,[{key:"abbreviate",value:function(){return(0,l.Z)(this,k,E).call(this,(function(e){return{size:e.size(),name:e.name()}}))}},{key:"serialize",value:function(){return(0,l.Z)(this,k,E).call(this,(function(e){return e}))}}],[{key:"format",value:function(){return"ArtifactDB-zipped"}},{key:"unserialize",value:function(e,t){if(1!=e.length||"zip"!=e[0].type)throw new Error("expected exactly one file of type 'zip' for Zipped ArtifactDB unserialization");var r=t.datasetName;delete t.datasetName;var i=new n(r,e[0].file);return i.setOptions(i),i}}]),n}(_.GY);function E(e){var t=[{type:"zip",file:e((0,d.Z)(this,y))}],n=this.options();return n.datasetName=(0,d.Z)(this,b),{files:t,options:n}}var A=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,n);var a=null;"existingHandle"in i?(a=i.existingHandle,delete i.existingHandle):r instanceof w.z||(r=new w.z(r));var s=new g(r,a);return t.call(this,e,s)}return(0,h.Z)(n)}(_.Ne)},9791:function(e,t,n){n.d(t,{F:function(){return U},n:function(){return le}});var r=n(7762),i=n(4165),a=n(5861),s=n(1413),l=n(5671),o=n(3144),u=n(101),c=n(2346),h=n(3889),f=n(2793),d=n(8916),v=n(3324),_=n(5831),p=n(6474),w=n(6180),m=n(3121),Z=n(6016);function g(e,t){var n=[];if("X"in e.children&&n.push("X"),"layers"in e.children){var r=e.open("layers");if(!(r instanceof _.Fv))throw new Error("expected a 'layers' group in a H5AD file");for(var i=0,a=Object.keys(r.children);i<a.length;i++){var s=a[i];n.push("layers/"+s)}}if(0==n.length)throw new Error("failed to find any assay in the H5AD file");var l=_.N6(t,n[0]);return{names:n,rows:l.rows,columns:l.columns}}function y(e){for(var t={},n=function(){var n=(0,v.Z)(i[r],2),a=n[0],s=n[1];if("DataSet"==s){var l=e.open(a,{load:!0});if("Enum"===l.type){var o=l.values,u=new Array(o.length),c=l.levels;o.forEach((function(e,t){u[t]=c[e]})),t[a]=u}else"Other"!==l.type&&(t[a]=l.values)}else if("Group"==s){var h=e.open(a);if("categories"in h.children&&"codes"in h.children){var f=w.vp(h,"categories"),d=h.open("codes",{load:!0}).values;t[a]=p.Nd(f,d)}}},r=0,i=Object.entries(e.children);r<i.length;r++)n();if("__categories"in e.children&&"Group"==e.children.__categories)for(var a=e.open("__categories"),s=0,l=Object.entries(a.children);s<l.length;s++){var o=(0,v.Z)(l[s],2),u=o[0];o[1];if(u in t){var c=w.vp(a,u);t[u]=p.Nd(c,t[u])}}if(0==Object.keys(t).length)return null;var h=null;return"_index"in t&&(h=t._index,delete t._index),new p.NE(t,{rowNames:h})}function b(e){return"var"in e.children&&"Group"==e.children.var?y(e.open("var")):null}function k(e){return"obs"in e.children&&"Group"==e.children.obs?y(e.open("obs")):null}var x=new WeakMap,E=new WeakMap,A=new WeakMap,S=new WeakMap,z=new WeakMap,R=new WeakMap,C=new WeakMap,N=new WeakMap,D=new WeakSet,M=new WeakSet,W=new WeakSet,O=new WeakSet,I=new WeakSet,F=new WeakSet,T=new WeakSet,U=function(){function e(t){(0,l.Z)(this,e),(0,u.Z)(this,T),(0,u.Z)(this,F),(0,u.Z)(this,I),(0,u.Z)(this,O),(0,u.Z)(this,W),(0,u.Z)(this,M),(0,u.Z)(this,D),(0,c.Z)(this,x,{writable:!0,value:void 0}),(0,c.Z)(this,E,{writable:!0,value:void 0}),(0,c.Z)(this,A,{writable:!0,value:void 0}),(0,c.Z)(this,S,{writable:!0,value:void 0}),(0,c.Z)(this,z,{writable:!0,value:void 0}),(0,c.Z)(this,R,{writable:!0,value:void 0}),(0,c.Z)(this,C,{writable:!0,value:void 0}),(0,c.Z)(this,N,{writable:!0,value:void 0}),t instanceof Z.z?(0,f.Z)(this,x,t):(0,f.Z)(this,x,new Z.z(t)),(0,f.Z)(this,N,e.defaults()),this.clear()}return(0,o.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,N))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,v.Z)(n[t],2),i=r[0],a=r[1];(0,d.Z)(this,N)[i]=a}}},{key:"clear",value:function(){"function"==typeof(0,d.Z)(this,A)&&(0,d.Z)(this,A).call(this),(0,f.Z)(this,A,null),(0,f.Z)(this,E,null),(0,f.Z)(this,S,null),(0,f.Z)(this,z,null),(0,f.Z)(this,R,null),(0,f.Z)(this,C,null)}},{key:"abbreviate",value:function(){return(0,h.Z)(this,D,j).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,O,P).call(this),(0,h.Z)(this,I,H).call(this),(0,h.Z)(this,W,L).call(this);var n={all_features:(0,d.Z)(this,z),cells:(0,d.Z)(this,R),all_assay_names:(0,d.Z)(this,C).names};return t||this.clear(),n}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,O,P).call(this);var n=m.h8((0,d.Z)(this,z),(0,d.Z)(this,N).featureTypeColumnName,(0,h.Z)(this,F,Y).call(this),"RNA",(0,h.Z)(this,T,G).call(this));return t||this.clear(),n}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,O,P).call(this),(0,h.Z)(this,I,H).call(this),(0,h.Z)(this,W,L).call(this);var n=(0,d.Z)(this,N).countMatrixName;null==n&&(n=(0,d.Z)(this,C).names[0]);var r=_.EF((0,d.Z)(this,E),n),i=m.Bs(r,(0,d.Z)(this,z),(0,d.Z)(this,N).featureTypeColumnName,(0,h.Z)(this,F,Y).call(this),"RNA");return i.cells=(0,d.Z)(this,R),i.primary_ids=m.P2(i.features,(0,h.Z)(this,T,G).call(this)),t||this.clear(),i}},{key:"serialize",value:function(){return(0,h.Z)(this,D,j).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{countMatrixName:null,featureTypeColumnName:null,featureTypeRnaName:"Gene Expression",featureTypeAdtName:"Antibody Capture",featureTypeCrisprName:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"H5AD"}},{key:"unserialize",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n,r){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"h5"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'h5' for H5AD unserialization");case 2:return(a=new e(n[0].file)).setOptions(r),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function j(e){return{files:[{type:"h5",file:e((0,d.Z)(this,x))}],options:this.options()}}function B(){if(null==(0,d.Z)(this,E)){var e=_.$H((0,d.Z)(this,x).content());(0,f.Z)(this,E,e.path),(0,f.Z)(this,A,e.flush),(0,f.Z)(this,S,new _.pT((0,d.Z)(this,E)))}}function L(){null===(0,d.Z)(this,C)&&((0,h.Z)(this,M,B).call(this),(0,f.Z)(this,C,g((0,d.Z)(this,S),(0,d.Z)(this,E))))}function P(){if(null===(0,d.Z)(this,z)){(0,h.Z)(this,M,B).call(this);var e=b((0,d.Z)(this,S));null==e&&((0,h.Z)(this,W,L).call(this),e=new p.NE({},{numberOfRows:(0,d.Z)(this,C).rows})),(0,f.Z)(this,z,e)}}function H(){if(null===(0,d.Z)(this,R)){(0,h.Z)(this,M,B).call(this);var e=k((0,d.Z)(this,S));null===e&&((0,h.Z)(this,W,L).call(this),e=new p.NE({},{numberOfRows:(0,d.Z)(this,C).columns})),(0,f.Z)(this,R,e)}}function Y(){return{RNA:(0,d.Z)(this,N).featureTypeRnaName,ADT:(0,d.Z)(this,N).featureTypeAdtName,CRISPR:(0,d.Z)(this,N).featureTypeCrisprName}}function G(){return{RNA:(0,d.Z)(this,N).primaryRnaFeatureIdColumn,ADT:(0,d.Z)(this,N).primaryAdtFeatureIdColumn,CRISPR:(0,d.Z)(this,N).primaryCrisprFeatureIdColumn}}var V=new WeakMap,X=new WeakMap,K=new WeakMap,$=new WeakMap,q=new WeakMap,Q=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakSet,re=new WeakSet,ie=new WeakSet,ae=new WeakSet,se=new WeakSet,le=function(){function e(t){(0,l.Z)(this,e),(0,u.Z)(this,se),(0,u.Z)(this,ae),(0,u.Z)(this,ie),(0,u.Z)(this,re),(0,u.Z)(this,ne),(0,c.Z)(this,V,{writable:!0,value:void 0}),(0,c.Z)(this,X,{writable:!0,value:void 0}),(0,c.Z)(this,K,{writable:!0,value:void 0}),(0,c.Z)(this,$,{writable:!0,value:void 0}),(0,c.Z)(this,q,{writable:!0,value:void 0}),(0,c.Z)(this,Q,{writable:!0,value:void 0}),(0,c.Z)(this,J,{writable:!0,value:void 0}),(0,c.Z)(this,ee,{writable:!0,value:void 0}),(0,c.Z)(this,te,{writable:!0,value:void 0}),t instanceof Z.z?(0,f.Z)(this,V,t):(0,f.Z)(this,V,new Z.z(t)),(0,f.Z)(this,te,e.defaults()),this.clear()}return(0,o.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,te))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,v.Z)(n[t],2),i=r[0],a=r[1];(0,d.Z)(this,te)[i]="reducedDimensionNames"==i?p.bl(a):a}}},{key:"clear",value:function(){"function"==typeof(0,d.Z)(this,K)&&(0,d.Z)(this,K).call(this),(0,f.Z)(this,K,null),(0,f.Z)(this,X,null),(0,f.Z)(this,$,null),(0,f.Z)(this,q,null),(0,f.Z)(this,Q,null),(0,f.Z)(this,J,null),(0,f.Z)(this,ee,null)}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ie,ce).call(this),(0,h.Z)(this,ae,he).call(this),(0,h.Z)(this,re,ue).call(this),(0,h.Z)(this,se,fe).call(this);var n={all_features:(0,d.Z)(this,q),cells:(0,d.Z)(this,Q),all_assay_names:(0,d.Z)(this,J).names,reduced_dimension_names:(0,d.Z)(this,ee).names};return t||this.clear(),n}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ie,ce).call(this),(0,h.Z)(this,ae,he).call(this),(0,h.Z)(this,re,ue).call(this),(0,h.Z)(this,se,fe).call(this);var n=(0,d.Z)(this,te).primaryMatrixName;null==n&&(n=(0,d.Z)(this,J).names[0]);var i=_.EF((0,d.Z)(this,X),n,{forceInteger:!(0,d.Z)(this,te).isPrimaryNormalized}),a=m.Bs(i,(0,d.Z)(this,q),(0,d.Z)(this,te).featureTypeColumnName,null,"");if(a.cells=(0,d.Z)(this,Q),delete a.row_ids,!(0,d.Z)(this,te).isPrimaryNormalized){var s,l=(0,r.Z)(a.matrix.available());try{for(l.s();!(s=l.n()).done;){var o=s.value,u=a.matrix.get(o);a.matrix.add(o,_.gk(u,{allowZeros:!0}))}}catch(S){l.e(S)}finally{l.f()}}var c=(0,d.Z)(this,te).reducedDimensionNames;null==c&&(c=(0,d.Z)(this,ee).names);var f={};if(c.length){var v,p=(0,d.Z)(this,$).open("obsm"),w=(0,r.Z)(c);try{for(w.s();!(v=w.n()).done;){for(var Z=v.value,g=p.open(Z,{load:!0}),y=g.shape,b=y[1],k=y[0],x=[],E=0;E<b;E++)x.push(new Float64Array(k));for(var A=0;A<k;A++)for(E=0;E<b;E++)x[E][A]=g.values[A*b+E];f[Z]=x}}catch(S){w.e(S)}finally{w.f()}}return a.reduced_dimensions=f,t||this.clear(),a}}],[{key:"defaults",value:function(){return{primaryMatrixName:null,isPrimaryNormalized:!0,featureTypeColumnName:null,reducedDimensionNames:null}}}]),e}();function oe(){if(null==(0,d.Z)(this,X)){var e=_.$H((0,d.Z)(this,V).content());(0,f.Z)(this,X,e.path),(0,f.Z)(this,K,e.flush),(0,f.Z)(this,$,new _.pT((0,d.Z)(this,X)))}}function ue(){null===(0,d.Z)(this,J)&&((0,h.Z)(this,ne,oe).call(this),(0,f.Z)(this,J,g((0,d.Z)(this,$),(0,d.Z)(this,X))))}function ce(){if(null===(0,d.Z)(this,q)){(0,h.Z)(this,ne,oe).call(this);var e=b((0,d.Z)(this,$));null==e&&((0,h.Z)(this,re,ue).call(this),e=new p.NE({},{numberOfRows:(0,d.Z)(this,J).rows})),(0,f.Z)(this,q,e)}}function he(){if(null===(0,d.Z)(this,Q)){(0,h.Z)(this,ne,oe).call(this);var e=k((0,d.Z)(this,$));null===e&&((0,h.Z)(this,re,ue).call(this),e=new p.NE({},{numberOfRows:(0,d.Z)(this,J).columns})),(0,f.Z)(this,Q,e)}}function fe(){if(null===(0,d.Z)(this,ee)){(0,h.Z)(this,ne,oe).call(this);var e=[];if("obsm"in(0,d.Z)(this,$).children&&"Group"==(0,d.Z)(this,$).children.obsm)for(var t=(0,d.Z)(this,$).open("obsm"),n=0,r=Object.entries(t.children);n<r.length;n++){var i=(0,v.Z)(r[n],2),a=i[0];"DataSet"==i[1]&&e.push(a)}(0,f.Z)(this,ee,{names:e})}}},4833:function(e,t,n){n.d(t,{CM:function(){return s.C},EQ:function(){return l.EQ},Qr:function(){return o.Qr},bw:function(){return o.bw},cO:function(){return c},nN:function(){return i.n},zD:function(){return u.z}});var r=n(2152),i=n(9791),a=n(7355),s=n(9380),l=(n(5173),n(2121)),o=n(6180),u=n(6016),c={"10X":r.B,MatrixMarket:a.e,H5AD:i.F,SummarizedExperiment:s.H,"ArtifactDB-zipped":l.cj}},9380:function(e,t,n){n.d(t,{C:function(){return oe},H:function(){return P}});var r=n(7762),i=n(4165),a=n(5861),s=n(1413),l=n(5671),o=n(3144),u=n(101),c=n(2346),h=n(3889),f=n(2793),d=n(8916),v=n(3324),_=n(5831),p=n(6474),w=n(6016),m=(n(6180),n(3121));function Z(e){var t,n,r=e.findAttribute("names");if(r<0)return null;try{n=(t=e.attribute(r)).values()}catch(i){throw new Error("failed to load listData names; "+i.message)}finally{_.gd(t)}if(n.length!=e.length())throw new Error("expected names to have same length as listData");return n}var g={DFrame:"S4Vectors"};function y(e){k(e,g,"DFrame");var t,n,r={},i=[];try{if(!((t=e.attribute("listData"))instanceof _.SV))throw new Error("listData slot should be a generic list");if(null==(i=Z(t)))throw new Error("expected the listData list to be named");for(var a=function(){var e;try{if((e=t.load(s))instanceof _.qu&&!(e instanceof _.SV)){var n,a,l=e.values();if(e.findAttribute("class")>=0)try{if((n=e.attribute("class")).values().indexOf("factor")>=0&&e.findAttribute("levels")>=0){a=e.attribute("levels");var o=l.slice();o.forEach((function(e,t){o[t]=e-1})),l=p.Nd(a.values(),o)}}finally{_.gd(n),_.gd(a)}r[i[s]]=l}else e instanceof _.BA&&b(e,g)&&(r[i[s]]=y(e))}finally{_.gd(e)}},s=0;s<t.length();s++)a()}catch(h){throw new Error("failed to retrieve data from DataFrame's listData; "+h.message)}finally{_.gd(t)}var l=null;try{(n=e.attribute("rownames"))instanceof _.II&&(l=n.values())}catch(h){throw new Error("failed to retrieve row names from DataFrame; "+h.message)}finally{_.gd(n)}var o,u=null;if(0==i.length&&null==l)try{if(!((o=e.attribute("nrows"))instanceof _.D6))throw new Error("expected an integer vector as the 'nrows' slot");var c=o.values();if(1!=c.length)throw new Error("expected an integer vector of length 1 as the 'nrows' slot");u=c[0]}catch(h){throw new Error("failed to retrieve nrows from DataFrame; "+h.message)}finally{_.gd(o)}return new p.NE(r,{columnOrder:i,rowNames:l,numberOfRows:u})}function b(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=(0,v.Z)(r[n],2),a=i[0],s=i[1];if(e.className()==a&&e.packageName()==s)return!0}return!1}function k(e,t,n){if(!(e instanceof _.BA))throw new Error("expected an S4 object as the data frame");if(!b(e,t))throw new Error("object is not a "+n+" or one of its recognized subclasses")}function x(e){var t,n=e.findAttribute("NAMES");if(n<0)return null;var r=null;try{(t=e.attribute(n))instanceof _.II&&(r=t.values())}catch(i){throw new Error("failed to extract NAMES; "+i.message)}finally{_.gd(t)}return r}function E(e){var t,n=null,r=e.findAttribute("rowRanges");if(r<0){var i;try{t=y(i=e.attribute("elementMetadata"))}catch(c){throw new Error("failed to extract features from the rowData; "+c.message)}finally{_.gd(i)}n=x(e)}else{var a;try{var s=(a=e.attribute(r)).attribute("elementMetadata");try{t=y(s)}catch(c){throw new Error("failed to extract mcols from the rowRanges; "+c.message)}finally{_.gd(s)}var l,o,u=a.findAttribute("partitioning");if(u<0)try{n=x(l=a.attribute("ranges"))}catch(c){throw new Error("failed to extract names from the rowRanges; "+c.message)}finally{_.gd(l)}else try{n=x(o=a.attribute(u))}catch(c){throw new Error("failed to extract names from the rowRanges; "+c.message)}finally{_.gd(o)}}catch(c){throw new Error("failed to extract features from the rowRanges; "+c.message)}finally{_.gd(a)}}return null!==n&&t.$setRowNames(n),t}function A(e){var t,n,r,i;try{null==(t=Z(i=(r=(n=e.attribute("assays")).attribute("data")).attribute("listData")))&&(t=new Array(i.length())).fill(null)}catch(a){throw new Error("failed to extract assay data; "+a.message)}finally{_.gd(n),_.gd(i),_.gd(r)}return t}function S(e,t,n){var r,i,a,s;try{s=(a=(i=e.attribute("assays")).attribute("data")).attribute("listData");var l,o=null;if("string"==typeof t){var u=Z(s);if(null!==t&&null!=u)for(var c=0;c<u.length;c++)if(u[c]==t){o=c;break}if(null==o)throw new Error("no assay named '"+t+"'")}else{if(t>=s.length())throw new Error("assay index "+String(t)+" out of range");o=t}try{l=s.load(o),r=_.Bp(l,{forceInteger:n})}catch(h){throw new Error("failed to initialize sparse matrix from assay; "+h.message)}finally{_.gd(l)}}catch(h){throw new Error("failed to extract assay data; "+h.message)}finally{_.gd(i),_.gd(s),_.gd(a)}return r}function z(e){var t,n,r,i,a,s,l={handles:{},order:[]},o=e.findAttribute("int_colData");if(o<0)return l;try{var u=(t=e.attribute(o)).findAttribute("listData");if(u<0)return l;var c=(n=t.attribute(u)).findAttribute("names");if(c<0)return l;var h=(r=n.attribute(c)).values().indexOf("altExps");if(h<0)return l;var f=(i=n.load(h)).findAttribute("listData");if(f<0)return l;var d=(a=i.attribute(f)).findAttribute("names");if(d<0)return l;for(var v=(s=a.attribute(d)).values(),p=0;p<v.length;p++){var w=void 0;try{var m=(w=a.load(p)).attribute("se");l.handles[v[p]]=m,l.order.push(v[p]),R(m)}catch(b){throw new Error("failed to load alternative Experiment '"+v[p]+"'; "+b.message)}finally{_.gd(w)}}}catch(b){for(var Z=0,g=Object.values(l.handles);Z<g.length;Z++){var y=g[Z];_.gd(y)}throw b}finally{_.gd(s),_.gd(a),_.gd(r),_.gd(n),_.gd(t)}return l}function R(e){k(e,{SummarizedExperiment:"SummarizedExperiment",RangedSummarizedExperiment:"SummarizedExperiment",SingleCellExperiment:"SingleCellExperiment",SpatialExperiment:"SpatialExperiment"},"SummarizedExperiment")}var C=new WeakMap,N=new WeakMap,D=new WeakMap,M=new WeakMap,W=new WeakMap,O=new WeakMap,I=new WeakMap,F=new WeakMap,T=new WeakSet,U=new WeakSet,j=new WeakSet,B=new WeakSet,L=new WeakSet,P=function(){function e(t){(0,l.Z)(this,e),(0,u.Z)(this,L),(0,u.Z)(this,B),(0,u.Z)(this,j),(0,u.Z)(this,U),(0,u.Z)(this,T),(0,c.Z)(this,C,{writable:!0,value:void 0}),(0,c.Z)(this,N,{writable:!0,value:void 0}),(0,c.Z)(this,D,{writable:!0,value:void 0}),(0,c.Z)(this,M,{writable:!0,value:void 0}),(0,c.Z)(this,W,{writable:!0,value:void 0}),(0,c.Z)(this,O,{writable:!0,value:void 0}),(0,c.Z)(this,I,{writable:!0,value:void 0}),(0,c.Z)(this,F,{writable:!0,value:void 0}),t instanceof w.z?(0,f.Z)(this,C,t):(0,f.Z)(this,C,new w.z(t)),(0,f.Z)(this,F,e.defaults()),this.clear()}return(0,o.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,F))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,v.Z)(n[t],2),i=r[0],a=r[1];(0,d.Z)(this,F)[i]=a}}},{key:"clear",value:function(){if(_.gd((0,d.Z)(this,D)),"undefined"!=typeof(0,d.Z)(this,M)&&null!==(0,d.Z)(this,M))for(var e=0,t=Object.values((0,d.Z)(this,M));e<t.length;e++){var n=t[e];_.gd(n)}_.gd((0,d.Z)(this,N)),(0,f.Z)(this,D,null),(0,f.Z)(this,M,null),(0,f.Z)(this,N,null),(0,f.Z)(this,O,null),(0,f.Z)(this,I,null)}},{key:"abbreviate",value:function(){return(0,h.Z)(this,T,H).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,U,Y).call(this),(0,h.Z)(this,j,G).call(this),(0,h.Z)(this,B,V).call(this);var n={};n[""]=A((0,d.Z)(this,D));for(var r=0,i=Object.entries((0,d.Z)(this,M));r<i.length;r++){var a=(0,v.Z)(i[r],2),s=a[0],l=a[1];try{n[s]=A(l)}catch(u){console.warn("failed to extract features for alternative Experiment '"+s+"'; "+u.message)}}var o={modality_features:(0,d.Z)(this,O),cells:(0,d.Z)(this,I),modality_assay_names:n};return t||this.clear(),o}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,j,G).call(this);var n={RNA:(0,d.Z)(this,F).rnaExperiment,ADT:(0,d.Z)(this,F).adtExperiment,CRISPR:(0,d.Z)(this,F).crisprExperiment},r=m.it((0,d.Z)(this,O),n,(0,h.Z)(this,L,X).call(this));return t||this.clear(),r}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,U,Y).call(this),(0,h.Z)(this,j,G).call(this),(0,h.Z)(this,B,V).call(this);var n={matrix:new _.VU,row_ids:{},features:{},cells:(0,d.Z)(this,I)},r={RNA:{exp:(0,d.Z)(this,F).rnaExperiment,assay:(0,d.Z)(this,F).rnaCountAssay},ADT:{exp:(0,d.Z)(this,F).adtExperiment,assay:(0,d.Z)(this,F).adtCountAssay},CRISPR:{exp:(0,d.Z)(this,F).crisprExperiment,assay:(0,d.Z)(this,F).crisprCountAssay}};try{for(var i=0,a=Object.entries(r);i<a.length;i++){var s=(0,v.Z)(a[i],2),l=s[0],o=s[1];if(null!==o.exp){var u=void 0,c=o.exp;if("string"==typeof o.exp)if(""===o.exp)u=(0,d.Z)(this,D);else{if(!(o.exp in(0,d.Z)(this,M)))continue;u=(0,d.Z)(this,M)[o.exp]}else{if(o.exp>=(0,d.Z)(this,W).length)continue;c=(0,d.Z)(this,W)[o.exp],u=(0,d.Z)(this,M)[c]}var f=S(u,o.assay,!0);n.matrix.add(l,f.matrix);var w=f.row_ids;n.row_ids[l]=w,n.features[l]=p.Nd((0,d.Z)(this,O)[c],w)}}n.primary_ids=m.P2(n.features,(0,h.Z)(this,L,X).call(this))}catch(Z){throw _.gd(n.matrix),Z}return t||this.clear(),n}},{key:"serialize",value:function(){return(0,h.Z)(this,T,H).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{rnaCountAssay:0,adtCountAssay:0,crisprCountAssay:0,rnaExperiment:"",adtExperiment:"Antibody Capture",crisprExperiment:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"SummarizedExperiment"}},{key:"unserialize",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n,r){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"rds"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'rds' for SummarizedExperiment unserialization");case 2:return(a=new e(n[0].file)).setOptions(a),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function H(e){return{files:[{type:"rds",file:e((0,d.Z)(this,C))}],options:this.options()}}function Y(){if(null===(0,d.Z)(this,N)){(0,f.Z)(this,N,_.p$((0,d.Z)(this,C).content())),(0,f.Z)(this,D,(0,d.Z)(this,N).value());try{R((0,d.Z)(this,D));var e=z((0,d.Z)(this,D)),t=e.handles,n=e.order;(0,f.Z)(this,M,t),(0,f.Z)(this,W,n)}catch(r){throw(0,d.Z)(this,D).free(),(0,d.Z)(this,N).free(),r}}}function G(){if(null===(0,d.Z)(this,O)){(0,h.Z)(this,U,Y).call(this),(0,f.Z)(this,O,{}),(0,d.Z)(this,O)[""]=E((0,d.Z)(this,D));for(var e=0,t=Object.entries((0,d.Z)(this,M));e<t.length;e++){var n=(0,v.Z)(t[e],2),r=n[0],i=n[1];try{(0,d.Z)(this,O)[r]=E(i)}catch(a){console.warn("failed to extract features for alternative Experiment '"+r+"'; "+a.message)}}}}function V(){if(null===(0,d.Z)(this,I)){(0,h.Z)(this,U,Y).call(this);var e=(0,d.Z)(this,D).attribute("colData");try{(0,f.Z)(this,I,y(e))}catch(t){throw new Error("failed to extract colData from a SummarizedExperiment; "+t.message)}finally{_.gd(e)}}}function X(){return{RNA:(0,d.Z)(this,F).primaryRnaFeatureIdColumn,ADT:(0,d.Z)(this,F).primaryAdtFeatureIdColumn,CRISPR:(0,d.Z)(this,F).primaryCrisprFeatureIdColumn}}var K=new WeakMap,$=new WeakMap,q=new WeakMap,Q=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap,ae=new WeakSet,se=new WeakSet,le=new WeakSet,oe=function(){function e(t){(0,l.Z)(this,e),(0,u.Z)(this,le),(0,u.Z)(this,se),(0,u.Z)(this,ae),(0,c.Z)(this,K,{writable:!0,value:void 0}),(0,c.Z)(this,$,{writable:!0,value:void 0}),(0,c.Z)(this,q,{writable:!0,value:void 0}),(0,c.Z)(this,Q,{writable:!0,value:void 0}),(0,c.Z)(this,J,{writable:!0,value:void 0}),(0,c.Z)(this,ee,{writable:!0,value:void 0}),(0,c.Z)(this,te,{writable:!0,value:void 0}),(0,c.Z)(this,ne,{writable:!0,value:void 0}),(0,c.Z)(this,re,{writable:!0,value:void 0}),(0,c.Z)(this,ie,{writable:!0,value:void 0}),t instanceof w.z?(0,f.Z)(this,K,t):(0,f.Z)(this,K,new w.z(t)),(0,f.Z)(this,ie,e.defaults()),this.clear()}return(0,o.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,ie))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,v.Z)(n[t],2),i=r[0],a=r[1];(0,d.Z)(this,ie)[i]=p.bl(a)}}},{key:"clear",value:function(){if(_.gd((0,d.Z)(this,q)),"undefined"!=typeof(0,d.Z)(this,Q)&&null!==(0,d.Z)(this,Q))for(var e=0,t=Object.values((0,d.Z)(this,Q));e<t.length;e++){var n=t[e];_.gd(n)}if("undefined"!=typeof(0,d.Z)(this,ne)&&null!==(0,d.Z)(this,ne))for(var r=0,i=Object.values((0,d.Z)(this,ne));r<i.length;r++){var a=i[r];_.gd(a.handle)}_.gd((0,d.Z)(this,$)),(0,f.Z)(this,q,null),(0,f.Z)(this,Q,null),(0,f.Z)(this,$,null),(0,f.Z)(this,ee,null),(0,f.Z)(this,te,null)}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ae,ue).call(this),(0,h.Z)(this,se,ce).call(this),(0,h.Z)(this,le,he).call(this);var n={};n[""]=A((0,d.Z)(this,q));for(var r=0,i=Object.entries((0,d.Z)(this,Q));r<i.length;r++){var a=(0,v.Z)(i[r],2),s=a[0],l=a[1];try{n[s]=A(l)}catch(u){console.warn("failed to extract features for alternative Experiment '"+s+"'; "+u.message)}}var o={modality_features:(0,d.Z)(this,ee),cells:(0,d.Z)(this,te),modality_assay_names:n,reduced_dimension_names:(0,d.Z)(this,re)};return t||this.clear(),o}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ae,ue).call(this),(0,h.Z)(this,se,ce).call(this),(0,h.Z)(this,le,he).call(this);var n={matrix:new _.VU,features:{},cells:(0,d.Z)(this,te),reduced_dimensions:{}},i=(0,d.Z)(this,ie).reducedDimensionNames;null==i&&(i=(0,d.Z)(this,re));var a,s=(0,r.Z)(i);try{for(s.s();!(a=s.n()).done;){for(var l=a.value,o=(0,d.Z)(this,ne)[l],u=[],c=o.dimensions,f=o.handle.values(),w=0;w<c[1];w++)u.push(f.slice(w*c[0],(w+1)*c[0]));n.reduced_dimensions[l]=u}}catch(A){s.e(A)}finally{s.f()}try{for(var m=0,Z=Object.entries((0,d.Z)(this,ee));m<Z.length;m++){var g=(0,v.Z)(Z[m],2),y=g[0],b=(g[1],(0,d.Z)(this,ie).primaryAssay);if("object"==typeof b){if(!(y in b))continue;b=b[y]}var k=(0,d.Z)(this,ie).isPrimaryNormalized;"object"==typeof k&&(k=!(y in k)||k[y]);var x=S(""===y?(0,d.Z)(this,q):(0,d.Z)(this,Q)[y],b,!k);if(n.matrix.add(y,x.matrix),k)n.features[y]=(0,d.Z)(this,ee)[y];else{var E=_.gk(x.matrix,{allowZeros:!0});n.matrix.add(y,E),n.features[y]=p.Nd((0,d.Z)(this,ee)[y],x.row_ids)}}}catch(z){throw _.gd(n.matrix),z}return t||this.clear(),n}}],[{key:"defaults",value:function(){return{primaryAssay:0,isPrimaryNormalized:!0,reducedDimensionNames:null}}}]),e}();function ue(){if(null===(0,d.Z)(this,$)){(0,f.Z)(this,$,_.p$((0,d.Z)(this,K).content())),(0,f.Z)(this,q,(0,d.Z)(this,$).value());try{R((0,d.Z)(this,q));var e=z((0,d.Z)(this,q)),t=e.handles,n=e.order;(0,f.Z)(this,Q,t),(0,f.Z)(this,J,n);var r=function(e){var t,n,r,i,a,s,l={handles:{},order:[]},o=e.findAttribute("int_colData");if(o<0)return l;try{var u=(t=e.attribute(o)).findAttribute("listData");if(u<0)return l;var c=(n=t.attribute(u)).findAttribute("names");if(c<0)return l;var h=(r=n.attribute(c)).values().indexOf("reducedDims");if(h<0)return l;var f=(i=n.load(h)).findAttribute("listData");if(f<0)return l;var d=(a=i.attribute(f)).findAttribute("names");if(d<0)return l;for(var v=(s=a.attribute(d)).values(),p=0;p<v.length;p++){var w=void 0;try{w=a.load(p);var m=!1;if("double"==w.type()&&w.findAttribute("dim")>=0){var Z=w.attribute("dim");2==Z.length()&&(l.handles[v[p]]={handle:w,dimensions:Z.values()},l.order.push(v[p]),m=!0)}m||_.gd(w)}catch(k){throw new Error("failed to load reduced dimension '"+v[p]+"'; "+k.message)}}}catch(k){for(var g=0,y=Object.values(l.handles);g<y.length;g++){var b=y[g];_.gd(b.handle)}throw k}finally{_.gd(s),_.gd(a),_.gd(r),_.gd(n),_.gd(t)}return l}((0,d.Z)(this,q)),i=r.handles,a=r.order;(0,f.Z)(this,ne,i),(0,f.Z)(this,re,a)}catch(s){throw(0,d.Z)(this,q).free(),(0,d.Z)(this,$).free(),s}}}function ce(){if(null===(0,d.Z)(this,ee)){(0,h.Z)(this,ae,ue).call(this),(0,f.Z)(this,ee,{}),(0,d.Z)(this,ee)[""]=E((0,d.Z)(this,q));for(var e=0,t=Object.entries((0,d.Z)(this,Q));e<t.length;e++){var n=(0,v.Z)(t[e],2),r=n[0],i=n[1];try{(0,d.Z)(this,ee)[r]=E(i)}catch(a){console.warn("failed to extract features for alternative Experiment '"+r+"'; "+a.message)}}}}function he(){if(null===(0,d.Z)(this,te)){(0,h.Z)(this,ae,ue).call(this);var e=(0,d.Z)(this,q).attribute("colData");try{(0,f.Z)(this,te,y(e))}catch(t){throw new Error("failed to extract colData from a SummarizedExperiment; "+t.message)}finally{_.gd(e)}}}},2453:function(e,t,n){n(1408),n(4833),n(7931)},4:function(e,t,n){n.d(t,{ES:function(){return Y},rV:function(){return Q}});var r=n(101),i=n(3889),a=n(4165),s=n(5671),l=n(3144),o=n(4942),u=n(2346),c=n(8916),h=n(2793),f=n(7762),d=n(1413),v=n(3324),_=n(5861),p=n(5831),w=n(6474),m=n(7891),Z=n(4833),g=n(6546),y=(n(7317),"https://github.com/kanaverse/singlepp-references/releases/download/2023-04-28"),b=m.we;function k(e){var t=b;return b=e,t}function x(e,t){return E.apply(this,arguments)}function E(){return(E=(0,_.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+"_"+n,e.next=3,b(y+"/"+r);case 3:return i=e.sent,e.abrupt("return",new Z.zD(i,{name:r}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A={};function S(e){if("prepared"in e){for(var t=0,n=Object.values(e.prepared);t<n.length;t++){n[t].built.raw.free()}delete e.prepared}}function z(e){return R.apply(this,arguments)}function R(){return(R=(0,_.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.bw(t.content(),{compression:"gz"});case 2:n=e.sent,r=[],i=(0,f.Z)(n);try{for(i.s();!(s=i.n()).done;)l=s.value,o=null,""!==l&&1==(o=l.split("\t")).length&&(o=o[0]),r.push(o)}catch(a){i.e(a)}finally{i.f()}return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return N.apply(this,arguments)}function N(){return(N=(0,_.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,l,o,u,c,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="genes_"+n.toLowerCase()+".csv.gz",!(t in A)){e.next=13;break}if(i=A[t],s=i.genes,n in s){e.next=12;break}return e.t0=z,e.next=8,x(t,r);case 8:return e.t1=e.sent,e.next=11,(0,e.t0)(e.t1);case 11:s[n]=e.sent;case 12:return e.abrupt("return",i);case 13:return l=["labels_fine.csv.gz","label_names_fine.csv.gz","markers_fine.gmt.gz","matrix.csv.gz",r],e.next=16,Promise.all(l.map((function(e){return x(t,e)})));case 16:return o=e.sent,e.prev=17,u=p.tY(o[3].buffer(),o[2].buffer(),o[0].buffer()),e.next=21,Z.bw(o[1].content(),{compression:"gz"});case 21:return h=e.sent,c={raw:u,labels:h,genes:{}},e.next=25,z(o[4]);case 25:c.genes[n]=e.sent,A[t]=c,e.next=33;break;case 29:throw e.prev=29,e.t2=e.catch(17),m.Yl(u),e.t2;case 33:return e.abrupt("return",c);case 34:case"end":return e.stop()}}),e,null,[[17,29]])})))).apply(this,arguments)}function D(){for(var e=0,t=Object.entries(A);e<t.length;e++){var n=(0,v.Z)(t[e],2),r=n[0];n[1].raw.free(),delete A[r]}}var M={9606:["BlueprintEncode","DatabaseImmuneCellExpression","HumanPrimaryCellAtlas","MonacoImmune","NovershternHematopoietic"],10090:["ImmGen","MouseRNAseq"]};function W(e,t,n){var r,i;try{var a=A[e],s=a.raw;if(!(n in a.genes))throw new Error("unknown gene type '"+n+"'");var l=a.genes[n];i={loaded:a,built:{features:l,raw:r=p.St(t,s,l)}}}catch(o){throw m.Yl(r),o}return i}function O(e,t,n,r,i,a,s,l,o){return I.apply(this,arguments)}function I(){return(I=(0,_.Z)((0,a.Z)().mark((function e(t,n,r,i,s,l,o,u,c){var h,d,v,_,w,Z,g,y,b,k,x,E,A,z,R,N,D,O,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===o.automatic&&!m.xi(n,o.references)&&(r||i===o.species&&s===o.gene_id_column&&l===o.gene_id_type)){e.next=39;break}h=i,d=s,v=l,r&&(_=Y.configureFeatureParameters(c()),h=_.species,d=_.gene_id_column,v=_.gene_id_type),w=new Set,Z=(0,f.Z)(h);try{for(Z.s();!(g=Z.n()).done;)(y=g.value)in M&&M[y].forEach((function(e){w.add(e)}))}catch(a){Z.e(a)}finally{Z.f()}if(b=u(),k=null==d?b.rowNames():b.column(d),t.gene_ids=k,x={},null===k){e.next=33;break}null==n&&(n=Array.from(w)),E=(0,f.Z)(n),e.prev=15,E.s();case 17:if((A=E.n()).done){e.next=25;break}if(z=A.value,!w.has(z)){e.next=23;break}return e.next=22,C(z,v);case 22:x[z]=W(z,k,v);case 23:e.next=17;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(15),E.e(e.t0);case 30:return e.prev=30,E.f(),e.finish(30);case 33:return S(t),t.prepared=x,(R=Object.keys(x)).length>1?(N=Object.values(x),D=N.map((function(e){return e.loaded.raw})),O=N.map((function(e){return e.built.features})),I=N.map((function(e){return e.built.raw})),m.Yl(t.integrated),t.integrated=p.Qj(k,D,O,I)):(m.Yl(t.integrated),delete t.integrated),t.used_refs=R,e.abrupt("return",!0);case 39:return e.abrupt("return",!1);case 40:case"end":return e.stop()}}),e,null,[[15,27,30,33]])})))).apply(this,arguments)}function F(e,t,n,r,i,a){a.references=w.bl(e),a.automatic=t,a.species=w.bl(n),a.gene_id_column=r,a.gene_id_type=i}function T(e){var t=(0,d.Z)({},e);return t.references=w.bl(t.references),t.species=w.bl(t.species),t}function U(e,t,n){for(var r=t.numberOfCells(),i=e.length,a=new Array(r),s=0;s<r;s++){for(var l={},o=t.scoresForCell(s),u=0;u<i;u++)l[e[u]]=o[u];a[s]={best:e[n[s]],all:l}}return a}function j(e,t){var n,r,i=e;if(e instanceof p.OV){var a=e.numberOfGroups();if(null===t.gene_ids)i=null;else{var s=t.gene_ids.length;n=p.RJ(a*s);for(var l=0;l<a;l++){var o=e.means(l,{copy:!1});if(o.length!==s)throw new Error("unexpected number of genes in marker results");n.array().set(o,l*s)}i=r=p.o1.createDenseMatrix(s,a,n,{columnMajor:!0,copy:!1})}}else if(null!==t.gene_ids&&e.numberOfRows()!==t.gene_ids.length)throw new Error("unexpected number of genes in the input matrix");for(var u=t.prepared,c={per_reference:{}},h={},d=0,_=Object.entries(u);d<_.length;d++){var w=(0,v.Z)(_[d],2),Z=w[0],g=w[1],y=p.pG(i,g.built.raw);h[Z]=y,c.per_reference[Z]=U(g.loaded.labels,y,y.predictedLabels({copy:!1}))}if("integrated"in t){var b,k=[],x=(0,f.Z)(t.used_refs);try{for(x.s();!(b=x.n()).done;){var E=b.value;k.push(h[E])}}catch(R){x.e(R)}finally{x.f()}var A=p.Os(i,k,t.integrated);c.integrated=U(t.used_refs,A,A.predictedReferences({copy:!1})),A.free()}for(var S=0,z=Object.values(h);S<z.length;S++){z[S].free()}return m.Yl(r),m.Yl(n),c}function B(e,t,n){if(null===t)return j(e,n);var r,i=[];try{var a=m.XZ([t]);i.push(a.arrays[0].ids);var s=e;if(null!==a.retain){var l=p.ZW(e,a.retain);i.push(l),s=l}var o=p.p4(s,a.arrays[0].ids,{average:!0});i.push(o);var u=p.o1.createDenseMatrix(s.numberOfRows(),o.numberOfGroups(),o.sums(null,{copy:"view"}),{columnMajor:!0,copy:!1});i.push(u),(r=j(u,n)).groups=a.arrays[0].levels}finally{i.forEach(m.Yl)}return r}var L=new WeakMap,P=new WeakMap,H=new WeakMap,Y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,s.Z)(this,e),(0,u.Z)(this,L,{writable:!0,value:void 0}),(0,u.Z)(this,P,{writable:!0,value:void 0}),(0,u.Z)(this,H,{writable:!0,value:void 0}),!(t instanceof g.tq))throw new Error("'inputs' should be a State object from './inputs.js'");(0,h.Z)(this,L,t),(0,h.Z)(this,P,null===n?{}:n),(0,h.Z)(this,H,null===r?{}:r),this.changed=!1}return(0,l.Z)(e,[{key:"free",value:function(){S((0,c.Z)(this,H))}},{key:"valid",value:function(){return(0,c.Z)(this,L).fetchCountMatrix().has("RNA")}},{key:"fetchParameters",value:function(){return T((0,c.Z)(this,P))}},{key:"fetchNumberOfSharedFeatures",value:function(){var e,t={},n=(0,f.Z)((0,c.Z)(this,H).used_refs);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=(0,c.Z)(this,H).prepared[r].built.raw.sharedFeatures()}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"compute",value:function(){var t=(0,_.Z)((0,a.Z)().mark((function t(n){var r,i,s,l,o,u,h=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("references"in n?(r=n.references,i=n.automatic,s=n.species,l=n.gene_id_column,o=n.gene_id_type):(r=null,i=!0,u=e.defaults(),s=u.species,l=u.gene_id_column,o=u.gene_id_type),this.changed=!1,!this.valid()){t.next=6;break}return t.next=5,O((0,c.Z)(this,H),r,i,s,l,o,(0,c.Z)(this,P),(function(){return(0,c.Z)(h,L).fetchFeatureAnnotations().RNA}),(function(){return(0,c.Z)(h,L).guessRnaFeatureTypes()}));case 5:this.changed=t.sent;case 6:F(r,i,s,l,o,(0,c.Z)(this,P));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"computeLabels",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).group;return B(e,void 0===t?null:t,(0,c.Z)(this,H))}}],[{key:"defaults",value:function(){return{references:null,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL"}}},{key:"configureFeatureParameters",value:function(e){var t=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in e){var r=e.row_names;r.confidence>n.confidence&&(n=r)}for(var i=0,a=Object.entries(e.columns);i<a.length;i++){var s=(0,v.Z)(a[i],2),l=s[0],o=s[1];o.confidence>n.confidence&&(n=o,t=l)}return{gene_id_column:t,species:[n.species],gene_id_type:n.type.toUpperCase()}}},{key:"flush",value:function(){D()}},{key:"setDownload",value:function(e){return k(e)}}]),e}();(0,o.Z)(Y,"availableReferences",M);var G=new WeakMap,V=new WeakMap,X=new WeakMap,K=new WeakMap,$=new WeakMap,q=new WeakSet,Q=function(){function e(t){(0,s.Z)(this,e),(0,r.Z)(this,q),(0,u.Z)(this,G,{writable:!0,value:void 0}),(0,u.Z)(this,V,{writable:!0,value:void 0}),(0,u.Z)(this,X,{writable:!0,value:void 0}),(0,u.Z)(this,K,{writable:!0,value:void 0}),(0,u.Z)(this,$,{writable:!0,value:void 0}),(0,h.Z)(this,G,{}),(0,h.Z)(this,$,e.defaults()),(0,h.Z)(this,X,t),(0,h.Z)(this,V,{}),(0,h.Z)(this,K,null)}return(0,l.Z)(e,[{key:"free",value:function(){S((0,c.Z)(this,V))}},{key:"fetchParameters",value:function(){return T((0,c.Z)(this,$))}},{key:"setParameters",value:function(){var e=(0,_.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.references,r=t.automatic,i=t.species,s=t.gene_id_column,l=t.gene_id_type,F(n,r,i,s,l,(0,c.Z)(this,$));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ready",value:function(){var e=(0,_.Z)((0,a.Z)().mark((function e(){var t,n,r,s,l,o,u=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.Z)(this,$),n=t.references,r=t.automatic,s=t.species,l=t.gene_id_column,o=t.gene_id_type,e.next=3,O((0,c.Z)(this,V),n,r,s,l,o,(0,c.Z)(this,G),(function(){return(0,c.Z)(u,X)}),(function(){return(0,i.Z)(u,q,J).call(u)}));case 3:(0,h.Z)(this,G,(0,c.Z)(this,$));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"computeLabels",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).group;return B(e,void 0===t?null:t,(0,c.Z)(this,V))}}],[{key:"defaults",value:function(){return{references:null,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL"}}},{key:"flush",value:function(){D()}},{key:"setDownload",value:function(e){return k(e)}}]),e}();function J(){return null==(0,c.Z)(this,K)&&(0,h.Z)(this,K,m.zS((0,c.Z)(this,X))),(0,c.Z)(this,K)}(0,o.Z)(Q,"availableReferences",M)},2603:function(e,t,n){n.d(t,{Cy:function(){return Z},kd:function(){return z},sF:function(){return F}});var r=n(2346),i=n(8916),a=n(2793),s=n(3324),l=n(7762),o=n(5671),u=n(3144),c=n(101),h=n(3889),f=n(5831),d=n(7891),v=n(818),_=n(2269),p=n(7317),w=n(8366),m=n(2615),Z="custom_selections",g=new WeakSet,y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.Z)(this,e),(0,c.Z)(this,g),this._selections=null==t?{}:t,this._cache=null==n?{results:{}}:n}return(0,u.Z)(e,[{key:"free",value:function(){d.Yl(this._cache.buffer),delete this._cache.buffer;for(var e=0,t=Object.keys(this._cache.results);e<t.length;e++){var n=t[e];(0,h.Z)(this,g,b).call(this,n)}this._cache.results={},v.eo(this._cache.versus),delete this._cache.versus}},{key:"addSelection",value:function(e,t,n,r,i,a,s,o){var u=r(n[0]).numberOfColumns();d.N2(t,u);var c=d.rS(u,"Int32Array",this._cache);c.fill(0);var v=c.array();t.forEach((function(e){v[e]=1}));var _,p={},w=(0,l.Z)(n);try{for(w.s();!(_=w.n()).done;){var m=_.value,Z=r(m);p[m]=f.y5(Z,c,{block:i,lfcThreshold:s,computeAuc:o})}}catch(y){w.e(y)}finally{w.f()}e in this._cache.results&&(0,h.Z)(this,g,b).call(this,e),this._cache.results[e]={raw:p},a&&(t=t.slice()),this._selections[e]=t}},{key:"removeSelection",value:function(e){(0,h.Z)(this,g,b).call(this,e),delete this._cache.results[e],delete this._selections[e]}},{key:"fetchResults",value:function(e){return this._cache.results[e].raw}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t,r=this._selections[e];return n&&(r=r.slice()),r}},{key:"fetchSelections",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,i=void 0===r?null:r,a={},l=0,o=Object.entries(this._selections);l<o.length;l++){var u=(0,s.Z)(o[l],2),c=u[0],h=u[1],f=h,d=n;null!==i&&("Array"==i?h instanceof Array||(f=Array.from(h),d=!1):"Int32Array"==i&&(h instanceof Int32Array||(f=new Int32Array(h),d=!1))),d&&(f=f.slice()),a[c]=f}return a}},{key:"computeVersus",value:function(e,t,n,r,i,a,s){"versus"in this._cache||(this._cache.versus={});var o=this._cache.versus,u=v.Bh(e,t,o),c=u.left_small?0:1,h=u.left_small?1:0;if(u.run){var d,_=new f.VU,p=(0,l.Z)(n);try{for(p.s();!(d=p.n()).done;){var w=d.value;_.add(w,r(w))}}catch(x){p.e(x)}finally{p.f()}var m=this._selections;if(!(e in m)||!(t in m))throw new Error("invalid selection ID requested in versus mode");var Z=m[e],g=m[t];if(0==Z.length||0==g.length)throw new Error("non-zero entries should be present for both requested selections in versus mode");var y=[];Z.forEach((function(e){y.push({index:e,cluster:c})})),g.forEach((function(e){y.push({index:e,cluster:h})})),y.sort((function(e,t){return e.index-t.index}));var b=y.map((function(e){return e.index})),k=y.map((function(e){return e.cluster}));v.c9(_,k,i,b,u.cached,a,s)}return{results:u.cached,left:c,right:h}}}]),e}();function b(e){for(var t=0,n=Object.entries(this._cache.results[e].raw);t<n.length;t++){var r=(0,s.Z)(n[t],2);r[0];r[1].free()}}var k=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,S=new WeakSet,z=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,o.Z)(this,e),(0,c.Z)(this,S),(0,r.Z)(this,k,{writable:!0,value:void 0}),(0,r.Z)(this,x,{writable:!0,value:void 0}),(0,r.Z)(this,E,{writable:!0,value:void 0}),(0,r.Z)(this,A,{writable:!0,value:void 0}),!(t instanceof _.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,a.Z)(this,k,t),!(n.RNA instanceof p.ue))throw new Error("'norm_states.RNA' should be an RnaNormalizationState object");if(!(n.ADT instanceof w.m5))throw new Error("'norm_states.ADT' should be an AdtNormalizationState object");if(!(n.CRISPR instanceof m.$M))throw new Error("'norm_states.CRISPR' should be an CrisprNormalizationState object");(0,a.Z)(this,x,n);var l=null;null!==i&&"selections"in i&&(l=i.selections),(0,a.Z)(this,E,new y(l,s)),(0,a.Z)(this,A,{}),this.changed=!1}return(0,u.Z)(e,[{key:"free",value:function(){(0,i.Z)(this,E).free()}},{key:"fetchParameters",value:function(){return{lfc_threshold:(0,i.Z)(this,A).lfc_threshold,compute_auc:(0,i.Z)(this,A).compute_auc}}},{key:"addSelection",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).copy,r=void 0===n||n;(0,h.Z)(this,S,R).call(this,e,t,r,(0,i.Z)(this,A).lfc_threshold,(0,i.Z)(this,A).compute_auc)}},{key:"removeSelection",value:function(e){(0,i.Z)(this,E).removeSelection(e)}},{key:"fetchResults",value:function(e){return(0,i.Z)(this,E).fetchResults(e)}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t;return(0,i.Z)(this,E).fetchSelectionIndices(e,{copy:n})}},{key:"fetchSelections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,a=void 0===r?null:r;return(0,i.Z)(this,E).fetchSelections({copy:n,force:a})}},{key:"compute",value:function(e){var t=e.lfc_threshold,n=e.compute_auc;if(this.changed=!1,(0,i.Z)(this,k).changed&&((0,i.Z)(this,E).free(),(0,a.Z)(this,E,new y),this.changed=!0),t!==(0,i.Z)(this,A).lfc_threshold||n!=(0,i.Z)(this,A).compute_auc){for(var r=0,l=Object.entries((0,i.Z)(this,E)._selections);r<l.length;r++){var o=(0,s.Z)(l[r],2),u=o[0],c=o[1];(0,h.Z)(this,S,R).call(this,u,c,!1,t,n)}(0,i.Z)(this,A).lfc_threshold=t,(0,i.Z)(this,A).compute_auc=n,this.changed=!0}}},{key:"computeVersus",value:function(e,t){var n=this,r=d.Mc((0,i.Z)(this,x));return(0,i.Z)(this,E).computeVersus(e,t,r,(function(e){return(0,i.Z)(n,x)[e].fetchNormalizedMatrix()}),(0,i.Z)(this,k).fetchFilteredBlock(),(0,i.Z)(this,A).lfc_threshold,(0,i.Z)(this,A).compute_auc)}}],[{key:"defaults",value:function(){return{lfc_threshold:0,compute_auc:!0}}}]),e}();function R(e,t,n,r,a){var s=this,l=d.Mc((0,i.Z)(this,x));(0,i.Z)(this,E).addSelection(e,t,l,(function(e){return(0,i.Z)(s,x)[e].fetchNormalizedMatrix()}),(0,i.Z)(this,k).fetchFilteredBlock(),n,r,a)}var C=new WeakMap,N=new WeakMap,D=new WeakMap,M=new WeakMap,W=new WeakMap,O=new WeakMap,I=new WeakSet,F=function(){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).block,i=void 0===n?null:n;(0,o.Z)(this,e),(0,c.Z)(this,I),(0,r.Z)(this,C,{writable:!0,value:void 0}),(0,r.Z)(this,N,{writable:!0,value:void 0}),(0,r.Z)(this,D,{writable:!0,value:void 0}),(0,r.Z)(this,M,{writable:!0,value:void 0}),(0,r.Z)(this,W,{writable:!0,value:void 0}),(0,r.Z)(this,O,{writable:!0,value:void 0});var s,u=null,h=(0,l.Z)(t.available());try{for(h.s();!(s=h.n()).done;){var v=s.value,_=t.get(v).numberOfColumns();if(null!=u){if(_!=u)throw new Error("all matrices in 'normalized' should have the same number of columns as the length of 'groups'")}else u=_}}catch(x){h.e(x)}finally{h.f()}if((0,a.Z)(this,N,null),(0,a.Z)(this,D,null),(0,a.Z)(this,O,null),null!==i){if(i.length!=u)throw new Error("'block' should have the same length as the number of columns in each entry of 'normalized'");var p=d.XZ([i]);if(null!==p.retain){var w=new Int32Array(u);w.fill(-1),p.retain.forEach((function(e,t){w[e]=t})),(0,a.Z)(this,O,{to:w,from:p.retain});var m=new f.VU,Z=f.Wf(p.retain.length);try{Z.set(p.retain);var g,b=(0,l.Z)(t.available());try{for(b.s();!(g=b.n()).done;){var k=g.value;m.add(k,f.ZW(t.get(k),Z))}}catch(x){b.e(x)}finally{b.f()}}catch(E){throw f.gd(m),E}finally{f.gd(Z)}(0,a.Z)(this,C,m)}else(0,a.Z)(this,C,t.clone());(0,a.Z)(this,N,p.arrays[0].ids),(0,a.Z)(this,D,p.arrays[0].levels)}else(0,a.Z)(this,C,t.clone());(0,a.Z)(this,M,new y),(0,a.Z)(this,W,z.defaults()),this.changed=!1}return(0,u.Z)(e,[{key:"free",value:function(){(0,i.Z)(this,M).free()}},{key:"fetchParameters",value:function(){return{lfc_threshold:(0,i.Z)(this,W).lfc_threshold,compute_auc:(0,i.Z)(this,W).compute_auc}}},{key:"fetchBlockLevels",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e,n=(0,i.Z)(this,D);return t?n.slice():n}},{key:"_peekMatrices",value:function(){return(0,i.Z)(this,C)}},{key:"_peekBlock",value:function(){return(0,i.Z)(this,N)}},{key:"setParameters",value:function(e){(0,i.Z)(this,W).lfc_threshold===e.lfc_threshold&&(0,i.Z)(this,W).compute_auc===e.compute_auc||this.free(),(0,a.Z)(this,W,e)}},{key:"addSelection",value:function(e,t){var n=this,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).copy,a=void 0===r||r,s=t;if(null!==(0,i.Z)(this,O)){var o,u=[],c=(0,i.Z)(this,O).to,h=(0,l.Z)(t);try{for(h.s();!(o=h.n()).done;){var f=c[o.value];f>=0&&u.push(f)}}catch(d){h.e(d)}finally{h.f()}s=u}(0,i.Z)(this,M).addSelection(e,s,(0,i.Z)(this,C).available(),(function(e){return(0,i.Z)(n,C).get(e)}),(0,i.Z)(this,N),a,(0,i.Z)(this,W).lfc_threshold,(0,i.Z)(this,W).compute_auc)}},{key:"removeSelection",value:function(e){(0,i.Z)(this,M).removeSelection(e)}},{key:"fetchResults",value:function(e){return(0,i.Z)(this,M).fetchResults(e)}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t,r=(0,i.Z)(this,M).fetchSelectionIndices(e,{copy:n});return(0,h.Z)(this,I,T).call(this,r),r}},{key:"fetchSelections",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,a=void 0===r?null:r,l=(0,i.Z)(this,M).fetchSelections({copy:n,force:a}),o=0,u=Object.entries(l);o<u.length;o++){var c=(0,s.Z)(u[o],2),f=(c[0],c[1]);(0,h.Z)(this,I,T).call(this,f)}return l}},{key:"computeVersus",value:function(e,t){var n=this;return(0,i.Z)(this,M).computeVersus(e,t,(0,i.Z)(this,C).available(),(function(e){return(0,i.Z)(n,C).get(e)}),(0,i.Z)(this,N),(0,i.Z)(this,W).lfc_threshold,(0,i.Z)(this,W).compute_auc)}}]),e}();function T(e){var t=this;null!==(0,i.Z)(this,O)&&e.forEach((function(n,r){e[r]=(0,i.Z)(t,O).from[n]}))}},2990:function(e,t,n){n.d(t,{Cy:function(){return k},Y:function(){return V},ii:function(){return F}});var r=n(7762),i=n(1413),a=n(3324),s=n(4165),l=n(5861),o=n(5671),u=n(3144),c=n(101),h=n(2346),f=n(3889),d=n(8916),v=n(2793),_=n(5831),p=n(6474),w=n(7325),m=n(7891),Z=n(818),g=(n(4833),n(6546)),y=n(2269),b=n(7317),k=(n(8334),"feature_set_enrichment"),x=new WeakMap,E=new WeakSet,A=function(){function e(){(0,o.Z)(this,e),(0,c.Z)(this,E),(0,h.Z)(this,x,{writable:!0,value:void 0}),(0,v.Z)(this,x,{})}return(0,u.Z)(e,[{key:"free",value:function(){m.Yl((0,d.Z)(this,x).set_buffer),(0,v.Z)(this,x,{})}},{key:"buildCollections",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n,r,i,a,l,o){var u,c,h,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===t.automatic&&(n||t.gene_id_column===i&&t.gene_id_type===a&&!m.xi(t.species,r))){e.next=8;break}return u=i,c=a,h=r,n&&(d=R(o()),u=d.gene_id_column,c=d.gene_id_type,h=d.species),e.next=7,(0,f.Z)(this,E,S).call(this,l(),h,u,c);case 7:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,s,l){return e.apply(this,arguments)}}()},{key:"fetchCollectionDetails",value:function(){return(0,d.Z)(this,x).collections}},{key:"fetchSetDetails",value:function(){return{names:(0,d.Z)(this,x).sets.names,descriptions:(0,d.Z)(this,x).sets.descriptions,sizes:(0,d.Z)(this,x).sets.sizes,collections:(0,d.Z)(this,x).sets.collections}}},{key:"fetchUniverseSize",value:function(){return(0,d.Z)(this,x).universe.length}},{key:"computeEnrichment",value:function(e,t,n,r,i){var a=this;"delta_detected"==t&&(t="deltaDetected");var s="auc"==t?.5:0,l="min_rank"!==t,o=Z.iG[n],u=r[t](e,{summary:o,copy:!1}),c=p.Nd(u,(0,d.Z)(this,x).universe),h=_.Y8(c,i,{largest:l}),f=[],v=function(e){var t=(0,d.Z)(a,x).universe[e];f.push((0,d.Z)(a,x).mapping_to_sets[t])};l?(h<s&&(h=s),c.forEach((function(e,t){e>=h&&v(t)}))):c.forEach((function(e,t){e<=h&&v(t)}));for(var m=w.or(f),g=new Int32Array(m.length),y=new Int32Array(m.length),b=new Int32Array(m.length),k=new Int32Array(m.length),E=0;E<m.length;E++){k[E]=E;var A=m[E];g[E]=A.id,y[E]=A.count,b[E]=(0,d.Z)(this,x).sets.sizes[A.id]}var S=f.length,z=_.xw(y,S,b,(0,d.Z)(this,x).universe.length);return k.sort((function(e,t){return z[e]-z[t]})),{set_ids:p.Nd(g,k),counts:p.Nd(y,k),pvalues:p.Nd(z,k),num_markers:S}}},{key:"fetchFeatureSetIndices",value:function(e){return(0,d.Z)(this,x).sets.sets[e]}},{key:"computePerCellScores",value:function(e,t,n){var r=this.fetchFeatureSetIndices(e),i=m.rS(t.numberOfRows(),"Uint8Array",(0,d.Z)(this,x),"set_buffer");i.fill(0);var a=i.array();return r.forEach((function(e){a[e]=1})),_.Bs(t,i,{block:n})}}],[{key:"flush",value:function(){}},{key:"setDownload",value:function(e){console.warn("'FeatureSetState.setDownload' is a no-op, uses 'gesel.setReferenceDownload' and 'gesel.setGeneDownload' instead")}}]),e}();function S(e,t,n,r){return z.apply(this,arguments)}function z(){return(z=(0,l.Z)((0,s.Z)().mark((function e(t,n,i,a){var l,o,u,c,h,f,v,_,m,Z,g,y,b,k,E,A,S,z,R,C,N,D,M,W,O,I,F,T,U,j,B,L,P,H,Y,G,V,X;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(null==i?null==(l=t.rowNames())&&(n=[]):l=t.column(i),o={types:[a.toLowerCase()]},u=0,c=[[]],h=[[]],f=[[]],v=0,_=[[]],m=[[]],Z=[[]],g=[new Int32Array],y=[new Int32Array],b=new Set,k=new Array(t.numberOfRows()),E=0;E<k.length;E++)k[E]=[];A=(0,r.Z)(n),e.prev=16,A.s();case 18:if((S=A.n()).done){e.next=62;break}return z=S.value,e.next=22,w.XW(z,l,o);case 22:for(R=e.sent,C=0;C<R.length;C++)R[C].length>0&&b.add(C);return e.next=26,w.Uy(z);case 26:return N=e.sent,D=w.$g(R,N),e.next=30,w.bj(z);case 30:for(M=e.sent,W=M.length,O=new Array(W),I=new Array(W),F=new Int32Array(W),T=new Int32Array(W),C=0;C<W;C++)U=M[C],O[C]=U.name,I[C]=U.description,T[C]=U.collection+u,F[C]=D[C].length;return _.push(O),m.push(I),Z.push(D),g.push(F),y.push(T),e.next=44,w.RR(z);case 44:for(j=e.sent,B=w.wy(R,j),C=0;C<R.length;C++){for(L=B[C],P=0;P<L.length;P++)L[P]+=v;k[C].push(L)}return e.next=49,w.is(z);case 49:for(H=e.sent,Y=H.length,G=new Array(Y),V=new Array(Y),X=new Array(Y),C=0;C<Y;C++)G[C]=H[C].title,V[C]=H[C].description,X[C]=z;c.push(G),h.push(V),f.push(X),v+=W,u+=Y;case 60:e.next=18;break;case 62:e.next=67;break;case 64:e.prev=64,e.t0=e.catch(16),A.e(e.t0);case 67:return e.prev=67,A.f(),e.finish(67);case 70:if((0,d.Z)(this,x).universe=new Int32Array(b).sort(),(0,d.Z)(this,x).sets={names:p.NR(_),descriptions:p.NR(m),sets:p.NR(Z),sizes:p.NR(g),collections:p.NR(y)},(0,d.Z)(this,x).collections={names:p.NR(c),descriptions:p.NR(h),species:p.NR(f)},n.length>0)for(E=0;E<k.length;E++)k[E]=p.NR(k[E]);else for(E=0;E<k.length;E++)k[E]=new Uint32Array;return(0,d.Z)(this,x).mapping_to_sets=k,e.abrupt("return");case 76:case"end":return e.stop()}}),e,this,[[16,64,67,70]])})))).apply(this,arguments)}function R(e){var t=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in e){var r=e.row_names;r.confidence>n.confidence&&(n=r)}for(var i=0,s=Object.entries(e.columns);i<s.length;i++){var l=(0,a.Z)(s[i],2),o=l[0],u=l[1];u.confidence>n.confidence&&(n=u,t=o)}return{gene_id_column:t,gene_id_type:n.type.toUpperCase(),species:[n.species]}}function C(e,t,n,r,i,a){e.automatic=t,e.species=p.bl(n),e.gene_id_column=r,e.gene_id_type=i,e.top_markers=a}function N(e){var t=(0,i.Z)({},e);return t.species=p.bl(t.species),t}var D=new WeakMap,M=new WeakMap,W=new WeakMap,O=new WeakMap,I=new WeakMap,F=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,o.Z)(this,e),(0,h.Z)(this,D,{writable:!0,value:void 0}),(0,h.Z)(this,M,{writable:!0,value:void 0}),(0,h.Z)(this,W,{writable:!0,value:void 0}),(0,h.Z)(this,O,{writable:!0,value:void 0}),(0,h.Z)(this,I,{writable:!0,value:void 0}),!(t instanceof g.tq))throw new Error("'inputs' should be a State object from './inputs.js'");if((0,v.Z)(this,D,t),!(n instanceof y.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,v.Z)(this,M,n),!(r instanceof b.ue))throw new Error("'normalized' should be a RnaNormalizationState object from './rna_normalization.js'");(0,v.Z)(this,W,r),(0,v.Z)(this,O,null===a?{}:a),(0,v.Z)(this,I,new A),this.changed=!1}return(0,u.Z)(e,[{key:"free",value:function(){(0,d.Z)(this,I).free()}},{key:"valid",value:function(){return(0,d.Z)(this,D).fetchCountMatrix().has("RNA")}},{key:"fetchCollectionDetails",value:function(){return(0,d.Z)(this,I).fetchCollectionDetails()}},{key:"fetchSetDetails",value:function(){return(0,d.Z)(this,I).fetchSetDetails()}},{key:"fetchUniverseSize",value:function(){return(0,d.Z)(this,I).fetchUniverseSize()}},{key:"computeEnrichment",value:function(e,t,n,r){return(0,d.Z)(this,I).computeEnrichment(t,n,r,e,(0,d.Z)(this,O).top_markers)}},{key:"fetchFeatureSetIndices",value:function(e){return(0,d.Z)(this,I).fetchFeatureSetIndices(e)}},{key:"computePerCellScores",value:function(e){return(0,d.Z)(this,I).computePerCellScores(e,(0,d.Z)(this,W).fetchNormalizedMatrix(),(0,d.Z)(this,M).fetchFilteredBlock())}},{key:"fetchPerCellScores",value:function(e,t){return this.computePerCellScores(e,t)}},{key:"fetchParameters",value:function(){return N((0,d.Z)(this,O))}},{key:"compute",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,l,o,u=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.changed=!1,(0,d.Z)(this,D).changed&&(this.changed=!0),n=t.skip,r=t.automatic,i=t.species,a=t.gene_id_column,l=t.gene_id_type,o=t.top_markers,n!==(0,d.Z)(this,O).skip&&(this.changed=!0),!this.valid()||n){e.next=11;break}return this.changed&&(0,v.Z)(this,O,{}),e.next=8,(0,d.Z)(this,I).buildCollections((0,d.Z)(this,O),r,i,a,l,(function(){return(0,d.Z)(u,D).fetchFeatureAnnotations().RNA}),(function(){return(0,d.Z)(u,D).guessRnaFeatureTypes()}));case 8:e.sent&&(this.changed=!0),o!==(0,d.Z)(this,O).top_markers&&(this.changed=!0);case 11:return C((0,d.Z)(this,O),r,i,a,l,o),(0,d.Z)(this,O).skip=n,e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"defaults",value:function(){return{skip:!1,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL",top_markers:100}}},{key:"flush",value:function(){}},{key:"setDownload",value:function(e){return A.setDownload(e)}}]),e}(),T=new WeakMap,U=new WeakMap,j=new WeakMap,B=new WeakMap,L=new WeakMap,P=new WeakMap,H=new WeakMap,Y=new WeakMap,G=new WeakSet,V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.normalized,i=void 0===r?null:r,a=n.block,s=void 0===a?null:a;if((0,o.Z)(this,e),(0,c.Z)(this,G),(0,h.Z)(this,T,{writable:!0,value:void 0}),(0,h.Z)(this,U,{writable:!0,value:void 0}),(0,h.Z)(this,j,{writable:!0,value:void 0}),(0,h.Z)(this,B,{writable:!0,value:void 0}),(0,h.Z)(this,L,{writable:!0,value:void 0}),(0,h.Z)(this,P,{writable:!0,value:void 0}),(0,h.Z)(this,H,{writable:!0,value:void 0}),(0,h.Z)(this,Y,{writable:!0,value:void 0}),(0,v.Z)(this,T,t),(0,v.Z)(this,U,null),(0,v.Z)(this,j,null),(0,v.Z)(this,B,null),(0,v.Z)(this,L,null),null!==i){if(i.numberOfRows()!==(0,d.Z)(this,T).numberOfRows())throw new Error("number of rows of 'annotations' and 'normalized' should be identical");if(null!==s){if(i.numberOfColumns()!==s.length)throw new Error("number of columns of 'normalized' should equal the length of 'block'");var l=m.XZ([s]);null!==l.retain?((0,v.Z)(this,j,_.ZW(i,l.retain)),(0,v.Z)(this,L,l.retain)):(0,v.Z)(this,j,i.clone()),(0,v.Z)(this,B,l.arrays[0].ids)}else(0,v.Z)(this,j,i.clone())}(0,v.Z)(this,P,e.defaults()),(0,v.Z)(this,H,{}),(0,v.Z)(this,Y,new A)}return(0,u.Z)(e,[{key:"_peekMatrices",value:function(){return(0,d.Z)(this,j)}},{key:"_peekBlock",value:function(){return(0,d.Z)(this,B)}},{key:"free",value:function(){_.gd((0,d.Z)(this,B)),_.gd((0,d.Z)(this,j)),(0,d.Z)(this,Y).free()}},{key:"setParameters",value:function(e){var t=e.automatic,n=e.species,r=e.gene_id_column,i=e.gene_id_type,a=e.top_markers;C((0,d.Z)(this,P),t,n,r,i,a)}},{key:"ready",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,l=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,d.Z)(this,P),n=t.automatic,r=t.species,i=t.gene_id_column,a=t.gene_id_type,t.top_markers,e.next=3,(0,d.Z)(this,Y).buildCollections((0,d.Z)(this,H),n,r,i,a,(function(){return(0,d.Z)(l,T)}),(function(){return(0,f.Z)(l,G,X).call(l)}));case 3:(0,v.Z)(this,H,(0,d.Z)(this,P));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCollectionDetails",value:function(){return(0,d.Z)(this,Y).fetchCollectionDetails()}},{key:"fetchSetDetails",value:function(){return(0,d.Z)(this,Y).fetchSetDetails()}},{key:"fetchUniverseSize",value:function(){return(0,d.Z)(this,Y).fetchUniverseSize()}},{key:"computeEnrichment",value:function(e,t,n,r){return(0,d.Z)(this,Y).computeEnrichment(t,n,r,e,(0,d.Z)(this,H).top_markers)}},{key:"fetchFeatureSetIndices",value:function(e){return(0,d.Z)(this,Y).fetchFeatureSetIndices(e)}},{key:"fetchParameters",value:function(){return N((0,d.Z)(this,P))}},{key:"computePerCellScores",value:function(e){if(null==(0,d.Z)(this,j))throw new Error("no normalized matrix supplied in constructor");var t=(0,d.Z)(this,Y).computePerCellScores(e,(0,d.Z)(this,j),(0,d.Z)(this,B));if(null!==(0,d.Z)(this,L)){var n=new Float64Array(t.scores.length);n.fill(Number.NaN),(0,d.Z)(this,L).forEach((function(e,r){n[e]=t.scores[r]})),t.scores=n}return t}}],[{key:"defaults",value:function(){return{skip:!1,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL",top_markers:100}}}]),e}();function X(){return null==(0,d.Z)(this,U)&&(0,v.Z)(this,U,m.zS((0,d.Z)(this,T))),(0,d.Z)(this,U)}},6546:function(e,t,n){n.d(t,{Cy:function(){return Z},tq:function(){return A}});var r=n(7762),i=n(4165),a=n(3324),s=n(5861),l=n(1413),o=n(5671),u=n(3144),c=n(101),h=n(2346),f=n(3889),d=n(2415),v=n(8916),_=n(2793),p=n(5831),w=n(6474),m=n(7891),Z=(n(4833),"inputs"),g="raw_subset_indices",y=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakSet,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,o.Z)(this,e),(0,c.Z)(this,E),(0,h.Z)(this,y,{writable:!0,value:void 0}),(0,h.Z)(this,b,{writable:!0,value:void 0}),(0,h.Z)(this,k,{writable:!0,value:void 0}),(0,h.Z)(this,x,{writable:!0,value:void 0}),(0,_.Z)(this,y,null===t?{}:t),(0,_.Z)(this,b,null===n?{}:n),(0,_.Z)(this,k,null===r?{}:r),(0,_.Z)(this,x,!1),this.changed=!1}return(0,u.Z)(e,[{key:"free",value:function(){m.Yl((0,v.Z)(this,b).matrix),m.Yl((0,v.Z)(this,b).raw_matrix),m.Yl((0,v.Z)(this,b).block_ids),m.Yl((0,v.Z)(this,b).raw_block_ids),m.Yl((0,v.Z)(this,b).multi_block_ids)}},{key:"fetchCountMatrix",value:function(){return(0,v.Z)(this,b).matrix}},{key:"fetchFeatureAnnotations",value:function(){return(0,v.Z)(this,b).genes}},{key:"fetchRowIds",value:function(){return(0,v.Z)(this,b).row_ids}},{key:"fetchCellAnnotations",value:function(){return(0,v.Z)(this,b).annotations}},{key:"fetchBlock",value:function(){return(0,v.Z)(this,b).block_ids}},{key:"fetchBlockLevels",value:function(){return(0,v.Z)(this,b).block_levels}},{key:"fetchParameters",value:function(){var t,n=(0,l.Z)({},(0,v.Z)(this,y));return n.subset=(0,d.Z)(t=this.constructor,e,S).call(t,n.subset),n}},{key:"fetchDatasets",value:function(){return(0,v.Z)(this,b).datasets}},{key:"fetchDirectSubset",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;if(g in(0,v.Z)(this,b)){var n=(0,v.Z)(this,b)[g];return t?n.slice():n}return null}},{key:"guessRnaFeatureTypes",value:function(){return"RNA"in(0,v.Z)(this,b).genes?("inferred_rna_types"in(0,v.Z)(this,b)||((0,v.Z)(this,b).inferred_rna_types=m.zS((0,v.Z)(this,b).genes.RNA)),(0,v.Z)(this,b).inferred_rna_types):null}},{key:"enableDatasetCache",value:function(e){(0,_.Z)(this,x,e)}},{key:"compute",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n,r){var s,o,u,c,h,f,p,w,Z;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.block_factor,o=r.subset,this.changed=!1,null===n){t.next=12;break}for(u={},c=0,h=Object.entries(n);c<h.length;c++)f=(0,a.Z)(h[c],2),p=f[0],w=f[1],u[p]={format:w.constructor.format(),details:w.abbreviate()};if(!m.xi(u,(0,v.Z)(this,k))){t.next=12;break}return t.next=8,F(n,(0,v.Z)(this,b),(0,v.Z)(this,x));case 8:(0,_.Z)(this,k,u),(0,v.Z)(this,b).datasets=(0,l.Z)({},n),delete(0,v.Z)(this,b).inferred_rna_types,this.changed=!0;case 12:return(this.changed||(0,v.Z)(this,y).block_factor!==s)&&(U(s,(0,v.Z)(this,b)),(0,v.Z)(this,y).block_factor=s,this.changed=!0),(this.changed||!(g in(0,v.Z)(this,b))&&m.xi(o,(0,v.Z)(this,y).subset)||!("matrix"in(0,v.Z)(this,b)))&&(j(o,(0,v.Z)(this,b)),(0,v.Z)(this,y).subset=(0,d.Z)(Z=this.constructor,e,S).call(Z,o),this.changed=!0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"undoSubset",value:function(e){if("matrix"in(0,v.Z)(this,b)){var t,n=this.fetchCountMatrix().numberOfColumns(),i=(0,r.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a<0||a>=n)throw new Error("entries of 'indices' should be less than the number of cells in the dataset")}}catch(o){i.e(o)}finally{i.f()}}var s=null;"subset"in(0,v.Z)(this,y)&&(s=(0,v.Z)(this,y).subset);var l=I(s,(0,v.Z)(this,b));null!==l&&e.forEach((function(t,n){e[n]=l[t]}))}},{key:"setDirectSubset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.copy,r=void 0===n||n,i=t.onOriginal,a=void 0!==i&&i;null!==e?(0,v.Z)(this,b)[g]=(0,f.Z)(this,E,z).call(this,e,r,a):delete(0,v.Z)(this,b)[g],p.gd((0,v.Z)(this,b).matrix),delete(0,v.Z)(this,b).matrix}},{key:"createDirectSubset",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copy,i=void 0===r||r,a=n.onOriginal,s=void 0!==a&&a,l={};l[g]=(0,f.Z)(this,E,z).call(this,t,i,s),l.raw_matrix=(0,v.Z)(this,b).raw_matrix.clone();for(var o=0,u=["multi_block_ids","raw_block_ids"];o<u.length;o++){var c=u[o];c in(0,v.Z)(this,b)&&(null===(0,v.Z)(this,b)[c]?l[c]=null:l[c]=(0,v.Z)(this,b)[c].clone())}for(var h=0,d=["row_ids","raw_annotations","genes","multi_block_levels","raw_block_levels"];h<d.length;h++){var _=d[h];_ in(0,v.Z)(this,b)&&(l[_]=(0,v.Z)(this,b)[_])}j(null,l);var p=this.fetchParameters();return p.subset=null,new e(p,l,(0,v.Z)(this,k))}}],[{key:"defaults",value:function(){return{block_factor:null,subset:null}}}]),e}();function S(e){if(null==e)return e;var t=(0,l.Z)({},e);return"values"in t&&(t.values=t.values.slice()),"ranges"in t&&(t.ranges=t.ranges.map((function(e){return e.slice()}))),t}function z(e,t,n){return m.N2(e,null),t&&(e=e.slice()),n||this.undoSubset(e),e}var R=["RNA","ADT","CRISPR"];function C(e,t){var n={};try{for(var r=[],i=[],a=0;a<t.length;a++){i.push(t[a].matrix.get(e));var s=t[a].primary_ids[e];if(null==s)throw new Error("modality '"+e+"' lacks a primary identifier for dataset "+String(a));r.push(s)}var l=p.KV(i,r);n.matrix=l.matrix,n.features=w.Nd(t[0].features[e],l.indices),n.row_ids=w.Nd(t[0].row_ids[e],l.indices)}catch(o){throw m.Yl(n.matrix),o}return n}function N(e,t){var n,i,a=[],s=(0,r.Z)(R);try{for(s.s();!(n=s.n()).done;){var l,o=n.value,u=!0,c=(0,r.Z)(t);try{for(c.s();!(l=c.n()).done;){if(!l.value.matrix.has(o)){u=!1;break}}}catch(b){c.e(b)}finally{c.f()}u&&a.push(o)}}catch(b){s.e(b)}finally{s.f()}if(0==a.length)throw new Error("failed to find common modalities across all datasets");var h={matrix:new p.VU,features:{},row_ids:{}};try{for(var f=0,d=a;f<d.length;f++){var v=d[f],_=C(v,t);h.matrix.add(v,_.matrix),h.features[v]=_.features,h.row_ids[v]=_.row_ids}var Z=t.map((function(e){return e.cells}));h.cells=w.sj(Z);var g=new Array(t.length);t.forEach((function(e,t){g[t]=e.matrix.numberOfColumns()})),i=p.j4(g),h.block_ids=i,h.block_levels=e;var y=new Array(i.length);i.forEach((function(t,n){y[n]=e[t]})),h.cells.$setColumn("__batch__",y)}catch(k){throw m.Yl(i),m.Yl(h.matrix),k}return h}function D(e){if(0==e.matrix.available().length)throw new Error("");var t={matrix:new p.VU,features:{},row_ids:{}};try{var n,i=(0,r.Z)(R);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.matrix.has(a)&&(t.matrix.add(a,e.matrix.get(a)),t.features[a]=e.features[a],t.row_ids[a]=e.row_ids[a])}}catch(s){i.e(s)}finally{i.f()}}catch(l){throw p.gd(t.matrix),l}return t.cells=e.cells,t.block_ids=null,t.block_levels=null,t}function M(e,t){return W.apply(this,arguments)}function W(){return(W=(0,s.Z)((0,i.Z)().mark((function e(t,n){var a,s,l,o,u,c,h,f,d,v,_,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object.keys(t)).sort(),s=[],e.prev=3,l=0,o=a;case 5:if(!(l<o.length)){e.next=15;break}return u=o[l],e.t0=s,e.next=10,t[u].load({cache:n});case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:l++,e.next=5;break;case 15:e.next=22;break;case 17:e.prev=17,e.t2=e.catch(3),c=(0,r.Z)(s);try{for(c.s();!(h=c.n()).done;)f=h.value,p.gd(f.matrix)}catch(i){c.e(i)}finally{c.f()}throw e.t2;case 22:if(1!=a.length){e.next=33;break}e.prev=23,d=D(s[0]),e.next=31;break;case 27:throw e.prev=27,e.t3=e.catch(23),p.gd(s[0].matrix),e.t3;case 31:e.next=34;break;case 33:try{d=N(a,s)}finally{v=(0,r.Z)(s);try{for(v.s();!(_=v.n()).done;)w=_.value,p.gd(w.matrix)}catch(i){v.e(i)}finally{v.f()}}case 34:return e.abrupt("return",d);case 35:case"end":return e.stop()}}),e,null,[[3,17],[23,27]])})))).apply(this,arguments)}var O=-1;function I(e,t){var n;if(g in t)n=t[g];else if(null==e)n=null;else{if(!t.raw_annotations.hasColumn(e.field))throw new Error("failed to find '"+e.field+"' in the column annotations");var i=t.raw_annotations.column(e.field);if(n=[],"values"in e){var a=new Set(e.values);i.forEach((function(e,t){a.has(e)&&n.push(t)}))}else i.forEach((function(t,i){var a,s=(0,r.Z)(e.ranges);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(t>=l[0]&&t<=l[1])return void n.push(i)}}catch(o){s.e(o)}finally{s.f()}}))}if("raw_block_ids"in t&&null!==t.raw_block_ids){var s=t.raw_block_ids.array(),l=[];if(null!==n){var o,u=(0,r.Z)(n);try{for(u.s();!(o=u.n()).done;){var c=o.value;s[c]!==O&&l.push(c)}}catch(f){u.e(f)}finally{u.f()}}else for(var h=0;h<s.length;h++)s[h]!==O&&l.push(h);n=l}return n}function F(e,t,n){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.Yl(n.raw_matrix),m.Yl(n.matrix),m.Yl(n.multi_block_ids),e.next=5,M(t,r);case 5:a=e.sent,n.raw_matrix=a.matrix,n.row_ids=a.row_ids,n.raw_annotations=a.cells,n.multi_block_ids=a.block_ids,n.multi_block_levels=a.block_levels,n.genes=a.features;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){m.Yl(t.raw_block_ids);var n=null,r=null;if(null!==e)try{var i=t.raw_annotations.column(e);if(i.length!=t.raw_matrix.numberOfColumns())throw new Error("length of blocking factor '"+e+"' should be equal to the number of cells");var a=p.Yh(i,{action:"none",placeholder:O});n=a.ids,r=a.levels}catch(s){throw m.Yl(n),s}else n=null!==t.multi_block_ids?t.multi_block_ids.view():null,r=t.multi_block_levels;t.raw_block_ids=n,t.raw_block_levels=r}function j(e,t){m.Yl(t.matrix),m.Yl(t.block_ids);var n,i,a,s,l=I(e,t);try{if(null===l)n=t.raw_annotations,i=t.raw_matrix.clone(),null!==t.raw_block_ids?(a=t.raw_block_ids.view(),s=t.raw_block_levels):(a=null,s=null);else{if(n=w.Nd(t.raw_annotations,l),null!==t.raw_block_ids)a=p.DS(t.raw_block_ids,l),s=p.D4(a).map((function(e){return t.raw_block_levels[e]}));else a=null,s=null;i=new p.VU;var o,u=(0,r.Z)(t.raw_matrix.available());try{for(u.s();!(o=u.n()).done;){var c=o.value,h=t.raw_matrix.get(c);i.add(c,p.ZW(h,l))}}catch(f){u.e(f)}finally{u.f()}}}catch(d){throw m.Yl(i),m.Yl(a),d}t.annotations=n,t.block_levels=s,t.block_ids=a,t.matrix=i}},4071:function(e,t,n){n.d(t,{AB:function(){return u},Ig:function(){return _},Vi:function(){return m},cE:function(){return v},qM:function(){return p},yc:function(){return o}});var r=n(4165),i=n(5861),a=n(5831),s=(n(7891),n(8794)),l=function(e,t,n){return null};var o={numberOfThreads:1};function u(e,t){var n=e.fetchIndex(),r={num_obs:n.numberOfCells()},i=null,s=null,l=null,o=null;try{i=a.wf(n,t),s=a.Wf(i.numberOfCells()),l=a.Wf(i.size()),o=a.RJ(i.size()),i.serialize({runs:s,indices:l,distances:o}),r.size=i.size(),r.runs=s.array().slice(),r.indices=l.array().slice(),r.distances=o.array().slice()}finally{null!==i&&i.free(),null!==s&&s.free(),null!==l&&l.free(),null!==o&&o.free()}return r}var c=[],h=[];function f(e){return e.type}function d(e,t){"error"==f(t)?e.reject(t.error):e.resolve(t.data)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=c[e],i=h[e],a=i.counter,l=new Promise((function(e,t){var n={resolve:e,reject:t};a in i.promises?(d(n,i.promises[a]),delete i.promises[a]):i.promises[a]=n}));return i.counter++,t.id=a,s.bG(r,t,n),l}function _(e,t){var n=c.length;c.push(e);var r={counter:0,promises:{}};return h.push(r),s.jC(e,(function(e){var t=f(e.data);if(t.endsWith("_iter"))l(t.slice(0,-5),e.data.x,e.data.y,e.data.iteration);else{var n=e.data.id;n in r.promises?(d(r.promises[n],e.data),delete r.promises[n]):r.promises[n]=e.data}})),{worker_id:n,ready:v(n,{cmd:"INIT",scranOptions:t})}}function p(e){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,{cmd:"KILL"});case 2:return n=c[t],c[t]=null,e.abrupt("return",s.Ae(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){var r={cmd:"RUN",params:t},i=[];return null!==n&&(i=[n.runs.buffer,n.indices.buffer,n.distances.buffer],r.neighbors=n),v(e,r,i)}},1126:function(e,t,n){n.d(t,{o:function(){return a}});var r=n(3324),i=n(7762);n(4127),n(320);function a(e){var t,n=new Map,a=(0,i.Z)(e);try{for(a.s();!(t=a.n()).done;){var s,l=t.value,o=(0,i.Z)(l);try{for(o.s();!(s=o.n()).done;){var u=s.value,c=n.get(u);"undefined"==typeof c?n.set(u,1):n.set(u,c+1)}}catch(m){o.e(m)}finally{o.f()}}}catch(m){a.e(m)}finally{a.f()}var h,f=[],d=(0,i.Z)(n);try{for(d.s();!(h=d.n()).done;){var v=(0,r.Z)(h.value,2),_=v[0],p=v[1],w={id:Number(_),count:p};f.push(w)}}catch(m){d.e(m)}finally{d.f()}return f}},7325:function(e,t,n){n.d(t,{$g:function(){return c.$},Kk:function(){return r.geneBaseUrl},RR:function(){return o.R},Uy:function(){return l.U},XW:function(){return i.X},XZ:function(){return r.referenceBaseUrl},ao:function(){return r.referenceDownload},b5:function(){return r.setGeneDownload},bj:function(){return a.b},d9:function(){return r.geneDownload},is:function(){return s.i},or:function(){return u.o},wy:function(){return h.w}});var r=n(8137),i=(n(4147),n(7078),n(194)),a=n(7899),s=(n(4127),n(3192)),l=(n(6331),n(4479),n(7855)),o=(n(320),n(2666)),u=(n(5719),n(1126)),c=n(7101),h=n(5479)},194:function(e,t,n){n.d(t,{X:function(){return l}});var r=n(4165),i=n(7762),a=n(5861),s=(n(4147),n(7078));function l(e,t){return o.apply(this,arguments)}function o(){return o=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,l,o,u,c,h,f,d,v,_,p,w,m,Z,g,y,b,k,x,E=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=(a=E.length>2&&void 0!==E[2]?E[2]:{}).types,o=void 0===l?null:l,u=a.ignoreCase,c=void 0===u||u,null===o&&(o=["entrez","ensembl","symbol"]),h=[],f=(0,i.Z)(o);try{for(f.s();!(d=f.n()).done;)v=d.value,h.push((0,s.B)(t,v,{lowerCase:c}))}catch(r){f.e(r)}finally{f.f()}return e.next=7,Promise.all(h);case 7:_=e.sent,p=[],w=0;case 10:if(!(w<n.length)){e.next=22;break}if(0!=(m=n[w]).length){e.next=15;break}return p.push([]),e.abrupt("continue",19);case 15:for(c&&(m=m.toLowerCase()),Z=[],g=0;g<o.length;g++)if("undefined"!==typeof(y=_[g].get(m))){b=(0,i.Z)(y);try{for(b.s();!(k=b.n()).done;)x=k.value,Z.push(x)}catch(r){b.e(r)}finally{b.f()}}p.push(Z);case 19:w++,e.next=10;break;case 22:return e.abrupt("return",p);case 23:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},8137:function(e,t,n){n.r(t),n.d(t,{convertToUint32Array:function(){return z},decompressLines:function(){return m},default_download:function(){return l},fetchNumber:function(){return M},fetchSizes:function(){return D},geneBaseUrl:function(){return v},geneDownload:function(){return p},gene_download:function(){return _},intersect:function(){return R},referenceBaseUrl:function(){return u},referenceDownload:function(){return h},reference_download:function(){return c},retrieveBytes:function(){return A},retrieveBytesByIndex:function(){return E},retrieveNamedRanges:function(){return y},retrieveRanges:function(){return Z},retrieveRangesWithExtras:function(){return k},setGeneDownload:function(){return w},setReferenceDownload:function(){return f}});var r=n(4165),i=n(7762),a=n(5861),s=n(714),l=function(e,t,n,r){var i=e+"/"+t;return null==n||null==r?fetch(i):fetch(i,{headers:{Range:"bytes="+String(n)+"-"+String(r)}})},o="https://github.com/LTLA/gesel-feedstock/releases/download/indices-v0.2.1";function u(e){return o}var c=function(e){return l(o,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)};function h(e){var t=c;return"undefined"!==typeof e&&(c=e),t}function f(e){return h(e)}var d="https://github.com/LTLA/gesel-feedstock/releases/download/genes-v1.0.0";function v(e){return d}var _=function(e){return l(d,e,null,null)};function p(e){var t=_;return"undefined"!==typeof e&&(_=e),t}function w(e){return p(e)}function m(e){var t=s.rr(new Uint8Array(e)),n=(new TextDecoder).decode(t).split("\n");return""==n[n.length-1]?n.slice(0,n.length-1):n}function Z(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=[0],l=0;l<a.length;l++)s.push(s[l]+Number(a[l])+1);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,l,o,u,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=0,l=new Map,o=[],u=0;u<a.length;u++)h=a[u].split("\t"),f=s+Number(h[1])+1,l.set(h[0],[s,f]),o.push(h[0]),s=f;return e.abrupt("return",{ranges:l,order:o});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,l,o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=[0],l=[],o=0;o<a.length;o++)u=a[o].split("\t"),s.push(s[o]+Number(u[0])+1),l.push(Number(u[1]));return e.abrupt("return",{ranges:s,extra:l});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n){return A(e,t[n],t[n+1])}function A(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)((0,r.Z)().mark((function e(t,n,i){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i--,e.next=3,c(t,n,i);case 3:if((a=e.sent).ok){e.next=6;break}throw"failed to fetch ranges for '"+t+"'";case 6:return e.next=8,a.text();case 8:return s=e.sent,e.abrupt("return",s.slice(0,i-n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){var t=[];if(""!==e){var n=0;e.split("\t").forEach((function(e){var r=Number(e)+n;t.push(r),n=r}))}return new Uint32Array(t)}function R(e){if(0==e.length)return[];if(1==e.length)return e[0];for(var t=new Set(e[0]),n=1;n<e.length;n++){var r,a=new Set,s=(0,i.Z)(e[n]);try{for(s.s();!(r=s.n()).done;){var l=r.value;t.has(l)&&a.add(l)}}catch(o){s.e(o)}finally{s.f()}t=a}return Array.from(t)}function C(e,t,n,r,i,a){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)((0,r.Z)().mark((function e(t,n,i,a,s,l){var o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof(o=n.get(t))){e.next=10;break}return e.next=4,i(t,{download:!1});case 4:if(null===(u=e.sent)){e.next=7;break}return e.abrupt("return",l(u));case 7:return e.next=9,a(t);case 9:o=n.get(t);case 10:return e.abrupt("return",s(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n,r){return C(e,t,n,r,(function(e){return e}),(function(n){var r,a=[],s=(0,i.Z)(n);try{for(s.s();!(r=s.n()).done;){var l=r.value;a.push(l.size)}}catch(o){s.e(o)}finally{s.f()}return t.set(e,a),a}))}function M(e,t,n,r){return C(e,t,n,r,(function(e){return e.length}),(function(e){return e.length}))}},714:function(e,t,n){n.d(t,{T_:function(){return hn},ec:function(){return dn},rr:function(){return fn}});function r(e){for(var t=e.length;--t>=0;)e[t]=0}var i=256,a=286,s=30,l=15,o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);r(f);var d=new Array(60);r(d);var v=new Array(512);r(v);var _=new Array(256);r(_);var p=new Array(29);r(p);var w,m,Z,g=new Array(s);function y(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(g);var k=function(e){return e<256?v[e]:v[256+(e>>>7)]},x=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},E=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},A=function(e,t,n){E(e,n[2*t],n[2*t+1])},S=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},z=function(e,t,n){var r,i,a=new Array(16),s=0;for(r=1;r<=l;r++)s=s+n[r-1]<<1,a[r]=s;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=S(a[o]++,o))}},R=function(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},C=function(e){e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},N=function(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},D=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&N(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!N(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},M=function(e,t,n){var r,a,s,l,c=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+c++],r+=(255&e.pending_buf[e.sym_buf+c++])<<8,a=e.pending_buf[e.sym_buf+c++],0===r?A(e,a,t):(s=_[a],A(e,s+i+1,t),0!==(l=o[s])&&(a-=p[s],E(e,a,l)),r--,s=k(r),A(e,s,n),0!==(l=u[s])&&(r-=g[s],E(e,r,l)))}while(c<e.sym_next);A(e,256,t)},W=function(e,t){var n,r,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)D(e,a,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,D(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,s,o,u=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,_=t.stat_desc.max_length,p=0;for(a=0;a<=l;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>_&&(a=_,p++),u[2*r+1]=a,r>c||(e.bl_count[a]++,s=0,r>=v&&(s=d[r-v]),o=u[2*r],e.opt_len+=o*(a+s),f&&(e.static_len+=o*(h[2*r+1]+s)));if(0!==p){do{for(a=_-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[_]--,p-=2}while(p>0);for(a=_;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),z(a,c,e.bl_count)},O=function(e,t,n){var r,i,a=-1,s=t[1],l=0,o=7,u=4;for(0===s&&(o=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++l<o&&i===s||(l<u?e.bl_tree[2*i]+=l:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,a=i,0===s?(o=138,u=3):i===s?(o=6,u=3):(o=7,u=4))},I=function(e,t,n){var r,i,a=-1,s=t[1],l=0,o=7,u=4;for(0===s&&(o=138,u=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++l<o&&i===s)){if(l<u)do{A(e,i,e.bl_tree)}while(0!==--l);else 0!==i?(i!==a&&(A(e,i,e.bl_tree),l--),A(e,16,e.bl_tree),E(e,l-3,2)):l<=10?(A(e,17,e.bl_tree),E(e,l-3,3)):(A(e,18,e.bl_tree),E(e,l-11,7));l=0,a=i,0===s?(o=138,u=3):i===s?(o=6,u=3):(o=7,u=4)}},F=!1,T=function(e,t,n,r){E(e,0+(r?1:0),3),C(e),x(e,n),x(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},U=function(e,t,n,r){var a,s,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),W(e,e.l_desc),W(e,e.d_desc),l=function(e){var t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?T(e,t,n,r):4===e.strategy||s===a?(E(e,2+(r?1:0),3),M(e,f,d)):(E(e,4+(r?1:0),3),function(e,t,n,r){var i;for(E(e,t-257,5),E(e,n-1,5),E(e,r-4,4),i=0;i<r;i++)E(e,e.bl_tree[2*h[i]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),M(e,e.dyn_ltree,e.dyn_dtree)),R(e),r&&C(e)},j={_tr_init:function(e){F||(!function(){var e,t,n,r,i,h=new Array(16);for(n=0,r=0;r<28;r++)for(p[r]=n,e=0;e<1<<o[r];e++)_[n++]=r;for(_[n-1]=r,i=0,r=0;r<16;r++)for(g[r]=i,e=0;e<1<<u[r];e++)v[i++]=r;for(i>>=7;r<s;r++)for(g[r]=i<<7,e=0;e<1<<u[r]-7;e++)v[256+i++]=r;for(t=0;t<=l;t++)h[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,h[8]++;for(;e<=255;)f[2*e+1]=9,e++,h[9]++;for(;e<=279;)f[2*e+1]=7,e++,h[7]++;for(;e<=287;)f[2*e+1]=8,e++,h[8]++;for(z(f,287,h),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=S(e,5);w=new y(f,o,257,a,l),m=new y(d,u,0,s,l),Z=new y(new Array(0),c,0,19,7)}(),F=!0),e.l_desc=new b(e.dyn_ltree,w),e.d_desc=new b(e.dyn_dtree,m),e.bl_desc=new b(e.bl_tree,Z),e.bi_buf=0,e.bi_valid=0,R(e)},_tr_stored_block:T,_tr_flush_block:U,_tr_tally:function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(_[n]+i+1)]++,e.dyn_dtree[2*k(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){E(e,2,3),A(e,256,f),function(e){16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},B=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0},L=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),P=function(e,t,n,r){var i=L,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},G=j._tr_init,V=j._tr_stored_block,X=j._tr_flush_block,K=j._tr_tally,$=j._tr_align,q=Y.Z_NO_FLUSH,Q=Y.Z_PARTIAL_FLUSH,J=Y.Z_FULL_FLUSH,ee=Y.Z_FINISH,te=Y.Z_BLOCK,ne=Y.Z_OK,re=Y.Z_STREAM_END,ie=Y.Z_STREAM_ERROR,ae=Y.Z_DATA_ERROR,se=Y.Z_BUF_ERROR,le=Y.Z_DEFAULT_COMPRESSION,oe=Y.Z_FILTERED,ue=Y.Z_HUFFMAN_ONLY,ce=Y.Z_RLE,he=Y.Z_FIXED,fe=Y.Z_DEFAULT_STRATEGY,de=Y.Z_UNKNOWN,ve=Y.Z_DEFLATED,_e=258,pe=262,we=42,me=113,Ze=666,ge=function(e,t){return e.msg=H[t],t},ye=function(e){return 2*e-(e>4?9:0)},be=function(e){for(var t=e.length;--t>=0;)e[t]=0},ke=function(e){var t,n,r,i=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);r=t=i;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)},xe=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Ee=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Ae=function(e,t){X(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ee(e.strm)},Se=function(e,t){e.pending_buf[e.pending++]=t},ze=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Re=function(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=B(e.adler,t,i,n):2===e.state.wrap&&(e.adler=P(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ce=function(e,t){var n,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,l=e.nice_match,o=e.strstart>e.w_size-pe?e.strstart-(e.w_size-pe):0,u=e.window,c=e.w_mask,h=e.prev,f=e.strstart+_e,d=u[a+s-1],v=u[a+s];e.prev_length>=e.good_match&&(i>>=2),l>e.lookahead&&(l=e.lookahead);do{if(u[(n=t)+s]===v&&u[n+s-1]===d&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(r=_e-(f-a),a=f-_e,r>s){if(e.match_start=t,s=r,r>=l)break;d=u[a+s-1],v=u[a+s]}}}while((t=h[t&c])>o&&0!==--i);return s<=e.lookahead?s:e.lookahead},Ne=function(e){var t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-pe)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),ke(e),n+=i),0===e.strm.avail_in)break;if(t=Re(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=xe(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=xe(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<pe&&0!==e.strm.avail_in)},De=function(e,t){var n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,l=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==ee||t===q||n!==r+e.strm.avail_in))break;s=t===ee&&n===r+e.strm.avail_in?1:0,V(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ee(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Re(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return(l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==q&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Re(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,a=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=a||(r||t===ee)&&t!==q&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===ee&&0===e.strm.avail_in&&n===r?1:0,V(e,e.block_start,n,s),e.block_start+=n,Ee(e.strm)),s?3:1)},Me=function(e,t){for(var n,r;;){if(e.lookahead<pe){if(Ne(e),e.lookahead<pe&&t===q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-pe&&(e.match_length=Ce(e,n)),e.match_length>=3)if(r=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=xe(e,e.ins_h,e.window[e.strstart+1]);else r=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2},We=function(e,t){for(var n,r,i;;){if(e.lookahead<pe){if(Ne(e),e.lookahead<pe&&t===q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-pe&&(e.match_length=Ce(e,n),e.match_length<=5&&(e.strategy===oe||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Ae(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=K(e,0,e.window[e.strstart-1]))&&Ae(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2};function Oe(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Ie=[new Oe(0,0,0,0,De),new Oe(4,4,8,4,Me),new Oe(4,5,16,8,Me),new Oe(4,6,32,32,Me),new Oe(4,4,16,16,We),new Oe(8,16,32,32,We),new Oe(8,16,128,128,We),new Oe(8,32,128,256,We),new Oe(32,128,258,1024,We),new Oe(32,258,258,4096,We)];function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ve,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Te=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==we&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==me&&t.status!==Ze?1:0},Ue=function(e){if(Te(e))return ge(e,ie);e.total_in=e.total_out=0,e.data_type=de;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?we:me,e.adler=2===t.wrap?0:1,t.last_flush=-2,G(t),ne},je=function(e){var t,n=Ue(e);return n===ne&&((t=e.state).window_size=2*t.w_size,be(t.head),t.max_lazy_match=Ie[t.level].max_lazy,t.good_match=Ie[t.level].good_length,t.nice_match=Ie[t.level].nice_length,t.max_chain_length=Ie[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},Be=function(e,t,n,r,i,a){if(!e)return ie;var s=1;if(t===le&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==ve||r<8||r>15||t<0||t>9||a<0||a>he||8===r&&1!==s)return ge(e,ie);8===r&&(r=9);var l=new Fe;return e.state=l,l.strm=e,l.status=we,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=3*(l.lit_bufsize-1),l.level=t,l.strategy=a,l.method=n,je(e)},Le={deflateInit:function(e,t){return Be(e,t,ve,15,8,fe)},deflateInit2:Be,deflateReset:je,deflateResetKeep:Ue,deflateSetHeader:function(e,t){return Te(e)||2!==e.state.wrap?ie:(e.state.gzhead=t,ne)},deflate:function(e,t){if(Te(e)||t>te||t<0)return e?ge(e,ie):ie;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Ze&&t!==ee)return ge(e,0===e.avail_out?se:ie);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Ee(e),0===e.avail_out)return n.last_flush=-1,ne}else if(0===e.avail_in&&ye(t)<=ye(r)&&t!==ee)return ge(e,se);if(n.status===Ze&&0!==e.avail_in)return ge(e,se);if(n.status===we&&0===n.wrap&&(n.status=me),n.status===we){var i=ve+(n.w_bits-8<<4)<<8;if(i|=(n.strategy>=ue||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(i|=32),ze(n,i+=31-i%31),0!==n.strstart&&(ze(n,e.adler>>>16),ze(n,65535&e.adler)),e.adler=1,n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne}if(57===n.status)if(e.adler=0,Se(n,31),Se(n,139),Se(n,8),n.gzhead)Se(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Se(n,255&n.gzhead.time),Se(n,n.gzhead.time>>8&255),Se(n,n.gzhead.time>>16&255),Se(n,n.gzhead.time>>24&255),Se(n,9===n.level?2:n.strategy>=ue||n.level<2?4:0),Se(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Se(n,255&n.gzhead.extra.length),Se(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=P(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Se(n,0),Se(n,0),Se(n,0),Se(n,0),Se(n,0),Se(n,9===n.level?2:n.strategy>=ue||n.level<2?4:0),Se(n,3),n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne;if(69===n.status){if(n.gzhead.extra){for(var a=n.pending,s=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+s>n.pending_buf_size;){var l=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+l),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>a&&(e.adler=P(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex+=l,Ee(e),0!==n.pending)return n.last_flush=-1,ne;a=0,s-=l}var o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>a&&(e.adler=P(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var u,c=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>c&&(e.adler=P(e.adler,n.pending_buf,n.pending-c,c)),Ee(e),0!==n.pending)return n.last_flush=-1,ne;c=0}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Se(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>c&&(e.adler=P(e.adler,n.pending_buf,n.pending-c,c)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var h,f=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>f&&(e.adler=P(e.adler,n.pending_buf,n.pending-f,f)),Ee(e),0!==n.pending)return n.last_flush=-1,ne;f=0}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Se(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>f&&(e.adler=P(e.adler,n.pending_buf,n.pending-f,f))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Ee(e),0!==n.pending))return n.last_flush=-1,ne;Se(n,255&e.adler),Se(n,e.adler>>8&255),e.adler=0}if(n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne}if(0!==e.avail_in||0!==n.lookahead||t!==q&&n.status!==Ze){var d=0===n.level?De(n,t):n.strategy===ue?function(e,t){for(var n;;){if(0===e.lookahead&&(Ne(e),0===e.lookahead)){if(t===q)return 1;break}if(e.match_length=0,n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===ce?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=_e){if(Ne(e),e.lookahead<=_e&&t===q)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+_e;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=_e-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2}(n,t):Ie[n.level].func(n,t);if(3!==d&&4!==d||(n.status=Ze),1===d||3===d)return 0===e.avail_out&&(n.last_flush=-1),ne;if(2===d&&(t===Q?$(n):t!==te&&(V(n,0,0,!1),t===J&&(be(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Ee(e),0===e.avail_out))return n.last_flush=-1,ne}return t!==ee?ne:n.wrap<=0?re:(2===n.wrap?(Se(n,255&e.adler),Se(n,e.adler>>8&255),Se(n,e.adler>>16&255),Se(n,e.adler>>24&255),Se(n,255&e.total_in),Se(n,e.total_in>>8&255),Se(n,e.total_in>>16&255),Se(n,e.total_in>>24&255)):(ze(n,e.adler>>>16),ze(n,65535&e.adler)),Ee(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ne:re)},deflateEnd:function(e){if(Te(e))return ie;var t=e.state.status;return e.state=null,t===me?ge(e,ae):ne},deflateSetDictionary:function(e,t){var n=t.length;if(Te(e))return ie;var r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==we||r.lookahead)return ie;if(1===i&&(e.adler=B(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(be(r.head),r.strstart=0,r.block_start=0,r.insert=0);var a=new Uint8Array(r.w_size);a.set(t.subarray(n-r.w_size,n),0),t=a,n=r.w_size}var s=e.avail_in,l=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ne(r);r.lookahead>=3;){var u=r.strstart,c=r.lookahead-2;do{r.ins_h=xe(r,r.ins_h,r.window[u+3-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++}while(--c);r.strstart=u,r.lookahead=2,Ne(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=l,e.input=o,e.avail_in=s,r.wrap=i,ne},deflateInfo:"pako deflate (from Nodeca project)"},Pe=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},He={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Pe(n,r)&&(e[r]=n[r])}}return e},flattenChunks:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),a=0,s=0,l=e.length;a<l;a++){var o=e[a];i.set(o,s),s+=o.length}return i}},Ye=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(vn){Ye=!1}for(var Ge=new Uint8Array(256),Ve=0;Ve<256;Ve++)Ge[Ve]=Ve>=252?6:Ve>=248?5:Ve>=240?4:Ve>=224?3:Ve>=192?2:1;Ge[254]=Ge[254]=1;var Xe={string2buf:function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,i,a,s=e.length,l=0;for(i=0;i<s;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),a=0,i=0;a<l;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:function(e,t){var n,r,i=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*i);for(r=0,n=0;n<i;){var s=e[n++];if(s<128)a[r++]=s;else{var l=Ge[s];if(l>4)a[r++]=65533,n+=l-1;else{for(s&=2===l?31:3===l?15:7;l>1&&n<i;)s=s<<6|63&e[n++],l--;l>1?a[r++]=65533:s<65536?a[r++]=s:(s-=65536,a[r++]=55296|s>>10&1023,a[r++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&Ye)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(a,r)},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+Ge[e[n]]>t?n:t}};var Ke=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$e=Object.prototype.toString,qe=Y.Z_NO_FLUSH,Qe=Y.Z_SYNC_FLUSH,Je=Y.Z_FULL_FLUSH,et=Y.Z_FINISH,tt=Y.Z_OK,nt=Y.Z_STREAM_END,rt=Y.Z_DEFAULT_COMPRESSION,it=Y.Z_DEFAULT_STRATEGY,at=Y.Z_DEFLATED;function st(e){this.options=He.assign({level:rt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:it},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0;var n=Le.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tt)throw new Error(H[n]);if(t.header&&Le.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"===typeof t.dictionary?Xe.string2buf(t.dictionary):"[object ArrayBuffer]"===$e.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Le.deflateSetDictionary(this.strm,r))!==tt)throw new Error(H[n]);this._dict_set=!0}}st.prototype.push=function(e,t){var n,r,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?et:qe,"string"===typeof e?i.input=Xe.string2buf(e):"[object ArrayBuffer]"===$e.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(r===Qe||r===Je)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=Le.deflate(i,r))===nt)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=Le.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tt;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},st.prototype.onData=function(e){this.chunks.push(e)},st.prototype.onEnd=function(e){e===tt&&(this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lt=16209,ot=function(e,t){var n,r,i,a,s,l,o,u,c,h,f,d,v,_,p,w,m,Z,g,y,b,k,x,E,A=e.state;n=e.next_in,x=e.input,r=n+(e.avail_in-5),i=e.next_out,E=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),l=A.dmax,o=A.wsize,u=A.whave,c=A.wnext,h=A.window,f=A.hold,d=A.bits,v=A.lencode,_=A.distcode,p=(1<<A.lenbits)-1,w=(1<<A.distbits)-1;e:do{d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),m=v[f&p];t:for(;;){if(f>>>=Z=m>>>24,d-=Z,0===(Z=m>>>16&255))E[i++]=65535&m;else{if(!(16&Z)){if(0===(64&Z)){m=v[(65535&m)+(f&(1<<Z)-1)];continue t}if(32&Z){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=lt;break e}g=65535&m,(Z&=15)&&(d<Z&&(f+=x[n++]<<d,d+=8),g+=f&(1<<Z)-1,f>>>=Z,d-=Z),d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),m=_[f&w];n:for(;;){if(f>>>=Z=m>>>24,d-=Z,!(16&(Z=m>>>16&255))){if(0===(64&Z)){m=_[(65535&m)+(f&(1<<Z)-1)];continue n}e.msg="invalid distance code",A.mode=lt;break e}if(y=65535&m,d<(Z&=15)&&(f+=x[n++]<<d,(d+=8)<Z&&(f+=x[n++]<<d,d+=8)),(y+=f&(1<<Z)-1)>l){e.msg="invalid distance too far back",A.mode=lt;break e}if(f>>>=Z,d-=Z,y>(Z=i-a)){if((Z=y-Z)>u&&A.sane){e.msg="invalid distance too far back",A.mode=lt;break e}if(b=0,k=h,0===c){if(b+=o-Z,Z<g){g-=Z;do{E[i++]=h[b++]}while(--Z);b=i-y,k=E}}else if(c<Z){if(b+=o+c-Z,(Z-=c)<g){g-=Z;do{E[i++]=h[b++]}while(--Z);if(b=0,c<g){g-=Z=c;do{E[i++]=h[b++]}while(--Z);b=i-y,k=E}}}else if(b+=c-Z,Z<g){g-=Z;do{E[i++]=h[b++]}while(--Z);b=i-y,k=E}for(;g>2;)E[i++]=k[b++],E[i++]=k[b++],E[i++]=k[b++],g-=3;g&&(E[i++]=k[b++],g>1&&(E[i++]=k[b++]))}else{b=i-y;do{E[i++]=E[b++],E[i++]=E[b++],E[i++]=E[b++],g-=3}while(g>2);g&&(E[i++]=E[b++],g>1&&(E[i++]=E[b++]))}break}}break}}while(n<r&&i<s);n-=g=d>>3,f&=(1<<(d-=g<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),A.hold=f,A.bits=d},ut=15,ct=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ft=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vt=function(e,t,n,r,i,a,s,l){var o,u,c,h,f,d,v,_,p,w=l.bits,m=0,Z=0,g=0,y=0,b=0,k=0,x=0,E=0,A=0,S=0,z=null,R=new Uint16Array(16),C=new Uint16Array(16),N=null;for(m=0;m<=ut;m++)R[m]=0;for(Z=0;Z<r;Z++)R[t[n+Z]]++;for(b=w,y=ut;y>=1&&0===R[y];y--);if(b>y&&(b=y),0===y)return i[a++]=20971520,i[a++]=20971520,l.bits=1,0;for(g=1;g<y&&0===R[g];g++);for(b<g&&(b=g),E=1,m=1;m<=ut;m++)if(E<<=1,(E-=R[m])<0)return-1;if(E>0&&(0===e||1!==y))return-1;for(C[1]=0,m=1;m<ut;m++)C[m+1]=C[m]+R[m];for(Z=0;Z<r;Z++)0!==t[n+Z]&&(s[C[t[n+Z]]++]=Z);if(0===e?(z=N=s,d=20):1===e?(z=ct,N=ht,d=257):(z=ft,N=dt,d=0),S=0,Z=0,m=g,f=a,k=b,x=0,c=-1,h=(A=1<<b)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=m-x,s[Z]+1<d?(_=0,p=s[Z]):s[Z]>=d?(_=N[s[Z]-d],p=z[s[Z]-d]):(_=96,p=0),o=1<<m-x,g=u=1<<k;do{i[f+(S>>x)+(u-=o)]=v<<24|_<<16|p|0}while(0!==u);for(o=1<<m-1;S&o;)o>>=1;if(0!==o?(S&=o-1,S+=o):S=0,Z++,0===--R[m]){if(m===y)break;m=t[n+s[Z]]}if(m>b&&(S&h)!==c){for(0===x&&(x=b),f+=g,E=1<<(k=m-x);k+x<y&&!((E-=R[k+x])<=0);)k++,E<<=1;if(A+=1<<k,1===e&&A>852||2===e&&A>592)return 1;i[c=S&h]=b<<24|k<<16|f-a|0}}return 0!==S&&(i[f+S]=m-x<<24|64<<16|0),l.bits=b,0},_t=Y.Z_FINISH,pt=Y.Z_BLOCK,wt=Y.Z_TREES,mt=Y.Z_OK,Zt=Y.Z_STREAM_END,gt=Y.Z_NEED_DICT,yt=Y.Z_STREAM_ERROR,bt=Y.Z_DATA_ERROR,kt=Y.Z_MEM_ERROR,xt=Y.Z_BUF_ERROR,Et=Y.Z_DEFLATED,At=16180,St=16190,zt=16191,Rt=16192,Ct=16194,Nt=16199,Dt=16200,Mt=16206,Wt=16209,Ot=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function It(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ft,Tt,Ut=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<At||t.mode>16211?1:0},jt=function(e){if(Ut(e))return yt;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=At,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt},Bt=function(e){if(Ut(e))return yt;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,jt(e)},Lt=function(e,t){var n;if(Ut(e))return yt;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?yt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Bt(e))},Pt=function(e,t){if(!e)return yt;var n=new It;e.state=n,n.strm=e,n.window=null,n.mode=At;var r=Lt(e,t);return r!==mt&&(e.state=null),r},Ht=!0,Yt=function(e){if(Ht){Ft=new Int32Array(512),Tt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(vt(1,e.lens,0,288,Ft,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;vt(2,e.lens,0,32,Tt,0,e.work,{bits:5}),Ht=!1}e.lencode=Ft,e.lenbits=9,e.distcode=Tt,e.distbits=5},Gt=function(e,t,n,r){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Vt={inflateReset:Bt,inflateReset2:Lt,inflateResetKeep:jt,inflateInit:function(e){return Pt(e,15)},inflateInit2:Pt,inflate:function(e,t){var n,r,i,a,s,l,o,u,c,h,f,d,v,_,p,w,m,Z,g,y,b,k,x,E,A=0,S=new Uint8Array(4),z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ut(e)||!e.output||!e.input&&0!==e.avail_in)return yt;(n=e.state).mode===zt&&(n.mode=Rt),s=e.next_out,i=e.output,o=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,u=n.hold,c=n.bits,h=l,f=o,k=mt;e:for(;;)switch(n.mode){case At:if(0===n.wrap){n.mode=Rt;break}for(;c<16;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0),u=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Wt;break}if((15&u)!==Et){e.msg="unknown compression method",n.mode=Wt;break}if(c-=4,b=8+(15&(u>>>=4)),0===n.wbits&&(n.wbits=b),b>15||b>n.wbits){e.msg="invalid window size",n.mode=Wt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:zt,u=0,c=0;break;case 16181:for(;c<16;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==Et){e.msg="unknown compression method",n.mode=Wt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Wt;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=P(n.check,S,4,0)),u=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((d=n.length)>l&&(d=l),d&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+d),b)),512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),l-=d,a+=d,n.length-=d),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===l)break e;d=0;do{b=r[a+d++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b))}while(b&&d<l);if(512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),l-=d,a+=d,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===l)break e;d=0;do{b=r[a+d++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b))}while(b&&d<l);if(512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),l-=d,a+=d,b)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Wt;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=zt;break;case 16189:for(;c<32;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}e.adler=n.check=Ot(u),u=0,c=0,n.mode=St;case St:if(0===n.havedict)return e.next_out=s,e.avail_out=o,e.next_in=a,e.avail_in=l,n.hold=u,n.bits=c,gt;e.adler=n.check=1,n.mode=zt;case zt:if(t===pt||t===wt)break e;case Rt:if(n.last){u>>>=7&c,c-=7&c,n.mode=Mt;break}for(;c<3;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(Yt(n),n.mode=Nt,t===wt){u>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Wt}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Wt;break}if(n.length=65535&u,u=0,c=0,n.mode=Ct,t===wt)break e;case Ct:n.mode=16195;case 16195:if(d=n.length){if(d>l&&(d=l),d>o&&(d=o),0===d)break e;i.set(r.subarray(a,a+d),s),l-=d,a+=d,o-=d,s+=d,n.length-=d;break}n.mode=zt;break;case 16196:for(;c<14;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Wt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.lens[z[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},k=vt(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid code lengths set",n.mode=Wt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;w=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&A,!((p=A>>>24)<=c);){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(m<16)u>>>=p,c-=p,n.lens[n.have++]=m;else{if(16===m){for(E=p+2;c<E;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(u>>>=p,c-=p,0===n.have){e.msg="invalid bit length repeat",n.mode=Wt;break}b=n.lens[n.have-1],d=3+(3&u),u>>>=2,c-=2}else if(17===m){for(E=p+3;c<E;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}c-=p,b=0,d=3+(7&(u>>>=p)),u>>>=3,c-=3}else{for(E=p+7;c<E;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}c-=p,b=0,d=11+(127&(u>>>=p)),u>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Wt;break}for(;d--;)n.lens[n.have++]=b}}if(n.mode===Wt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Wt;break}if(n.lenbits=9,x={bits:n.lenbits},k=vt(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid literal/lengths set",n.mode=Wt;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},k=vt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,k){e.msg="invalid distances set",n.mode=Wt;break}if(n.mode=Nt,t===wt)break e;case Nt:n.mode=Dt;case Dt:if(l>=6&&o>=258){e.next_out=s,e.avail_out=o,e.next_in=a,e.avail_in=l,n.hold=u,n.bits=c,ot(e,f),s=e.next_out,i=e.output,o=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,u=n.hold,c=n.bits,n.mode===zt&&(n.back=-1);break}for(n.back=0;w=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&A,!((p=A>>>24)<=c);){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(w&&0===(240&w)){for(Z=p,g=w,y=m;w=(A=n.lencode[y+((u&(1<<Z+g)-1)>>Z)])>>>16&255,m=65535&A,!(Z+(p=A>>>24)<=c);){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}u>>>=Z,c-=Z,n.back+=Z}if(u>>>=p,c-=p,n.back+=p,n.length=m,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=zt;break}if(64&w){e.msg="invalid literal/length code",n.mode=Wt;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;c<E;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;w=(A=n.distcode[u&(1<<n.distbits)-1])>>>16&255,m=65535&A,!((p=A>>>24)<=c);){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(0===(240&w)){for(Z=p,g=w,y=m;w=(A=n.distcode[y+((u&(1<<Z+g)-1)>>Z)])>>>16&255,m=65535&A,!(Z+(p=A>>>24)<=c);){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}u>>>=Z,c-=Z,n.back+=Z}if(u>>>=p,c-=p,n.back+=p,64&w){e.msg="invalid distance code",n.mode=Wt;break}n.offset=m,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;c<E;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Wt;break}n.mode=16204;case 16204:if(0===o)break e;if(d=f-o,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Wt;break}d>n.wnext?(d-=n.wnext,v=n.wsize-d):v=n.wnext-d,d>n.length&&(d=n.length),_=n.window}else _=i,v=s-n.offset,d=n.length;d>o&&(d=o),o-=d,n.length-=d;do{i[s++]=_[v++]}while(--d);0===n.length&&(n.mode=Dt);break;case 16205:if(0===o)break e;i[s++]=n.length,o--,n.mode=Dt;break;case Mt:if(n.wrap){for(;c<32;){if(0===l)break e;l--,u|=r[a++]<<c,c+=8}if(f-=o,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?P(n.check,i,f,s-f):B(n.check,i,f,s-f)),f=o,4&n.wrap&&(n.flags?u:Ot(u))!==n.check){e.msg="incorrect data check",n.mode=Wt;break}u=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===l)break e;l--,u+=r[a++]<<c,c+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Wt;break}u=0,c=0}n.mode=16208;case 16208:k=Zt;break e;case Wt:k=bt;break e;case 16210:return kt;default:return yt}return e.next_out=s,e.avail_out=o,e.next_in=a,e.avail_in=l,n.hold=u,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<Wt&&(n.mode<Mt||t!==_t))&&Gt(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?P(n.check,i,f,e.next_out-f):B(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===zt?128:0)+(n.mode===Nt||n.mode===Ct?256:0),(0===h&&0===f||t===_t)&&k===mt&&(k=xt),k},inflateEnd:function(e){if(Ut(e))return yt;var t=e.state;return t.window&&(t.window=null),e.state=null,mt},inflateGetHeader:function(e,t){if(Ut(e))return yt;var n=e.state;return 0===(2&n.wrap)?yt:(n.head=t,t.done=!1,mt)},inflateSetDictionary:function(e,t){var n,r=t.length;return Ut(e)||0!==(n=e.state).wrap&&n.mode!==St?yt:n.mode===St&&B(1,t,r,0)!==n.check?bt:Gt(e,t,r,r)?(n.mode=16210,kt):(n.havedict=1,mt)},inflateInfo:"pako inflate (from Nodeca project)"};var Xt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Kt=Object.prototype.toString,$t=Y.Z_NO_FLUSH,qt=Y.Z_FINISH,Qt=Y.Z_OK,Jt=Y.Z_STREAM_END,en=Y.Z_NEED_DICT,tn=Y.Z_STREAM_ERROR,nn=Y.Z_DATA_ERROR,rn=Y.Z_MEM_ERROR;function an(e){this.options=He.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0;var n=Vt.inflateInit2(this.strm,t.windowBits);if(n!==Qt)throw new Error(H[n]);if(this.header=new Xt,Vt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Xe.string2buf(t.dictionary):"[object ArrayBuffer]"===Kt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vt.inflateSetDictionary(this.strm,t.dictionary))!==Qt))throw new Error(H[n])}function sn(e,t){var n=new an(t);if(n.push(e),n.err)throw n.msg||H[n.err];return n.result}an.prototype.push=function(e,t){var n,r,i,a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?qt:$t,"[object ArrayBuffer]"===Kt.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(n=Vt.inflate(a,r))===en&&l&&((n=Vt.inflateSetDictionary(a,l))===Qt?n=Vt.inflate(a,r):n===nn&&(n=en));a.avail_in>0&&n===Jt&&a.state.wrap>0&&0!==e[a.next_in];)Vt.inflateReset(a),n=Vt.inflate(a,r);switch(n){case tn:case nn:case en:case rn:return this.onEnd(n),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||n===Jt))if("string"===this.options.to){var o=Xe.utf8border(a.output,a.next_out),u=a.next_out-o,c=Xe.buf2string(a.output,o);a.next_out=u,a.avail_out=s-u,u&&a.output.set(a.output.subarray(o,o+u),0),this.onData(c)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(n!==Qt||0!==i){if(n===Jt)return n=Vt.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},an.prototype.onData=function(e){this.chunks.push(e)},an.prototype.onEnd=function(e){e===Qt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ln={Inflate:an,inflate:sn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,sn(e,t)},ungzip:sn,constants:Y},on=ln.Inflate,un=ln.inflate,cn=ln.ungzip,hn=on,fn=un,dn=cn},5941:function(e,t,n){n.d(t,{NC:function(){return i},Yd:function(){return a},xW:function(){return s}});var r=n(8782);function i(e,t){r.RE((function(n){return n.FS.writeFile(e,t)}))}function a(e){r.RE((function(t){return t.FS.unlink(e)}))}function s(e){return r.RE((function(t){return t.FS.analyzePath(e).exists}))}},489:function(e,t,n){n.d(t,{NC:function(){return i},Yd:function(){return a},xW:function(){return s}});var r=n(5941);function i(e,t){r.NC(e,t)}function a(e){s(e)&&r.Yd(e)}function s(e){return r.xW(e)}},6126:function(e,t,n){n.d(t,{Fv:function(){return W},pT:function(){return I}});var r=n(2415),i=n(7326),a=n(136),s=n(9388),l=n(3324),o=n(5671),u=n(3144),c=n(101),h=n(2346),f=n(3889),d=n(8916),v=n(2793),_=n(7762),p=n(6635),w=n(8782),m=n(6774),Z=n(4292);function g(e,t){if(t.length>0){var n=t.reduce((function(e,t){return e*t}));if(e.length!=n)throw new Error("length of 'x' must be equal to the product of 'shape'")}else if(e instanceof Array||ArrayBuffer.isView(e)){if(1!=e.length)throw new Error("length of 'x' should be 1 for a scalar dataset")}else e=[e];return e}function y(e,t){return null===t?"string"==typeof e||"number"==typeof e?(e=[e],t=[]):t=[e.length]:e=g(e,t),{x:e,shape:t}}function b(e){if(Array.isArray(e)){var t,n=(0,_.Z)(e);try{for(n.s();!(t=n.n()).done;){if("string"===typeof t.value)throw new Error("'x' should not contain any strings for a non-string HDF5 dataset")}}catch(r){n.e(r)}finally{n.f()}}}function k(e){var t=0;return e.array().forEach((function(e){t<e&&(t=e)})),t}function x(e,t,n){if(null!==t){var r,i=(0,_.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!Number.isInteger(a)||a<0||a>=t.length)throw new Error("'"+n+"' must contain non-negative integers less than 'levels.length' for 'type = \"Enum\"'")}}catch(u){i.e(u)}finally{i.f()}}else{var s=Z.KB(e,{asWasmArray:!1});e=s.ids,t=s.levels;var l,o=(0,_.Z)(t);try{for(o.s();!(l=o.n()).done;){if("string"!==typeof l.value)throw new Error("'"+n+"' should only contain string levels for 'type = \"Enum\"'")}}catch(u){o.e(u)}finally{o.f()}}return{values:e,levels:t}}var E=new WeakMap,A=new WeakMap,S=new WeakMap,z=new WeakSet,R=function(){function e(t,n){(0,o.Z)(this,e),(0,c.Z)(this,z),(0,h.Z)(this,E,{writable:!0,value:void 0}),(0,h.Z)(this,A,{writable:!0,value:void 0}),(0,h.Z)(this,S,{writable:!0,value:void 0}),(0,v.Z)(this,E,t),(0,v.Z)(this,A,n)}return(0,u.Z)(e,[{key:"file",get:function(){return(0,d.Z)(this,E)}},{key:"name",get:function(){return(0,d.Z)(this,A)}},{key:"attributes",get:function(){return(0,d.Z)(this,S)}},{key:"set_attributes",value:function(e){(0,v.Z)(this,S,e)}},{key:"readAttribute",value:function(e){var t=this,n={values:null,shape:null},r=w.RE((function(n){return new n.LoadedH5Attr(t.file,t.name,e)}));try{n.shape=Array.from(r.shape());var i=r.type();if("other"==i)throw new Error("cannot load dataset for an unsupported type");"String"==i?n.values=m.b(r.string_buffer(),r.string_lengths()):"Enum"==i?(n.values=r.numeric_values().slice(),n.levels=m.b(r.string_buffer(),r.string_lengths())):n.values=r.numeric_values().slice()}finally{r.delete()}return n}},{key:"writeAttribute",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=a.maxStringLength,o=void 0===s?null:s,u=a.levels,c=void 0===u?null:u;if(null===r)throw new Error("cannot write 'null' to HDF5");var h=y(r,n);if(r=h.x,n=h.shape,"String"==t){var d=m.C(r),v=(0,l.Z)(d,2),_=v[0],Z=v[1];try{null==o&&(o=k(_)),(0,f.Z)(this,z,C).call(this,e,t,n,{maxStringLength:o}),w.RE((function(t){return t.write_string_hdf5_attribute(i.file,i.name,e,_.length,_.offset,Z.offset)}))}finally{p.gd(Z),p.gd(_)}}else if("Enum"==t){var g=x(r,c,"x"),E=p.de(g.values,"Int32WasmArray");try{(0,f.Z)(this,z,C).call(this,e,t,n,{levels:g.levels}),w.RE((function(t){return t.write_enum_hdf5_attribute(i.file,i.name,e,E.offset)}))}finally{E.free()}}else{b(r);var A=p.de(r,null);try{(0,f.Z)(this,z,C).call(this,e,t,n),w.RE((function(t){return t.write_numeric_hdf5_attribute(i.file,i.name,e,A.constructor.className,A.offset)}))}finally{A.free()}}}}]),e}();function C(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.maxStringLength,s=void 0===a?null:a,o=i.levels,u=void 0===o?null:o,c=p.de(n,"Int32WasmArray");try{if("String"==t)w.RE((function(t){return t.create_string_hdf5_attribute(r.file,r.name,e,c.length,c.offset,s)}));else if("Enum"==t){if(null==u)throw new Error("levels must be supplied if 'type = \"Enum\"'");var h=m.C(u),f=(0,l.Z)(h,2),v=f[0],_=f[1];w.RE((function(t){return t.create_enum_hdf5_attribute(r.file,r.name,e,c.length,c.offset,v.length,v.offset,_.offset)}))}else w.RE((function(n){return n.create_numeric_hdf5_attribute(r.file,r.name,e,c.length,c.offset,t)}));(0,d.Z)(this,S).push(e)}finally{c.free()}}var N=new WeakMap,D=new WeakMap,M=new WeakSet,W=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var a,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).newlyCreated,l=void 0!==s&&s;if((0,o.Z)(this,n),a=t.call(this,e,r),(0,c.Z)((0,i.Z)(a),M),(0,h.Z)((0,i.Z)(a),N,{writable:!0,value:void 0}),(0,h.Z)((0,i.Z)(a),D,{writable:!0,value:void 0}),l)(0,v.Z)((0,i.Z)(a),N,{}),a.set_attributes([]);else{var u=w.RE((function(t){return new t.H5GroupDetails(e,r)}));try{var f=m.b(u.child_buffer(),u.child_lengths()),_=u.child_types(),p=["Group","DataSet","Other"];(0,v.Z)((0,i.Z)(a),N,{});for(var Z=0;Z<f.length;Z++)(0,d.Z)((0,i.Z)(a),N)[f[Z]]=p[_[Z]];var g=m.b(u.attr_buffer(),u.attr_lengths());a.set_attributes(g)}finally{u.delete()}}return a}return(0,u.Z)(n,[{key:"children",get:function(){return(0,d.Z)(this,N)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,f.Z)(this,M,O).call(this,e);if(e in(0,d.Z)(this,N)){if("Group"==(0,d.Z)(this,N)[e])return new n(this.file,r,t);if("DataSet"==(0,d.Z)(this,N)[e])return new L(this.file,r,t);throw new Error("don't know how to open '"+e+"'")}throw new Error("no '"+e+"' child in this HDF5 Group")}},{key:"createGroup",value:function(e){var t=this,r=(0,f.Z)(this,M,O).call(this,e);if(e in this.children){if("Group"==this.children[e])return new n(this.file,r);throw new Error("existing child '"+r+"' is not a HDF5 group")}return w.RE((function(e){return e.create_hdf5_group(t.file,r)})),this.children[e]="Group",new n(this.file,r,{newlyCreated:!0})}},{key:"createDataSet",value:function(e,t,n){var r,i,a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=s.maxStringLength,u=void 0===o?10:o,c=s.levels,h=void 0===c?null:c,d=s.compression,v=void 0===d?6:d,_=s.chunks,Z=void 0===_?null:_,g=(0,f.Z)(this,M,O).call(this,e);try{var y=(r=p.de(n,"Int32WasmArray")).offset;if(null!==Z){if((i=p.de(Z,"Int32WasmArray")).length!=r.length)throw new Error("'chunks' and 'shape' should have the same dimensions");y=i.offset}if("String"==t)w.RE((function(e){return e.create_string_hdf5_dataset(a.file,g,r.length,r.offset,v,y,u)}));else if("Enum"==t){if(null==h)throw new Error("levels must be supplied if 'type = \"Enum\"'");var b=m.C(h),k=(0,l.Z)(b,2),x=k[0],E=k[1];w.RE((function(e){return e.create_enum_hdf5_dataset(a.file,g,r.length,r.offset,v,y,x.length,x.offset,E.offset)}))}else w.RE((function(e){return e.create_numeric_hdf5_dataset(a.file,g,r.length,r.offset,v,y,t)}))}finally{r.free()}return this.children[e]="DataSet",new L(this.file,g,{newlyCreated:!0,type:t,shape:n})}},{key:"writeDataSet",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.levels,s=void 0===a?null:a,o=i.compression,u=void 0===o?6:o,c=i.chunks,h=void 0===c?null:c,f=i.cache,d=void 0!==f&&f;if(null===r)throw new Error("cannot write 'null' to HDF5");var v,_=y(r,n);if(r=_.x,n=_.shape,"String"==t){var Z=m.C(r),g=(0,l.Z)(Z,2),b=g[0],E=g[1];try{var A=k(b);v=this.createDataSet(e,"String",n,{maxStringLength:A,compression:u,chunks:h}),w.RE((function(e){return e.write_string_hdf5_dataset(v.file,v.name,b.length,b.offset,E.offset)}))}finally{p.gd(b),p.gd(E)}v.cache_loaded(r,d)}else if("Enum"==t){var S=x(r,s,"x");(v=this.createDataSet(e,t,n,{levels:S.levels,compression:u,chunks:h})).write(S.values,{cache:d})}else(v=this.createDataSet(e,t,n,{compression:u,chunks:h})).write(r,{cache:d});return v}}]),n}(R);function O(e){var t=this.name;return"/"!=t&&(t+="/"),t+=e}var I=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,n),t.call(this,e,"/",r)}return(0,u.Z)(n)}(W);var F=new WeakMap,T=new WeakMap,U=new WeakMap,j=new WeakMap,B=new WeakMap,L=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=l.load,c=void 0!==u&&u,f=l.newlyCreated,d=void 0!==f&&f,_=l.shape,p=void 0===_?null:_,Z=l.type,g=void 0===Z?null:Z,y=l.values,b=void 0===y?null:y;if((0,o.Z)(this,n),s=t.call(this,e,a),(0,h.Z)((0,i.Z)(s),F,{writable:!0,value:void 0}),(0,h.Z)((0,i.Z)(s),T,{writable:!0,value:void 0}),(0,h.Z)((0,i.Z)(s),U,{writable:!0,value:void 0}),(0,h.Z)((0,i.Z)(s),j,{writable:!0,value:void 0}),(0,h.Z)((0,i.Z)(s),B,{writable:!0,value:void 0}),d){if(null===p||null===g)throw new Error("need to pass 'shape' and 'type' if 'newlyCreated = true'");(0,v.Z)((0,i.Z)(s),F,p),(0,v.Z)((0,i.Z)(s),T,g),(0,v.Z)((0,i.Z)(s),U,b),(0,v.Z)((0,i.Z)(s),B,null!==b),s.set_attributes([])}else{if(c){var k=(0,r.Z)(n,n,P).call(n,e,a);(0,v.Z)((0,i.Z)(s),T,k.type),(0,v.Z)((0,i.Z)(s),F,k.shape),(0,v.Z)((0,i.Z)(s),U,k.values),(0,v.Z)((0,i.Z)(s),j,k.levels),s.set_attributes(k.attributes)}else{var x=w.RE((function(t){return new t.H5DataSetDetails(e,a)}));try{(0,v.Z)((0,i.Z)(s),T,x.type()),(0,v.Z)((0,i.Z)(s),F,Array.from(x.shape())),(0,v.Z)((0,i.Z)(s),U,null),s.set_attributes(m.b(x.attr_buffer(),x.attr_lengths()))}finally{x.delete()}}(0,v.Z)((0,i.Z)(s),B,c)}return s}return(0,u.Z)(n,[{key:"type",get:function(){return(0,d.Z)(this,T)}},{key:"shape",get:function(){return(0,d.Z)(this,F)}},{key:"loaded",get:function(){return(0,d.Z)(this,B)}},{key:"values",get:function(){return(0,d.Z)(this,U)}},{key:"levels",get:function(){return(0,d.Z)(this,j)}},{key:"load",value:function(){if(!(0,d.Z)(this,B)){var e=(0,r.Z)(n,n,P).call(n,this.file,this.name);(0,v.Z)(this,U,e.values),(0,v.Z)(this,B,!0)}return(0,d.Z)(this,U)}},{key:"cache_loaded",value:function(e,t){t?((0,v.Z)(this,U,e.slice()),(0,v.Z)(this,B,!0)):((0,v.Z)(this,B,!1),(0,v.Z)(this,U,null))}},{key:"write",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cache,r=void 0!==n&&n;if(null===e)throw new Error("cannot write 'null' to HDF5");if(e=g(e,this.shape),"String"==this.type){var i=m.C(e),a=(0,l.Z)(i,2),s=a[0],o=a[1];try{w.RE((function(e){return e.write_string_hdf5_dataset(t.file,t.name,s.length,s.offset,o.offset)}))}finally{p.gd(o),p.gd(s)}this.cache_loaded(e,r)}else if("Enum"==this.type){var u=p.de(e,"Int32WasmArray");try{w.RE((function(e){return e.write_enum_hdf5_dataset(t.file,t.name,u.offset)}))}finally{u.free()}}else{b(e);var c=p.de(e,null);try{w.RE((function(e){return e.write_numeric_hdf5_dataset(t.file,t.name,c.constructor.className,c.offset)})),this.cache_loaded(c,r)}finally{c.free()}}}}]),n}(R);function P(e,t){var n,r,i,a,s=null,l=w.RE((function(n){return new n.LoadedH5DataSet(e,t)}));try{if("other"==(r=l.type()))throw new Error("cannot load dataset for an unsupported type");"String"==r?n=m.b(l.string_buffer(),l.string_lengths()):"Enum"==r?(n=l.numeric_values().slice(),s=m.b(l.string_buffer(),l.string_lengths())):n=l.numeric_values().slice(),i=Array.from(l.shape()),a=m.b(l.attr_buffer(),l.attr_lengths())}finally{l.delete()}return{values:n,type:r,shape:i,levels:s,attributes:a}}},5831:function(e,t,n){n.d(t,{$H:function(){return T.$},BA:function(){return s.BA},Bp:function(){return a.Bp},Bs:function(){return M.B},Cb:function(){return g.C},D4:function(){return u.D4},D6:function(){return s.D6},DS:function(){return u.DS},EF:function(){return a.EF},F5:function(){return R.F},Fu:function(){return E.Fu},Fv:function(){return l.Fv},II:function(){return s.II},J4:function(){return _.J4},KV:function(){return h.KV},Lw:function(){return p.Lw},N6:function(){return a.N6},OV:function(){return N.OV},Os:function(){return D.Os},Qj:function(){return D.Qj},RJ:function(){return i.RJ},SV:function(){return s.SV},St:function(){return D.St},TS:function(){return i.TS},Tk:function(){return S.Tk},VU:function(){return F.V},Wf:function(){return i.Wf},XU:function(){return m.XU},Y8:function(){return k.Y},Yh:function(){return c.Yh},ZI:function(){return A.ZI},ZW:function(){return f.ZW},_3:function(){return a._3},aG:function(){return x.dO},bD:function(){return A.bD},b_:function(){return Z.b},eu:function(){return z.eu},fw:function(){return u.fw},gd:function(){return i.gd},gk:function(){return y.g},gn:function(){return o.g},j2:function(){return r.j2},j4:function(){return u.j4},jX:function(){return C.j},nO:function(){return w.nO},o1:function(){return I.p},p$:function(){return s.p$},p4:function(){return O.p},pG:function(){return D.pG},pT:function(){return l.pT},qu:function(){return s.qu},rY:function(){return b.rY},tY:function(){return D.tY},us:function(){return a.us},v_:function(){return y.v},vc:function(){return f.vc},vy:function(){return v.dH},wf:function(){return E.wf},wj:function(){return d.wj},xw:function(){return W.x},y5:function(){return N.y5}});var r=n(8782),i=n(6635),a=n(8311),s=n(6663),l=(n(489),n(6126)),o=(n(118),n(2284)),u=n(5644),c=n(4292),h=n(5470),f=n(1196),d=(n(5219),n(5448)),v=n(9206),_=n(2945),p=n(7339),w=n(6757),m=n(4609),Z=n(8420),g=(n(845),n(9283),n(6974)),y=n(1184),b=n(4812),k=n(6199),x=n(5159),E=n(7067),A=n(9273),S=n(4181),z=(n(5319),n(2494)),R=n(5696),C=n(2732),N=n(9249),D=n(3779),M=n(7039),W=n(5538),O=(n(7644),n(6961)),I=n(2306),F=n(4021),T=n(4755)},4755:function(e,t,n){n.d(t,{$:function(){return a}});var r=n(489),i=n(3102);function a(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).extension,n=void 0===t?"":t;if("string"==typeof e)return i.z(e);var a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).extension,t=void 0===e?"":e;return i.E("temp_",t)}({extension:n});return r.NC(a,e),{path:a,flush:function(){return r.Yd(a)}}}},118:function(e,t,n){n(6126),n(8782)}}]);
//# sourceMappingURL=463.a96a601f.chunk.js.map