{"version":3,"file":"static/js/627.82103902.chunk.js","mappings":"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","sources":["../node_modules/epiviz.gl/dist/rgb-6a05388e.js","../node_modules/epiviz.gl/dist/specification-processor-c99b2c15.js","../node_modules/epiviz.gl/dist/offscreen-webgl-worker-024e95ad.js"],"sourcesContent":["function formatDecimal(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nfunction formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n\nfunction exponent(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n\nfunction formatGroup(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n\nfunction formatNumerals(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n\n// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nfunction formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n\n// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nfunction formatTrim(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n\nvar prefixExponent;\n\nfunction formatPrefixAuto(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n\nfunction formatRounded(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n\nvar formatTypes = {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n\nfunction identity(x) {\n  return x;\n}\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction formatLocale(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n\nvar locale;\nvar format;\nvar formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nfunction defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n\nfunction precisionRound(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n\n/**\n * Create a function which maps a genome pair to a location in the entire genome\n *\n * @param {String} genomeId key from genomeSizes object\n * @returns a function which maps a (chrId, pairNum) => to\n *  a number between 1 and total number of genes in the genome\n */\nconst createPairMapperToGenome = (genomeId) => {\n  let chrSizes = genomeSizes[genomeId];\n\n  let chrStarts = new Map();\n  let cumulativeTotal = 0;\n  chrSizes.forEach((value, key) => {\n    chrStarts.set(key, cumulativeTotal);\n    cumulativeTotal += value;\n  });\n\n  return (chr, pairNum) => {\n    return chrStarts.get(chr) + pairNum;\n  };\n};\n\nclass GenomeScale {\n  /**\n   * A scale used to map a genome pair to a location between -1 and 1 for data visualization.\n   * Also contains inverse and utility functions for getting labels for axis.\n   *\n   * @param {String} genomeId key from genomeSizes object\n   * @param {Array} domain array of length 2 containing the start and end of the genome\n   *   for the scale. ex: [\"chr2:1000\", \"chr3:2000\"]\n   */\n  constructor(genomeId, domain) {\n    if (genomeSizes[genomeId] === undefined) {\n      console.error(`${genomeId} is not a recognized genome!`);\n    }\n    this.genomeId = genomeId;\n    this.domain = domain;\n\n    let [startChr, startPair] = domain[0]\n      .substring(3) // Remove chr\n      .split(\":\"); // split chromesome and pair number\n    startPair = parseInt(startPair);\n\n    let [endChr, endPair] = domain[1].substring(3).split(\":\");\n    endPair = parseInt(endPair);\n\n    this.mapPairToGenomeIndex = createPairMapperToGenome(genomeId);\n    const firstPairInDomain = this.mapPairToGenomeIndex(startChr, startPair);\n    const lastPairInDomain = this.mapPairToGenomeIndex(endChr, endPair);\n    this.mapGenomeIndexToClipSpace = scale(\n      [firstPairInDomain, lastPairInDomain],\n      [-1, 1]\n    );\n    this.mapGenomeIndexToClipSpaceInverse = scale(\n      [-1, 1],\n      [firstPairInDomain, lastPairInDomain]\n    );\n  }\n\n  /**\n   * Map a genome pair to [-1, 1] with the parts.\n   *\n   * @param {String} chr id of chromosome in genome\n   * @param {Number} pair location in chromosome\n   * @returns value in [-1, 1] corresponding to genome range location\n   */\n  toClipSpaceFromParts(chr, pair) {\n    return this.mapGenomeIndexToClipSpace(this.mapPairToGenomeIndex(chr, pair));\n  }\n\n  /**\n   * Utility method for calling this.toClipSpaceFromParts.\n   *\n   * @param {String} pairStr in form \"chrID:geneNumber\" ex: \"chr1:1000\"\n   * @returns value in [-1, 1] corresponding to genome range location\n   */\n  toClipSpaceFromString(pairStr) {\n    let [chr, pair] = pairStr.substring(3).split(\":\");\n    pair = parseInt(pair);\n    return this.toClipSpaceFromParts(chr, pair);\n  }\n\n  /**\n   * Get the gene id from a value between [-1, 1]\n   *\n   * @param {Number} num number between [-1, 1]\n   * @param {String} formatting used for formatting gene number with d3-format\n   * @returns `chr${chrId}:${chrLoc}`\n   */\n  inverse(num, formatting = false) {\n    let genomeSpot = Math.floor(this.mapGenomeIndexToClipSpaceInverse(num));\n    let chrId;\n    let chrLoc;\n    let cumulativeTotal = 0;\n    for (const [chrKey, pairCount] of genomeSizes[this.genomeId].entries()) {\n      if (cumulativeTotal + pairCount >= genomeSpot) {\n        chrLoc = genomeSpot - cumulativeTotal;\n        chrId = chrKey;\n        break;\n      }\n      cumulativeTotal += pairCount;\n    }\n\n    return formatting\n      ? `chr${chrId}:${format(formatting)(chrLoc)}`\n      : `chr${chrId}:${chrLoc}`;\n  }\n\n  getMidpoint(chr1, gene1, chr2, gene2) {\n    const x1 = this.toClipSpaceFromParts(chr1, gene1);\n    const x2 = this.toClipSpaceFromParts(chr2, gene2);\n    const middleGene = this.inverse((x1 + x2) / 2);\n    const [chrId, gene] = middleGene.substring(3).split(\":\");\n    return [chrId, parseInt(gene)];\n  }\n\n  /**\n   * Get a sequence of ticks for a range in the genome.\n   *\n   * @param {Number} start number between [-1, 1]\n   * @param {Number} end number between [-1, 1] > start\n   * @returns object with tickCoords and corresponding tickLabels property\n   */\n  getTickCoordsAndLabels(start, end) {\n    let [startChr, startPair] = this.inverse(start).substring(3).split(\":\");\n    let [endChr, endPair] = this.inverse(end).substring(3).split(\":\");\n\n    const toReturn = [];\n    let suggestedFormat;\n    if (startChr === endChr) {\n      let difference = endPair - startPair;\n      let magnitude = Math.floor(Math.log10(difference));\n      let startingValue = startPair - (startPair % 10 ** magnitude);\n      suggestedFormat = precisionRound(10 ** magnitude, startingValue);\n\n      for (\n        let currValue = startingValue;\n        currValue < endPair;\n        currValue += 10 ** magnitude\n      ) {\n        toReturn.push(this.toClipSpaceFromParts(startChr, currValue));\n      }\n    } else {\n      suggestedFormat = \"1\";\n      for (const chrId of genomeSizes[this.genomeId].keys()) {\n        toReturn.push(this.toClipSpaceFromParts(chrId, 1));\n      }\n    }\n    return {\n      tickCoords: toReturn,\n      tickLabels: toReturn.map((coord) =>\n        this.inverse(coord, format(`.${suggestedFormat}s`))\n      ),\n    };\n  }\n\n  toCallable() {\n    // TODO investigate if using this method in the vertex calculator leads to slow downs\n    const func = (args) => {\n      return this.toClipSpaceFromParts(args[0], args[1]);\n    };\n    func.isGenomeScale = true;\n    func.mapGenomeIndexToClipSpaceInverse =\n      this.mapGenomeIndexToClipSpaceInverse.bind(this);\n    func.getMidpoint = this.getMidpoint.bind(this);\n    func.getTickCoordsAndLabels = this.getTickCoordsAndLabels.bind(this);\n    return func;\n  }\n\n  /**\n   * Utility method for getting a GenomeScale across an entire genome.\n   *\n   * @param {String} genomeId from genomeSizes\n   * @returns a GenomeScale across an entire genome\n   */\n  static completeScale(genomeId) {\n    const chrSizes = genomeSizes[genomeId];\n    const finalEntry = [...chrSizes.entries()][chrSizes.size - 1];\n\n    return new GenomeScale(genomeId, [\n      \"chr1:1\",\n      `chr${finalEntry[0]}:${finalEntry[1]}`,\n    ]);\n  }\n}\n\n/**\n * Available genomes to visualize. Each genome is a map from chromosome id to number of genes in chromosome.\n * Order matters as maps remember insertion order.\n */\nconst genomeSizes = {\n  hg38: new Map([\n    [\"1\", 248956422], // chr1\n    [\"2\", 242193529], // chr2\n    [\"3\", 198295559], // ...\n    [\"4\", 190214555],\n    [\"5\", 181538259],\n    [\"6\", 170805979],\n    [\"7\", 159345973],\n    [\"8\", 145138636],\n    [\"9\", 138394717],\n    [\"10\", 135086622],\n    [\"11\", 133797422],\n    [\"12\", 133275309],\n    [\"13\", 114364328],\n    [\"14\", 107043718],\n    [\"15\", 101991189],\n    [\"16\", 90338345],\n    [\"17\", 83257441],\n    [\"18\", 80373285],\n    [\"19\", 58617616],\n    [\"20\", 64444167], // ...\n    [\"21\", 46709983], // chr21\n    [\"22\", 50818468], // chr22\n    [\"X\", 156040895], // chrX\n    [\"Y\", 57227415], // chrY\n  ]),\n\n  hg19: new Map([\n    [\"1\", 249250621], // chr1\n    [\"2\", 243199373], // chr2\n    [\"3\", 198022430], // ...\n    [\"4\", 191154276],\n    [\"5\", 180915260],\n    [\"6\", 171115067],\n    [\"7\", 159138663],\n    [\"8\", 146364022],\n    [\"9\", 141213431],\n    [\"10\", 135534747],\n    [\"11\", 135006516],\n    [\"12\", 133851895],\n    [\"13\", 115169878],\n    [\"14\", 107349540],\n    [\"15\", 102531392],\n    [\"16\", 90354753],\n    [\"17\", 81195210],\n    [\"18\", 78077248],\n    [\"19\", 59128983],\n    [\"20\", 63025520], // ...\n    [\"21\", 48129895], // chr21\n    [\"22\", 51304566], // chr22\n    [\"X\", 155270560], // chrX\n    [\"Y\", 59373566], // chrY\n  ]),\n\n  mm9: new Map([\n    [\"1\", 197195432],\n    [\"2\", 181748087],\n    [\"3\", 159599783],\n    [\"4\", 155630120],\n    [\"5\", 152537259],\n    [\"6\", 149517037],\n    [\"7\", 152524553],\n    [\"8\", 131738871],\n    [\"9\", 124076172],\n    [\"10\", 129993255],\n    [\"11\", 121843856],\n    [\"12\", 121257530],\n    [\"13\", 120284312],\n    [\"14\", 125194864],\n    [\"15\", 103494974],\n    [\"16\", 98319150],\n    [\"17\", 95272651],\n    [\"18\", 90772031],\n    [\"19\", 61342430],\n    [\"X\", 166650296],\n    [\"Y\", 15902555],\n  ]),\n\n  mm10: new Map([\n    [\"1\", 195471971],\n    [\"2\", 182113224],\n    [\"3\", 160039680],\n    [\"4\", 156508116],\n    [\"5\", 151834684],\n    [\"6\", 149736546],\n    [\"7\", 145441459],\n    [\"8\", 129401213],\n    [\"9\", 124595110],\n    [\"10\", 130694993],\n    [\"11\", 122082543],\n    [\"12\", 120129022],\n    [\"13\", 120421639],\n    [\"14\", 124902244],\n    [\"15\", 104043685],\n    [\"16\", 98207768],\n    [\"17\", 94987271],\n    [\"18\", 90702639],\n    [\"19\", 61431566],\n    [\"X\", 171031299],\n    [\"Y\", 91744698],\n  ]),\n\n  mm39: new Map([\n    [\"1\", 195154279], // chr1\n    [\"2\", 181755017], // chr2\n    [\"3\", 159745316], // ...\n    [\"4\", 156860686],\n    [\"5\", 151758149],\n    [\"6\", 149588044],\n    [\"7\", 144995196],\n    [\"8\", 130127694],\n    [\"9\", 124359700],\n    [\"10\", 130530862],\n    [\"11\", 121973369],\n    [\"12\", 120092757],\n    [\"13\", 120883175],\n    [\"14\", 125139656],\n    [\"15\", 104073951],\n    [\"16\", 98008968],\n    [\"17\", 95294699], // ...\n    [\"18\", 90720763], // chr18\n    [\"19\", 61420004], // chr19\n    [\"X\", 169476592], // chrX\n    [\"Y\", 91455967], // chrY\n  ]),\n};\n\nfunction define(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb$1(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb$1, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n\n/**\n * Returns a linear scale to map elements in domain to elements in range.\n * @param {Array} domain array of length two containing minimum and maximum values\n * @param {Array} range array of length two containing minimum and maximum values\n * @returns linear scale mapping domain to range\n */\nfunction scale(domain, range) {\n  const domainLength = domain[1] - domain[0];\n  const rangeLength = range[1] - range[0];\n  const slope = rangeLength / domainLength;\n  const intercept = range[1] - slope * domain[1];\n  return (x) => slope * x + intercept;\n}\n\n/**\n * Maps RGB values to integer for webgl buffer.\n *\n * @param {Integer} red value from 0 to 255\n * @param {Integer} green value from 0 to 255\n * @param {Integer} blue value from 0 to 255\n * @returns RGB hex value as integer\n */\nfunction rgbToHex(red, green, blue) {\n  return (red << 16) | (green << 8) | (blue << 0);\n}\n\nfunction rgbStringToHex(rgb) {\n  const colorVals = rgb.substring(4, rgb.length - 1).split(\",\");\n  return rgbToHex(...colorVals.map((asStr) => parseInt(asStr)));\n}\n\nfunction colorSpecifierToHex(specifier) {\n  if (!isNaN(specifier)) {\n    // Specifier is already a hex value\n    return Math.floor(specifier);\n  }\n  const asColor = color(specifier);\n  return rgbToHex(asColor.r, asColor.g, asColor.b);\n}\n\n/**\n * Get the VIEWPORT of the specification to be used by the mouseReader.\n * If all types for a dimension across tracks are categorical or genomic,\n * will default to [-1, 1] for that dimension for the mouseReader. If X or Y\n * has a fixed value, it will consider the width or height channel domains.\n *\n * @param {Object} specification of visualization\n * @returns [smallestX, largestX, smallestY, largestY] of viewport\n */\nfunction getViewportForSpecification(specification) {\n  let smallestX = Number.POSITIVE_INFINITY;\n  let largestX = Number.NEGATIVE_INFINITY;\n  let smallestY = Number.POSITIVE_INFINITY;\n  let largestY = Number.NEGATIVE_INFINITY;\n\n  specification.tracks.forEach((track) => {\n    let xDomain = track.x.domain;\n    if (\n      !xDomain &&\n      track.x.value !== undefined &&\n      track.width.domain !== undefined\n    ) {\n      xDomain = track.width.domain;\n    }\n    let yDomain = track.y.domain;\n    if (\n      !yDomain &&\n      track.y.value !== undefined &&\n      track.height &&\n      track.height.domain !== undefined\n    ) {\n      yDomain = track.height.domain;\n    }\n\n    if (xDomain) {\n      smallestX = xDomain[0] < smallestX ? xDomain[0] : smallestX;\n      largestX = xDomain[1] > largestX ? xDomain[1] : largestX;\n    }\n    if (yDomain) {\n      smallestY = yDomain[0] < smallestY ? yDomain[0] : smallestY;\n      largestY = yDomain[1] > largestY ? yDomain[1] : largestY;\n    }\n  });\n  smallestX = smallestX === Number.POSITIVE_INFINITY ? -1 : smallestX;\n  largestX = largestX === Number.NEGATIVE_INFINITY ? 1 : largestX;\n  smallestY = smallestY === Number.POSITIVE_INFINITY ? -1 : smallestY;\n  largestY = largestY === Number.NEGATIVE_INFINITY ? 1 : largestY;\n\n  return [smallestX, largestX, smallestY, largestY];\n}\n\n/**\n * Given a specification, return a SCALE to be used for mapping data points to clip space\n * for the drawer.\n *\n * @param {String} dimension either x or y\n * @param {Object} specification for the visualization\n * @returns function which can be used to map to an \"x\" or \"y\" value\n */\nconst getScaleForSpecification = (dimension, specification) => {\n  if (dimension !== \"x\" && dimension !== \"y\") {\n    console.error(`${dimension} is not x or y!`);\n  }\n  let genomic = false;\n  let genome;\n  for (const track of specification.tracks) {\n    if (track[dimension].type && track[dimension].type.includes(\"genomic\")) {\n      genome = track[dimension].genome;\n      genomic = true;\n      break;\n    }\n  }\n\n  if (!genomic) {\n    const viewport = getViewportForSpecification(specification);\n    if (dimension === \"x\") {\n      return scale([viewport[0], viewport[1]], [-1, 1]);\n    }\n    return scale([viewport[2], viewport[3]], [-1, 1]);\n  }\n\n  const geneScale = GenomeScale.completeScale(genome);\n\n  let smallestGene = undefined;\n  let smallestGeneValue = Number.POSITIVE_INFINITY;\n  let largestGene = undefined;\n  let largestGeneValue = Number.NEGATIVE_INFINITY;\n\n  for (const track of specification.tracks) {\n    let xDomain = track[dimension].domain;\n    if (xDomain) {\n      if (geneScale.toClipSpaceFromString(xDomain[0]) < smallestGeneValue) {\n        smallestGeneValue = geneScale.toClipSpaceFromString(xDomain[0]);\n        smallestGene = xDomain[0];\n      }\n\n      if (geneScale.toClipSpaceFromString(xDomain[1]) > largestGeneValue) {\n        largestGeneValue = geneScale.toClipSpaceFromString(xDomain[1]);\n        largestGene = xDomain[1];\n      }\n    }\n  }\n\n  const asScale = new GenomeScale(genome, [smallestGene, largestGene]);\n  return asScale.toCallable();\n};\n\nconst RELATIVE_LENGTH_UNITS = [\n  \"em\",\n  \"ex\",\n  \"ch\",\n  \"rem\",\n  \"lh\",\n  \"vw\",\n  \"vh\",\n  \"vmin\",\n  \"vmax\",\n  \"%\",\n];\nconst getPixelMeasurement = (cssMeasurement) => {\n  if (RELATIVE_LENGTH_UNITS.some((unit) => cssMeasurement.includes(unit))) {\n    return false;\n  }\n  const asFloat = parseFloat(cssMeasurement);\n  return isNaN(asFloat) ? false : asFloat;\n};\n\nconst DEFAULT_MARGIN = \"50px\";\nconst DEFAULT_WIDTH = \"100%\";\nconst DEFAULT_HEIGHT = DEFAULT_WIDTH;\nconst getDimAndMarginStyleForSpecification = (specification) => {\n  let toReturn = {};\n  const calculatedMargins = {};\n  if (specification.margins === undefined) {\n    toReturn.margin = DEFAULT_MARGIN;\n    calculatedMargins.top = DEFAULT_MARGIN;\n    calculatedMargins.right = DEFAULT_MARGIN;\n    calculatedMargins.bottom = DEFAULT_MARGIN;\n    calculatedMargins.left = DEFAULT_MARGIN;\n  } else {\n    calculatedMargins.top =\n      specification.margins.top === undefined\n        ? DEFAULT_MARGIN\n        : specification.margins.top;\n    calculatedMargins.right =\n      specification.margins.right === undefined\n        ? DEFAULT_MARGIN\n        : specification.margins.right;\n    calculatedMargins.bottom =\n      specification.margins.bottom === undefined\n        ? DEFAULT_MARGIN\n        : specification.margins.bottom;\n    calculatedMargins.left =\n      specification.margins.left === undefined\n        ? DEFAULT_MARGIN\n        : specification.margins.left;\n    // Shorthand for top right bottom left\n    toReturn.margin = `${calculatedMargins.top}\n                       ${calculatedMargins.right}\n                       ${calculatedMargins.bottom}\n                       ${calculatedMargins.left}`;\n  }\n\n  const calculatedWidth = specification.width || DEFAULT_WIDTH;\n  const calculatedHeight = specification.height || DEFAULT_HEIGHT;\n  const allMeasurements = [\n    calculatedMargins.top,\n    calculatedMargins.right,\n    calculatedMargins.bottom,\n    calculatedMargins.left,\n    calculatedWidth,\n    calculatedHeight,\n  ];\n\n  if (allMeasurements.every(getPixelMeasurement)) {\n    // Let's encode as a number to allow users using typescript or doing weird DOM things able to define\n    // the width and height explicitly\n    toReturn.width =\n      getPixelMeasurement(calculatedWidth) -\n      getPixelMeasurement(calculatedMargins.left) -\n      getPixelMeasurement(calculatedMargins.right);\n    toReturn.height =\n      getPixelMeasurement(calculatedHeight) -\n      getPixelMeasurement(calculatedMargins.bottom) -\n      getPixelMeasurement(calculatedMargins.top);\n  } else {\n    // If user is using css units in their margins and dimensions, then use css calc\n    toReturn.width = `calc(\n      ${calculatedWidth} - \n      ${calculatedMargins.left} - \n      ${calculatedMargins.right}\n    )`;\n\n    toReturn.height = `calc(\n      ${calculatedHeight} - \n      ${calculatedMargins.top} - \n      ${calculatedMargins.bottom}\n    )`;\n  }\n  return toReturn;\n};\n\n/**\n * We need to calculate points on the arc for that mark type, but it needs to be quick.\n * In addition, it shouldn't be a perfect circle, and also should look somewhat arc like.\n * This utility funciton returns function that takes a value between 0 and 1 where 0 maps\n * to the first control point, and 1 maps to the third control point.\n *\n * https://math.stackexchange.com/a/1361717\n *\n * @param {Array} P0 first control point\n * @param {Array} P1 second control point\n * @param {Array} P2 third control point\n * @returns a function [0, 1] -> point on curve\n */\nconst getQuadraticBezierCurveForPoints = (P0, P1, P2) => {\n  const x = (t) =>\n    (1 - t) ** 2 * P0[0] + 2 * t * (1 - t) * P1[0] + t ** 2 * P2[0];\n  const y = (t) =>\n    (1 - t) ** 2 * P0[1] + 2 * t * (1 - t) * P1[1] + t ** 2 * P2[1];\n  return (t) => [x(t), y(t)];\n};\n\nfunction basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nfunction basis$1(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\nvar constant = x => () => x;\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nfunction hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n\nvar rgb = (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = rgb$1(start)).r, (end = rgb$1(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = rgb$1(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nvar rgbBasis = rgbSpline(basis$1);\n\nexport { Color as C, DEFAULT_WIDTH as D, Rgb as R, color as a, formatPrefix as b, constant as c, format as d, exponent as e, formatSpecifier as f, getDimAndMarginStyleForSpecification as g, getScaleForSpecification as h, getViewportForSpecification as i, DEFAULT_HEIGHT as j, colorSpecifierToHex as k, rgbConvert as l, define as m, extend as n, brighter as o, precisionRound as p, darker as q, rgb as r, scale as s, nogamma as t, hue as u, getQuadraticBezierCurveForPoints as v, rgbBasis as w, rgb$1 as x, rgbStringToHex as y };\n","import { R as Rgb, l as rgbConvert, m as define, n as extend, C as Color, o as brighter, q as darker, t as nogamma, u as hue, v as getQuadraticBezierCurveForPoints, w as rgbBasis, x as rgb, h as getScaleForSpecification, k as colorSpecifierToHex, s as scale, y as rgbStringToHex } from './rgb-6a05388e.js';\n\nconst radians = Math.PI / 180;\nconst degrees = 180 / Math.PI;\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nfunction cubehelix$2(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix$2, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n\nfunction cubehelix$1(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = cubehelix$2(start)).h, (end = cubehelix$2(end)).h),\n          s = nogamma(start.s, end.s),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\ncubehelix$1(hue);\nvar cubehelixLong = cubehelix$1(nogamma);\n\n// Each size unit refers to 1/200 of the clip space\n// e.g. if the canvas is 1000x1000 pixels, and the size value for a mark\n// is 10, then that mark takes up 10/200 = 1/20 of the clip space which\n// is equal to 50 pixels\nconst SIZE_UNITS = 1 / 100;\n\nconst NUMBER_OF_VERTICES_PER_ARC = 20;\n\nconst ARC_HEIGHT_MODIFIER = 10;\n\n/**\n * Get a curve representing the arc with given start and end points\n *\n * https://math.stackexchange.com/a/1484684\n *\n * @param {Array} P0 start of arc\n * @param {Array} P2 end of arc\n * @returns function mapping 0 to beginning of arc, and 1 to end of arc\n */\nconst getCurveForArc = (P0, P2) => {\n  const midpoint = [P0[0] / 2 + P2[0] / 2, P0[1] / 2 + P2[1] / 2];\n  const slope = (P2[1] - P0[1]) / (P2[0] - P0[0]);\n  const distance = Math.sqrt((P2[1] - P0[1]) ** 2 + (P2[0] - P0[0]) ** 2);\n  if (!isFinite(slope)) {\n    // vertical slope\n    return getQuadraticBezierCurveForPoints(\n      P0,\n      [P0[0] - distance, midpoint[1]],\n      P2\n    );\n  }\n\n  const parameterized = (t) => [\n    midpoint[0] + (t / distance) * (P0[1] - P2[1]),\n    midpoint[1] + (t / distance) * (P2[0] - P0[0]),\n  ];\n\n  return getQuadraticBezierCurveForPoints(\n    P0,\n    parameterized(distance * ARC_HEIGHT_MODIFIER),\n    P2\n  );\n};\n\n/**\n * Transform a mark with a range for coordinates into a simpler mark to draw.\n *\n * @param {Object} mark that contains ranges for x or y\n * @returns mark with fixed x and y but with appropriate width and height for drawing\n */\nconst transformGenomicRangeToStandard = (mark, xScale, yScale) => {\n  let x, y, width, height;\n  if (Array.isArray(mark.x)) {\n    let x1 = xScale(mark.x[0]);\n    x = mark.x[0];\n    width = (xScale(mark.x[1]) - x1) / SIZE_UNITS;\n  } else {\n    x = mark.x;\n    width = mark.width;\n  }\n\n  if (Array.isArray(mark.y)) {\n    let y1 = yScale(mark.y[0]);\n    y = mark.y[0];\n    height = (yScale(mark.y[1]) - y1) / SIZE_UNITS;\n  } else {\n    y = mark.y;\n    height = mark.height;\n  }\n  return {\n    x,\n    y,\n    width,\n    height,\n  };\n};\n\n/**\n * Transform a mark with a range for coordinates and a range for width or height into a simpler mark to draw.\n *\n * @param {Object} mark that contains ranges for x and y, and potentially ranges for width and height\n * @returns mark with fixed x, y, width, and height for drawing\n */\nconst transformGenomicRangeArcToStandard = (mark, xScale, yScale) => {\n  let x, y, width, height;\n  if (Array.isArray(mark.x)) {\n    x = xScale.getMidpoint(\n      mark.x[0][0],\n      mark.x[0][1],\n      mark.x[1][0],\n      mark.x[1][1]\n    );\n    let x2 = xScale.getMidpoint(\n      mark.width[0][0],\n      mark.width[0][1],\n      mark.width[1][0],\n      mark.width[1][1]\n    );\n    let x1ClipSpace = xScale(x);\n    let x2ClipSpace = xScale(x2);\n\n    x = x1ClipSpace < x2ClipSpace ? x : x2;\n    width = Math.abs(xScale(x2) - x1ClipSpace) / SIZE_UNITS;\n  } else {\n    x = mark.x;\n    width = mark.width;\n  }\n\n  if (Array.isArray(mark.y)) {\n    y = yScale.getMidpoint(\n      mark.y[0][0],\n      mark.y[0][1],\n      mark.y[1][0],\n      mark.y[1][1]\n    );\n    let y2 = yScale.getMidpoint(\n      mark.height[0][0],\n      mark.height[0][1],\n      mark.height[1][0],\n      mark.height[1][1]\n    );\n\n    let y1ClipSpace = xScale(y);\n    let y2ClipSpace = xScale(y2);\n\n    y = y1ClipSpace < y2ClipSpace ? y : y2;\n    height = Math.abs(yScale(y2) - y1ClipSpace) / SIZE_UNITS;\n  } else {\n    y = mark.y;\n    height = mark.height;\n  }\n  return {\n    x,\n    y,\n    width,\n    height,\n  };\n};\n\nclass VertexCalculator {\n  /**\n   * A class used to construct the vertices of marks that are given to the drawer to draw.\n   *\n   * @param {Function or GenomeScale} xScale maps the x values of the data to clip space [-1, 1]\n   * @param {Function or GenomeScale} yScale maps the y values of the data to clip space [-1, 1]\n   * @param {Object} track from specification\n   */\n  constructor(xScale, yScale, track) {\n    this.xScale = xScale;\n    this.yScale = yScale;\n\n    this.track = track;\n    this.drawMode = getDrawModeForTrack(track);\n  }\n\n  /**\n   * Construct the vertices of a mark.\n   *\n   * @param {Object} mark to draw\n   * @returns vertices of mark\n   */\n  calculateForMark(mark) {\n    if (\n      this.track.x.type === \"genomicRange\" ||\n      this.track.y.type === \"genomicRange\"\n    ) {\n      if (this.track.mark === \"arc\") {\n        return this._calculateForMark(\n          transformGenomicRangeArcToStandard(mark, this.xScale, this.yScale)\n        );\n      }\n      return this._calculateForMark(\n        transformGenomicRangeToStandard(mark, this.xScale, this.yScale)\n      );\n    }\n    return this._calculateForMark(mark);\n  }\n\n  _calculateForMark(mark) {\n    if (this.track.mark === \"area\") {\n      const toReturn = this._getVerticesForAreaSection(mark);\n      this.lastMark = mark;\n      return toReturn;\n    }\n\n    if (this.track.mark === \"tick\") {\n      return this._getVerticesForTick(mark);\n    }\n\n    if (this.track.mark === \"line\") {\n      return this._getVertexForDot(mark);\n    }\n\n    if (this.track.mark === \"rect\") {\n      return this._getVerticesForRect(mark);\n    }\n\n    if (this.track.mark === \"arc\") {\n      return this._getVerticesForArc(mark);\n    }\n\n    switch (mark.shape) {\n      case \"dot\":\n        if (this.drawMode === \"POINTS\") {\n          return this._getVertexForDot(mark);\n        } else {\n          return this._getVerticesForSquare(mark);\n        }\n      case \"triangle\":\n        return this._getVerticesForTriangle(mark);\n      case \"diamond\":\n        return this._getVerticesForPolygon(mark, 4);\n      case \"pentagon\":\n        return this._getVerticesForPolygon(mark, 5);\n      case \"hexagon\":\n        return this._getVerticesForPolygon(mark, 6);\n      case \"circle\":\n        return this._getVerticesForPolygon(mark, 16);\n      case \"cross\":\n        return this._getVerticesForCross(mark);\n      default:\n        console.error(`${mark.shape} is not a valid shape!`);\n    }\n  }\n\n  _mapToGPUSpace(vertices) {\n    let isX = false;\n    return vertices.map((coord) => {\n      isX = !isX;\n      return isX ? this.xScale(coord) : this.yScale(coord);\n    });\n  }\n\n  _getVerticesForArc(mark) {\n    const startPoint = this._mapToGPUSpace([mark.x, mark.y]);\n    const quadraticCurve = getCurveForArc(startPoint, [\n      startPoint[0] + mark.width * SIZE_UNITS,\n      startPoint[1] + mark.height * SIZE_UNITS,\n    ]);\n\n    const vertices = [\n      ...quadraticCurve(0),\n      ...quadraticCurve(1 / NUMBER_OF_VERTICES_PER_ARC),\n    ];\n\n    for (let i = 2; i < NUMBER_OF_VERTICES_PER_ARC + 1; i++) {\n      const nextPoint = quadraticCurve(i / NUMBER_OF_VERTICES_PER_ARC);\n      vertices.push(\n        vertices[vertices.length - 2],\n        vertices[vertices.length - 1],\n        nextPoint[0],\n        nextPoint[1]\n      );\n    }\n\n    return vertices;\n  }\n\n  _getVerticesForAreaSection(mark) {\n    if (!this.lastMark) {\n      return [];\n    }\n\n    return this._mapToGPUSpace([\n      mark.x,\n      mark.y,\n      this.lastMark.x,\n      this.lastMark.y,\n      mark.x,\n      0, // TODO: Replace 0 to let area charts center around some other number\n      this.lastMark.x,\n      this.lastMark.y,\n      this.lastMark.x,\n      0,\n      mark.x,\n      0,\n    ]);\n  }\n\n  _getVerticesForPolygon(mark, sides) {\n    const center = this._mapToGPUSpace([mark.x, mark.y]);\n    const vertices = [];\n\n    for (let theta = 0; theta < 2 * Math.PI; theta += (2 * Math.PI) / sides) {\n      vertices.push(\n        center[0],\n        center[1],\n        center[0] + (mark.size / 2) * Math.cos(theta) * SIZE_UNITS,\n        center[1] + (mark.size / 2) * Math.sin(theta) * SIZE_UNITS,\n        center[0] +\n          (mark.size / 2) *\n            Math.cos(theta + (2 * Math.PI) / sides) *\n            SIZE_UNITS,\n        center[1] +\n          (mark.size / 2) * Math.sin(theta + (2 * Math.PI) / sides) * SIZE_UNITS\n      );\n    }\n    return vertices;\n  }\n\n  _getVerticesForTriangle(mark) {\n    //     1\n    //    / \\\n    //   2---3\n    const center = this._mapToGPUSpace([mark.x, mark.y]);\n\n    return [\n      center[0],\n      center[1] + (mark.size / 2) * SIZE_UNITS,\n      center[0] - (mark.size / 2) * SIZE_UNITS,\n      center[1] - (mark.size / 2) * SIZE_UNITS,\n      center[0] + (mark.size / 2) * SIZE_UNITS,\n      center[1] - (mark.size / 2) * SIZE_UNITS,\n    ];\n  }\n\n  _getVertexForDot(mark) {\n    return this._mapToGPUSpace([mark.x, mark.y]);\n  }\n\n  _getVerticesForSquare(mark) {\n    const center = this._mapToGPUSpace([mark.x, mark.y]);\n    return [\n      center[0] + (mark.size / 2) * SIZE_UNITS, //  2------1,4\n      center[1] + (mark.size / 2) * SIZE_UNITS, //  |    /  |\n      center[0] - (mark.size / 2) * SIZE_UNITS, //  |  /    |\n      center[1] + (mark.size / 2) * SIZE_UNITS, // 3,5------6\n      center[0] - (mark.size / 2) * SIZE_UNITS,\n      center[1] - (mark.size / 2) * SIZE_UNITS,\n      center[0] + (mark.size / 2) * SIZE_UNITS,\n      center[1] + (mark.size / 2) * SIZE_UNITS,\n      center[0] - (mark.size / 2) * SIZE_UNITS,\n      center[1] - (mark.size / 2) * SIZE_UNITS,\n      center[0] + (mark.size / 2) * SIZE_UNITS,\n      center[1] - (mark.size / 2) * SIZE_UNITS,\n    ];\n  }\n\n  _getVerticesForRect(mark) {\n    //  1-----------3,6\n    //  |       /    |\n    //  |     /      |\n    // 2,5-----------4\n    const center = this._mapToGPUSpace([mark.x, mark.y]);\n    return [\n      center[0],\n      center[1] + mark.height * SIZE_UNITS,\n      center[0],\n      center[1],\n      center[0] + mark.width * SIZE_UNITS,\n      center[1] + mark.height * SIZE_UNITS,\n      center[0] + mark.width * SIZE_UNITS,\n      center[1],\n      center[0],\n      center[1],\n      center[0] + mark.width * SIZE_UNITS,\n      center[1] + mark.height * SIZE_UNITS,\n    ];\n  }\n\n  _getVerticesForTick(mark) {\n    const center = this._mapToGPUSpace([mark.x, mark.y]);\n    // 1----2\n    if (this.track.width) {\n      return [\n        center[0],\n        center[1],\n        center[0] + mark.width * SIZE_UNITS,\n        center[1],\n      ];\n    }\n\n    // 1\n    // |\n    // 2\n    if (mark.height) {\n      // default to mark value which has default if height never specified in track\n      return [\n        center[0],\n        center[1],\n        center[0],\n        center[1] + mark.height * SIZE_UNITS,\n      ];\n    }\n  }\n}\n\nfunction colors(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n\nvar category10 = colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n\nvar Accent = colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n\nvar Dark2 = colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n\nvar Paired = colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n\nvar Pastel1 = colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n\nvar Pastel2 = colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n\nvar Set1 = colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n\nvar Set2 = colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n\nvar Set3 = colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n\nvar Tableau10 = colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n\nvar ramp$1 = scheme => rgbBasis(scheme[scheme.length - 1]);\n\nvar scheme$q = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nvar BrBG = ramp$1(scheme$q);\n\nvar scheme$p = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nvar PRGn = ramp$1(scheme$p);\n\nvar scheme$o = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nvar PiYG = ramp$1(scheme$o);\n\nvar scheme$n = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nvar PuOr = ramp$1(scheme$n);\n\nvar scheme$m = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nvar RdBu = ramp$1(scheme$m);\n\nvar scheme$l = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nvar RdGy = ramp$1(scheme$l);\n\nvar scheme$k = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nvar RdYlBu = ramp$1(scheme$k);\n\nvar scheme$j = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nvar RdYlGn = ramp$1(scheme$j);\n\nvar scheme$i = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nvar Spectral = ramp$1(scheme$i);\n\nvar scheme$h = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nvar BuGn = ramp$1(scheme$h);\n\nvar scheme$g = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nvar BuPu = ramp$1(scheme$g);\n\nvar scheme$f = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nvar GnBu = ramp$1(scheme$f);\n\nvar scheme$e = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nvar OrRd = ramp$1(scheme$e);\n\nvar scheme$d = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nvar PuBuGn = ramp$1(scheme$d);\n\nvar scheme$c = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nvar PuBu = ramp$1(scheme$c);\n\nvar scheme$b = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nvar PuRd = ramp$1(scheme$b);\n\nvar scheme$a = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nvar RdPu = ramp$1(scheme$a);\n\nvar scheme$9 = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nvar YlGnBu = ramp$1(scheme$9);\n\nvar scheme$8 = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nvar YlGn = ramp$1(scheme$8);\n\nvar scheme$7 = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nvar YlOrBr = ramp$1(scheme$7);\n\nvar scheme$6 = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nvar YlOrRd = ramp$1(scheme$6);\n\nvar scheme$5 = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nvar Blues = ramp$1(scheme$5);\n\nvar scheme$4 = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nvar Greens = ramp$1(scheme$4);\n\nvar scheme$3 = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nvar Greys = ramp$1(scheme$3);\n\nvar scheme$2 = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nvar Purples = ramp$1(scheme$2);\n\nvar scheme$1 = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nvar Reds = ramp$1(scheme$1);\n\nvar scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nvar Oranges = ramp$1(scheme);\n\nfunction cividis(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n\nvar cubehelix = cubehelixLong(cubehelix$2(300, 0.5, 0.0), cubehelix$2(-240, 0.5, 1.0));\n\nvar warm = cubehelixLong(cubehelix$2(-100, 0.75, 0.35), cubehelix$2(80, 1.50, 0.8));\n\nvar cool = cubehelixLong(cubehelix$2(260, 0.75, 0.35), cubehelix$2(80, 1.50, 0.8));\n\nvar c$1 = cubehelix$2();\n\nfunction rainbow(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c$1.h = 360 * t - 100;\n  c$1.s = 1.5 - 1.5 * ts;\n  c$1.l = 0.8 - 0.9 * ts;\n  return c$1 + \"\";\n}\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nfunction sinebow(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n\nfunction turbo(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nvar viridis = ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nvar magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nvar inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nvar plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n\nvar d3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schemeCategory10: category10,\n  schemeAccent: Accent,\n  schemeDark2: Dark2,\n  schemePaired: Paired,\n  schemePastel1: Pastel1,\n  schemePastel2: Pastel2,\n  schemeSet1: Set1,\n  schemeSet2: Set2,\n  schemeSet3: Set3,\n  schemeTableau10: Tableau10,\n  interpolateBrBG: BrBG,\n  schemeBrBG: scheme$q,\n  interpolatePRGn: PRGn,\n  schemePRGn: scheme$p,\n  interpolatePiYG: PiYG,\n  schemePiYG: scheme$o,\n  interpolatePuOr: PuOr,\n  schemePuOr: scheme$n,\n  interpolateRdBu: RdBu,\n  schemeRdBu: scheme$m,\n  interpolateRdGy: RdGy,\n  schemeRdGy: scheme$l,\n  interpolateRdYlBu: RdYlBu,\n  schemeRdYlBu: scheme$k,\n  interpolateRdYlGn: RdYlGn,\n  schemeRdYlGn: scheme$j,\n  interpolateSpectral: Spectral,\n  schemeSpectral: scheme$i,\n  interpolateBuGn: BuGn,\n  schemeBuGn: scheme$h,\n  interpolateBuPu: BuPu,\n  schemeBuPu: scheme$g,\n  interpolateGnBu: GnBu,\n  schemeGnBu: scheme$f,\n  interpolateOrRd: OrRd,\n  schemeOrRd: scheme$e,\n  interpolatePuBuGn: PuBuGn,\n  schemePuBuGn: scheme$d,\n  interpolatePuBu: PuBu,\n  schemePuBu: scheme$c,\n  interpolatePuRd: PuRd,\n  schemePuRd: scheme$b,\n  interpolateRdPu: RdPu,\n  schemeRdPu: scheme$a,\n  interpolateYlGnBu: YlGnBu,\n  schemeYlGnBu: scheme$9,\n  interpolateYlGn: YlGn,\n  schemeYlGn: scheme$8,\n  interpolateYlOrBr: YlOrBr,\n  schemeYlOrBr: scheme$7,\n  interpolateYlOrRd: YlOrRd,\n  schemeYlOrRd: scheme$6,\n  interpolateBlues: Blues,\n  schemeBlues: scheme$5,\n  interpolateGreens: Greens,\n  schemeGreens: scheme$4,\n  interpolateGreys: Greys,\n  schemeGreys: scheme$3,\n  interpolatePurples: Purples,\n  schemePurples: scheme$2,\n  interpolateReds: Reds,\n  schemeReds: scheme$1,\n  interpolateOranges: Oranges,\n  schemeOranges: scheme,\n  interpolateCividis: cividis,\n  interpolateCubehelixDefault: cubehelix,\n  interpolateRainbow: rainbow,\n  interpolateWarm: warm,\n  interpolateCool: cool,\n  interpolateSinebow: sinebow,\n  interpolateTurbo: turbo,\n  interpolateViridis: viridis,\n  interpolateMagma: magma,\n  interpolateInferno: inferno,\n  interpolatePlasma: plasma\n});\n\n// Default channel values of specification which is passed to webgl drawer\nconst DEFAULT_CHANNELS = Object.freeze({\n  size: {\n    value: 1,\n    numComponents: 1,\n    type: \"float\",\n  },\n  color: {\n    value: 255 ** 3,\n    numComponents: 1,\n    type: \"float\",\n  },\n  x: {\n    value: 0,\n    numComponents: null, // x and y are placed in an attribute vector in the shader that is already handled\n    type: null, // i.e. calls to numComponents or type should not happen as it would break the shader\n  },\n  y: {\n    value: 0,\n    numComponents: null,\n    type: null,\n  },\n  opacity: {\n    value: 1,\n    numComponents: 1,\n    type: \"float\",\n  },\n  shape: {\n    value: \"dot\",\n    numComponents: null,\n    type: null, // Will not interact with shader code\n  },\n  width: {\n    // Default values for width and height add complications\n    // to mapping geometry and creating tick vertices\n    value: undefined,\n    numComponents: 1,\n    type: \"float\",\n  },\n\n  height: {\n    value: undefined,\n    numComponents: 1,\n    type: \"float\",\n  },\n});\n\nconst DEFAULT_MAX_SIZE = 100;\nconst DEFAULT_MIN_SIZE = 0;\nconst DEFAULT_MIN_OPACITY = 0;\n\nconst DEFAULT_MIN_WIDTH = 0;\nconst DEFAULT_MIN_HEIGHT = 0;\nconst DEFAULT_MAX_WIDTH = 1 / SIZE_UNITS;\nconst DEFAULT_MAX_HEIGHT = 1 / SIZE_UNITS;\n\nconst DEFAULT_COLOR_SCHEME = \"interpolateBrBG\";\n\n// first value is undefined as categories are 1-indexed\nconst SHAPES = [undefined, \"dot\", \"triangle\", \"circle\", \"diamond\"];\n\n/**\n * Given a track, determine the WebGL draw mode for it\n *\n * @param {Object} track from specification\n * @returns WebGLDrawMode as a string\n */\nconst getDrawModeForTrack = (track) => {\n  switch (track.mark) {\n    case \"line\":\n      return \"LINE_STRIP\";\n    case \"tick\":\n    case \"arc\":\n      return \"LINES\";\n    case \"point\":\n      if (track.shape && track.shape.value !== \"dot\") {\n        return \"TRIANGLES\";\n      } else {\n        return \"POINTS\";\n      }\n    case \"rect\":\n    case \"area\":\n      return \"TRIANGLES\";\n  }\n};\n\nclass SpecificationProcessor {\n  /**\n   * Process a specification by reading in the data, the channel information, and producing an\n   * iterator like interface with getNextTrack to feed to a drawer.\n   *\n   * @param {Object} specification user defined specification\n   * @param {Function} callback function to call after all the data has been loaded\n   */\n  constructor(specification, callback) {\n    this.index = 0;\n    this.specification = specification;\n    if (typeof specification.defaultData === \"string\") {\n      // data is a url to get\n      this.dataPromise = fetch(specification.defaultData)\n        .then((response) => response.text())\n        .then((text) => (this.data = text.split(\"\\n\")));\n    } else if (specification.defaultData) {\n      // default data is defined, assumed to be an object\n      this.data = specification.defaultData;\n      this.isInlineData = true;\n    }\n    this.tracks = specification.tracks.map((track) => new Track(this, track));\n\n    const allPromises = this.tracks\n      .map((track) => track.dataPromise)\n      .filter((p) => p); // Removes undefined\n    if (this.dataPromise) {\n      allPromises.push(this.dataPromise);\n    }\n\n    this.xScale = getScaleForSpecification(\"x\", specification);\n    this.yScale = getScaleForSpecification(\"y\", specification);\n\n    // When all tracks have acquired their data, call the callback\n    // TODO: Allow tracks to be processed while waiting for others, need to keep in mind order\n    Promise.all(allPromises).then(() => callback(this));\n  }\n\n  /**\n   * Get the next track to process\n   * @returns {@link Track}\n   */\n  getNextTrack() {\n    if (this.index >= this.tracks.length) {\n      return null;\n    }\n    return this.tracks[this.index++];\n  }\n}\n\nclass Track {\n  /**\n   * Process a track from a specification by loading data and producing an iterator\n   * like interface with getNextDataPoint or getNextMark.\n   *\n   * @param {Object} specification user defined visualization\n   * @param {Object} track user defined track\n   */\n  constructor(specification, track) {\n    this.track = track;\n\n    if (typeof track.data === \"string\") {\n      // Track has its own data to GET\n      this.dataPromise = fetch(track.data)\n        .then((response) => response.text())\n        .then((text) => {\n          this.data = text.split(/[\\n\\r]+/);\n          this.processHeadersAndMappers();\n          this.hasOwnData = true;\n        });\n    } else if (track.data) {\n      // Track has its own inline data\n      this.data = track.data;\n      this.isInlineData = true;\n      this.processHeadersAndMappers();\n      this.hasOwnData = true;\n    } else if (specification.data) {\n      // Track does not have its own data, but the specification has default data\n      this.data = specification.data;\n      this.isInlineData = specification.isInlineData;\n      this.processHeadersAndMappers();\n    } else if (specification.dataPromise) {\n      // Track does not have its own data, but the specification is GETting default data\n      specification.dataPromise.then(() => {\n        this.data = specification.data;\n        this.processHeadersAndMappers();\n      });\n    } else {\n      console.error(\n        `Could not find data (no defaultData in specification and no data specified for this track) for track ${track}.`\n      );\n    }\n  }\n\n  /**\n   * Read the headers from the first row of data and then build functions to map a data row\n   * to a channel value for drawing. Ultimately a method due to clunky constructor.\n   */\n  processHeadersAndMappers() {\n    // Processing headers\n    if (this.isInlineData) {\n      this.headers = Object.keys(this.data);\n      this.data.length = this.data[this.headers[0]].length; // assign length to data object for iteration\n      this.index = 0;\n    } else {\n      this.headers = this.data[0].split(\",\");\n      this.index = 1; // 1 to skip header\n    }\n\n    // Creating channel mappers\n    this.channelMaps = new Map();\n    Object.keys(DEFAULT_CHANNELS).forEach((channel) => {\n      this.channelMaps.set(channel, this.buildMapperForChannel(channel));\n    });\n  }\n\n  /**\n   * Get the next data point from the track. Returns null when all points have been returned.\n   * @returns A data point with the x and y coordinates and other attributes from the header\n   */\n  getNextDataPoint() {\n    if (this.index >= this.data.length) {\n      return null;\n    }\n\n    const toReturn = { geometry: { coordinates: [], dimensions: [] } };\n    let splitted;\n    if (this.isInlineData) {\n      splitted = this.headers.map((header) => this.data[header][this.index]);\n    } else {\n      const currRow = this.data[this.index];\n      splitted = currRow.split(\",\");\n    }\n\n    this.index++;\n\n    this.headers.forEach((header, index) => {\n      toReturn[header] = splitted[index];\n    });\n\n    const rawHeight = this.channelMaps.get(\"height\")(splitted);\n    const rawWidth = this.channelMaps.get(\"width\")(splitted);\n    const x = this.channelMaps.get(\"x\")(splitted);\n    const y = this.channelMaps.get(\"y\")(splitted);\n    toReturn.geometry.coordinates.push(x, y);\n    toReturn.geometry.dimensions.push(rawWidth, rawHeight);\n    return toReturn;\n  }\n\n  /**\n   * Get the next mark from the track for the drawer to process. Returns null when all\n   * marks have been returned.\n   * @returns An object containing information used to draw a mark for a row of data.\n   */\n  getNextMark() {\n    // Getting the next mark cannot modify the data objects as other tracks may refer to\n    // the same data\n    if (this.index >= this.data.length) {\n      return null;\n    }\n\n    const toReturn = {};\n    let splitted;\n    if (this.isInlineData) {\n      splitted = this.headers.map((header) => this.data[header][this.index]);\n    } else {\n      const currRow = this.data[this.index];\n      splitted = currRow.split(\",\");\n    }\n\n    this.index++;\n\n    this.channelMaps.forEach((mapper, channel) => {\n      toReturn[channel] = mapper(splitted);\n    });\n\n    return toReturn;\n  }\n\n  /**\n   * Builds a function which maps an attribute value to a channel value for use by the drawer.\n   * The function will return a default if not present in the track, or a constant if\n   * value is defined.\n   *\n   * @param {String} channel one of the channels listed in default channels\n   * @returns the function\n   */\n  buildMapperForChannel(channel) {\n    if (channel in this.track) {\n      const channelInfo = this.track[channel];\n      if (\"value\" in channelInfo) {\n        if (channel === \"color\") {\n          channelInfo.value = colorSpecifierToHex(channelInfo.value);\n        }\n        return () => channelInfo.value;\n      } else {\n        const attributeIndex = this.headers.indexOf(channelInfo.attribute);\n        let attrMapper;\n\n        switch (channelInfo.type) {\n          case \"inline\":\n            attrMapper = buildMapperForInlineChannel(channel);\n            break;\n          case \"quantitative\":\n            attrMapper = buildMapperForQuantitiveChannel(channel, channelInfo);\n            break;\n          case \"categorical\":\n            attrMapper = buildMapperForCategoricalChannel(channel, channelInfo);\n            break;\n          case \"genomic\":\n            const chrAttributeIndex = this.headers.indexOf(\n              channelInfo.chrAttribute\n            );\n            const geneAttributeIndex = this.headers.indexOf(\n              channelInfo.geneAttribute\n            );\n            attrMapper = buildMapperForGenomicChannel(channel);\n            return (row) =>\n              attrMapper(row[chrAttributeIndex], row[geneAttributeIndex]);\n          case \"genomicRange\":\n            const genomicAttributeIndices = [\n              this.headers.indexOf(channelInfo.chrAttribute),\n              this.headers.indexOf(channelInfo.startAttribute),\n              this.headers.indexOf(channelInfo.endAttribute),\n            ];\n            attrMapper = buildMapperForGenomicRangeChannel(\n              channel);\n            return (\n              row // Pass in values for the genomic attributes to mapper\n            ) =>\n              attrMapper(...genomicAttributeIndices.map((index) => row[index]));\n        }\n        return (row) => attrMapper(row[attributeIndex]);\n      }\n    } else {\n      return () => DEFAULT_CHANNELS[channel].value;\n    }\n  };\n}\n\n/**\n * Build a function which maps an attribute that is a channel value to a compatible value.\n *\n * @param {String} channel the name of the channel to build an inline mapper for\n * @param {Object} channelInfo the info of the channel from a track\n * @returns a function that maps attribute values to appropriate channel values.\n */\nconst buildMapperForInlineChannel = (channel, channelInfo) => {\n  switch (channel) {\n    case \"width\":\n    case \"height\":\n    case \"size\":\n      return (dimension) => parseFloat(dimension);\n    case \"color\":\n      return (color) => colorSpecifierToHex(color);\n    default:\n      console.info(\n        `No special behavior for ${channel} as an inline attribute.`\n      );\n      return (inlineValue) => inlineValue;\n  }\n};\n\n/**\n * Build a function which maps a numerical value for an attribute to a property of a mark\n * @param {*} channel the name of the quantitative channel to map\n * @param {*} channelInfo the object containing info for this channel from the specification\n * @returns a function that maps a data attribute value to a channel value\n */\nconst buildMapperForQuantitiveChannel = (channel, channelInfo) => {\n  switch (channel) {\n    case \"x\":\n    case \"y\":\n      // Map x and y to itself, but we need a function to do it\n      return (coord) => parseFloat(coord);\n    case \"opacity\":\n      return scale(channelInfo.domain, [\n        channelInfo.minOpacity || DEFAULT_MIN_OPACITY,\n        1,\n      ]);\n    case \"size\":\n      return scale(channelInfo.domain, [\n        channelInfo.minSize || DEFAULT_MIN_SIZE,\n        channelInfo.maxSize || DEFAULT_MAX_SIZE,\n      ]);\n    case \"color\":\n      const d3colorScale =\n        !channelInfo.colorScheme || !(channelInfo.colorScheme in d3)\n          ? d3[DEFAULT_COLOR_SCHEME]\n          : d3[channelInfo.colorScheme];\n      const zeroToOneScale = scale(channelInfo.domain, [0, 1]);\n      return (attrValue) =>\n        rgbStringToHex(d3colorScale(zeroToOneScale(attrValue)));\n    case \"width\":\n      return scale(channelInfo.domain, [\n        channelInfo.minWidth || DEFAULT_MIN_WIDTH,\n        channelInfo.maxWidth || DEFAULT_MAX_WIDTH,\n      ]);\n    case \"height\":\n      return scale(channelInfo.domain, [\n        channelInfo.minHeight || DEFAULT_MIN_HEIGHT,\n        channelInfo.maxHeight || DEFAULT_MAX_WIDTH,\n      ]);\n    default:\n      console.error(\n        `${channel} is not a supported channel for quantitative attributes!`\n      );\n  }\n};\n\n/**\n * Build a function which maps a discrete (integers are possible) value for an attribute\n * to a property of a mark\n * @param {*} channel the name of the categorical channel to map\n * @param {*} channelInfo the object containing info for this channel from the specification\n * @returns a function that maps a data attribute value to a channel value\n */\nconst buildMapperForCategoricalChannel = (channel, channelInfo) => {\n  const categoryTracker = new Map();\n  let channelScale;\n  switch (channel) {\n    case \"x\":\n    case \"y\":\n      // +1 here to avoid setting x or y at a boundary that makes it not visible\n      channelScale = scale([1, channelInfo.cardinality + 1], [-1, 1]);\n      break;\n    case \"opacity\":\n      channelScale = scale(\n        [1, channelInfo.cardinality],\n        [channelInfo.minOpacity || DEFAULT_MIN_OPACITY, 1]\n      );\n      break;\n    case \"size\":\n      channelScale = scale(\n        [1, channelInfo.cardinality],\n        [\n          channelInfo.minSize || DEFAULT_MIN_SIZE,\n          channelInfo.maxSize || DEFAULT_MAX_SIZE,\n        ]\n      );\n      break;\n    case \"shape\":\n      channelScale = (categoryId) => SHAPES[categoryId % SHAPES.length];\n      break;\n    case \"color\":\n      let d3colorScale =\n        !channelInfo.colorScheme || !(channelInfo.colorScheme in d3)\n          ? d3[DEFAULT_COLOR_SCHEME]\n          : d3[channelInfo.colorScheme];\n      if (Array.isArray(d3colorScale)) {\n        console.error(\n          \"Currenty only interpolating color schemes are supported, using default\"\n        );\n        d3colorScale = d3[DEFAULT_COLOR_SCHEME];\n      }\n      const zeroToOneScale = scale([1, channelInfo.cardinality], [0, 1]);\n      channelScale = (categoryId) =>\n        rgbStringToHex(d3colorScale(zeroToOneScale(categoryId)));\n      break;\n    case \"width\":\n      channelScale = scale(\n        [1, channelInfo.cardinality],\n        [\n          channelInfo.minWidth || DEFAULT_MIN_WIDTH,\n          channelInfo.maxWidth || DEFAULT_MAX_WIDTH,\n        ]\n      );\n      break;\n    case \"height\":\n      channelScale = scale(\n        [1, channelInfo.cardinality],\n        [\n          channelInfo.minHeight || DEFAULT_MIN_HEIGHT,\n          channelInfo.maxHeight || DEFAULT_MAX_HEIGHT,\n        ]\n      );\n      break;\n    default:\n      console.error(\n        `${channel} is not a supported channel for categorical attributes!`\n      );\n  }\n\n  return (attrValue) => {\n    if (!categoryTracker.has(attrValue)) {\n      categoryTracker.set(attrValue, categoryTracker.size + 1);\n    }\n    return channelScale(categoryTracker.get(attrValue));\n  };\n};\n\n/**\n * Build a function which maps a genome chr, gene, to an object consumable by a GenomeScale\n * @param {*} channel either x or y\n * @param {*} channelInfo the object containing info for this channel from the specification\n * @returns a function that maps (genomeChr, geneLoc) -> [chrId, geneLocation]\n *  ex: [\"X\", 200]\n */\nconst buildMapperForGenomicChannel = (channel, channelInfo) => {\n  switch (channel) {\n    case \"x\":\n    case \"y\":\n      return (chr, gene) => {\n        let chrId = chr.startsWith(\"chr\") ? chr.substring(3) : chr.toString();\n        return [chrId, parseInt(gene)];\n      };\n\n    default:\n      console.error(\n        `${channel} is not a supported channel for genomic attributes!`\n      );\n  }\n};\n\n/**\n * Build a function which maps a genome chr, start, and end to an object consumable by a scale\n * @param {*} channel either x or y, width or height may be included if doing arc marks\n * @param {*} channelInfo the object containing info for this channel from the specification\n * @returns a function that maps (genomeChr, genomeStart, genomeEnd) -> an object containing mark metadata for position\n *  format: [chrId, geneLocation, chrId2, geneLocation2]\n *  ex: [\"1\", 1000, \"X\", 2000]\n */\nconst buildMapperForGenomicRangeChannel = (channel, channelInfo) => {\n  switch (channel) {\n    case \"width\":\n    case \"height\":\n    case \"x\":\n    case \"y\":\n      return (chr, genomeStart, genomeEnd) => {\n        let chrId = chr.startsWith(\"chr\") ? chr.substring(3) : chr.toString();\n        return [\n          [chrId, parseInt(genomeStart)],\n          [chrId, parseInt(genomeEnd)],\n        ];\n      };\n\n    default:\n      console.error(\n        `${channel} is not a supported channel for genomic attributes!`\n      );\n  }\n};\n\nexport { DEFAULT_CHANNELS as D, SpecificationProcessor as S, VertexCalculator as V, SIZE_UNITS as a, transformGenomicRangeToStandard as b, getDrawModeForTrack as g, transformGenomicRangeArcToStandard as t };\n","import { g as getDrawModeForTrack, D as DEFAULT_CHANNELS, S as SpecificationProcessor, V as VertexCalculator } from './specification-processor-c99b2c15.js';\nimport { k as colorSpecifierToHex, s as scale } from './rgb-6a05388e.js';\n\nclass Drawer {\n  /**\n   * An interface for drawing on a canvas.\n   *\n   * @param {Object} drawingData object containing keys for {@link Drawer#receiveViewport}\n   *  and canvas key used for drawing.\n   */\n  constructor(drawingData) {\n    this.canvas = drawingData.canvas;\n    this.width = this.canvas.width;\n    this.height = this.canvas.height;\n    this.receiveViewport(drawingData);\n  }\n\n  /**\n   * Method to set the viewport for the drawer.\n   *\n   * @param {Object} viewportData object containing minX,maxX,minY,maxY,xRange,yRange viewport data for drawer\n   */\n  receiveViewport(viewportData) {\n    this.minX = viewportData.minX;\n    this.maxX = viewportData.maxX;\n    this.minY = viewportData.minY;\n    this.maxY = viewportData.maxY;\n    this.currentXRange = viewportData.xRange;\n    this.currentYRange = viewportData.yRange;\n\n    this.needsAnimation = true;\n  }\n\n  /**\n   * Method to implement which signifies a frame has been processed. Used to\n   * display FPS meter.\n   */\n  tick() {}\n\n  /**\n   * Method to implement animating a frame.\n   */\n  animate() {}\n\n  /**\n   * Method to implement preprocessing for rendering frames.\n   */\n  render() {\n    if (this.lastFrame) {\n      // Avoid overlapping animation requests\n      cancelAnimationFrame(this.lastFrame);\n    }\n  }\n}\n\nconst sizeOfGeneRangeForTriangles = 1000000;\n\nclass SemanticZoomer {\n  /**\n   * Gives guidance or takes control over canvas when semantic zooming\n   * is necessary. Developers should extend this class to create semantic zooming\n   * behavior.\n   * @param {SpecificationProcessor} specificationHelper\n   */\n  constructor(specificationHelper) {\n    this.specificationHelper = specificationHelper;\n  }\n\n  getRecommendedDrawingMode(trackShader, currentXRange, currentYRange) {\n    if (trackShader.drawMode !== \"TRIANGLES\") {\n      return trackShader.drawMode;\n    }\n\n    if (\n      !this.specificationHelper.xScale.isGenomeScale &&\n      !this.specificationHelper.yScale.isGenomeScale\n    ) {\n      // Currently only used for genome tracks\n      return \"TRIANGLES\";\n    }\n    if (this.specificationHelper.xScale.isGenomeScale) {\n      const numberOfGenes =\n        this.specificationHelper.xScale.mapGenomeIndexToClipSpaceInverse(\n          currentXRange[1]\n        ) -\n        this.specificationHelper.xScale.mapGenomeIndexToClipSpaceInverse(\n          currentXRange[0]\n        );\n      if (numberOfGenes < sizeOfGeneRangeForTriangles) {\n        return \"TRIANGLES\";\n      }\n    }\n    if (this.specificationHelper.yScale.isGenomeScale) {\n      const numberOfGenes =\n        this.specificationHelper.yScale.mapGenomeIndexToClipSpaceInverse(\n          currentYRange[1]\n        ) -\n        this.specificationHelper.yScale.mapGenomeIndexToClipSpaceInverse(\n          currentYRange[0]\n        );\n      if (numberOfGenes < sizeOfGeneRangeForTriangles) {\n        return \"TRIANGLES\";\n      }\n    }\n\n    return \"LINES\";\n  }\n}\n\n/**\n * A vertex shader meant to take in positions, colors, and contain uniforms for zooming and panning.\n */\nconst baseVertexShader = `#version 300 es\n  precision highp float;\n\n  in vec2 a_VertexPosition;\n\n  uniform float pointSizeModifier;\n  // [x1, y1,x2, y2] of viewing window\n  uniform vec4 viewport;\n\n  out vec4 vColor;\n`;\n\n/**\n * Appended to end of vertex shader. Includes math for zooming and panning,\n * ability to unpack colors and send to fragment shader.\n */\nconst vertexShaderSuffix = (opacityName, colorName, sizeName) => `\n  vec3 unpackColor(float f) {\n    vec3 colorVec;\n    colorVec.r = floor(f / 65536.0);\n    colorVec.g = floor((f - colorVec.r * 65536.0) / 256.0);\n    colorVec.b = floor(f - colorVec.r * 65536.0 - colorVec.g * 256.0);\n    return colorVec / 256.0;\n  }\n\n  void main(void) {\n    // Subtract each vertex by midpoint of the viewport \n    // window to center points. Then scale by ratio of max window size to window size\n    gl_Position = vec4(\n       (a_VertexPosition.x - (viewport.z + viewport.x)/2.0) * 2.0/(viewport.z - viewport.x),\n       (a_VertexPosition.y - (viewport.w + viewport.y)/2.0) * 2.0/(viewport.w - viewport.y),\n        0,\n        1\n    );\n    vec3 unpackedValues = unpackColor(${colorName});\n\n    vColor = vec4(\n      unpackedValues.rgb,\n      ${opacityName}\n    );\n    gl_PointSize = ${sizeName} * pointSizeModifier;\n  }\n`;\n\n/**\n * A fragment shader which chooses color simply passed to by vertex shader.\n */\nconst varyingColorsFragmentShaderDots = `#version 300 es\n  precision highp float;\n\n  in vec4 vColor;\n\n  out vec4 outColor;\n\n  void main(void) {\n    // outColor = vColor;\n    float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n    \n    if(d < .5) { \n        outColor = vColor;\n    }\n    else { discard; }\n  }\n`;\n\n/**\n * A fragment shader which chooses color simply passed to by vertex shader.\n */\n const varyingColorsFragmentShader = `#version 300 es\n precision highp float;\n\n in vec4 vColor;\n\n out vec4 outColor;\n\n void main(void) {\n    outColor = vColor;\n }\n`;\n\nconst SUPPORTED_CHANNEL_ATTRIBUTES = [\n  \"color\",\n  \"size\",\n  \"opacity\",\n];\n\nclass VertexShader {\n\n  /**\n   * A class meant to contain all the relevant information for a shader program, such as uniforms\n   * attributes, and ultimately the vertices. Do not use the constructor. Use VertexShader.fromSpecification\n   * or fromTrack instead.\n   */\n  constructor() {\n    this.shader = baseVertexShader;\n    this.uniforms = {};\n\n    // Add position buffers here since x and y channels don't map nicely to shader code\n    this.attributes = {\n      a_VertexPosition: {\n        numComponents: 2,\n        data: [],\n      },\n    };\n  }\n\n  /**\n   * Add a mark to the buffers by calculating its vertices, then adding its\n   * attributes such as size, color, or opacity to the buffers.\n   *\n   * @param {Object} mark passed in from SpecificationHelper in webgl-drawer.js\n   * @param {VertexCalculator} vertexCalculator used to calculate vertices for a track\n   */\n  addMarkToBuffers(mark, vertexCalculator) {\n    const vertices = vertexCalculator.calculateForMark(mark);\n    this.attributes.a_VertexPosition.data.push(...vertices);\n\n    for (const channel of Object.keys(this.attributes)) {\n      if (channel === \"a_VertexPosition\") {\n        // handled above\n        continue;\n      }\n\n      for (let i = 0; i < vertices.length / 2; i++) {\n        this.attributes[channel].data.push(mark[channel.substring(2)]); // Remove \"a_\" prefix\n      }\n    }\n\n    this.lastMark = mark;\n  }\n\n  /**\n   * Set the webgl draw mode to use\n   * @param {String} drawMode\n   */\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n  }\n\n  /**\n   * Signify this channel varies from mark to mark, so build buffers to carry this info\n   * for the program. Also add desclaration to shader code.\n   *\n   * @param {String} channel such as opacity, color, size\n   * @param {Number} numComponents number of components of this attribute to pull in, usually 1\n   * @returns this\n   */\n  addChannelBuffer(channel, numComponents = 1) {\n    this.attributes[`a_${channel}`] = { numComponents, data: [] };\n    this.shader += `in float a_${channel};\\n`;\n    return this;\n  }\n\n  /**\n   * Signify this channel is the same for every mark, so set a uniform to refer to.\n   *\n   * @param {String} channel such as opacity, color, size\n   * @param {Number} uniform value to set uniform to, must be a float\n   * @returns this\n   */\n  setChannelUniform(channel, uniform) {\n    this.uniforms[`u_${channel}`] = uniform;\n    this.shader += `uniform float u_${channel};\\n`;\n    return this;\n  }\n\n  /**\n   * Build the shader code after uniforms and attributes have been finalized.\n   *\n   * @returns shader code to compile\n   */\n  buildShader() {\n    // Assumes color, opacity, size channels have been used in\n    // addChannelBuffer or addChannelUniform\n    if (this.built) {\n      return this.shader;\n    }\n\n    const colorName = \"a_color\" in this.attributes ? \"a_color\" : \"u_color\";\n    const opacityName =\n      \"a_opacity\" in this.attributes ? \"a_opacity\" : \"u_opacity\";\n    const sizeName = \"a_size\" in this.attributes ? \"a_size\" : \"u_size\";\n\n    this.shader += vertexShaderSuffix(opacityName, colorName, sizeName);\n    this.built = true;\n    return this.shader;\n  }\n\n  /**\n   * Construct the vertex shaders for each track in the specification.\n   *\n   * @param {Object} specification of visualization\n   * @returns an array of {@link VertexShaders}s\n   */\n  static fromSpecification(specification) {\n    // Returns one per track\n    return specification.tracks.map(VertexShader.fromTrack);\n  }\n\n  /**\n   * Construct the vertex shader a track including setting attributes, uniforms, drawMode.\n   *\n   * @param {Object} track from specification\n   * @returns a {@link VertexShaders}\n   */\n  static fromTrack(track) {\n    // Given a track produce attributes and uniforms that describe a webgl drawing\n\n    const vsBuilder = new VertexShader();\n    vsBuilder.setDrawMode(getDrawModeForTrack(track));\n\n    for (let channel of Object.keys(DEFAULT_CHANNELS)) {\n      if (channel === \"shape\") {\n        // Changes vertex positions and draw mode, does not change shader code\n        continue;\n      }\n      if (channel in track) {\n        // Specification specifies channel\n        if (track[channel].value) {\n          // Channel has default value\n          if (channel === \"color\") {\n            track[channel].value = colorSpecifierToHex(track[channel].value);\n          }\n          vsBuilder.setChannelUniform(channel, track[channel].value);\n        } else {\n          // Set Channel as attribute, x and y will always reach here\n          if (channel === \"y\" || channel === \"x\") {\n            // Skip for x and y as handled in constructor\n            continue;\n          }\n\n          // These are currently the only supported channels for shader usage\n          if (SUPPORTED_CHANNEL_ATTRIBUTES.includes(channel)) {\n            vsBuilder.addChannelBuffer(\n              channel,\n              DEFAULT_CHANNELS[channel].numComponents\n            );\n          }\n        }\n      } else {\n        // Channel not listed, set default\n        if (SUPPORTED_CHANNEL_ATTRIBUTES.includes(channel)) {\n          vsBuilder.setChannelUniform(channel, DEFAULT_CHANNELS[channel].value);\n        }\n      }\n    }\n\n    return vsBuilder;\n  }\n}\n\n/* @license twgl.js 4.21.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.\nAvailable via the MIT license.\nsee: http://github.com/greggman/twgl.js for details */\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/* DataType */\nconst BYTE                           = 0x1400;\nconst UNSIGNED_BYTE                  = 0x1401;\nconst SHORT                          = 0x1402;\nconst UNSIGNED_SHORT                 = 0x1403;\nconst INT                            = 0x1404;\nconst UNSIGNED_INT                   = 0x1405;\nconst FLOAT                          = 0x1406;\n\n/**\n * Get the GL type for a typedArray\n * @param {ArrayBufferView} typedArray a typedArray\n * @return {number} the GL type for array. For example pass in an `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in a `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\nfunction getGLTypeForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array)         { return BYTE; }           // eslint-disable-line\n  if (typedArray instanceof Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArray instanceof Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArray instanceof Int16Array)        { return SHORT; }          // eslint-disable-line\n  if (typedArray instanceof Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line\n  if (typedArray instanceof Int32Array)        { return INT; }            // eslint-disable-line\n  if (typedArray instanceof Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line\n  if (typedArray instanceof Float32Array)      { return FLOAT; }          // eslint-disable-line\n  throw new Error('unsupported typed array type');\n}\n\n/**\n * Get the GL type for a typedArray type\n * @param {ArrayBufferView} typedArrayType a typedArray constructor\n * @return {number} the GL type for type. For example pass in `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\nfunction getGLTypeForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array)         { return BYTE; }           // eslint-disable-line\n  if (typedArrayType === Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArrayType === Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArrayType === Int16Array)        { return SHORT; }          // eslint-disable-line\n  if (typedArrayType === Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line\n  if (typedArrayType === Int32Array)        { return INT; }            // eslint-disable-line\n  if (typedArrayType === Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line\n  if (typedArrayType === Float32Array)      { return FLOAT; }          // eslint-disable-line\n  throw new Error('unsupported typed array type');\n}\n\nconst isArrayBuffer = typeof SharedArrayBuffer !== 'undefined'\n  ? function isArrayBufferOrSharedArrayBuffer(a) {\n    return a && a.buffer && (a.buffer instanceof ArrayBuffer || a.buffer instanceof SharedArrayBuffer);\n  }\n  : function isArrayBuffer(a) {\n    return a && a.buffer && a.buffer instanceof ArrayBuffer;\n  };\n\nfunction error(...args) {\n  console.error(...args);\n}\n\nfunction isBuffer(gl, t) {\n  return typeof WebGLBuffer !== 'undefined' && t instanceof WebGLBuffer;\n}\n\nfunction isShader(gl, t) {\n  return typeof WebGLShader !== 'undefined' && t instanceof WebGLShader;\n}\n\nfunction isTexture(gl, t) {\n  return typeof WebGLTexture !== 'undefined' && t instanceof WebGLTexture;\n}\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nconst STATIC_DRAW                  = 0x88e4;\nconst ARRAY_BUFFER                 = 0x8892;\nconst ELEMENT_ARRAY_BUFFER         = 0x8893;\nconst BUFFER_SIZE                  = 0x8764;\n\nconst BYTE$1                         = 0x1400;\nconst UNSIGNED_BYTE$1                = 0x1401;\nconst SHORT$1                        = 0x1402;\nconst UNSIGNED_SHORT$1               = 0x1403;\nconst INT$1                          = 0x1404;\nconst UNSIGNED_INT$1                 = 0x1405;\nconst FLOAT$1                        = 0x1406;\nconst defaults = {\n  attribPrefix: \"\",\n};\n\nfunction setBufferFromTypedArray(gl, type, buffer, array, drawType) {\n  gl.bindBuffer(type, buffer);\n  gl.bufferData(type, array, drawType || STATIC_DRAW);\n}\n\n/**\n * Given typed array creates a WebGLBuffer and copies the typed array\n * into it.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView|WebGLBuffer} typedArray the typed array. Note: If a WebGLBuffer is passed in it will just be returned. No action will be taken\n * @param {number} [type] the GL bind type for the buffer. Default = `gl.ARRAY_BUFFER`.\n * @param {number} [drawType] the GL draw type for the buffer. Default = 'gl.STATIC_DRAW`.\n * @return {WebGLBuffer} the created WebGLBuffer\n * @memberOf module:twgl/attributes\n */\nfunction createBufferFromTypedArray(gl, typedArray, type, drawType) {\n  if (isBuffer(gl, typedArray)) {\n    return typedArray;\n  }\n  type = type || ARRAY_BUFFER;\n  const buffer = gl.createBuffer();\n  setBufferFromTypedArray(gl, type, buffer, typedArray, drawType);\n  return buffer;\n}\n\nfunction isIndices(name) {\n  return name === \"indices\";\n}\n\n// This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\nfunction getNormalizationForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array)    { return true; }  // eslint-disable-line\n  if (typedArray instanceof Uint8Array)   { return true; }  // eslint-disable-line\n  return false;\n}\n\n// This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\nfunction getNormalizationForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array)    { return true; }  // eslint-disable-line\n  if (typedArrayType === Uint8Array)   { return true; }  // eslint-disable-line\n  return false;\n}\n\nfunction getArray(array) {\n  return array.length ? array : array.data;\n}\n\nconst texcoordRE = /coord|texture/i;\nconst colorRE = /color|colour/i;\n\nfunction guessNumComponentsFromName(name, length) {\n  let numComponents;\n  if (texcoordRE.test(name)) {\n    numComponents = 2;\n  } else if (colorRE.test(name)) {\n    numComponents = 4;\n  } else {\n    numComponents = 3;  // position, normals, indices ...\n  }\n\n  if (length % numComponents > 0) {\n    throw new Error(`Can not guess numComponents for attribute '${name}'. Tried ${numComponents} but ${length} values is not evenly divisible by ${numComponents}. You should specify it.`);\n  }\n\n  return numComponents;\n}\n\nfunction getNumComponents(array, arrayName) {\n  return array.numComponents || array.size || guessNumComponentsFromName(arrayName, getArray(array).length);\n}\n\nfunction makeTypedArray(array, name) {\n  if (isArrayBuffer(array)) {\n    return array;\n  }\n\n  if (isArrayBuffer(array.data)) {\n    return array.data;\n  }\n\n  if (Array.isArray(array)) {\n    array = {\n      data: array,\n    };\n  }\n\n  let Type = array.type;\n  if (!Type) {\n    if (isIndices(name)) {\n      Type = Uint16Array;\n    } else {\n      Type = Float32Array;\n    }\n  }\n  return new Type(array.data);\n}\n\n/**\n * The info for an attribute. This is effectively just the arguments to `gl.vertexAttribPointer` plus the WebGLBuffer\n * for the attribute.\n *\n * @typedef {Object} AttribInfo\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {number} [numComponents] the number of components for this attribute.\n * @property {number} [size] synonym for `numComponents`.\n * @property {number} [type] the type of the attribute (eg. `gl.FLOAT`, `gl.UNSIGNED_BYTE`, etc...) Default = `gl.FLOAT`\n * @property {boolean} [normalize] whether or not to normalize the data. Default = false\n * @property {number} [offset] offset into buffer in bytes. Default = 0\n * @property {number} [stride] the stride in bytes per element. Default = 0\n * @property {number} [divisor] the divisor in instances. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {WebGLBuffer} buffer the buffer that contains the data for this attribute\n * @property {number} [drawType] the draw type passed to gl.bufferData. Default = gl.STATIC_DRAW\n * @memberOf module:twgl\n */\n\n/**\n * Use this type of array spec when TWGL can't guess the type or number of components of an array\n * @typedef {Object} FullArraySpec\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {(number|number[]|ArrayBufferView)} data The data of the array. A number alone becomes the number of elements of type.\n * @property {number} [numComponents] number of components for `vertexAttribPointer`. Default is based on the name of the array.\n *    If `coord` is in the name assumes `numComponents = 2`.\n *    If `color` is in the name assumes `numComponents = 4`.\n *    otherwise assumes `numComponents = 3`\n * @property {constructor} [type] type. This is only used if `data` is a JavaScript array. It is the constructor for the typedarray. (eg. `Uint8Array`).\n * For example if you want colors in a `Uint8Array` you might have a `FullArraySpec` like `{ type: Uint8Array, data: [255,0,255,255, ...], }`.\n * @property {number} [size] synonym for `numComponents`.\n * @property {boolean} [normalize] normalize for `vertexAttribPointer`. Default is true if type is `Int8Array` or `Uint8Array` otherwise false.\n * @property {number} [stride] stride for `vertexAttribPointer`. Default = 0\n * @property {number} [offset] offset for `vertexAttribPointer`. Default = 0\n * @property {number} [divisor] divisor for `vertexAttribDivisor`. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {string} [attrib] name of attribute this array maps to. Defaults to same name as array prefixed by the default attribPrefix.\n * @property {string} [name] synonym for `attrib`.\n * @property {string} [attribName] synonym for `attrib`.\n * @property {WebGLBuffer} [buffer] Buffer to use for this attribute. This lets you use your own buffer\n *    but you will need to supply `numComponents` and `type`. You can effectively pass an `AttribInfo`\n *    to provide this. Example:\n *\n *         const bufferInfo1 = twgl.createBufferInfoFromArrays(gl, {\n *           position: [1, 2, 3, ... ],\n *         });\n *         const bufferInfo2 = twgl.createBufferInfoFromArrays(gl, {\n *           position: bufferInfo1.attribs.position,  // use the same buffer from bufferInfo1\n *         });\n *\n * @memberOf module:twgl\n */\n\n/**\n * An individual array in {@link module:twgl.Arrays}\n *\n * When passed to {@link module:twgl.createBufferInfoFromArrays} if an ArraySpec is `number[]` or `ArrayBufferView`\n * the types will be guessed based on the name. `indices` will be `Uint16Array`, everything else will\n * be `Float32Array`. If an ArraySpec is a number it's the number of floats for an empty (zeroed) buffer.\n *\n * @typedef {(number|number[]|ArrayBufferView|module:twgl.FullArraySpec)} ArraySpec\n * @memberOf module:twgl\n */\n\n/**\n * This is a JavaScript object of arrays by name. The names should match your shader's attributes. If your\n * attributes have a common prefix you can specify it by calling {@link module:twgl.setAttributePrefix}.\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * Objects with various fields. See {@link module:twgl.FullArraySpec}.\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n * @typedef {Object.<string, module:twgl.ArraySpec>} Arrays\n * @memberOf module:twgl\n */\n\n\n/**\n * Creates a set of attribute data and WebGLBuffers from set of arrays\n *\n * Given\n *\n *      var arrays = {\n *        position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *        texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *        normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *        color:    { numComponents: 4, data: [255, 255, 255, 255, 255, 0, 0, 255, 0, 0, 255, 255], type: Uint8Array, },\n *        indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *      };\n *\n * returns something like\n *\n *      var attribs = {\n *        position: { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        texcoord: { numComponents: 2, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        normal:   { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        color:    { numComponents: 4, type: gl.UNSIGNED_BYTE, normalize: true,  buffer: WebGLBuffer, },\n *      };\n *\n * notes:\n *\n * *   Arrays can take various forms\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * @param {WebGLRenderingContext} gl The webgl rendering context.\n * @param {module:twgl.Arrays} arrays The arrays\n * @param {module:twgl.BufferInfo} [srcBufferInfo] a BufferInfo to copy from\n *   This lets you share buffers. Any arrays you supply will override\n *   the buffers from srcBufferInfo.\n * @return {Object.<string, module:twgl.AttribInfo>} the attribs\n * @memberOf module:twgl/attributes\n */\nfunction createAttribsFromArrays(gl, arrays) {\n  const attribs = {};\n  Object.keys(arrays).forEach(function(arrayName) {\n    if (!isIndices(arrayName)) {\n      const array = arrays[arrayName];\n      const attribName = array.attrib || array.name || array.attribName || (defaults.attribPrefix + arrayName);\n      if (array.value) {\n        if (!Array.isArray(array.value) && !isArrayBuffer(array.value)) {\n          throw new Error('array.value is not array or typedarray');\n        }\n        attribs[attribName] = {\n          value: array.value,\n        };\n      } else {\n        let buffer;\n        let type;\n        let normalization;\n        let numComponents;\n        if (array.buffer && array.buffer instanceof WebGLBuffer) {\n          buffer = array.buffer;\n          numComponents = array.numComponents || array.size;\n          type = array.type;\n          normalization = array.normalize;\n        } else if (typeof array === \"number\" || typeof array.data === \"number\") {\n          const numValues = array.data || array;\n          const arrayType = array.type || Float32Array;\n          const numBytes = numValues * arrayType.BYTES_PER_ELEMENT;\n          type = getGLTypeForTypedArrayType(arrayType);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArrayType(arrayType);\n          numComponents = array.numComponents || array.size || guessNumComponentsFromName(arrayName, numValues);\n          buffer = gl.createBuffer();\n          gl.bindBuffer(ARRAY_BUFFER, buffer);\n          gl.bufferData(ARRAY_BUFFER, numBytes, array.drawType || STATIC_DRAW);\n        } else {\n          const typedArray = makeTypedArray(array, arrayName);\n          buffer = createBufferFromTypedArray(gl, typedArray, undefined, array.drawType);\n          type = getGLTypeForTypedArray(typedArray);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArray(typedArray);\n          numComponents = getNumComponents(array, arrayName);\n        }\n        attribs[attribName] = {\n          buffer:        buffer,\n          numComponents: numComponents,\n          type:          type,\n          normalize:     normalization,\n          stride:        array.stride || 0,\n          offset:        array.offset || 0,\n          divisor:       array.divisor === undefined ? undefined : array.divisor,\n          drawType:      array.drawType,\n        };\n      }\n    }\n  });\n  gl.bindBuffer(ARRAY_BUFFER, null);\n  return attribs;\n}\n\nfunction getBytesPerValueForGLType(gl, type) {\n  if (type === BYTE$1)           return 1;  // eslint-disable-line\n  if (type === UNSIGNED_BYTE$1)  return 1;  // eslint-disable-line\n  if (type === SHORT$1)          return 2;  // eslint-disable-line\n  if (type === UNSIGNED_SHORT$1) return 2;  // eslint-disable-line\n  if (type === INT$1)            return 4;  // eslint-disable-line\n  if (type === UNSIGNED_INT$1)   return 4;  // eslint-disable-line\n  if (type === FLOAT$1)          return 4;  // eslint-disable-line\n  return 0;\n}\n\n// Tries to get the number of elements from a set of arrays.\nconst positionKeys = ['position', 'positions', 'a_position'];\n\nfunction getNumElementsFromAttributes(gl, attribs) {\n  let key;\n  let ii;\n  for (ii = 0; ii < positionKeys.length; ++ii) {\n    key = positionKeys[ii];\n    if (key in attribs) {\n      break;\n    }\n    key = defaults.attribPrefix + key;\n    if (key in attribs) {\n      break;\n    }\n  }\n  if (ii === positionKeys.length) {\n    key = Object.keys(attribs)[0];\n  }\n  const attrib = attribs[key];\n  gl.bindBuffer(ARRAY_BUFFER, attrib.buffer);\n  const numBytes = gl.getBufferParameter(ARRAY_BUFFER, BUFFER_SIZE);\n  gl.bindBuffer(ARRAY_BUFFER, null);\n\n  const bytesPerValue = getBytesPerValueForGLType(gl, attrib.type);\n  const totalElements = numBytes / bytesPerValue;\n  const numComponents = attrib.numComponents || attrib.size;\n  // TODO: check stride\n  const numElements = totalElements / numComponents;\n  if (numElements % 1 !== 0) {\n    throw new Error(`numComponents ${numComponents} not correct for length ${length}`);\n  }\n  return numElements;\n}\n\n/**\n * @typedef {Object} BufferInfo\n * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.\n * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..\n * @property {WebGLBuffer} [indices] The indices `ELEMENT_ARRAY_BUFFER` if any indices exist.\n * @property {Object.<string, module:twgl.AttribInfo>} [attribs] The attribs appropriate to call `setAttributes`\n * @memberOf module:twgl\n */\n\n/**\n * Creates a BufferInfo from an object of arrays.\n *\n * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to\n * {@link module:twgl:drawBufferInfo}.\n *\n * Given an object like\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n *  Creates an BufferInfo like this\n *\n *     bufferInfo = {\n *       numElements: 4,        // or whatever the number of elements is\n *       indices: WebGLBuffer,  // this property will not exist if there are no indices\n *       attribs: {\n *         position: { buffer: WebGLBuffer, numComponents: 3, },\n *         normal:   { buffer: WebGLBuffer, numComponents: 3, },\n *         texcoord: { buffer: WebGLBuffer, numComponents: 2, },\n *       },\n *     };\n *\n *  The properties of arrays can be JavaScript arrays in which case the number of components\n *  will be guessed.\n *\n *     var arrays = {\n *        position: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0],\n *        texcoord: [0, 0, 0, 1, 1, 0, 1, 1],\n *        normal:   [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],\n *        indices:  [0, 1, 2, 1, 2, 3],\n *     };\n *\n *  They can also be TypedArrays\n *\n *     var arrays = {\n *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),\n *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),\n *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),\n *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),\n *     };\n *\n *  Or AugmentedTypedArrays\n *\n *     var positions = createAugmentedTypedArray(3, 4);\n *     var texcoords = createAugmentedTypedArray(2, 4);\n *     var normals   = createAugmentedTypedArray(3, 4);\n *     var indices   = createAugmentedTypedArray(3, 2, Uint16Array);\n *\n *     positions.push([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]);\n *     texcoords.push([0, 0, 0, 1, 1, 0, 1, 1]);\n *     normals.push([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\n *     indices.push([0, 1, 2, 1, 2, 3]);\n *\n *     var arrays = {\n *        position: positions,\n *        texcoord: texcoords,\n *        normal:   normals,\n *        indices:  indices,\n *     };\n *\n * For the last example it is equivalent to\n *\n *     var bufferInfo = {\n *       attribs: {\n *         position: { numComponents: 3, buffer: gl.createBuffer(), },\n *         texcoord: { numComponents: 2, buffer: gl.createBuffer(), },\n *         normal: { numComponents: 3, buffer: gl.createBuffer(), },\n *       },\n *       indices: gl.createBuffer(),\n *       numElements: 6,\n *     };\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.position.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.position, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.texcoord.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.texcoord, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.normal.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.normal, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferInfo.indices);\n *     gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arrays.indices, gl.STATIC_DRAW);\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.Arrays} arrays Your data\n * @param {module:twgl.BufferInfo} [srcBufferInfo] An existing\n *        buffer info to start from. WebGLBuffers etc specified\n *        in the srcBufferInfo will be used in a new BufferInfo\n *        with any arrays specified overriding the ones in\n *        srcBufferInfo.\n * @return {module:twgl.BufferInfo} A BufferInfo\n * @memberOf module:twgl/attributes\n */\nfunction createBufferInfoFromArrays(gl, arrays, srcBufferInfo) {\n  const newAttribs = createAttribsFromArrays(gl, arrays);\n  const bufferInfo = Object.assign({}, srcBufferInfo ? srcBufferInfo : {});\n  bufferInfo.attribs = Object.assign({}, srcBufferInfo ? srcBufferInfo.attribs : {}, newAttribs);\n  const indices = arrays.indices;\n  if (indices) {\n    const newIndices = makeTypedArray(indices, \"indices\");\n    bufferInfo.indices = createBufferFromTypedArray(gl, newIndices, ELEMENT_ARRAY_BUFFER);\n    bufferInfo.numElements = newIndices.length;\n    bufferInfo.elementType = getGLTypeForTypedArray(newIndices);\n  } else if (!bufferInfo.numElements) {\n    bufferInfo.numElements = getNumElementsFromAttributes(gl, bufferInfo.attribs);\n  }\n\n  return bufferInfo;\n}\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Gets the gl version as a number\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {number} version of gl\n * @private\n */\n//function getVersionAsNumber(gl) {\n//  return parseFloat(gl.getParameter(gl.VERSION).substr(6));\n//}\n\n/**\n * Check if context is WebGL 2.0\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {bool} true if it's WebGL 2.0\n * @memberOf module:twgl\n */\nfunction isWebGL2(gl) {\n  // This is the correct check but it's slow\n  //  return gl.getParameter(gl.VERSION).indexOf(\"WebGL 2.0\") === 0;\n  // This might also be the correct check but I'm assuming it's slow-ish\n  // return gl instanceof WebGL2RenderingContext;\n  return !!gl.texStorage2D;\n}\n\n/**\n * Gets a string for WebGL enum\n *\n * Note: Several enums are the same. Without more\n * context (which function) it's impossible to always\n * give the correct enum. As it is, for matching values\n * it gives all enums. Checking the WebGL2RenderingContext\n * that means\n *\n *      0     = ZERO | POINT | NONE | NO_ERROR\n *      1     = ONE | LINES | SYNC_FLUSH_COMMANDS_BIT\n *      32777 = BLEND_EQUATION_RGB | BLEND_EQUATION_RGB\n *      36662 = COPY_READ_BUFFER | COPY_READ_BUFFER_BINDING\n *      36663 = COPY_WRITE_BUFFER | COPY_WRITE_BUFFER_BINDING\n *      36006 = FRAMEBUFFER_BINDING | DRAW_FRAMEBUFFER_BINDING\n *\n * It's also not useful for bits really unless you pass in individual bits.\n * In other words\n *\n *     const bits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT;\n *     twgl.glEnumToString(gl, bits);  // not going to work\n *\n * Note that some enums only exist on extensions. If you\n * want them to show up you need to pass the extension at least\n * once. For example\n *\n *     const ext = gl.getExtension('WEBGL_compressed_texture_s3tc');\n *     if (ext) {\n *        twgl.glEnumToString(ext, 0);  // just prime the function\n *\n *        ..later..\n *\n *        const internalFormat = ext.COMPRESSED_RGB_S3TC_DXT1_EXT;\n *        console.log(twgl.glEnumToString(gl, internalFormat));\n *\n * Notice I didn't have to pass the extension the second time. This means\n * you can have place that generically gets an enum for texture formats for example.\n * and as long as you primed the function with the extensions\n *\n * If you're using `twgl.addExtensionsToContext` to enable your extensions\n * then twgl will automatically get the extension's enums.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext or any extension object\n * @param {number} value the value of the enum you want to look up.\n * @return {string} enum string or hex value\n * @memberOf module:twgl\n * @function glEnumToString\n */\nconst glEnumToString = (function() {\n  const haveEnumsForType = {};\n  const enums = {};\n\n  function addEnums(gl) {\n    const type = gl.constructor.name;\n    if (!haveEnumsForType[type]) {\n      for (const key in gl) {\n        if (typeof gl[key] === 'number') {\n          const existing = enums[gl[key]];\n          enums[gl[key]] = existing ? `${existing} | ${key}` : key;\n        }\n      }\n      haveEnumsForType[type] = true;\n    }\n  }\n\n  return function glEnumToString(gl, value) {\n    addEnums(gl);\n    return enums[value] || (typeof value === 'number' ? `0x${value.toString(16)}` : value);\n  };\n}());\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Low level shader program related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibility they are available at both `twgl.programs` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/programs\n */\n\nconst error$1 = error;\nfunction getElementById(id) {\n  return (typeof document !== 'undefined' && document.getElementById)\n      ? document.getElementById(id)\n      : null;\n}\n\nconst TEXTURE0                       = 0x84c0;\n\nconst ARRAY_BUFFER$1                   = 0x8892;\nconst ELEMENT_ARRAY_BUFFER$1           = 0x8893;\n\nconst COMPILE_STATUS                 = 0x8b81;\nconst LINK_STATUS                    = 0x8b82;\nconst FRAGMENT_SHADER                = 0x8b30;\nconst VERTEX_SHADER                  = 0x8b31;\nconst SEPARATE_ATTRIBS               = 0x8c8d;\n\nconst ACTIVE_UNIFORMS                = 0x8b86;\nconst ACTIVE_ATTRIBUTES              = 0x8b89;\nconst TRANSFORM_FEEDBACK_VARYINGS    = 0x8c83;\nconst ACTIVE_UNIFORM_BLOCKS          = 0x8a36;\nconst UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER   = 0x8a44;\nconst UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46;\nconst UNIFORM_BLOCK_DATA_SIZE                     = 0x8a40;\nconst UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES        = 0x8a43;\n\nconst FLOAT$3                         = 0x1406;\nconst FLOAT_VEC2                    = 0x8B50;\nconst FLOAT_VEC3                    = 0x8B51;\nconst FLOAT_VEC4                    = 0x8B52;\nconst INT$3                           = 0x1404;\nconst INT_VEC2                      = 0x8B53;\nconst INT_VEC3                      = 0x8B54;\nconst INT_VEC4                      = 0x8B55;\nconst BOOL                          = 0x8B56;\nconst BOOL_VEC2                     = 0x8B57;\nconst BOOL_VEC3                     = 0x8B58;\nconst BOOL_VEC4                     = 0x8B59;\nconst FLOAT_MAT2                    = 0x8B5A;\nconst FLOAT_MAT3                    = 0x8B5B;\nconst FLOAT_MAT4                    = 0x8B5C;\nconst SAMPLER_2D                    = 0x8B5E;\nconst SAMPLER_CUBE                  = 0x8B60;\nconst SAMPLER_3D                    = 0x8B5F;\nconst SAMPLER_2D_SHADOW             = 0x8B62;\nconst FLOAT_MAT2x3                  = 0x8B65;\nconst FLOAT_MAT2x4                  = 0x8B66;\nconst FLOAT_MAT3x2                  = 0x8B67;\nconst FLOAT_MAT3x4                  = 0x8B68;\nconst FLOAT_MAT4x2                  = 0x8B69;\nconst FLOAT_MAT4x3                  = 0x8B6A;\nconst SAMPLER_2D_ARRAY              = 0x8DC1;\nconst SAMPLER_2D_ARRAY_SHADOW       = 0x8DC4;\nconst SAMPLER_CUBE_SHADOW           = 0x8DC5;\nconst UNSIGNED_INT$3                  = 0x1405;\nconst UNSIGNED_INT_VEC2             = 0x8DC6;\nconst UNSIGNED_INT_VEC3             = 0x8DC7;\nconst UNSIGNED_INT_VEC4             = 0x8DC8;\nconst INT_SAMPLER_2D                = 0x8DCA;\nconst INT_SAMPLER_3D                = 0x8DCB;\nconst INT_SAMPLER_CUBE              = 0x8DCC;\nconst INT_SAMPLER_2D_ARRAY          = 0x8DCF;\nconst UNSIGNED_INT_SAMPLER_2D       = 0x8DD2;\nconst UNSIGNED_INT_SAMPLER_3D       = 0x8DD3;\nconst UNSIGNED_INT_SAMPLER_CUBE     = 0x8DD4;\nconst UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8DD7;\n\nconst TEXTURE_2D$1                    = 0x0DE1;\nconst TEXTURE_CUBE_MAP$1              = 0x8513;\nconst TEXTURE_3D$1                    = 0x806F;\nconst TEXTURE_2D_ARRAY$1              = 0x8C1A;\n\nconst typeMap = {};\n\n/**\n * Returns the corresponding bind point for a given sampler type\n */\nfunction getBindPointForSamplerType(gl, type) {\n  return typeMap[type].bindPoint;\n}\n\n// This kind of sucks! If you could compose functions as in `var fn = gl[name];`\n// this code could be a lot smaller but that is sadly really slow (T_T)\n\nfunction floatSetter(gl, location) {\n  return function(v) {\n    gl.uniform1f(location, v);\n  };\n}\n\nfunction floatArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1fv(location, v);\n  };\n}\n\nfunction floatVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2fv(location, v);\n  };\n}\n\nfunction floatVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3fv(location, v);\n  };\n}\n\nfunction floatVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4fv(location, v);\n  };\n}\n\nfunction intSetter(gl, location) {\n  return function(v) {\n    gl.uniform1i(location, v);\n  };\n}\n\nfunction intArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1iv(location, v);\n  };\n}\n\nfunction intVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2iv(location, v);\n  };\n}\n\nfunction intVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3iv(location, v);\n  };\n}\n\nfunction intVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4iv(location, v);\n  };\n}\n\nfunction uintSetter(gl, location) {\n  return function(v) {\n    gl.uniform1ui(location, v);\n  };\n}\n\nfunction uintArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1uiv(location, v);\n  };\n}\n\nfunction uintVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2uiv(location, v);\n  };\n}\n\nfunction uintVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3uiv(location, v);\n  };\n}\n\nfunction uintVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4uiv(location, v);\n  };\n}\n\nfunction floatMat2Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2fv(location, false, v);\n  };\n}\n\nfunction floatMat3Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3fv(location, false, v);\n  };\n}\n\nfunction floatMat4Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4fv(location, false, v);\n  };\n}\n\nfunction floatMat23Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2x3fv(location, false, v);\n  };\n}\n\nfunction floatMat32Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3x2fv(location, false, v);\n  };\n}\n\nfunction floatMat24Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2x4fv(location, false, v);\n  };\n}\n\nfunction floatMat42Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4x2fv(location, false, v);\n  };\n}\n\nfunction floatMat34Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3x4fv(location, false, v);\n  };\n}\n\nfunction floatMat43Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4x3fv(location, false, v);\n  };\n}\n\nfunction samplerSetter(gl, type, unit, location) {\n  const bindPoint = getBindPointForSamplerType(gl, type);\n  return isWebGL2(gl) ? function(textureOrPair) {\n    let texture;\n    let sampler;\n    if (isTexture(gl, textureOrPair)) {\n      texture = textureOrPair;\n      sampler = null;\n    } else {\n      texture = textureOrPair.texture;\n      sampler = textureOrPair.sampler;\n    }\n    gl.uniform1i(location, unit);\n    gl.activeTexture(TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n    gl.bindSampler(unit, sampler);\n  } : function(texture) {\n    gl.uniform1i(location, unit);\n    gl.activeTexture(TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n  };\n}\n\nfunction samplerArraySetter(gl, type, unit, location, size) {\n  const bindPoint = getBindPointForSamplerType(gl, type);\n  const units = new Int32Array(size);\n  for (let ii = 0; ii < size; ++ii) {\n    units[ii] = unit + ii;\n  }\n\n  return isWebGL2(gl) ? function(textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function(textureOrPair, index) {\n      gl.activeTexture(TEXTURE0 + units[index]);\n      let texture;\n      let sampler;\n      if (isTexture(gl, textureOrPair)) {\n        texture = textureOrPair;\n        sampler = null;\n      } else {\n        texture = textureOrPair.texture;\n        sampler = textureOrPair.sampler;\n      }\n      gl.bindSampler(unit, sampler);\n      gl.bindTexture(bindPoint, texture);\n    });\n  } : function(textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function(texture, index) {\n      gl.activeTexture(TEXTURE0 + units[index]);\n      gl.bindTexture(bindPoint, texture);\n    });\n  };\n}\n\ntypeMap[FLOAT$3]                         = { Type: Float32Array, size:  4, setter: floatSetter,      arraySetter: floatArraySetter, };\ntypeMap[FLOAT_VEC2]                    = { Type: Float32Array, size:  8, setter: floatVec2Setter,  cols: 2, };\ntypeMap[FLOAT_VEC3]                    = { Type: Float32Array, size: 12, setter: floatVec3Setter,  cols: 3, };\ntypeMap[FLOAT_VEC4]                    = { Type: Float32Array, size: 16, setter: floatVec4Setter,  cols: 4, };\ntypeMap[INT$3]                           = { Type: Int32Array,   size:  4, setter: intSetter,        arraySetter: intArraySetter, };\ntypeMap[INT_VEC2]                      = { Type: Int32Array,   size:  8, setter: intVec2Setter,    cols: 2, };\ntypeMap[INT_VEC3]                      = { Type: Int32Array,   size: 12, setter: intVec3Setter,    cols: 3, };\ntypeMap[INT_VEC4]                      = { Type: Int32Array,   size: 16, setter: intVec4Setter,    cols: 4, };\ntypeMap[UNSIGNED_INT$3]                  = { Type: Uint32Array,  size:  4, setter: uintSetter,       arraySetter: uintArraySetter, };\ntypeMap[UNSIGNED_INT_VEC2]             = { Type: Uint32Array,  size:  8, setter: uintVec2Setter,   cols: 2, };\ntypeMap[UNSIGNED_INT_VEC3]             = { Type: Uint32Array,  size: 12, setter: uintVec3Setter,   cols: 3, };\ntypeMap[UNSIGNED_INT_VEC4]             = { Type: Uint32Array,  size: 16, setter: uintVec4Setter,   cols: 4, };\ntypeMap[BOOL]                          = { Type: Uint32Array,  size:  4, setter: intSetter,        arraySetter: intArraySetter, };\ntypeMap[BOOL_VEC2]                     = { Type: Uint32Array,  size:  8, setter: intVec2Setter,    cols: 2, };\ntypeMap[BOOL_VEC3]                     = { Type: Uint32Array,  size: 12, setter: intVec3Setter,    cols: 3, };\ntypeMap[BOOL_VEC4]                     = { Type: Uint32Array,  size: 16, setter: intVec4Setter,    cols: 4, };\ntypeMap[FLOAT_MAT2]                    = { Type: Float32Array, size: 32, setter: floatMat2Setter,  rows: 2, cols: 2, };\ntypeMap[FLOAT_MAT3]                    = { Type: Float32Array, size: 48, setter: floatMat3Setter,  rows: 3, cols: 3, };\ntypeMap[FLOAT_MAT4]                    = { Type: Float32Array, size: 64, setter: floatMat4Setter,  rows: 4, cols: 4, };\ntypeMap[FLOAT_MAT2x3]                  = { Type: Float32Array, size: 32, setter: floatMat23Setter, rows: 2, cols: 3, };\ntypeMap[FLOAT_MAT2x4]                  = { Type: Float32Array, size: 32, setter: floatMat24Setter, rows: 2, cols: 4, };\ntypeMap[FLOAT_MAT3x2]                  = { Type: Float32Array, size: 48, setter: floatMat32Setter, rows: 3, cols: 2, };\ntypeMap[FLOAT_MAT3x4]                  = { Type: Float32Array, size: 48, setter: floatMat34Setter, rows: 3, cols: 4, };\ntypeMap[FLOAT_MAT4x2]                  = { Type: Float32Array, size: 64, setter: floatMat42Setter, rows: 4, cols: 2, };\ntypeMap[FLOAT_MAT4x3]                  = { Type: Float32Array, size: 64, setter: floatMat43Setter, rows: 4, cols: 3, };\ntypeMap[SAMPLER_2D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[SAMPLER_CUBE]                  = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[SAMPLER_3D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[SAMPLER_2D_SHADOW]             = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[SAMPLER_2D_ARRAY]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[SAMPLER_2D_ARRAY_SHADOW]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[SAMPLER_CUBE_SHADOW]           = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[INT_SAMPLER_2D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[INT_SAMPLER_3D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[INT_SAMPLER_CUBE]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[INT_SAMPLER_2D_ARRAY]          = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[UNSIGNED_INT_SAMPLER_2D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[UNSIGNED_INT_SAMPLER_3D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[UNSIGNED_INT_SAMPLER_CUBE]     = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY] = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\n\nfunction floatAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      switch (b.value.length) {\n        case 4:\n          gl.vertexAttrib4fv(index, b.value);\n          break;\n        case 3:\n          gl.vertexAttrib3fv(index, b.value);\n          break;\n        case 2:\n          gl.vertexAttrib2fv(index, b.value);\n          break;\n        case 1:\n          gl.vertexAttrib1fv(index, b.value);\n          break;\n        default:\n          throw new Error('the length of a float constant value must be between 1 and 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribPointer(\n          index, b.numComponents || b.size, b.type || FLOAT$3, b.normalize || false, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction intAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      if (b.value.length === 4) {\n        gl.vertexAttrib4iv(index, b.value);\n      } else {\n        throw new Error('The length of an integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(\n          index, b.numComponents || b.size, b.type || INT$3, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction uintAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      if (b.value.length === 4) {\n        gl.vertexAttrib4uiv(index, b.value);\n      } else {\n        throw new Error('The length of an unsigned integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(\n          index, b.numComponents || b.size, b.type || UNSIGNED_INT$3, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction matAttribSetter(gl, index, typeInfo) {\n  const defaultSize = typeInfo.size;\n  const count = typeInfo.count;\n\n  return function(b) {\n    gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n    const numComponents = b.size || b.numComponents || defaultSize;\n    const size = numComponents / count;\n    const type = b.type || FLOAT$3;\n    const typeInfo = typeMap[type];\n    const stride = typeInfo.size * numComponents;\n    const normalize = b.normalize || false;\n    const offset = b.offset || 0;\n    const rowOffset = stride / count;\n    for (let i = 0; i < count; ++i) {\n      gl.enableVertexAttribArray(index + i);\n      gl.vertexAttribPointer(\n          index + i, size, type, normalize, stride, offset + rowOffset * i);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index + i, b.divisor);\n      }\n    }\n  };\n}\n\n\n\nconst attrTypeMap = {};\nattrTypeMap[FLOAT$3]             = { size:  4, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC2]        = { size:  8, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC3]        = { size: 12, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC4]        = { size: 16, setter: floatAttribSetter, };\nattrTypeMap[INT$3]               = { size:  4, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC2]          = { size:  8, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC3]          = { size: 12, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC4]          = { size: 16, setter: intAttribSetter,   };\nattrTypeMap[UNSIGNED_INT$3]      = { size:  4, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC2] = { size:  8, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC3] = { size: 12, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC4] = { size: 16, setter: uintAttribSetter,  };\nattrTypeMap[BOOL]              = { size:  4, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC2]         = { size:  8, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC3]         = { size: 12, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC4]         = { size: 16, setter: intAttribSetter,   };\nattrTypeMap[FLOAT_MAT2]        = { size:  4, setter: matAttribSetter,   count: 2, };\nattrTypeMap[FLOAT_MAT3]        = { size:  9, setter: matAttribSetter,   count: 3, };\nattrTypeMap[FLOAT_MAT4]        = { size: 16, setter: matAttribSetter,   count: 4, };\n\nconst errorRE = /ERROR:\\s*\\d+:(\\d+)/gi;\nfunction addLineNumbersWithError(src, log = '', lineOffset = 0) {\n  // Note: Error message formats are not defined by any spec so this may or may not work.\n  const matches = [...log.matchAll(errorRE)];\n  const lineNoToErrorMap = new Map(matches.map((m, ndx) => {\n    const lineNo = parseInt(m[1]);\n    const next = matches[ndx + 1];\n    const end = next ? next.index : log.length;\n    const msg = log.substring(m.index, end);\n    return [lineNo - 1, msg];\n  }));\n  return src.split('\\n').map((line, lineNo) => {\n    const err = lineNoToErrorMap.get(lineNo);\n    return `${lineNo + 1 + lineOffset}: ${line}${err ? `\\n\\n^^^ ${err}` : ''}`;\n  }).join('\\n');\n}\n\n/**\n * Error Callback\n * @callback ErrorCallback\n * @param {string} msg error message.\n * @param {number} [lineOffset] amount to add to line number\n * @memberOf module:twgl\n */\n\nconst spaceRE = /^[ \\t]*\\n/;\n\n/**\n * Loads a shader.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {string} shaderSource The shader source.\n * @param {number} shaderType The type of shader.\n * @param {module:twgl.ErrorCallback} opt_errorCallback callback for errors.\n * @return {WebGLShader} The created shader.\n * @private\n */\nfunction loadShader(gl, shaderSource, shaderType, opt_errorCallback) {\n  const errFn = opt_errorCallback || error$1;\n  // Create the shader object\n  const shader = gl.createShader(shaderType);\n\n  // Remove the first end of line because WebGL 2.0 requires\n  // #version 300 es\n  // as the first line. No whitespace allowed before that line\n  // so\n  //\n  // <script>\n  // #version 300 es\n  // </script>\n  //\n  // Has one line before it which is invalid according to GLSL ES 3.00\n  //\n  let lineOffset = 0;\n  if (spaceRE.test(shaderSource)) {\n    lineOffset = 1;\n    shaderSource = shaderSource.replace(spaceRE, '');\n  }\n\n  // Load the shader source\n  gl.shaderSource(shader, shaderSource);\n\n  // Compile the shader\n  gl.compileShader(shader);\n\n  // Check the compile status\n  const compiled = gl.getShaderParameter(shader, COMPILE_STATUS);\n  if (!compiled) {\n    // Something went wrong during compilation; get the error\n    const lastError = gl.getShaderInfoLog(shader);\n    errFn(`${addLineNumbersWithError(shaderSource, lastError, lineOffset)}\\nError compiling ${glEnumToString(gl, shaderType)}: ${lastError}`);\n    gl.deleteShader(shader);\n    return null;\n  }\n\n  return shader;\n}\n\n/**\n * @typedef {Object} ProgramOptions\n * @property {function(string)} [errorCallback] callback for errors\n * @property {Object.<string,number>} [attribLocations] a attribute name to location map\n * @property {(module:twgl.BufferInfo|Object.<string,module:twgl.AttribInfo>|string[])} [transformFeedbackVaryings] If passed\n *   a BufferInfo will use the attribs names inside. If passed an object of AttribInfos will use the names from that object. Otherwise\n *   you can pass an array of names.\n * @property {number} [transformFeedbackMode] the mode to pass `gl.transformFeedbackVaryings`. Defaults to `SEPARATE_ATTRIBS`.\n * @memberOf module:twgl\n */\n\n/**\n * Gets the program options based on all these optional arguments\n * @param {module:twgl.ProgramOptions|string[]} [opt_attribs] Options for the program or an array of attribs names. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations] The locations for the. A parallel array to opt_attribs letting you assign locations.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {module:twgl.ProgramOptions} an instance of ProgramOptions based on the arguments passed in\n * @private\n */\nfunction getProgramOptions(opt_attribs, opt_locations, opt_errorCallback) {\n  let transformFeedbackVaryings;\n  let transformFeedbackMode;\n  if (typeof opt_locations === 'function') {\n    opt_errorCallback = opt_locations;\n    opt_locations = undefined;\n  }\n  if (typeof opt_attribs === 'function') {\n    opt_errorCallback = opt_attribs;\n    opt_attribs = undefined;\n  } else if (opt_attribs && !Array.isArray(opt_attribs)) {\n    // If we have an errorCallback we can just return this object\n    // Otherwise we need to construct one with default errorCallback\n    if (opt_attribs.errorCallback) {\n      return opt_attribs;\n    }\n    const opt = opt_attribs;\n    opt_errorCallback = opt.errorCallback;\n    opt_attribs = opt.attribLocations;\n    transformFeedbackVaryings = opt.transformFeedbackVaryings;\n    transformFeedbackMode = opt.transformFeedbackMode;\n  }\n\n  const options = {\n    errorCallback: opt_errorCallback || error$1,\n    transformFeedbackVaryings: transformFeedbackVaryings,\n    transformFeedbackMode: transformFeedbackMode,\n  };\n\n  if (opt_attribs) {\n    let attribLocations = {};\n    if (Array.isArray(opt_attribs)) {\n      opt_attribs.forEach(function(attrib,  ndx) {\n        attribLocations[attrib] = opt_locations ? opt_locations[ndx] : ndx;\n      });\n    } else {\n      attribLocations = opt_attribs;\n    }\n    options.attribLocations = attribLocations;\n  }\n\n  return options;\n}\n\nconst defaultShaderType = [\n  \"VERTEX_SHADER\",\n  \"FRAGMENT_SHADER\",\n];\n\nfunction getShaderTypeFromScriptType(gl, scriptType) {\n  if (scriptType.indexOf(\"frag\") >= 0) {\n    return FRAGMENT_SHADER;\n  } else if (scriptType.indexOf(\"vert\") >= 0) {\n    return VERTEX_SHADER;\n  }\n  return undefined;\n}\n\nfunction deleteShaders(gl, shaders) {\n  shaders.forEach(function(shader) {\n    gl.deleteShader(shader);\n  });\n}\n\n/**\n * Creates a program, attaches (and/or compiles) shaders, binds attrib locations, links the\n * program and calls useProgram.\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgram(gl, [vs, fs], options);\n *     twgl.createProgram(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLShader[]|string[]} shaders The shaders to attach, or element ids for their source, or strings that contain their source\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {WebGLProgram?} the created program or null if error.\n * @memberOf module:twgl/programs\n */\nfunction createProgram(\n    gl, shaders, opt_attribs, opt_locations, opt_errorCallback) {\n  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  const realShaders = [];\n  const newShaders = [];\n  for (let ndx = 0; ndx < shaders.length; ++ndx) {\n    let shader = shaders[ndx];\n    if (typeof (shader) === 'string') {\n      const elem = getElementById(shader);\n      const src = elem ? elem.text : shader;\n      let type = gl[defaultShaderType[ndx]];\n      if (elem && elem.type) {\n        type = getShaderTypeFromScriptType(gl, elem.type) || type;\n      }\n      shader = loadShader(gl, src, type, progOptions.errorCallback);\n      newShaders.push(shader);\n    }\n    if (isShader(gl, shader)) {\n      realShaders.push(shader);\n    }\n  }\n\n  if (realShaders.length !== shaders.length) {\n    progOptions.errorCallback(\"not enough shaders for program\");\n    deleteShaders(gl, newShaders);\n    return null;\n  }\n\n  const program = gl.createProgram();\n  realShaders.forEach(function(shader) {\n    gl.attachShader(program, shader);\n  });\n  if (progOptions.attribLocations) {\n    Object.keys(progOptions.attribLocations).forEach(function(attrib) {\n      gl.bindAttribLocation(program, progOptions.attribLocations[attrib], attrib);\n    });\n  }\n  let varyings = progOptions.transformFeedbackVaryings;\n  if (varyings) {\n    if (varyings.attribs) {\n      varyings = varyings.attribs;\n    }\n    if (!Array.isArray(varyings)) {\n      varyings = Object.keys(varyings);\n    }\n    gl.transformFeedbackVaryings(program, varyings, progOptions.transformFeedbackMode || SEPARATE_ATTRIBS);\n  }\n  gl.linkProgram(program);\n\n  // Check the link status\n  const linked = gl.getProgramParameter(program, LINK_STATUS);\n  if (!linked) {\n    // something went wrong with the link\n    const lastError = gl.getProgramInfoLog(program);\n    progOptions.errorCallback(`${\n      realShaders.map(shader => {\n        const src = addLineNumbersWithError(gl.getShaderSource(shader), '', 0);\n        const type = gl.getShaderParameter(shader, gl.SHADER_TYPE);\n        return `${glEnumToString(gl, type)}\\n${src}}`;\n      }).join('\\n')\n    }\\nError in program linking: ${lastError}`);\n\n    gl.deleteProgram(program);\n    deleteShaders(gl, newShaders);\n    return null;\n  }\n  return program;\n}\n\n/**\n * Creates a program from 2 sources.\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_options);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {string[]} shaderSources Array of sources for the\n *        shaders. The first is assumed to be the vertex shader,\n *        the second the fragment shader.\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {WebGLProgram?} the created program or null if error.\n * @memberOf module:twgl/programs\n */\nfunction createProgramFromSources(\n    gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {\n  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  const shaders = [];\n  for (let ii = 0; ii < shaderSources.length; ++ii) {\n    const shader = loadShader(\n        gl, shaderSources[ii], gl[defaultShaderType[ii]], progOptions.errorCallback);\n    if (!shader) {\n      return null;\n    }\n    shaders.push(shader);\n  }\n  return createProgram(gl, shaders, progOptions);\n}\n\n/**\n * Returns true if attribute/uniform is a reserved/built in\n *\n * It makes no sense to me why GL returns these because it's\n * illegal to call `gl.getUniformLocation` and `gl.getAttribLocation`\n * with names that start with `gl_` (and `webgl_` in WebGL)\n *\n * I can only assume they are there because they might count\n * when computing the number of uniforms/attributes used when you want to\n * know if you are near the limit. That doesn't really make sense\n * to me but the fact that these get returned are in the spec.\n *\n * @param {WebGLActiveInfo} info As returned from `gl.getActiveUniform` or\n *    `gl.getActiveAttrib`.\n * @return {bool} true if it's reserved\n * @private\n */\nfunction isBuiltIn(info) {\n  const name = info.name;\n  return name.startsWith(\"gl_\") || name.startsWith(\"webgl_\");\n}\n\nconst tokenRE = /(\\.|\\[|]|\\w+)/g;\nconst isDigit = s => s >= '0' && s <= '9';\nfunction addSetterToUniformTree(fullPath, setter, node, uniformSetters) {\n  const tokens = fullPath.split(tokenRE).filter(s => s !== '');\n  let tokenNdx = 0;\n  let path = '';\n\n  for (;;) {\n    const token = tokens[tokenNdx++];  // has to be name or number\n    path += token;\n    const isArrayIndex = isDigit(token[0]);\n    const accessor = isArrayIndex\n        ? parseInt(token)\n        : token;\n    if (isArrayIndex) {\n      path += tokens[tokenNdx++];  // skip ']'\n    }\n    const isLastToken = tokenNdx === tokens.length;\n    if (isLastToken) {\n      node[accessor] = setter;\n      break;\n    } else {\n      const token = tokens[tokenNdx++];  // has to be . or [\n      const isArray = token === '[';\n      const child = node[accessor] || (isArray ? [] : {});\n      node[accessor] = child;\n      node = child;\n      uniformSetters[path] = uniformSetters[path] || function(node) {\n        return function(value) {\n          setUniformTree(node, value);\n        };\n      }(child);\n      path += token;\n    }\n  }\n}\n\n/**\n * Creates setter functions for all uniforms of a shader\n * program.\n *\n * @see {@link module:twgl.setUniforms}\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program the program to create setters for.\n * @returns {Object.<string, function>} an object with a setter by name for each uniform\n * @memberOf module:twgl/programs\n */\nfunction createUniformSetters(gl, program) {\n  let textureUnit = 0;\n\n  /**\n   * Creates a setter for a uniform of the given program with it's\n   * location embedded in the setter.\n   * @param {WebGLProgram} program\n   * @param {WebGLUniformInfo} uniformInfo\n   * @returns {function} the created setter.\n   */\n  function createUniformSetter(program, uniformInfo, location) {\n    const isArray = uniformInfo.name.endsWith(\"[0]\");\n    const type = uniformInfo.type;\n    const typeInfo = typeMap[type];\n    if (!typeInfo) {\n      throw new Error(`unknown type: 0x${type.toString(16)}`); // we should never get here.\n    }\n    let setter;\n    if (typeInfo.bindPoint) {\n      // it's a sampler\n      const unit = textureUnit;\n      textureUnit += uniformInfo.size;\n      if (isArray) {\n        setter = typeInfo.arraySetter(gl, type, unit, location, uniformInfo.size);\n      } else {\n        setter = typeInfo.setter(gl, type, unit, location, uniformInfo.size);\n      }\n    } else {\n      if (typeInfo.arraySetter && isArray) {\n        setter = typeInfo.arraySetter(gl, location);\n      } else {\n        setter = typeInfo.setter(gl, location);\n      }\n    }\n    setter.location = location;\n    return setter;\n  }\n\n  const uniformSetters = {};\n  const uniformTree = {};\n  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);\n\n  for (let ii = 0; ii < numUniforms; ++ii) {\n    const uniformInfo = gl.getActiveUniform(program, ii);\n    if (isBuiltIn(uniformInfo)) {\n      continue;\n    }\n    let name = uniformInfo.name;\n    // remove the array suffix.\n    if (name.endsWith(\"[0]\")) {\n      name = name.substr(0, name.length - 3);\n    }\n    const location = gl.getUniformLocation(program, uniformInfo.name);\n    // the uniform will have no location if it's in a uniform block\n    if (location) {\n      const setter = createUniformSetter(program, uniformInfo, location);\n      uniformSetters[name] = setter;\n      addSetterToUniformTree(name, setter, uniformTree, uniformSetters);\n    }\n  }\n\n  return uniformSetters;\n}\n\n/**\n * @typedef {Object} TransformFeedbackInfo\n * @property {number} index index of transform feedback\n * @property {number} type GL type\n * @property {number} size 1 - 4\n * @memberOf module:twgl\n */\n\n/**\n * Create TransformFeedbackInfo for passing to bindTransformFeedbackInfo.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {Object<string, module:twgl.TransformFeedbackInfo>}\n * @memberOf module:twgl\n */\nfunction createTransformFeedbackInfo(gl, program) {\n  const info = {};\n  const numVaryings = gl.getProgramParameter(program, TRANSFORM_FEEDBACK_VARYINGS);\n  for (let ii = 0; ii < numVaryings; ++ii) {\n    const varying = gl.getTransformFeedbackVarying(program, ii);\n    info[varying.name] = {\n      index: ii,\n      type: varying.type,\n      size: varying.size,\n    };\n  }\n  return info;\n}\n\n/**\n * @typedef {Object} UniformData\n * @property {string} name The name of the uniform\n * @property {number} type The WebGL type enum for this uniform\n * @property {number} size The number of elements for this uniform\n * @property {number} blockNdx The block index this uniform appears in\n * @property {number} offset The byte offset in the block for this uniform's value\n * @memberOf module:twgl\n */\n\n/**\n * The specification for one UniformBlockObject\n *\n * @typedef {Object} BlockSpec\n * @property {number} index The index of the block.\n * @property {number} size The size in bytes needed for the block\n * @property {number[]} uniformIndices The indices of the uniforms used by the block. These indices\n *    correspond to entries in a UniformData array in the {@link module:twgl.UniformBlockSpec}.\n * @property {bool} usedByVertexShader Self explanatory\n * @property {bool} usedByFragmentShader Self explanatory\n * @property {bool} used Self explanatory\n * @memberOf module:twgl\n */\n\n/**\n * A `UniformBlockSpec` represents the data needed to create and bind\n * UniformBlockObjects for a given program\n *\n * @typedef {Object} UniformBlockSpec\n * @property {Object.<string, module:twgl.BlockSpec>} blockSpecs The BlockSpec for each block by block name\n * @property {UniformData[]} uniformData An array of data for each uniform by uniform index.\n * @memberOf module:twgl\n */\n\n/**\n * Creates a UniformBlockSpec for the given program.\n *\n * A UniformBlockSpec represents the data needed to create and bind\n * UniformBlockObjects\n *\n * @param {WebGL2RenderingContext} gl A WebGL2 Rendering Context\n * @param {WebGLProgram} program A WebGLProgram for a successfully linked program\n * @return {module:twgl.UniformBlockSpec} The created UniformBlockSpec\n * @memberOf module:twgl/programs\n */\nfunction createUniformBlockSpecFromProgram(gl, program) {\n  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);\n  const uniformData = [];\n  const uniformIndices = [];\n\n  for (let ii = 0; ii < numUniforms; ++ii) {\n    uniformIndices.push(ii);\n    uniformData.push({});\n    const uniformInfo = gl.getActiveUniform(program, ii);\n    uniformData[ii].name = uniformInfo.name;\n  }\n\n  [\n    [ \"UNIFORM_TYPE\", \"type\" ],\n    [ \"UNIFORM_SIZE\", \"size\" ],  // num elements\n    [ \"UNIFORM_BLOCK_INDEX\", \"blockNdx\" ],\n    [ \"UNIFORM_OFFSET\", \"offset\", ],\n  ].forEach(function(pair) {\n    const pname = pair[0];\n    const key = pair[1];\n    gl.getActiveUniforms(program, uniformIndices, gl[pname]).forEach(function(value, ndx) {\n      uniformData[ndx][key] = value;\n    });\n  });\n\n  const blockSpecs = {};\n\n  const numUniformBlocks = gl.getProgramParameter(program, ACTIVE_UNIFORM_BLOCKS);\n  for (let ii = 0; ii < numUniformBlocks; ++ii) {\n    const name = gl.getActiveUniformBlockName(program, ii);\n    const blockSpec = {\n      index: gl.getUniformBlockIndex(program, name),\n      usedByVertexShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),\n      usedByFragmentShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),\n      size: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_DATA_SIZE),\n      uniformIndices: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),\n    };\n    blockSpec.used = blockSpec.usedByVertexShader || blockSpec.usedByFragmentShader;\n    blockSpecs[name] = blockSpec;\n  }\n\n  return {\n    blockSpecs: blockSpecs,\n    uniformData: uniformData,\n  };\n}\n\nfunction setUniformTree(tree, values) {\n  for (const name in values) {\n    const prop = tree[name];\n    if (typeof prop === 'function') {\n      prop(values[name]);\n    } else {\n      setUniformTree(tree[name], values[name]);\n    }\n  }\n}\n\n/**\n * Set uniforms and binds related textures.\n *\n * example:\n *\n *     const programInfo = createProgramInfo(\n *         gl, [\"some-vs\", \"some-fs\"]);\n *\n *     const tex1 = gl.createTexture();\n *     const tex2 = gl.createTexture();\n *\n *     ... assume we setup the textures with data ...\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the textures AND set the\n * uniforms.\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *\n * For the example above it is equivalent to\n *\n *     var texUnit = 0;\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex1);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex2);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.uniform4fv(u_someColorLocation, [1, 0, 0, 1]);\n *     gl.uniform3fv(u_somePositionLocation, [0, 1, 1]);\n *     gl.uniformMatrix4fv(u_someMatrix, false, [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ]);\n *\n * Note it is perfectly reasonable to call `setUniforms` multiple times. For example\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *     };\n *\n *     const moreUniforms {\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *     twgl.setUniforms(programInfo, moreUniforms);\n *\n * You can also add WebGLSamplers to uniform samplers as in\n *\n *     const uniforms = {\n *       u_someSampler: {\n *         texture: someWebGLTexture,\n *         sampler: someWebGLSampler,\n *       },\n *     };\n *\n * In which case both the sampler and texture will be bound to the\n * same unit.\n *\n * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters a `ProgramInfo` as returned from `createProgramInfo` or the setters returned from\n *        `createUniformSetters`.\n * @param {Object.<string, ?>} values an object with values for the\n *        uniforms.\n *   You can pass multiple objects by putting them in an array or by calling with more arguments.For example\n *\n *     const sharedUniforms = {\n *       u_fogNear: 10,\n *       u_projection: ...\n *       ...\n *     };\n *\n *     const localUniforms = {\n *       u_world: ...\n *       u_diffuseColor: ...\n *     };\n *\n *     twgl.setUniforms(programInfo, sharedUniforms, localUniforms);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, [sharedUniforms, localUniforms]);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, sharedUniforms);\n *     twgl.setUniforms(programInfo, localUniforms};\n *\n *   You can also fill out structure and array values either via\n *   shortcut. Example\n *\n *     // -- in shader --\n *     struct Light {\n *       float intensity;\n *       vec4 color;\n *     };\n *     uniform Light lights[2];\n *\n *     // in JavaScript\n *\n *     twgl.setUniforms(programInfo, {\n *       lights: [\n *         { intensity: 5.0, color: [1, 0, 0, 1] },\n *         { intensity: 2.0, color: [0, 0, 1, 1] },\n *       ],\n *     });\n *\n *   or the more traditional way\n *\n *     twgl.setUniforms(programInfo, {\n *       \"lights[0].intensity\": 5.0,\n *       \"lights[0].color\": [1, 0, 0, 1],\n *       \"lights[1].intensity\": 2.0,\n *       \"lights[1].color\": [0, 0, 1, 1],\n *     });\n *\n *   You can also specify partial paths\n *\n *     twgl.setUniforms(programInfo, {\n *       'lights[1]: { intensity: 5.0, color: [1, 0, 0, 1] },\n *     });\n *\n *   But you can not specify leaf array indices\n *\n * @memberOf module:twgl/programs\n */\nfunction setUniforms(setters, ...args) {  // eslint-disable-line\n  const actualSetters = setters.uniformSetters || setters;\n  const numArgs = args.length;\n  for (let aNdx = 0; aNdx < numArgs; ++aNdx) {\n    const values = args[aNdx];\n    if (Array.isArray(values)) {\n      const numValues = values.length;\n      for (let ii = 0; ii < numValues; ++ii) {\n        setUniforms(actualSetters, values[ii]);\n      }\n    } else {\n      for (const name in values) {\n        const setter = actualSetters[name];\n        if (setter) {\n          setter(values[name]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Creates setter functions for all attributes of a shader\n * program. You can pass this to {@link module:twgl.setBuffersAndAttributes} to set all your buffers and attributes.\n *\n * @see {@link module:twgl.setAttributes} for example\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program the program to create setters for.\n * @return {Object.<string, function>} an object with a setter for each attribute by name.\n * @memberOf module:twgl/programs\n */\nfunction createAttributeSetters(gl, program) {\n  const attribSetters = {\n  };\n\n  const numAttribs = gl.getProgramParameter(program, ACTIVE_ATTRIBUTES);\n  for (let ii = 0; ii < numAttribs; ++ii) {\n    const attribInfo = gl.getActiveAttrib(program, ii);\n    if (isBuiltIn(attribInfo)) {\n      continue;\n    }\n    const index = gl.getAttribLocation(program, attribInfo.name);\n    const typeInfo = attrTypeMap[attribInfo.type];\n    const setter = typeInfo.setter(gl, index, typeInfo);\n    setter.location = index;\n    attribSetters[attribInfo.name] = setter;\n  }\n\n  return attribSetters;\n}\n\n/**\n * Sets attributes and binds buffers (deprecated... use {@link module:twgl.setBuffersAndAttributes})\n *\n * Example:\n *\n *     const program = createProgramFromScripts(\n *         gl, [\"some-vs\", \"some-fs\");\n *\n *     const attribSetters = createAttributeSetters(program);\n *\n *     const positionBuffer = gl.createBuffer();\n *     const texcoordBuffer = gl.createBuffer();\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the buffers AND set the\n * attributes.\n *\n *     setAttributes(attribSetters, attribs);\n *\n * Properties of attribs. For each attrib you can add\n * properties:\n *\n * *   type: the type of data in the buffer. Default = gl.FLOAT\n * *   normalize: whether or not to normalize the data. Default = false\n * *   stride: the stride. Default = 0\n * *   offset: offset into the buffer. Default = 0\n * *   divisor: the divisor for instances. Default = undefined\n *\n * For example if you had 3 value float positions, 2 value\n * float texcoord and 4 value uint8 colors you'd setup your\n * attribs like this\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *       a_color: {\n *         buffer: colorBuffer,\n *         numComponents: 4,\n *         type: gl.UNSIGNED_BYTE,\n *         normalize: true,\n *       },\n *     };\n *\n * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters\n * @param {Object.<string, module:twgl.AttribInfo>} buffers AttribInfos mapped by attribute name.\n * @memberOf module:twgl/programs\n * @deprecated use {@link module:twgl.setBuffersAndAttributes}\n */\nfunction setAttributes(setters, buffers) {\n  for (const name in buffers) {\n    const setter = setters[name];\n    if (setter) {\n      setter(buffers[name]);\n    }\n  }\n}\n\n/**\n * Sets attributes and buffers including the `ELEMENT_ARRAY_BUFFER` if appropriate\n *\n * Example:\n *\n *     const programInfo = createProgramInfo(\n *         gl, [\"some-vs\", \"some-fs\");\n *\n *     const arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *     };\n *\n *     const bufferInfo = createBufferInfoFromArrays(gl, arrays);\n *\n *     gl.useProgram(programInfo.program);\n *\n * This will automatically bind the buffers AND set the\n * attributes.\n *\n *     setBuffersAndAttributes(gl, programInfo, bufferInfo);\n *\n * For the example above it is equivalent to\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n *     gl.enableVertexAttribArray(a_positionLocation);\n *     gl.vertexAttribPointer(a_positionLocation, 3, gl.FLOAT, false, 0, 0);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n *     gl.enableVertexAttribArray(a_texcoordLocation);\n *     gl.vertexAttribPointer(a_texcoordLocation, 4, gl.FLOAT, false, 0, 0);\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext.\n * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters A `ProgramInfo` as returned from {@link module:twgl.createProgramInfo} or Attribute setters as returned from {@link module:twgl.createAttributeSetters}\n * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} buffers a `BufferInfo` as returned from {@link module:twgl.createBufferInfoFromArrays}.\n *   or a `VertexArrayInfo` as returned from {@link module:twgl.createVertexArrayInfo}\n * @memberOf module:twgl/programs\n */\nfunction setBuffersAndAttributes(gl, programInfo, buffers) {\n  if (buffers.vertexArrayObject) {\n    gl.bindVertexArray(buffers.vertexArrayObject);\n  } else {\n    setAttributes(programInfo.attribSetters || programInfo, buffers.attribs);\n    if (buffers.indices) {\n      gl.bindBuffer(ELEMENT_ARRAY_BUFFER$1, buffers.indices);\n    }\n  }\n}\n\n/**\n * @typedef {Object} ProgramInfo\n * @property {WebGLProgram} program A shader program\n * @property {Object<string, function>} uniformSetters object of setters as returned from createUniformSetters,\n * @property {Object<string, function>} attribSetters object of setters as returned from createAttribSetters,\n * @property {module:twgl.UniformBlockSpec} [uniformBlockSpec] a uniform block spec for making UniformBlockInfos with createUniformBlockInfo etc..\n * @property {Object<string, module:twgl.TransformFeedbackInfo>} [transformFeedbackInfo] info for transform feedbacks\n * @memberOf module:twgl\n */\n\n/**\n * Creates a ProgramInfo from an existing program.\n *\n * A ProgramInfo contains\n *\n *     programInfo = {\n *        program: WebGLProgram,\n *        uniformSetters: object of setters as returned from createUniformSetters,\n *        attribSetters: object of setters as returned from createAttribSetters,\n *     }\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {module:twgl.ProgramInfo} The created ProgramInfo.\n * @memberOf module:twgl/programs\n */\nfunction createProgramInfoFromProgram(gl, program) {\n  const uniformSetters = createUniformSetters(gl, program);\n  const attribSetters = createAttributeSetters(gl, program);\n  const programInfo = {\n    program,\n    uniformSetters,\n    attribSetters,\n  };\n\n  if (isWebGL2(gl)) {\n    programInfo.uniformBlockSpec = createUniformBlockSpecFromProgram(gl, program);\n    programInfo.transformFeedbackInfo = createTransformFeedbackInfo(gl, program);\n  }\n\n  return programInfo;\n}\n\n/**\n * Creates a ProgramInfo from 2 sources.\n *\n * A ProgramInfo contains\n *\n *     programInfo = {\n *        program: WebGLProgram,\n *        uniformSetters: object of setters as returned from createUniformSetters,\n *        attribSetters: object of setters as returned from createAttribSetters,\n *     }\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgramInfo(gl, [vs, fs], options);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {string[]} shaderSources Array of sources for the\n *        shaders or ids. The first is assumed to be the vertex shader,\n *        the second the fragment shader.\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {module:twgl.ProgramInfo?} The created ProgramInfo or null if it failed to link or compile\n * @memberOf module:twgl/programs\n */\nfunction createProgramInfo(\n    gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {\n  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  let good = true;\n  shaderSources = shaderSources.map(function(source) {\n    // Lets assume if there is no \\n it's an id\n    if (source.indexOf(\"\\n\") < 0) {\n      const script = getElementById(source);\n      if (!script) {\n        progOptions.errorCallback(\"no element with id: \" + source);\n        good = false;\n      } else {\n        source = script.text;\n      }\n    }\n    return source;\n  });\n  if (!good) {\n    return null;\n  }\n  const program = createProgramFromSources(gl, shaderSources, progOptions);\n  if (!program) {\n    return null;\n  }\n  return createProgramInfoFromProgram(gl, program);\n}\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nconst TRIANGLES                      = 0x0004;\nconst UNSIGNED_SHORT$3                 = 0x1403;\n\n/**\n * Drawing related functions\n *\n * For backward compatibility they are available at both `twgl.draw` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/draw\n */\n\n/**\n * Calls `gl.drawElements` or `gl.drawArrays`, whichever is appropriate\n *\n * normally you'd call `gl.drawElements` or `gl.drawArrays` yourself\n * but calling this means if you switch from indexed data to non-indexed\n * data you don't have to remember to update your draw call.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} bufferInfo A BufferInfo as returned from {@link module:twgl.createBufferInfoFromArrays} or\n *   a VertexArrayInfo as returned from {@link module:twgl.createVertexArrayInfo}\n * @param {number} [type] eg (gl.TRIANGLES, gl.LINES, gl.POINTS, gl.TRIANGLE_STRIP, ...). Defaults to `gl.TRIANGLES`\n * @param {number} [count] An optional count. Defaults to bufferInfo.numElements\n * @param {number} [offset] An optional offset. Defaults to 0.\n * @param {number} [instanceCount] An optional instanceCount. if set then `drawArraysInstanced` or `drawElementsInstanced` will be called\n * @memberOf module:twgl/draw\n */\nfunction drawBufferInfo(gl, bufferInfo, type, count, offset, instanceCount) {\n  type = type === undefined ? TRIANGLES : type;\n  const indices = bufferInfo.indices;\n  const elementType = bufferInfo.elementType;\n  const numElements = count === undefined ? bufferInfo.numElements : count;\n  offset = offset === undefined ? 0 : offset;\n  if (elementType || indices) {\n    if (instanceCount !== undefined) {\n      gl.drawElementsInstanced(type, numElements, elementType === undefined ? UNSIGNED_SHORT$3 : bufferInfo.elementType, offset, instanceCount);\n    } else {\n      gl.drawElements(type, numElements, elementType === undefined ? UNSIGNED_SHORT$3 : bufferInfo.elementType, offset);\n    }\n  } else {\n    if (instanceCount !== undefined) {\n      gl.drawArraysInstanced(type, offset, numElements, instanceCount);\n    } else {\n      gl.drawArrays(type, offset, numElements);\n    }\n  }\n}\n\n/**\n * @typedef {Object} VertexArrayInfo\n * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.\n * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..\n * @property {WebGLVertexArrayObject} [vertexArrayObject] a vertex array object\n * @memberOf module:twgl\n */\n\n/**\n * Creates a VertexArrayInfo from a BufferInfo and one or more ProgramInfos\n *\n * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to\n * {@link module:twgl:drawBufferInfo}.\n *\n * > **IMPORTANT:** Vertex Array Objects are **not** a direct analog for a BufferInfo. Vertex Array Objects\n *   assign buffers to specific attributes at creation time. That means they can only be used with programs\n *   who's attributes use the same attribute locations for the same purposes.\n *\n * > Bind your attribute locations by passing an array of attribute names to {@link module:twgl.createProgramInfo}\n *   or use WebGL 2's GLSL ES 3's `layout(location = <num>)` to make sure locations match.\n *\n * also\n *\n * > **IMPORTANT:** After calling twgl.setBuffersAndAttribute with a BufferInfo that uses a Vertex Array Object\n *   that Vertex Array Object will be bound. That means **ANY MANIPULATION OF ELEMENT_ARRAY_BUFFER or ATTRIBUTES**\n *   will affect the Vertex Array Object state.\n *\n * > Call `gl.bindVertexArray(null)` to get back manipulating the global attributes and ELEMENT_ARRAY_BUFFER.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.ProgramInfo|module:twgl.ProgramInfo[]} programInfo a programInfo or array of programInfos\n * @param {module:twgl.BufferInfo} bufferInfo BufferInfo as returned from createBufferInfoFromArrays etc...\n *\n *    You need to make sure every attribute that will be used is bound. So for example assume shader 1\n *    uses attributes A, B, C and shader 2 uses attributes A, B, D. If you only pass in the programInfo\n *    for shader 1 then only attributes A, B, and C will have their attributes set because TWGL doesn't\n *    now attribute D's location.\n *\n *    So, you can pass in both shader 1 and shader 2's programInfo\n *\n * @return {module:twgl.VertexArrayInfo} The created VertexArrayInfo\n *\n * @memberOf module:twgl/vertexArrays\n */\nfunction createVertexArrayInfo(gl, programInfos, bufferInfo) {\n  const vao = gl.createVertexArray();\n  gl.bindVertexArray(vao);\n  if (!programInfos.length) {\n    programInfos = [programInfos];\n  }\n  programInfos.forEach(function(programInfo) {\n    setBuffersAndAttributes(gl, programInfo, bufferInfo);\n  });\n  gl.bindVertexArray(null);\n  return {\n    numElements: bufferInfo.numElements,\n    elementType: bufferInfo.elementType,\n    vertexArrayObject: vao,\n  };\n}\n\nconst ALL_POTENTIAL_ATTRIBUTES = SUPPORTED_CHANNEL_ATTRIBUTES.map(\n  (attr) => `a_${attr}`\n).concat(\"a_VertexPosition\");\n\nclass WebGLCanvasDrawer extends Drawer {\n  constructor(viewportData) {\n    super(viewportData);\n\n    this.gl = this.canvas.getContext(\"webgl2\", {\n      // Setting these to false makes webgl handle more like opengl\n      // Source: https://webglfundamentals.org/webgl/lessons/webgl-and-alpha.html\n      alpha: false,\n      premultipliedAlpha: false,\n    });\n\n    if (!this.gl) {\n      console.error(\"Unable to initialize WebGL!\");\n      return;\n    }\n  }\n\n  /**\n   * Called whenever a frame has been successfully animated.\n   */\n  tick() {}\n\n  /**\n   * Calculates the viewport for this.gl.viewport to control zooming. Also calculates point size.\n   * @returns Array of 5 elements, first 4 are viewport parameters, last is pointSizeMultiplier:\n   *   [xOffset, yOffset, displayAsIfThisWide, displayAsIfThisHigh, pointSizeMultiplier]\n   */\n  getWebGLViewport() {\n    // Calculate appropriate webgl viewport given current selection window\n\n    // Transform current data coordinates to GPU cordinates\n    const scaleXWindowSpace = scale([this.minX, this.maxX], [-1, 1]);\n    const scaleYWindowSpace = scale([this.minY, this.maxY], [-1, 1]);\n\n    // Multiply point size by the ratio of max dimension and current width\n    const pointSize = Math.max(\n      1.75,\n      Math.min(\n        1 /\n          (scaleXWindowSpace(this.currentXRange[1]) -\n            scaleXWindowSpace(this.currentXRange[0])),\n        1 /\n          (scaleYWindowSpace(this.currentYRange[1]) -\n            scaleYWindowSpace(this.currentYRange[0]))\n      )\n    );\n    // Return [x1, y1, x2, y2] and pointsize, camera corners coordinates in GPU space\n    // Which becomes uniform in vertex shader\n    return [\n      scaleXWindowSpace(this.currentXRange[0]),\n      scaleYWindowSpace(this.currentYRange[0]),\n      scaleXWindowSpace(this.currentXRange[1]),\n      scaleYWindowSpace(this.currentYRange[1]),\n      pointSize,\n    ];\n  }\n\n  /**\n   * Sets the specification and begins the process of drawing it.\n   *  1. Cancels any current animation\n   *  2. Builds shaders for the tracks\n   *  3. After data is loaded, calls populateBuffers.\n   *\n   * @param {Object} specification of visualization\n   */\n  setSpecification(specification) {\n    super.render(); // Cancels current animation frame\n\n    // Populate buffers needs a trackShader built to know what buffers to fill\n    this.trackShaders = VertexShader.fromSpecification(specification);\n\n    new SpecificationProcessor(specification, this.populateBuffers.bind(this));\n  }\n\n  /**\n   * Populate the buffers that are fed to webgl for drawing.\n   *\n   * @param {SpecificationProcessor} specificationHelper created in the setSpecification method\n   */\n  populateBuffers(specificationHelper) {\n    let currentTrack = specificationHelper.getNextTrack();\n    let currentTrackShaderIndex = 0;\n\n    this.semanticZoomer = new SemanticZoomer(specificationHelper);\n\n    while (currentTrack) {\n      // Construct calculator in track loop as calculator keeps internal state for each track\n      let vertexCalculator = new VertexCalculator(\n        specificationHelper.xScale,\n        specificationHelper.yScale,\n        currentTrack.track // Access actual track specification\n      );\n\n      let currentMark = currentTrack.getNextMark();\n\n      while (currentMark) {\n        // A lot of the heavy lifting occurs in the track shaders, this class is mostly boilerplate for webgl\n        this.trackShaders[currentTrackShaderIndex].addMarkToBuffers(\n          currentMark,\n          vertexCalculator\n        );\n\n        currentMark = currentTrack.getNextMark();\n      }\n\n      currentTrack = specificationHelper.getNextTrack();\n      currentTrackShaderIndex++;\n    }\n\n    this.render();\n  }\n\n  /**\n   * Animates the frames by setting viewport, uniforms, blending, clearing, and calling webgl draw.\n   */\n  animate() {\n    if (!this.needsAnimation) {\n      // Prevent pointless animation if canvas does not change\n      this.lastFrame = requestAnimationFrame(this.animate.bind(this));\n      this.tick();\n      return;\n    }\n\n    const viewport = this.getWebGLViewport();\n    this.globalUniforms.viewport = new Float32Array(viewport.slice(0, 4));\n    this.globalUniforms.pointSizeModifier = viewport[4];\n\n    // Clear the canvas before we start drawing on it.\n    this.gl.clearColor(1, 1, 1, 1);\n\n    // Set the blending function\n    // Blend functions are weird, play with them:\n    // https://mrdoob.github.io/webgl-blendfunctions/blendfunc.html\n    // http://www.andersriggelsen.dk/glblendfunc.php\n    this.gl.enable(this.gl.BLEND);\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n    // For each track shader, use their shader program then draw it\n    this.trackShaders.forEach((trackShader, index) => {\n      this.gl.useProgram(this.programInfos[index].program);\n\n      setUniforms(this.programInfos[index], {\n        ...this.globalUniforms,\n        ...trackShader.uniforms,\n      });\n\n      setBuffersAndAttributes(\n        this.gl,\n        this.programInfos[index],\n        this.vertexArrayInfos[index]\n      );\n\n      drawBufferInfo(\n        this.gl,\n        this.vertexArrayInfos[index],\n        this.gl[\n          this.semanticZoomer.getRecommendedDrawingMode(\n            trackShader,\n            this.currentXRange,\n            this.currentYRange\n          )\n        ],\n        trackShader.attributes.a_VertexPosition.data.length / 2\n      );\n    });\n\n    this.needsAnimation = false;\n    this.lastFrame = requestAnimationFrame(this.animate.bind(this));\n    this.tick();\n  }\n\n  /**\n   * Prepares animation by compiling shaders, setting uniforms, constructing buffers,\n   * and handling additional boilerplate.\n   */\n  render() {\n    super.render();\n\n    this.programInfos = this.trackShaders.map((trackShader) =>\n      createProgramInfo(\n        this.gl,\n        [trackShader.buildShader(), trackShader.drawMode === \"POINTS\" ? varyingColorsFragmentShaderDots : varyingColorsFragmentShader],\n        ALL_POTENTIAL_ATTRIBUTES\n      )\n    );\n\n    this.globalUniforms = {\n      viewport: new Float32Array([-1, -1, 1, 1]),\n      pointSizeModifier: 1,\n    };\n\n    this.vertexArrayInfos = this.trackShaders.map((trackShader) =>\n      createVertexArrayInfo(\n        this.gl,\n        this.programInfos,\n        createBufferInfoFromArrays(this.gl, trackShader.attributes)\n      )\n    );\n\n    this.needsAnimation = true;\n    this.animate();\n  }\n}\n\n/**\n * The offscreen webgl worker is meant to communicate from the {@link WebGLVis}\n * by sending a specification data to the drawer for management of shader program and\n * eventually drawing. Most messages passed are containing the new viewport\n * information for the drawer to process.\n */\n\nclass OffscreenWebGLDrawer extends WebGLCanvasDrawer {\n  tick() {\n    postMessage({ type: \"tick\" });\n  }\n}\n\nself.onmessage = (message) => {\n  switch (message.data.type) {\n    case \"init\":\n      self.drawer = message.data.displayFPSMeter\n        ? new OffscreenWebGLDrawer(message.data)\n        : new WebGLCanvasDrawer(message.data);\n      break;\n    case \"viewport\":\n      self.drawer.receiveViewport(message.data);\n      break;\n    case \"render\":\n      self.drawer.receiveViewport(message.data);\n      self.drawer.render();\n      break;\n    case \"specification\":\n      self.drawer.setSpecification(message.data.specification);\n      break;\n    case \"clearBuffers\":\n      self.drawer.clearBuffers();\n      break;\n    case \"resize\":\n      self.drawer.canvas.width = message.data.width;\n      self.drawer.canvas.height = message.data.height;\n      self.drawer.gl.viewport(0, 0, message.data.width, message.data.height);\n      break;\n    default:\n      console.error(`Received unknown message type: ${message.type}`);\n  }\n};\n"],"names":["formatDecimalParts","x","p","i","toExponential","indexOf","coefficient","slice","length","exponent","Math","abs","NaN","prefixExponent","re","formatSpecifier","specifier","match","exec","Error","FormatSpecifier","fill","align","sign","symbol","zero","width","comma","precision","trim","type","this","undefined","formatRounded","d","Array","join","prototype","toString","max","formatTypes","%","toFixed","round","toLocaleString","replace","e","f","g","toPrecision","min","floor","n","toUpperCase","identity","locale","format","map","prefixes","formatLocale","grouping","thousands","group","call","Number","value","t","j","push","substring","reverse","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","prefix","test","toLowerCase","suffix","formatType","maybeSuffix","c","valuePrefix","valueSuffix","valueNegative","isNaN","s","out","i1","i0","formatTrim","charCodeAt","Infinity","padding","formatPrefix","k","pow","GenomeScale","constructor","genomeId","domain","genomeSizes","console","error","concat","startChr","startPair","split","parseInt","endChr","endPair","mapPairToGenomeIndex","chrSizes","chrStarts","Map","cumulativeTotal","forEach","key","set","chr","pairNum","get","createPairMapperToGenome","firstPairInDomain","lastPairInDomain","mapGenomeIndexToClipSpace","scale","mapGenomeIndexToClipSpaceInverse","toClipSpaceFromParts","pair","toClipSpaceFromString","pairStr","inverse","num","chrId","chrLoc","formatting","arguments","genomeSpot","chrKey","pairCount","entries","getMidpoint","chr1","gene1","chr2","gene2","x1","x2","middleGene","gene","getTickCoordsAndLabels","start","end","toReturn","suggestedFormat","difference","magnitude","log10","startingValue","step","currValue","keys","tickCoords","tickLabels","coord","toCallable","func","args","isGenomeScale","bind","completeScale","finalEntry","size","hg38","hg19","mm9","mm10","mm39","define","factory","extend","parent","definition","Object","create","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","m","l","rgbn","Rgb","rgba","hsla","hasOwnProperty","r","b","a","rgbConvert","o","opacity","rgb$1","rgb_formatHex","hex","rgb_formatRgb","h","Hsl","hslConvert","hsl2rgb","m1","m2","range","domainLength","slope","intercept","rgbToHex","rgbStringToHex","asStr","colorSpecifierToHex","asColor","copy","channels","assign","displayable","formatHsl","getScaleForSpecification","dimension","specification","genome","genomic","track","tracks","includes","viewport","smallestX","POSITIVE_INFINITY","largestX","NEGATIVE_INFINITY","smallestY","largestY","xDomain","yDomain","y","height","getViewportForSpecification","geneScale","smallestGene","largestGene","smallestGeneValue","largestGeneValue","getQuadraticBezierCurveForPoints","P0","P1","P2","constant","linear","gamma","nogamma","exponential","rgbGamma","spline","rgbBasis","values","v1","v2","v0","v3","t1","t2","t3","basis","colors","radians","PI","degrees","A","B","C","D","E","ED","EB","BC_DA","cubehelix$2","Cubehelix","bl","sqrt","atan2","cubehelixConvert","cubehelix$1","hue","cubehelixGamma","cubehelix","cosh","cos","sinh","sin","cubehelixLong","SIZE_UNITS","VertexCalculator","xScale","yScale","drawMode","getDrawModeForTrack","calculateForMark","mark","_calculateForMark","transformGenomicRangeArcToStandard","isArray","x1ClipSpace","y2","y1ClipSpace","transformGenomicRangeToStandard","y1","_getVerticesForAreaSection","lastMark","_getVerticesForTick","_getVertexForDot","_getVerticesForRect","_getVerticesForArc","shape","_getVerticesForSquare","_getVerticesForTriangle","_getVerticesForPolygon","_getVerticesForCross","_mapToGPUSpace","vertices","isX","startPoint","quadraticCurve","getCurveForArc","midpoint","distance","isFinite","NUMBER_OF_VERTICES_PER_ARC","nextPoint","sides","center","theta","category10","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Tableau10","ramp$1","scheme","scheme$q","BrBG","scheme$p","PRGn","scheme$o","PiYG","scheme$n","PuOr","scheme$m","RdBu","scheme$l","RdGy","scheme$k","RdYlBu","scheme$j","RdYlGn","scheme$i","Spectral","scheme$h","BuGn","scheme$g","BuPu","scheme$f","GnBu","scheme$e","OrRd","scheme$d","PuBuGn","scheme$c","PuBu","scheme$b","PuRd","scheme$a","RdPu","scheme$9","YlGnBu","scheme$8","YlGn","scheme$7","YlOrBr","scheme$6","YlOrRd","scheme$5","Blues","scheme$4","Greens","scheme$3","Greys","scheme$2","Purples","scheme$1","Reds","Oranges","warm","cool","c$1","pi_1_3","pi_2_3","ramp","viridis","magma","inferno","plasma","d3","freeze","__proto__","schemeCategory10","schemeAccent","schemeDark2","schemePaired","schemePastel1","schemePastel2","schemeSet1","schemeSet2","schemeSet3","schemeTableau10","interpolateBrBG","schemeBrBG","interpolatePRGn","schemePRGn","interpolatePiYG","schemePiYG","interpolatePuOr","schemePuOr","interpolateRdBu","schemeRdBu","interpolateRdGy","schemeRdGy","interpolateRdYlBu","schemeRdYlBu","interpolateRdYlGn","schemeRdYlGn","interpolateSpectral","schemeSpectral","interpolateBuGn","schemeBuGn","interpolateBuPu","schemeBuPu","interpolateGnBu","schemeGnBu","interpolateOrRd","schemeOrRd","interpolatePuBuGn","schemePuBuGn","interpolatePuBu","schemePuBu","interpolatePuRd","schemePuRd","interpolateRdPu","schemeRdPu","interpolateYlGnBu","schemeYlGnBu","interpolateYlGn","schemeYlGn","interpolateYlOrBr","schemeYlOrBr","interpolateYlOrRd","schemeYlOrRd","interpolateBlues","schemeBlues","interpolateGreens","schemeGreens","interpolateGreys","schemeGreys","interpolatePurples","schemePurples","interpolateReds","schemeReds","interpolateOranges","schemeOranges","interpolateCividis","interpolateCubehelixDefault","interpolateRainbow","ts","interpolateWarm","interpolateCool","interpolateSinebow","interpolateTurbo","interpolateViridis","interpolateMagma","interpolateInferno","interpolatePlasma","DEFAULT_CHANNELS","numComponents","DEFAULT_COLOR_SCHEME","SHAPES","SpecificationProcessor","callback","index","defaultData","dataPromise","fetch","then","response","text","data","isInlineData","Track","allPromises","filter","Promise","all","getNextTrack","processHeadersAndMappers","hasOwnData","headers","channelMaps","channel","buildMapperForChannel","getNextDataPoint","geometry","coordinates","dimensions","splitted","header","currRow","rawHeight","rawWidth","getNextMark","mapper","channelInfo","attributeIndex","attribute","attrMapper","buildMapperForInlineChannel","buildMapperForQuantitiveChannel","buildMapperForCategoricalChannel","chrAttributeIndex","chrAttribute","geneAttributeIndex","geneAttribute","buildMapperForGenomicChannel","row","genomicAttributeIndices","startAttribute","endAttribute","buildMapperForGenomicRangeChannel","parseFloat","info","inlineValue","minOpacity","minSize","maxSize","d3colorScale","colorScheme","zeroToOneScale","attrValue","minWidth","maxWidth","minHeight","maxHeight","categoryTracker","channelScale","cardinality","categoryId","has","startsWith","genomeStart","genomeEnd","Drawer","drawingData","canvas","receiveViewport","viewportData","minX","maxX","minY","maxY","currentXRange","xRange","currentYRange","yRange","needsAnimation","tick","animate","render","lastFrame","cancelAnimationFrame","sizeOfGeneRangeForTriangles","SemanticZoomer","specificationHelper","getRecommendedDrawingMode","trackShader","SUPPORTED_CHANNEL_ATTRIBUTES","VertexShader","shader","uniforms","attributes","a_VertexPosition","addMarkToBuffers","vertexCalculator","setDrawMode","addChannelBuffer","setChannelUniform","uniform","buildShader","built","colorName","opacityName","sizeName","vertexShaderSuffix","fromSpecification","fromTrack","vsBuilder","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","getGLTypeForTypedArray","typedArray","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","isArrayBuffer","SharedArrayBuffer","buffer","ArrayBuffer","isTexture","gl","WebGLTexture","STATIC_DRAW","ARRAY_BUFFER","BUFFER_SIZE","BYTE$1","UNSIGNED_BYTE$1","SHORT$1","UNSIGNED_SHORT$1","INT$1","UNSIGNED_INT$1","FLOAT$1","defaults","attribPrefix","createBufferFromTypedArray","drawType","WebGLBuffer","createBuffer","array","bindBuffer","bufferData","setBufferFromTypedArray","isIndices","name","texcoordRE","colorRE","guessNumComponentsFromName","makeTypedArray","Type","createAttribsFromArrays","arrays","attribs","arrayName","attribName","attrib","normalization","normalize","numValues","arrayType","numBytes","BYTES_PER_ELEMENT","typedArrayType","getGLTypeForTypedArrayType","getNormalizationForTypedArray","getArray","getNumComponents","stride","offset","divisor","positionKeys","getNumElementsFromAttributes","ii","getBufferParameter","totalElements","numElements","isWebGL2","texStorage2D","glEnumToString","haveEnumsForType","enums","existing","addEnums","error$1","getElementById","id","document","TEXTURE0","ARRAY_BUFFER$1","ELEMENT_ARRAY_BUFFER$1","COMPILE_STATUS","LINK_STATUS","FRAGMENT_SHADER","VERTEX_SHADER","SEPARATE_ATTRIBS","ACTIVE_UNIFORMS","ACTIVE_ATTRIBUTES","TRANSFORM_FEEDBACK_VARYINGS","ACTIVE_UNIFORM_BLOCKS","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","FLOAT$3","INT$3","UNSIGNED_INT$3","TEXTURE_2D$1","TEXTURE_CUBE_MAP$1","TEXTURE_3D$1","TEXTURE_2D_ARRAY$1","typeMap","getBindPointForSamplerType","bindPoint","intSetter","location","v","uniform1i","intArraySetter","uniform1iv","intVec2Setter","uniform2iv","intVec3Setter","uniform3iv","intVec4Setter","uniform4iv","samplerSetter","unit","textureOrPair","texture","sampler","activeTexture","bindTexture","bindSampler","samplerArraySetter","units","textures","floatAttribSetter","disableVertexAttribArray","vertexAttrib4fv","vertexAttrib3fv","vertexAttrib2fv","vertexAttrib1fv","enableVertexAttribArray","vertexAttribPointer","vertexAttribDivisor","intAttribSetter","vertexAttrib4iv","vertexAttribIPointer","uintAttribSetter","vertexAttrib4uiv","matAttribSetter","typeInfo","defaultSize","count","rowOffset","setter","uniform1f","arraySetter","uniform1fv","uniform2fv","cols","uniform3fv","uniform4fv","uniform1ui","uniform1uiv","uniform2uiv","uniform3uiv","uniform4uiv","uniformMatrix2fv","rows","uniformMatrix3fv","uniformMatrix4fv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","attrTypeMap","errorRE","addLineNumbersWithError","src","log","lineOffset","matches","matchAll","lineNoToErrorMap","ndx","lineNo","next","line","err","spaceRE","loadShader","shaderSource","shaderType","opt_errorCallback","errFn","createShader","compileShader","getShaderParameter","lastError","getShaderInfoLog","deleteShader","getProgramOptions","opt_attribs","opt_locations","transformFeedbackVaryings","transformFeedbackMode","errorCallback","opt","attribLocations","options","defaultShaderType","deleteShaders","shaders","createProgramFromSources","shaderSources","progOptions","realShaders","newShaders","elem","scriptType","WebGLShader","program","createProgram","attachShader","bindAttribLocation","varyings","linkProgram","getProgramParameter","getProgramInfoLog","getShaderSource","SHADER_TYPE","deleteProgram","isBuiltIn","tokenRE","isDigit","addSetterToUniformTree","fullPath","node","uniformSetters","tokens","tokenNdx","path","token","isArrayIndex","accessor","child","setUniformTree","tree","prop","setUniforms","setters","actualSetters","numArgs","aNdx","setBuffersAndAttributes","programInfo","buffers","vertexArrayObject","bindVertexArray","setAttributes","attribSetters","indices","createProgramInfoFromProgram","textureUnit","createUniformSetter","uniformInfo","endsWith","uniformTree","numUniforms","getActiveUniform","substr","getUniformLocation","createUniformSetters","numAttribs","attribInfo","getActiveAttrib","getAttribLocation","createAttributeSetters","uniformBlockSpec","uniformData","uniformIndices","pname","getActiveUniforms","blockSpecs","numUniformBlocks","getActiveUniformBlockName","blockSpec","getUniformBlockIndex","usedByVertexShader","getActiveUniformBlockParameter","usedByFragmentShader","used","createUniformBlockSpecFromProgram","transformFeedbackInfo","numVaryings","varying","getTransformFeedbackVarying","createTransformFeedbackInfo","ALL_POTENTIAL_ATTRIBUTES","attr","WebGLCanvasDrawer","super","getContext","alpha","premultipliedAlpha","getWebGLViewport","scaleXWindowSpace","scaleYWindowSpace","pointSize","setSpecification","trackShaders","populateBuffers","currentTrack","currentTrackShaderIndex","semanticZoomer","currentMark","requestAnimationFrame","globalUniforms","pointSizeModifier","clearColor","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","clear","COLOR_BUFFER_BIT","useProgram","programInfos","vertexArrayInfos","bufferInfo","instanceCount","elementType","drawElementsInstanced","drawElements","drawArraysInstanced","drawArrays","drawBufferInfo","good","source","script","createProgramInfo","vao","createVertexArray","createVertexArrayInfo","srcBufferInfo","newAttribs","newIndices","createBufferInfoFromArrays","OffscreenWebGLDrawer","postMessage","self","onmessage","message","drawer","displayFPSMeter","clearBuffers"],"sourceRoot":""}