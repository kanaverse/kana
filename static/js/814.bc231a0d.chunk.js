(()=>{"use strict";var r={1952:(r,e,t)=>{t.d(e,{Fl:()=>m,Os:()=>f,WI:()=>A});var a=t(4467),n=t(4169),s=t(536);class i extends s.K{array(){return new Uint8Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(i,"className","Uint8WasmArray"),(0,a.A)(i,"valueSize",1);class o extends s.K{array(){return new Int8Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(o,"className","Int8WasmArray"),(0,a.A)(o,"valueSize",1);class l extends s.K{array(){return new Uint16Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(l,"className","Uint16WasmArray"),(0,a.A)(l,"valueSize",2);class c extends s.K{array(){return new Int16Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(c,"className","Int16WasmArray"),(0,a.A)(c,"valueSize",2);class u extends s.K{array(){return new Uint32Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(u,"className","Uint32WasmArray"),(0,a.A)(u,"valueSize",4);class f extends s.K{array(){return new Int32Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(f,"className","Int32WasmArray"),(0,a.A)(f,"valueSize",4);class h extends s.K{array(){return new BigUint64Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(h,"className","BigUint64WasmArray"),(0,a.A)(h,"valueSize",8);class y extends s.K{array(){return new BigInt64Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(y,"className","BigInt64WasmArray"),(0,a.A)(y,"valueSize",8);class d extends s.K{array(){return new Float32Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(d,"className","Float32WasmArray"),(0,a.A)(d,"valueSize",4);class A extends s.K{array(){return new Float64Array((0,n.r)(this.space),this.offset,this.length)}}(0,a.A)(A,"className","Float64WasmArray"),(0,a.A)(A,"valueSize",8);const p={Uint8WasmArray:i,Int8WasmArray:o,Uint16WasmArray:l,Int16WasmArray:c,Uint32WasmArray:u,Int32WasmArray:f,BigUint64WasmArray:h,BigInt64WasmArray:y,Float32WasmArray:d,Float64WasmArray:A};function m(r){if(!(r in p))throw new Error("unknown WasmArray class '"+r+"'");return p[r]}},2668:(r,e,t)=>{t(7031),t(6524),t(2322),t(4718)},3315:(r,e,t)=>{t.d(e,{Lc:()=>m});var a=t(45),n=t(5149),s=t(8458),i=t(4558),o=t(7031),l=t(6524),c=t(2322),u=t(4718);const f=["maxIterations","runTime"],h=["perplexity","neighbors","numberOfThreads"];var y=new WeakMap,d=new WeakMap,A=new WeakMap;class p{constructor(r,e,t){(0,n.A)(this,y,void 0),(0,n.A)(this,d,void 0),(0,n.A)(this,A,void 0),(0,i.A)(y,this,r),(0,i.A)(d,this,e),(0,i.A)(A,this,t)}clone(){return c.T(r=>(0,s.A)(d,this).deepcopy(),p,(0,s.A)(A,this).clone())}numberOfCells(){return(0,s.A)(d,this).num_observations()}iterations(){return(0,s.A)(d,this).iterations()}extractCoordinates(){return o.VM(this.numberOfCells(),(0,s.A)(A,this).array())}run(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxIterations:e=1e3,runTime:t=null}=r,n=(0,a.A)(r,f);o.PI(n),null===t&&(t=-1),l.T1(r=>r.run_tsne((0,s.A)(d,this),t,e,(0,s.A)(A,this).offset))}free(){null!==(0,s.A)(d,this)&&(c._((0,s.A)(y,this)),(0,i.A)(d,this,null)),null!==(0,s.A)(A,this)&&((0,s.A)(A,this).free(),(0,i.A)(A,this,null))}}function m(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{perplexity:t=30,neighbors:n=null,numberOfThreads:s=null}=e,i=(0,a.A)(e,h);var f,y,d;o.PI(i);let A=o.J2(s);const m=null==n?function(r){return l.T1(e=>e.perplexity_to_k(r))}(t):n;try{let e;r instanceof u.pb?(f=(0,u.jw)(r,m,{numberOfThreads:A}),e=f):(m!=r.numberOfNeighbors()&&console.warn("number of neighbors in 'x' does not match 'neighbors'"),e=r),y=o.k3(2*e.numberOfCells()),l.T1(r=>r.randomize_tsne_start(e.numberOfCells(),y.offset,42)),d=c.T(r=>r.initialize_tsne(e.results,t,A),p,y)}catch(v){throw o.t9(d),o.t9(y),v}finally{o.t9(f)}return d}},5814:(r,e,t)=>{var a,n=t(7990),s=t(1276),i=t(1820),o=t(6194),l={},c=!1,u={},f={},h=!1;function y(r,e){l.init.numberOfCells();var t=i.n(r),a=l.init.clone();try{for(;a.iterations()<e;)if(a.run({runTime:t,maxIterations:e}),r){let r=a.extractCoordinates();o._({type:"tsne_iter",x:r.x,y:r.y,iteration:a.iterations()},[r.x.buffer,r.y.buffer])}l.final=a.extractCoordinates()}finally{a.free()}}o.r(r=>{var e=r.data.id;h?o._({id:e,type:"error",error:"t-SNE worker is dead and cannot process messages"}):"INIT"==r.data.cmd?(a=n.n_(r.data.scranOptions)).then(r=>{o._({id:e,type:"init_worker",data:{status:"SUCCESS"}})}).catch(r=>{o._({id:e,type:"error",error:r})}):"RUN"==r.data.cmd?a.then(t=>{var a;"neighbors"in r.data?(s.xr(l.neighbors),l.neighbors=i.f(r.data.neighbors),a=!0):a=!1;var h={perplexity:r.data.params.perplexity};a||s.PG(h,u)?(s.xr(l.init),l.init=n.Lc(l.neighbors,{perplexity:h.perplexity}),u=h,c=!0):c=!1;var d={iterations:r.data.params.iterations};(c||s.PG(d,f))&&(y(r.data.params.animate,d.iterations),f=d),o._({id:e,type:"tsne_run",data:{status:"SUCCESS"}})}).catch(r=>{o._({id:e,type:"error",error:r})}):"RERUN"==r.data.cmd?a.then(r=>{y(!0,f.iterations),o._({id:e,type:"tsne_rerun",data:{status:"SUCCESS"}})}).catch(r=>{o._({id:e,type:"error",error:r})}):"FETCH"==r.data.cmd?a.then(r=>{var t={x:l.final.x.slice(),y:l.final.y.slice(),iterations:f.iterations},a=[t.x.buffer,t.y.buffer];o._({id:e,type:"tsne_fetch",data:t},a)}).catch(r=>{o._({id:e,type:"error",error:r})}):"KILL"==r.data.cmd?(h=!0,a.then(r=>{n.MH(),o._({id:e,type:"tsne_killed",data:null})}).catch(r=>{o._({id:e,type:"error",error:r})})):o._({id:e,type:"error",error:"unknown message type '"+JSON.stringify(r.data)+"'"})})},7031:(r,e,t)=>{t.d(e,{J2:()=>l,PI:()=>h,VM:()=>u,c:()=>o,k3:()=>i,kl:()=>s,t9:()=>c,xf:()=>f});var a=t(6524),n=t(9165);function s(r){return n.kl((0,a.wZ)(),r)}function i(r){return n.k3((0,a.wZ)(),r)}function o(r,e){if(r instanceof n.Kr){if(null!==e&&e!=r.constructor.className)throw new Error("expected '"+e+"', got '"+r.constructor.className+"'");return r.space===(0,a.wZ)()?null===r.owner?r.view():r:r.clone((0,a.wZ)())}let t=null;return t=null!==e?n.US((0,a.wZ)(),r,n.Fl(e)):n.US((0,a.wZ)(),r),t}function l(r){return null==r?(0,a._d)():r}function c(r){if("undefined"!=typeof r&&null!=r)return r.free()}function u(r,e){let t=new Float64Array(r),a=new Float64Array(r);for(var n=0;n<r;n++)t[n]=e[2*n],a[n]=e[2*n+1];return{x:t,y:a}}function f(r,e){if("view"===e){if(r.buffer!==(0,a.r)())throw new Error('cannot use copy = "view" for non-Wasm TypedArrays');let e=r.constructor.name.replace("Array","WasmArray");return n.Nf((0,a.wZ)(),r.length,r.byteOffset,n.Fl(e))}return e?r.slice():r}function h(r){for(const e of Object.keys(r))throw new Error("unknown option '"+e+"'")}},7990:(r,e,t)=>{t.d(e,{Lc:()=>i.Lc,MH:()=>a.MH,k3:()=>n.k3,kl:()=>n.kl,n_:()=>a.n_,ny:()=>s.ny,t9:()=>n.t9});var a=t(6524),n=t(7031),s=(t(7537),t(902),t(2680),t(9274),t(7241),t(34),t(209),t(8960),t(288),t(3911),t(6077),t(5784),t(5090),t(6876),t(3378),t(6273),t(6617),t(3261),t(6218),t(886),t(988),t(6497),t(3988),t(5025),t(5936),t(5581),t(7919),t(4718)),i=t(3315);t(2668),t(9673),t(614),t(6869),t(5503),t(1602),t(9841),t(3607),t(4985),t(7579),t(2888),t(9723),t(3128),t(7778),t(9846),t(9300)},8301:(r,e,t)=>{t.d(e,{k3:()=>o,kl:()=>i});var a=t(4169),n=t(1952);function s(r,e,t){return(0,a.CN)(r,e,t)}function i(r,e){return s(r,e,n.Os)}function o(r,e){return s(r,e,n.WI)}},9165:(r,e,t)=>{t.d(e,{Fl:()=>n.Fl,Kr:()=>a.K,Nf:()=>o.Nf,US:()=>i.US,k3:()=>s.k3,kl:()=>s.kl,kz:()=>l.kz});var a=t(536),n=t(1952),s=t(8301),i=t(566),o=t(1964),l=(t(2114),t(219),t(4169))}},e={};function t(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return r[a](s,s.exports,t),s.exports}t.m=r,t.x=()=>{var r=t.O(void 0,[691,450],()=>t(5814));return r=t.O(r)},(()=>{var r=[];t.O=(e,a,n,s)=>{if(!a){var i=1/0;for(u=0;u<r.length;u++){for(var[a,n,s]=r[u],o=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(t.O).every(r=>t.O[r](a[l]))?a.splice(l--,1):(o=!1,s<i&&(i=s));if(o){r.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=r.length;u>0&&r[u-1][2]>s;u--)r[u]=r[u-1];r[u]=[a,n,s]}})(),t.d=(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},t.f={},t.e=r=>Promise.all(Object.keys(t.f).reduce((e,a)=>(t.f[a](r,e),e),[])),t.u=r=>"static/js/"+r+"."+{120:"568b3440",450:"4145df50",691:"9a33b0ff"}[r]+".chunk.js",t.miniCssF=r=>{},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),t.p="/kana/",(()=>{t.b=self.location+"/../../../";var r={814:1};t.f.i=(e,a)=>{r[e]||importScripts(t.p+t.u(e))};var e=self.webpackChunkkana=self.webpackChunkkana||[],a=e.push.bind(e);e.push=e=>{var[n,s,i]=e;for(var o in s)t.o(s,o)&&(t.m[o]=s[o]);for(i&&i(t);n.length;)r[n.pop()]=1;a(e)}})(),(()=>{var r=t.x;t.x=()=>Promise.all([t.e(691),t.e(450)]).then(r)})();t.x()})();
//# sourceMappingURL=814.bc231a0d.chunk.js.map